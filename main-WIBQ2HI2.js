import{A as Ak,B as Dk,C as Rk,D as Vu,E as Ne,F as Co,G as Yi,H as Xl,I as ya,J as Bu,K as Lp,L as Zl,M as Vp,N as Rn,O as gi,P as W0,Q as ju,a as it,b as Yl,c as Mp,d as yk,e as wk,f as Pp,g as Ql,h as Op,i as Fu,j as U0,k as xk,l as Vr,m as z0,n as Np,o as Ik,p as Ek,q as Fp,r as Dn,s as Ck,t as Tk,u as Br,v as ba,w as $0,x as Lu,y as H0,z as Sk}from"./chunk-5YYEEJRP.js";import{$ as ve,$a as x,$b as xo,$c as Yt,A as S0,Aa as wo,Ab as Q1,Ac as ck,B as wn,Ba as fn,Bb as D,Bc as _a,C as me,Ca as ma,Cb as R,Cc as dk,D as A0,Da as gt,Db as ht,Dc as uk,E as ss,Ea as qt,Eb as Fr,Ec as xt,F as as,Fa as Du,Fb as Lr,Fc as hk,G as vp,Ga as O1,Gb as pi,Gc as Nu,H as D0,Ha as Bl,Hb as Pe,Hc as fk,I as $e,Ia as N1,Ib as $l,Ic as mk,J as S1,Ja as ri,Jb as X1,Jc as va,K as R0,Ka as oi,Kb as Ct,Kc as j0,L as ua,La as Ru,Lb as Z1,Lc as ql,M as ha,Ma as yp,Mb as wt,Mc as Gl,N as Nr,Na as jl,Nb as Te,Nc as pk,O as k0,Oa as Ul,Ob as Mt,Oc as Kl,P as A1,Pa as F1,Pb as Ie,Pc as kp,Q as Tu,Qa as L1,Qb as be,Qc as Ki,R as Nl,Ra as V1,Rb as It,Rc as gk,S as D1,Sa as B1,Sb as Et,Sc as _k,T as Fl,Ta as j1,Tb as Gi,Tc as Eo,U as bp,Ua as U1,Ub as Z,Uc as vk,V as qn,Va as z1,Vb as Ke,Vc as bk,W as ke,Wa as Si,Wb as An,X as M0,Xa as cs,Xb as pe,Y as Lt,Ya as $1,Yb as zt,Yc as Bn,Z as R1,Za as ku,Zb as Ip,Zc as tn,_ as Me,_a as j,_b as J1,a as un,aa as ls,ab as zl,ac as Hl,ad as Ye,b as E1,ba as Su,bb as Sn,bc as Ep,bd as Uu,c as Wn,ca as q,cb as H1,cc as tk,cd as We,d as C0,da as ot,db as Mu,dc as Wl,dd as Bp,e as Eu,ea as k1,eb as wp,ec as ek,ed as jp,f as at,fa as H,fb as Pu,fc as Cp,g as Je,ga as P0,gb as xp,gc as nk,h as fp,ha as T,hb as Q,hc as Tp,i as mp,ia as W,ib as W1,ic as Sp,j as pp,ja as He,jb as Vn,jc as L0,k as C1,ka as fa,kb as O0,kc as Ap,l as Pr,la as Au,lb as oe,lc as V0,m as os,ma as F,mb as he,mc as Dp,n as ca,na as ft,nb as q1,nc as ds,o as Re,oa as st,ob as N0,oc as ik,p as tt,pa as X,pb as F0,pc as Rp,q as da,qa as Ll,qb as vt,qc as rk,r as Ol,ra as M1,rb as Zt,rc as B0,s as T1,sa as Vl,sb as pt,sc as Oe,t as dt,ta as bo,tb as Ou,tc as ga,u as Or,ua as hn,ub as Bt,uc as ok,v as Ti,va as ne,vb as pa,vc as sk,w as T0,wa as ie,wb as G1,wc as ak,x as gp,xa as yo,xb as Nt,xc as Tt,y as Cu,ya as P1,yb as K1,yc as Io,z as _p,za as Tn,zb as Y1,zc as lk}from"./chunk-VT3NMNQU.js";import{a as G,b as xe,c as x1,d as H3,f as I1,g as E0,h as N}from"./chunk-EZK5NW7T.js";var ES=H3((Vd,Qf)=>{"use strict";(function(){var e,t="4.17.21",i=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",r="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,d="__lodash_placeholder__",u=1,f=2,p=4,_=1,y=2,S=1,A=2,M=4,K=8,ut=16,Y=32,Rt=64,kt=128,Kt=256,Ue=512,Vi=30,ny="...",bm=800,Zj=16,HA=1,Jj=2,tU=3,Js=1/0,Ko=9007199254740991,eU=17976931348623157e292,ym=NaN,Dr=4294967295,nU=Dr-1,iU=Dr>>>1,rU=[["ary",kt],["bind",S],["bindKey",A],["curry",K],["curryRight",ut],["flip",Ue],["partial",Y],["partialRight",Rt],["rearg",Kt]],bl="[object Arguments]",wm="[object Array]",oU="[object AsyncFunction]",nu="[object Boolean]",iu="[object Date]",sU="[object DOMException]",xm="[object Error]",Im="[object Function]",WA="[object GeneratorFunction]",ur="[object Map]",ru="[object Number]",aU="[object Null]",lo="[object Object]",qA="[object Promise]",lU="[object Proxy]",ou="[object RegExp]",hr="[object Set]",su="[object String]",Em="[object Symbol]",cU="[object Undefined]",au="[object WeakMap]",dU="[object WeakSet]",lu="[object ArrayBuffer]",yl="[object DataView]",iy="[object Float32Array]",ry="[object Float64Array]",oy="[object Int8Array]",sy="[object Int16Array]",ay="[object Int32Array]",ly="[object Uint8Array]",cy="[object Uint8ClampedArray]",dy="[object Uint16Array]",uy="[object Uint32Array]",uU=/\b__p \+= '';/g,hU=/\b(__p \+=) '' \+/g,fU=/(__e\(.*?\)|\b__t\)) \+\n'';/g,GA=/&(?:amp|lt|gt|quot|#39);/g,KA=/[&<>"']/g,mU=RegExp(GA.source),pU=RegExp(KA.source),gU=/<%-([\s\S]+?)%>/g,_U=/<%([\s\S]+?)%>/g,YA=/<%=([\s\S]+?)%>/g,vU=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bU=/^\w*$/,yU=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hy=/[\\^$.*+?()[\]{}|]/g,wU=RegExp(hy.source),fy=/^\s+/,xU=/\s/,IU=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,EU=/\{\n\/\* \[wrapped with (.+)\] \*/,CU=/,? & /,TU=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,SU=/[()=,{}\[\]\/\s]/,AU=/\\(\\)?/g,DU=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,QA=/\w*$/,RU=/^[-+]0x[0-9a-f]+$/i,kU=/^0b[01]+$/i,MU=/^\[object .+?Constructor\]$/,PU=/^0o[0-7]+$/i,OU=/^(?:0|[1-9]\d*)$/,NU=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Cm=/($^)/,FU=/['\n\r\u2028\u2029\\]/g,Tm="\\ud800-\\udfff",LU="\\u0300-\\u036f",VU="\\ufe20-\\ufe2f",BU="\\u20d0-\\u20ff",XA=LU+VU+BU,ZA="\\u2700-\\u27bf",JA="a-z\\xdf-\\xf6\\xf8-\\xff",jU="\\xac\\xb1\\xd7\\xf7",UU="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",zU="\\u2000-\\u206f",$U=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tD="A-Z\\xc0-\\xd6\\xd8-\\xde",eD="\\ufe0e\\ufe0f",nD=jU+UU+zU+$U,my="['\u2019]",HU="["+Tm+"]",iD="["+nD+"]",Sm="["+XA+"]",rD="\\d+",WU="["+ZA+"]",oD="["+JA+"]",sD="[^"+Tm+nD+rD+ZA+JA+tD+"]",py="\\ud83c[\\udffb-\\udfff]",qU="(?:"+Sm+"|"+py+")",aD="[^"+Tm+"]",gy="(?:\\ud83c[\\udde6-\\uddff]){2}",_y="[\\ud800-\\udbff][\\udc00-\\udfff]",wl="["+tD+"]",lD="\\u200d",cD="(?:"+oD+"|"+sD+")",GU="(?:"+wl+"|"+sD+")",dD="(?:"+my+"(?:d|ll|m|re|s|t|ve))?",uD="(?:"+my+"(?:D|LL|M|RE|S|T|VE))?",hD=qU+"?",fD="["+eD+"]?",KU="(?:"+lD+"(?:"+[aD,gy,_y].join("|")+")"+fD+hD+")*",YU="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",QU="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",mD=fD+hD+KU,XU="(?:"+[WU,gy,_y].join("|")+")"+mD,ZU="(?:"+[aD+Sm+"?",Sm,gy,_y,HU].join("|")+")",JU=RegExp(my,"g"),tz=RegExp(Sm,"g"),vy=RegExp(py+"(?="+py+")|"+ZU+mD,"g"),ez=RegExp([wl+"?"+oD+"+"+dD+"(?="+[iD,wl,"$"].join("|")+")",GU+"+"+uD+"(?="+[iD,wl+cD,"$"].join("|")+")",wl+"?"+cD+"+"+dD,wl+"+"+uD,QU,YU,rD,XU].join("|"),"g"),nz=RegExp("["+lD+Tm+XA+eD+"]"),iz=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rz=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],oz=-1,Le={};Le[iy]=Le[ry]=Le[oy]=Le[sy]=Le[ay]=Le[ly]=Le[cy]=Le[dy]=Le[uy]=!0,Le[bl]=Le[wm]=Le[lu]=Le[nu]=Le[yl]=Le[iu]=Le[xm]=Le[Im]=Le[ur]=Le[ru]=Le[lo]=Le[ou]=Le[hr]=Le[su]=Le[au]=!1;var De={};De[bl]=De[wm]=De[lu]=De[yl]=De[nu]=De[iu]=De[iy]=De[ry]=De[oy]=De[sy]=De[ay]=De[ur]=De[ru]=De[lo]=De[ou]=De[hr]=De[su]=De[Em]=De[ly]=De[cy]=De[dy]=De[uy]=!0,De[xm]=De[Im]=De[au]=!1;var sz={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},az={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},lz={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},cz={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},dz=parseFloat,uz=parseInt,pD=typeof global=="object"&&global&&global.Object===Object&&global,hz=typeof self=="object"&&self&&self.Object===Object&&self,En=pD||hz||Function("return this")(),by=typeof Vd=="object"&&Vd&&!Vd.nodeType&&Vd,ta=by&&typeof Qf=="object"&&Qf&&!Qf.nodeType&&Qf,gD=ta&&ta.exports===by,yy=gD&&pD.process,Bi=function(){try{var E=ta&&ta.require&&ta.require("util").types;return E||yy&&yy.binding&&yy.binding("util")}catch{}}(),_D=Bi&&Bi.isArrayBuffer,vD=Bi&&Bi.isDate,bD=Bi&&Bi.isMap,yD=Bi&&Bi.isRegExp,wD=Bi&&Bi.isSet,xD=Bi&&Bi.isTypedArray;function yi(E,L,P){switch(P.length){case 0:return E.call(L);case 1:return E.call(L,P[0]);case 2:return E.call(L,P[0],P[1]);case 3:return E.call(L,P[0],P[1],P[2])}return E.apply(L,P)}function fz(E,L,P,ct){for(var Ot=-1,ue=E==null?0:E.length;++Ot<ue;){var bn=E[Ot];L(ct,bn,P(bn),E)}return ct}function ji(E,L){for(var P=-1,ct=E==null?0:E.length;++P<ct&&L(E[P],P,E)!==!1;);return E}function mz(E,L){for(var P=E==null?0:E.length;P--&&L(E[P],P,E)!==!1;);return E}function ID(E,L){for(var P=-1,ct=E==null?0:E.length;++P<ct;)if(!L(E[P],P,E))return!1;return!0}function Yo(E,L){for(var P=-1,ct=E==null?0:E.length,Ot=0,ue=[];++P<ct;){var bn=E[P];L(bn,P,E)&&(ue[Ot++]=bn)}return ue}function Am(E,L){var P=E==null?0:E.length;return!!P&&xl(E,L,0)>-1}function wy(E,L,P){for(var ct=-1,Ot=E==null?0:E.length;++ct<Ot;)if(P(L,E[ct]))return!0;return!1}function ze(E,L){for(var P=-1,ct=E==null?0:E.length,Ot=Array(ct);++P<ct;)Ot[P]=L(E[P],P,E);return Ot}function Qo(E,L){for(var P=-1,ct=L.length,Ot=E.length;++P<ct;)E[Ot+P]=L[P];return E}function xy(E,L,P,ct){var Ot=-1,ue=E==null?0:E.length;for(ct&&ue&&(P=E[++Ot]);++Ot<ue;)P=L(P,E[Ot],Ot,E);return P}function pz(E,L,P,ct){var Ot=E==null?0:E.length;for(ct&&Ot&&(P=E[--Ot]);Ot--;)P=L(P,E[Ot],Ot,E);return P}function Iy(E,L){for(var P=-1,ct=E==null?0:E.length;++P<ct;)if(L(E[P],P,E))return!0;return!1}var gz=Ey("length");function _z(E){return E.split("")}function vz(E){return E.match(TU)||[]}function ED(E,L,P){var ct;return P(E,function(Ot,ue,bn){if(L(Ot,ue,bn))return ct=ue,!1}),ct}function Dm(E,L,P,ct){for(var Ot=E.length,ue=P+(ct?1:-1);ct?ue--:++ue<Ot;)if(L(E[ue],ue,E))return ue;return-1}function xl(E,L,P){return L===L?Rz(E,L,P):Dm(E,CD,P)}function bz(E,L,P,ct){for(var Ot=P-1,ue=E.length;++Ot<ue;)if(ct(E[Ot],L))return Ot;return-1}function CD(E){return E!==E}function TD(E,L){var P=E==null?0:E.length;return P?Ty(E,L)/P:ym}function Ey(E){return function(L){return L==null?e:L[E]}}function Cy(E){return function(L){return E==null?e:E[L]}}function SD(E,L,P,ct,Ot){return Ot(E,function(ue,bn,Ce){P=ct?(ct=!1,ue):L(P,ue,bn,Ce)}),P}function yz(E,L){var P=E.length;for(E.sort(L);P--;)E[P]=E[P].value;return E}function Ty(E,L){for(var P,ct=-1,Ot=E.length;++ct<Ot;){var ue=L(E[ct]);ue!==e&&(P=P===e?ue:P+ue)}return P}function Sy(E,L){for(var P=-1,ct=Array(E);++P<E;)ct[P]=L(P);return ct}function wz(E,L){return ze(L,function(P){return[P,E[P]]})}function AD(E){return E&&E.slice(0,MD(E)+1).replace(fy,"")}function wi(E){return function(L){return E(L)}}function Ay(E,L){return ze(L,function(P){return E[P]})}function cu(E,L){return E.has(L)}function DD(E,L){for(var P=-1,ct=E.length;++P<ct&&xl(L,E[P],0)>-1;);return P}function RD(E,L){for(var P=E.length;P--&&xl(L,E[P],0)>-1;);return P}function xz(E,L){for(var P=E.length,ct=0;P--;)E[P]===L&&++ct;return ct}var Iz=Cy(sz),Ez=Cy(az);function Cz(E){return"\\"+cz[E]}function Tz(E,L){return E==null?e:E[L]}function Il(E){return nz.test(E)}function Sz(E){return iz.test(E)}function Az(E){for(var L,P=[];!(L=E.next()).done;)P.push(L.value);return P}function Dy(E){var L=-1,P=Array(E.size);return E.forEach(function(ct,Ot){P[++L]=[Ot,ct]}),P}function kD(E,L){return function(P){return E(L(P))}}function Xo(E,L){for(var P=-1,ct=E.length,Ot=0,ue=[];++P<ct;){var bn=E[P];(bn===L||bn===d)&&(E[P]=d,ue[Ot++]=P)}return ue}function Rm(E){var L=-1,P=Array(E.size);return E.forEach(function(ct){P[++L]=ct}),P}function Dz(E){var L=-1,P=Array(E.size);return E.forEach(function(ct){P[++L]=[ct,ct]}),P}function Rz(E,L,P){for(var ct=P-1,Ot=E.length;++ct<Ot;)if(E[ct]===L)return ct;return-1}function kz(E,L,P){for(var ct=P+1;ct--;)if(E[ct]===L)return ct;return ct}function El(E){return Il(E)?Pz(E):gz(E)}function fr(E){return Il(E)?Oz(E):_z(E)}function MD(E){for(var L=E.length;L--&&xU.test(E.charAt(L)););return L}var Mz=Cy(lz);function Pz(E){for(var L=vy.lastIndex=0;vy.test(E);)++L;return L}function Oz(E){return E.match(vy)||[]}function Nz(E){return E.match(ez)||[]}var Fz=function E(L){L=L==null?En:Zo.defaults(En.Object(),L,Zo.pick(En,rz));var P=L.Array,ct=L.Date,Ot=L.Error,ue=L.Function,bn=L.Math,Ce=L.Object,Ry=L.RegExp,Lz=L.String,Ui=L.TypeError,km=P.prototype,Vz=ue.prototype,Cl=Ce.prototype,Mm=L["__core-js_shared__"],Pm=Vz.toString,_e=Cl.hasOwnProperty,Bz=0,PD=function(){var a=/[^.]+$/.exec(Mm&&Mm.keys&&Mm.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Om=Cl.toString,jz=Pm.call(Ce),Uz=En._,zz=Ry("^"+Pm.call(_e).replace(hy,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Nm=gD?L.Buffer:e,Jo=L.Symbol,Fm=L.Uint8Array,OD=Nm?Nm.allocUnsafe:e,Lm=kD(Ce.getPrototypeOf,Ce),ND=Ce.create,FD=Cl.propertyIsEnumerable,Vm=km.splice,LD=Jo?Jo.isConcatSpreadable:e,du=Jo?Jo.iterator:e,ea=Jo?Jo.toStringTag:e,Bm=function(){try{var a=sa(Ce,"defineProperty");return a({},"",{}),a}catch{}}(),$z=L.clearTimeout!==En.clearTimeout&&L.clearTimeout,Hz=ct&&ct.now!==En.Date.now&&ct.now,Wz=L.setTimeout!==En.setTimeout&&L.setTimeout,jm=bn.ceil,Um=bn.floor,ky=Ce.getOwnPropertySymbols,qz=Nm?Nm.isBuffer:e,VD=L.isFinite,Gz=km.join,Kz=kD(Ce.keys,Ce),yn=bn.max,$n=bn.min,Yz=ct.now,Qz=L.parseInt,BD=bn.random,Xz=km.reverse,My=sa(L,"DataView"),uu=sa(L,"Map"),Py=sa(L,"Promise"),Tl=sa(L,"Set"),hu=sa(L,"WeakMap"),fu=sa(Ce,"create"),zm=hu&&new hu,Sl={},Zz=aa(My),Jz=aa(uu),t4=aa(Py),e4=aa(Tl),n4=aa(hu),$m=Jo?Jo.prototype:e,mu=$m?$m.valueOf:e,jD=$m?$m.toString:e;function v(a){if(Ze(a)&&!Ft(a)&&!(a instanceof Xt)){if(a instanceof zi)return a;if(_e.call(a,"__wrapped__"))return UR(a)}return new zi(a)}var Al=function(){function a(){}return function(c){if(!Ge(c))return{};if(ND)return ND(c);a.prototype=c;var h=new a;return a.prototype=e,h}}();function Hm(){}function zi(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=e}v.templateSettings={escape:gU,evaluate:_U,interpolate:YA,variable:"",imports:{_:v}},v.prototype=Hm.prototype,v.prototype.constructor=v,zi.prototype=Al(Hm.prototype),zi.prototype.constructor=zi;function Xt(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Dr,this.__views__=[]}function i4(){var a=new Xt(this.__wrapped__);return a.__actions__=ui(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=ui(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=ui(this.__views__),a}function r4(){if(this.__filtered__){var a=new Xt(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function o4(){var a=this.__wrapped__.value(),c=this.__dir__,h=Ft(a),m=c<0,g=h?a.length:0,b=_$(0,g,this.__views__),w=b.start,I=b.end,C=I-w,V=m?I:w-1,B=this.__iteratees__,z=B.length,nt=0,mt=$n(C,this.__takeCount__);if(!h||!m&&g==C&&mt==C)return dR(a,this.__actions__);var At=[];t:for(;C--&&nt<mt;){V+=c;for(var Ht=-1,Dt=a[V];++Ht<z;){var Qt=B[Ht],ee=Qt.iteratee,Ei=Qt.type,ii=ee(Dt);if(Ei==Jj)Dt=ii;else if(!ii){if(Ei==HA)continue t;break t}}At[nt++]=Dt}return At}Xt.prototype=Al(Hm.prototype),Xt.prototype.constructor=Xt;function na(a){var c=-1,h=a==null?0:a.length;for(this.clear();++c<h;){var m=a[c];this.set(m[0],m[1])}}function s4(){this.__data__=fu?fu(null):{},this.size=0}function a4(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}function l4(a){var c=this.__data__;if(fu){var h=c[a];return h===s?e:h}return _e.call(c,a)?c[a]:e}function c4(a){var c=this.__data__;return fu?c[a]!==e:_e.call(c,a)}function d4(a,c){var h=this.__data__;return this.size+=this.has(a)?0:1,h[a]=fu&&c===e?s:c,this}na.prototype.clear=s4,na.prototype.delete=a4,na.prototype.get=l4,na.prototype.has=c4,na.prototype.set=d4;function co(a){var c=-1,h=a==null?0:a.length;for(this.clear();++c<h;){var m=a[c];this.set(m[0],m[1])}}function u4(){this.__data__=[],this.size=0}function h4(a){var c=this.__data__,h=Wm(c,a);if(h<0)return!1;var m=c.length-1;return h==m?c.pop():Vm.call(c,h,1),--this.size,!0}function f4(a){var c=this.__data__,h=Wm(c,a);return h<0?e:c[h][1]}function m4(a){return Wm(this.__data__,a)>-1}function p4(a,c){var h=this.__data__,m=Wm(h,a);return m<0?(++this.size,h.push([a,c])):h[m][1]=c,this}co.prototype.clear=u4,co.prototype.delete=h4,co.prototype.get=f4,co.prototype.has=m4,co.prototype.set=p4;function uo(a){var c=-1,h=a==null?0:a.length;for(this.clear();++c<h;){var m=a[c];this.set(m[0],m[1])}}function g4(){this.size=0,this.__data__={hash:new na,map:new(uu||co),string:new na}}function _4(a){var c=ip(this,a).delete(a);return this.size-=c?1:0,c}function v4(a){return ip(this,a).get(a)}function b4(a){return ip(this,a).has(a)}function y4(a,c){var h=ip(this,a),m=h.size;return h.set(a,c),this.size+=h.size==m?0:1,this}uo.prototype.clear=g4,uo.prototype.delete=_4,uo.prototype.get=v4,uo.prototype.has=b4,uo.prototype.set=y4;function ia(a){var c=-1,h=a==null?0:a.length;for(this.__data__=new uo;++c<h;)this.add(a[c])}function w4(a){return this.__data__.set(a,s),this}function x4(a){return this.__data__.has(a)}ia.prototype.add=ia.prototype.push=w4,ia.prototype.has=x4;function mr(a){var c=this.__data__=new co(a);this.size=c.size}function I4(){this.__data__=new co,this.size=0}function E4(a){var c=this.__data__,h=c.delete(a);return this.size=c.size,h}function C4(a){return this.__data__.get(a)}function T4(a){return this.__data__.has(a)}function S4(a,c){var h=this.__data__;if(h instanceof co){var m=h.__data__;if(!uu||m.length<i-1)return m.push([a,c]),this.size=++h.size,this;h=this.__data__=new uo(m)}return h.set(a,c),this.size=h.size,this}mr.prototype.clear=I4,mr.prototype.delete=E4,mr.prototype.get=C4,mr.prototype.has=T4,mr.prototype.set=S4;function UD(a,c){var h=Ft(a),m=!h&&la(a),g=!h&&!m&&rs(a),b=!h&&!m&&!g&&Ml(a),w=h||m||g||b,I=w?Sy(a.length,Lz):[],C=I.length;for(var V in a)(c||_e.call(a,V))&&!(w&&(V=="length"||g&&(V=="offset"||V=="parent")||b&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||po(V,C)))&&I.push(V);return I}function zD(a){var c=a.length;return c?a[Hy(0,c-1)]:e}function A4(a,c){return rp(ui(a),ra(c,0,a.length))}function D4(a){return rp(ui(a))}function Oy(a,c,h){(h!==e&&!pr(a[c],h)||h===e&&!(c in a))&&ho(a,c,h)}function pu(a,c,h){var m=a[c];(!(_e.call(a,c)&&pr(m,h))||h===e&&!(c in a))&&ho(a,c,h)}function Wm(a,c){for(var h=a.length;h--;)if(pr(a[h][0],c))return h;return-1}function R4(a,c,h,m){return ts(a,function(g,b,w){c(m,g,h(g),w)}),m}function $D(a,c){return a&&kr(c,Cn(c),a)}function k4(a,c){return a&&kr(c,fi(c),a)}function ho(a,c,h){c=="__proto__"&&Bm?Bm(a,c,{configurable:!0,enumerable:!0,value:h,writable:!0}):a[c]=h}function Ny(a,c){for(var h=-1,m=c.length,g=P(m),b=a==null;++h<m;)g[h]=b?e:p0(a,c[h]);return g}function ra(a,c,h){return a===a&&(h!==e&&(a=a<=h?a:h),c!==e&&(a=a>=c?a:c)),a}function $i(a,c,h,m,g,b){var w,I=c&u,C=c&f,V=c&p;if(h&&(w=g?h(a,m,g,b):h(a)),w!==e)return w;if(!Ge(a))return a;var B=Ft(a);if(B){if(w=b$(a),!I)return ui(a,w)}else{var z=Hn(a),nt=z==Im||z==WA;if(rs(a))return fR(a,I);if(z==lo||z==bl||nt&&!g){if(w=C||nt?{}:MR(a),!I)return C?l$(a,k4(w,a)):a$(a,$D(w,a))}else{if(!De[z])return g?a:{};w=y$(a,z,I)}}b||(b=new mr);var mt=b.get(a);if(mt)return mt;b.set(a,w),a1(a)?a.forEach(function(Dt){w.add($i(Dt,c,h,Dt,a,b))}):o1(a)&&a.forEach(function(Dt,Qt){w.set(Qt,$i(Dt,c,h,Qt,a,b))});var At=V?C?e0:t0:C?fi:Cn,Ht=B?e:At(a);return ji(Ht||a,function(Dt,Qt){Ht&&(Qt=Dt,Dt=a[Qt]),pu(w,Qt,$i(Dt,c,h,Qt,a,b))}),w}function M4(a){var c=Cn(a);return function(h){return HD(h,a,c)}}function HD(a,c,h){var m=h.length;if(a==null)return!m;for(a=Ce(a);m--;){var g=h[m],b=c[g],w=a[g];if(w===e&&!(g in a)||!b(w))return!1}return!0}function WD(a,c,h){if(typeof a!="function")throw new Ui(r);return xu(function(){a.apply(e,h)},c)}function gu(a,c,h,m){var g=-1,b=Am,w=!0,I=a.length,C=[],V=c.length;if(!I)return C;h&&(c=ze(c,wi(h))),m?(b=wy,w=!1):c.length>=i&&(b=cu,w=!1,c=new ia(c));t:for(;++g<I;){var B=a[g],z=h==null?B:h(B);if(B=m||B!==0?B:0,w&&z===z){for(var nt=V;nt--;)if(c[nt]===z)continue t;C.push(B)}else b(c,z,m)||C.push(B)}return C}var ts=vR(Rr),qD=vR(Ly,!0);function P4(a,c){var h=!0;return ts(a,function(m,g,b){return h=!!c(m,g,b),h}),h}function qm(a,c,h){for(var m=-1,g=a.length;++m<g;){var b=a[m],w=c(b);if(w!=null&&(I===e?w===w&&!Ii(w):h(w,I)))var I=w,C=b}return C}function O4(a,c,h,m){var g=a.length;for(h=Ut(h),h<0&&(h=-h>g?0:g+h),m=m===e||m>g?g:Ut(m),m<0&&(m+=g),m=h>m?0:c1(m);h<m;)a[h++]=c;return a}function GD(a,c){var h=[];return ts(a,function(m,g,b){c(m,g,b)&&h.push(m)}),h}function Ln(a,c,h,m,g){var b=-1,w=a.length;for(h||(h=x$),g||(g=[]);++b<w;){var I=a[b];c>0&&h(I)?c>1?Ln(I,c-1,h,m,g):Qo(g,I):m||(g[g.length]=I)}return g}var Fy=bR(),KD=bR(!0);function Rr(a,c){return a&&Fy(a,c,Cn)}function Ly(a,c){return a&&KD(a,c,Cn)}function Gm(a,c){return Yo(c,function(h){return go(a[h])})}function oa(a,c){c=ns(c,a);for(var h=0,m=c.length;a!=null&&h<m;)a=a[Mr(c[h++])];return h&&h==m?a:e}function YD(a,c,h){var m=c(a);return Ft(a)?m:Qo(m,h(a))}function ei(a){return a==null?a===e?cU:aU:ea&&ea in Ce(a)?g$(a):D$(a)}function Vy(a,c){return a>c}function N4(a,c){return a!=null&&_e.call(a,c)}function F4(a,c){return a!=null&&c in Ce(a)}function L4(a,c,h){return a>=$n(c,h)&&a<yn(c,h)}function By(a,c,h){for(var m=h?wy:Am,g=a[0].length,b=a.length,w=b,I=P(b),C=1/0,V=[];w--;){var B=a[w];w&&c&&(B=ze(B,wi(c))),C=$n(B.length,C),I[w]=!h&&(c||g>=120&&B.length>=120)?new ia(w&&B):e}B=a[0];var z=-1,nt=I[0];t:for(;++z<g&&V.length<C;){var mt=B[z],At=c?c(mt):mt;if(mt=h||mt!==0?mt:0,!(nt?cu(nt,At):m(V,At,h))){for(w=b;--w;){var Ht=I[w];if(!(Ht?cu(Ht,At):m(a[w],At,h)))continue t}nt&&nt.push(At),V.push(mt)}}return V}function V4(a,c,h,m){return Rr(a,function(g,b,w){c(m,h(g),b,w)}),m}function _u(a,c,h){c=ns(c,a),a=FR(a,c);var m=a==null?a:a[Mr(Wi(c))];return m==null?e:yi(m,a,h)}function QD(a){return Ze(a)&&ei(a)==bl}function B4(a){return Ze(a)&&ei(a)==lu}function j4(a){return Ze(a)&&ei(a)==iu}function vu(a,c,h,m,g){return a===c?!0:a==null||c==null||!Ze(a)&&!Ze(c)?a!==a&&c!==c:U4(a,c,h,m,vu,g)}function U4(a,c,h,m,g,b){var w=Ft(a),I=Ft(c),C=w?wm:Hn(a),V=I?wm:Hn(c);C=C==bl?lo:C,V=V==bl?lo:V;var B=C==lo,z=V==lo,nt=C==V;if(nt&&rs(a)){if(!rs(c))return!1;w=!0,B=!1}if(nt&&!B)return b||(b=new mr),w||Ml(a)?DR(a,c,h,m,g,b):m$(a,c,C,h,m,g,b);if(!(h&_)){var mt=B&&_e.call(a,"__wrapped__"),At=z&&_e.call(c,"__wrapped__");if(mt||At){var Ht=mt?a.value():a,Dt=At?c.value():c;return b||(b=new mr),g(Ht,Dt,h,m,b)}}return nt?(b||(b=new mr),p$(a,c,h,m,g,b)):!1}function z4(a){return Ze(a)&&Hn(a)==ur}function jy(a,c,h,m){var g=h.length,b=g,w=!m;if(a==null)return!b;for(a=Ce(a);g--;){var I=h[g];if(w&&I[2]?I[1]!==a[I[0]]:!(I[0]in a))return!1}for(;++g<b;){I=h[g];var C=I[0],V=a[C],B=I[1];if(w&&I[2]){if(V===e&&!(C in a))return!1}else{var z=new mr;if(m)var nt=m(V,B,C,a,c,z);if(!(nt===e?vu(B,V,_|y,m,z):nt))return!1}}return!0}function XD(a){if(!Ge(a)||E$(a))return!1;var c=go(a)?zz:MU;return c.test(aa(a))}function $4(a){return Ze(a)&&ei(a)==ou}function H4(a){return Ze(a)&&Hn(a)==hr}function W4(a){return Ze(a)&&dp(a.length)&&!!Le[ei(a)]}function ZD(a){return typeof a=="function"?a:a==null?mi:typeof a=="object"?Ft(a)?eR(a[0],a[1]):tR(a):y1(a)}function Uy(a){if(!wu(a))return Kz(a);var c=[];for(var h in Ce(a))_e.call(a,h)&&h!="constructor"&&c.push(h);return c}function q4(a){if(!Ge(a))return A$(a);var c=wu(a),h=[];for(var m in a)m=="constructor"&&(c||!_e.call(a,m))||h.push(m);return h}function zy(a,c){return a<c}function JD(a,c){var h=-1,m=hi(a)?P(a.length):[];return ts(a,function(g,b,w){m[++h]=c(g,b,w)}),m}function tR(a){var c=i0(a);return c.length==1&&c[0][2]?OR(c[0][0],c[0][1]):function(h){return h===a||jy(h,a,c)}}function eR(a,c){return o0(a)&&PR(c)?OR(Mr(a),c):function(h){var m=p0(h,a);return m===e&&m===c?g0(h,a):vu(c,m,_|y)}}function Km(a,c,h,m,g){a!==c&&Fy(c,function(b,w){if(g||(g=new mr),Ge(b))G4(a,c,w,h,Km,m,g);else{var I=m?m(a0(a,w),b,w+"",a,c,g):e;I===e&&(I=b),Oy(a,w,I)}},fi)}function G4(a,c,h,m,g,b,w){var I=a0(a,h),C=a0(c,h),V=w.get(C);if(V){Oy(a,h,V);return}var B=b?b(I,C,h+"",a,c,w):e,z=B===e;if(z){var nt=Ft(C),mt=!nt&&rs(C),At=!nt&&!mt&&Ml(C);B=C,nt||mt||At?Ft(I)?B=I:on(I)?B=ui(I):mt?(z=!1,B=fR(C,!0)):At?(z=!1,B=mR(C,!0)):B=[]:Iu(C)||la(C)?(B=I,la(I)?B=d1(I):(!Ge(I)||go(I))&&(B=MR(C))):z=!1}z&&(w.set(C,B),g(B,C,m,b,w),w.delete(C)),Oy(a,h,B)}function nR(a,c){var h=a.length;if(h)return c+=c<0?h:0,po(c,h)?a[c]:e}function iR(a,c,h){c.length?c=ze(c,function(b){return Ft(b)?function(w){return oa(w,b.length===1?b[0]:b)}:b}):c=[mi];var m=-1;c=ze(c,wi(St()));var g=JD(a,function(b,w,I){var C=ze(c,function(V){return V(b)});return{criteria:C,index:++m,value:b}});return yz(g,function(b,w){return s$(b,w,h)})}function K4(a,c){return rR(a,c,function(h,m){return g0(a,m)})}function rR(a,c,h){for(var m=-1,g=c.length,b={};++m<g;){var w=c[m],I=oa(a,w);h(I,w)&&bu(b,ns(w,a),I)}return b}function Y4(a){return function(c){return oa(c,a)}}function $y(a,c,h,m){var g=m?bz:xl,b=-1,w=c.length,I=a;for(a===c&&(c=ui(c)),h&&(I=ze(a,wi(h)));++b<w;)for(var C=0,V=c[b],B=h?h(V):V;(C=g(I,B,C,m))>-1;)I!==a&&Vm.call(I,C,1),Vm.call(a,C,1);return a}function oR(a,c){for(var h=a?c.length:0,m=h-1;h--;){var g=c[h];if(h==m||g!==b){var b=g;po(g)?Vm.call(a,g,1):Gy(a,g)}}return a}function Hy(a,c){return a+Um(BD()*(c-a+1))}function Q4(a,c,h,m){for(var g=-1,b=yn(jm((c-a)/(h||1)),0),w=P(b);b--;)w[m?b:++g]=a,a+=h;return w}function Wy(a,c){var h="";if(!a||c<1||c>Ko)return h;do c%2&&(h+=a),c=Um(c/2),c&&(a+=a);while(c);return h}function Wt(a,c){return l0(NR(a,c,mi),a+"")}function X4(a){return zD(Pl(a))}function Z4(a,c){var h=Pl(a);return rp(h,ra(c,0,h.length))}function bu(a,c,h,m){if(!Ge(a))return a;c=ns(c,a);for(var g=-1,b=c.length,w=b-1,I=a;I!=null&&++g<b;){var C=Mr(c[g]),V=h;if(C==="__proto__"||C==="constructor"||C==="prototype")return a;if(g!=w){var B=I[C];V=m?m(B,C,I):e,V===e&&(V=Ge(B)?B:po(c[g+1])?[]:{})}pu(I,C,V),I=I[C]}return a}var sR=zm?function(a,c){return zm.set(a,c),a}:mi,J4=Bm?function(a,c){return Bm(a,"toString",{configurable:!0,enumerable:!1,value:v0(c),writable:!0})}:mi;function t$(a){return rp(Pl(a))}function Hi(a,c,h){var m=-1,g=a.length;c<0&&(c=-c>g?0:g+c),h=h>g?g:h,h<0&&(h+=g),g=c>h?0:h-c>>>0,c>>>=0;for(var b=P(g);++m<g;)b[m]=a[m+c];return b}function e$(a,c){var h;return ts(a,function(m,g,b){return h=c(m,g,b),!h}),!!h}function Ym(a,c,h){var m=0,g=a==null?m:a.length;if(typeof c=="number"&&c===c&&g<=iU){for(;m<g;){var b=m+g>>>1,w=a[b];w!==null&&!Ii(w)&&(h?w<=c:w<c)?m=b+1:g=b}return g}return qy(a,c,mi,h)}function qy(a,c,h,m){var g=0,b=a==null?0:a.length;if(b===0)return 0;c=h(c);for(var w=c!==c,I=c===null,C=Ii(c),V=c===e;g<b;){var B=Um((g+b)/2),z=h(a[B]),nt=z!==e,mt=z===null,At=z===z,Ht=Ii(z);if(w)var Dt=m||At;else V?Dt=At&&(m||nt):I?Dt=At&&nt&&(m||!mt):C?Dt=At&&nt&&!mt&&(m||!Ht):mt||Ht?Dt=!1:Dt=m?z<=c:z<c;Dt?g=B+1:b=B}return $n(b,nU)}function aR(a,c){for(var h=-1,m=a.length,g=0,b=[];++h<m;){var w=a[h],I=c?c(w):w;if(!h||!pr(I,C)){var C=I;b[g++]=w===0?0:w}}return b}function lR(a){return typeof a=="number"?a:Ii(a)?ym:+a}function xi(a){if(typeof a=="string")return a;if(Ft(a))return ze(a,xi)+"";if(Ii(a))return jD?jD.call(a):"";var c=a+"";return c=="0"&&1/a==-Js?"-0":c}function es(a,c,h){var m=-1,g=Am,b=a.length,w=!0,I=[],C=I;if(h)w=!1,g=wy;else if(b>=i){var V=c?null:h$(a);if(V)return Rm(V);w=!1,g=cu,C=new ia}else C=c?[]:I;t:for(;++m<b;){var B=a[m],z=c?c(B):B;if(B=h||B!==0?B:0,w&&z===z){for(var nt=C.length;nt--;)if(C[nt]===z)continue t;c&&C.push(z),I.push(B)}else g(C,z,h)||(C!==I&&C.push(z),I.push(B))}return I}function Gy(a,c){return c=ns(c,a),a=FR(a,c),a==null||delete a[Mr(Wi(c))]}function cR(a,c,h,m){return bu(a,c,h(oa(a,c)),m)}function Qm(a,c,h,m){for(var g=a.length,b=m?g:-1;(m?b--:++b<g)&&c(a[b],b,a););return h?Hi(a,m?0:b,m?b+1:g):Hi(a,m?b+1:0,m?g:b)}function dR(a,c){var h=a;return h instanceof Xt&&(h=h.value()),xy(c,function(m,g){return g.func.apply(g.thisArg,Qo([m],g.args))},h)}function Ky(a,c,h){var m=a.length;if(m<2)return m?es(a[0]):[];for(var g=-1,b=P(m);++g<m;)for(var w=a[g],I=-1;++I<m;)I!=g&&(b[g]=gu(b[g]||w,a[I],c,h));return es(Ln(b,1),c,h)}function uR(a,c,h){for(var m=-1,g=a.length,b=c.length,w={};++m<g;){var I=m<b?c[m]:e;h(w,a[m],I)}return w}function Yy(a){return on(a)?a:[]}function Qy(a){return typeof a=="function"?a:mi}function ns(a,c){return Ft(a)?a:o0(a,c)?[a]:jR(fe(a))}var n$=Wt;function is(a,c,h){var m=a.length;return h=h===e?m:h,!c&&h>=m?a:Hi(a,c,h)}var hR=$z||function(a){return En.clearTimeout(a)};function fR(a,c){if(c)return a.slice();var h=a.length,m=OD?OD(h):new a.constructor(h);return a.copy(m),m}function Xy(a){var c=new a.constructor(a.byteLength);return new Fm(c).set(new Fm(a)),c}function i$(a,c){var h=c?Xy(a.buffer):a.buffer;return new a.constructor(h,a.byteOffset,a.byteLength)}function r$(a){var c=new a.constructor(a.source,QA.exec(a));return c.lastIndex=a.lastIndex,c}function o$(a){return mu?Ce(mu.call(a)):{}}function mR(a,c){var h=c?Xy(a.buffer):a.buffer;return new a.constructor(h,a.byteOffset,a.length)}function pR(a,c){if(a!==c){var h=a!==e,m=a===null,g=a===a,b=Ii(a),w=c!==e,I=c===null,C=c===c,V=Ii(c);if(!I&&!V&&!b&&a>c||b&&w&&C&&!I&&!V||m&&w&&C||!h&&C||!g)return 1;if(!m&&!b&&!V&&a<c||V&&h&&g&&!m&&!b||I&&h&&g||!w&&g||!C)return-1}return 0}function s$(a,c,h){for(var m=-1,g=a.criteria,b=c.criteria,w=g.length,I=h.length;++m<w;){var C=pR(g[m],b[m]);if(C){if(m>=I)return C;var V=h[m];return C*(V=="desc"?-1:1)}}return a.index-c.index}function gR(a,c,h,m){for(var g=-1,b=a.length,w=h.length,I=-1,C=c.length,V=yn(b-w,0),B=P(C+V),z=!m;++I<C;)B[I]=c[I];for(;++g<w;)(z||g<b)&&(B[h[g]]=a[g]);for(;V--;)B[I++]=a[g++];return B}function _R(a,c,h,m){for(var g=-1,b=a.length,w=-1,I=h.length,C=-1,V=c.length,B=yn(b-I,0),z=P(B+V),nt=!m;++g<B;)z[g]=a[g];for(var mt=g;++C<V;)z[mt+C]=c[C];for(;++w<I;)(nt||g<b)&&(z[mt+h[w]]=a[g++]);return z}function ui(a,c){var h=-1,m=a.length;for(c||(c=P(m));++h<m;)c[h]=a[h];return c}function kr(a,c,h,m){var g=!h;h||(h={});for(var b=-1,w=c.length;++b<w;){var I=c[b],C=m?m(h[I],a[I],I,h,a):e;C===e&&(C=a[I]),g?ho(h,I,C):pu(h,I,C)}return h}function a$(a,c){return kr(a,r0(a),c)}function l$(a,c){return kr(a,RR(a),c)}function Xm(a,c){return function(h,m){var g=Ft(h)?fz:R4,b=c?c():{};return g(h,a,St(m,2),b)}}function Dl(a){return Wt(function(c,h){var m=-1,g=h.length,b=g>1?h[g-1]:e,w=g>2?h[2]:e;for(b=a.length>3&&typeof b=="function"?(g--,b):e,w&&ni(h[0],h[1],w)&&(b=g<3?e:b,g=1),c=Ce(c);++m<g;){var I=h[m];I&&a(c,I,m,b)}return c})}function vR(a,c){return function(h,m){if(h==null)return h;if(!hi(h))return a(h,m);for(var g=h.length,b=c?g:-1,w=Ce(h);(c?b--:++b<g)&&m(w[b],b,w)!==!1;);return h}}function bR(a){return function(c,h,m){for(var g=-1,b=Ce(c),w=m(c),I=w.length;I--;){var C=w[a?I:++g];if(h(b[C],C,b)===!1)break}return c}}function c$(a,c,h){var m=c&S,g=yu(a);function b(){var w=this&&this!==En&&this instanceof b?g:a;return w.apply(m?h:this,arguments)}return b}function yR(a){return function(c){c=fe(c);var h=Il(c)?fr(c):e,m=h?h[0]:c.charAt(0),g=h?is(h,1).join(""):c.slice(1);return m[a]()+g}}function Rl(a){return function(c){return xy(v1(_1(c).replace(JU,"")),a,"")}}function yu(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var h=Al(a.prototype),m=a.apply(h,c);return Ge(m)?m:h}}function d$(a,c,h){var m=yu(a);function g(){for(var b=arguments.length,w=P(b),I=b,C=kl(g);I--;)w[I]=arguments[I];var V=b<3&&w[0]!==C&&w[b-1]!==C?[]:Xo(w,C);if(b-=V.length,b<h)return CR(a,c,Zm,g.placeholder,e,w,V,e,e,h-b);var B=this&&this!==En&&this instanceof g?m:a;return yi(B,this,w)}return g}function wR(a){return function(c,h,m){var g=Ce(c);if(!hi(c)){var b=St(h,3);c=Cn(c),h=function(I){return b(g[I],I,g)}}var w=a(c,h,m);return w>-1?g[b?c[w]:w]:e}}function xR(a){return mo(function(c){var h=c.length,m=h,g=zi.prototype.thru;for(a&&c.reverse();m--;){var b=c[m];if(typeof b!="function")throw new Ui(r);if(g&&!w&&np(b)=="wrapper")var w=new zi([],!0)}for(m=w?m:h;++m<h;){b=c[m];var I=np(b),C=I=="wrapper"?n0(b):e;C&&s0(C[0])&&C[1]==(kt|K|Y|Kt)&&!C[4].length&&C[9]==1?w=w[np(C[0])].apply(w,C[3]):w=b.length==1&&s0(b)?w[I]():w.thru(b)}return function(){var V=arguments,B=V[0];if(w&&V.length==1&&Ft(B))return w.plant(B).value();for(var z=0,nt=h?c[z].apply(this,V):B;++z<h;)nt=c[z].call(this,nt);return nt}})}function Zm(a,c,h,m,g,b,w,I,C,V){var B=c&kt,z=c&S,nt=c&A,mt=c&(K|ut),At=c&Ue,Ht=nt?e:yu(a);function Dt(){for(var Qt=arguments.length,ee=P(Qt),Ei=Qt;Ei--;)ee[Ei]=arguments[Ei];if(mt)var ii=kl(Dt),Ci=xz(ee,ii);if(m&&(ee=gR(ee,m,g,mt)),b&&(ee=_R(ee,b,w,mt)),Qt-=Ci,mt&&Qt<V){var sn=Xo(ee,ii);return CR(a,c,Zm,Dt.placeholder,h,ee,sn,I,C,V-Qt)}var gr=z?h:this,vo=nt?gr[a]:a;return Qt=ee.length,I?ee=R$(ee,I):At&&Qt>1&&ee.reverse(),B&&C<Qt&&(ee.length=C),this&&this!==En&&this instanceof Dt&&(vo=Ht||yu(vo)),vo.apply(gr,ee)}return Dt}function IR(a,c){return function(h,m){return V4(h,a,c(m),{})}}function Jm(a,c){return function(h,m){var g;if(h===e&&m===e)return c;if(h!==e&&(g=h),m!==e){if(g===e)return m;typeof h=="string"||typeof m=="string"?(h=xi(h),m=xi(m)):(h=lR(h),m=lR(m)),g=a(h,m)}return g}}function Zy(a){return mo(function(c){return c=ze(c,wi(St())),Wt(function(h){var m=this;return a(c,function(g){return yi(g,m,h)})})})}function tp(a,c){c=c===e?" ":xi(c);var h=c.length;if(h<2)return h?Wy(c,a):c;var m=Wy(c,jm(a/El(c)));return Il(c)?is(fr(m),0,a).join(""):m.slice(0,a)}function u$(a,c,h,m){var g=c&S,b=yu(a);function w(){for(var I=-1,C=arguments.length,V=-1,B=m.length,z=P(B+C),nt=this&&this!==En&&this instanceof w?b:a;++V<B;)z[V]=m[V];for(;C--;)z[V++]=arguments[++I];return yi(nt,g?h:this,z)}return w}function ER(a){return function(c,h,m){return m&&typeof m!="number"&&ni(c,h,m)&&(h=m=e),c=_o(c),h===e?(h=c,c=0):h=_o(h),m=m===e?c<h?1:-1:_o(m),Q4(c,h,m,a)}}function ep(a){return function(c,h){return typeof c=="string"&&typeof h=="string"||(c=qi(c),h=qi(h)),a(c,h)}}function CR(a,c,h,m,g,b,w,I,C,V){var B=c&K,z=B?w:e,nt=B?e:w,mt=B?b:e,At=B?e:b;c|=B?Y:Rt,c&=~(B?Rt:Y),c&M||(c&=~(S|A));var Ht=[a,c,g,mt,z,At,nt,I,C,V],Dt=h.apply(e,Ht);return s0(a)&&LR(Dt,Ht),Dt.placeholder=m,VR(Dt,a,c)}function Jy(a){var c=bn[a];return function(h,m){if(h=qi(h),m=m==null?0:$n(Ut(m),292),m&&VD(h)){var g=(fe(h)+"e").split("e"),b=c(g[0]+"e"+(+g[1]+m));return g=(fe(b)+"e").split("e"),+(g[0]+"e"+(+g[1]-m))}return c(h)}}var h$=Tl&&1/Rm(new Tl([,-0]))[1]==Js?function(a){return new Tl(a)}:w0;function TR(a){return function(c){var h=Hn(c);return h==ur?Dy(c):h==hr?Dz(c):wz(c,a(c))}}function fo(a,c,h,m,g,b,w,I){var C=c&A;if(!C&&typeof a!="function")throw new Ui(r);var V=m?m.length:0;if(V||(c&=~(Y|Rt),m=g=e),w=w===e?w:yn(Ut(w),0),I=I===e?I:Ut(I),V-=g?g.length:0,c&Rt){var B=m,z=g;m=g=e}var nt=C?e:n0(a),mt=[a,c,h,m,g,B,z,b,w,I];if(nt&&S$(mt,nt),a=mt[0],c=mt[1],h=mt[2],m=mt[3],g=mt[4],I=mt[9]=mt[9]===e?C?0:a.length:yn(mt[9]-V,0),!I&&c&(K|ut)&&(c&=~(K|ut)),!c||c==S)var At=c$(a,c,h);else c==K||c==ut?At=d$(a,c,I):(c==Y||c==(S|Y))&&!g.length?At=u$(a,c,h,m):At=Zm.apply(e,mt);var Ht=nt?sR:LR;return VR(Ht(At,mt),a,c)}function SR(a,c,h,m){return a===e||pr(a,Cl[h])&&!_e.call(m,h)?c:a}function AR(a,c,h,m,g,b){return Ge(a)&&Ge(c)&&(b.set(c,a),Km(a,c,e,AR,b),b.delete(c)),a}function f$(a){return Iu(a)?e:a}function DR(a,c,h,m,g,b){var w=h&_,I=a.length,C=c.length;if(I!=C&&!(w&&C>I))return!1;var V=b.get(a),B=b.get(c);if(V&&B)return V==c&&B==a;var z=-1,nt=!0,mt=h&y?new ia:e;for(b.set(a,c),b.set(c,a);++z<I;){var At=a[z],Ht=c[z];if(m)var Dt=w?m(Ht,At,z,c,a,b):m(At,Ht,z,a,c,b);if(Dt!==e){if(Dt)continue;nt=!1;break}if(mt){if(!Iy(c,function(Qt,ee){if(!cu(mt,ee)&&(At===Qt||g(At,Qt,h,m,b)))return mt.push(ee)})){nt=!1;break}}else if(!(At===Ht||g(At,Ht,h,m,b))){nt=!1;break}}return b.delete(a),b.delete(c),nt}function m$(a,c,h,m,g,b,w){switch(h){case yl:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case lu:return!(a.byteLength!=c.byteLength||!b(new Fm(a),new Fm(c)));case nu:case iu:case ru:return pr(+a,+c);case xm:return a.name==c.name&&a.message==c.message;case ou:case su:return a==c+"";case ur:var I=Dy;case hr:var C=m&_;if(I||(I=Rm),a.size!=c.size&&!C)return!1;var V=w.get(a);if(V)return V==c;m|=y,w.set(a,c);var B=DR(I(a),I(c),m,g,b,w);return w.delete(a),B;case Em:if(mu)return mu.call(a)==mu.call(c)}return!1}function p$(a,c,h,m,g,b){var w=h&_,I=t0(a),C=I.length,V=t0(c),B=V.length;if(C!=B&&!w)return!1;for(var z=C;z--;){var nt=I[z];if(!(w?nt in c:_e.call(c,nt)))return!1}var mt=b.get(a),At=b.get(c);if(mt&&At)return mt==c&&At==a;var Ht=!0;b.set(a,c),b.set(c,a);for(var Dt=w;++z<C;){nt=I[z];var Qt=a[nt],ee=c[nt];if(m)var Ei=w?m(ee,Qt,nt,c,a,b):m(Qt,ee,nt,a,c,b);if(!(Ei===e?Qt===ee||g(Qt,ee,h,m,b):Ei)){Ht=!1;break}Dt||(Dt=nt=="constructor")}if(Ht&&!Dt){var ii=a.constructor,Ci=c.constructor;ii!=Ci&&"constructor"in a&&"constructor"in c&&!(typeof ii=="function"&&ii instanceof ii&&typeof Ci=="function"&&Ci instanceof Ci)&&(Ht=!1)}return b.delete(a),b.delete(c),Ht}function mo(a){return l0(NR(a,e,HR),a+"")}function t0(a){return YD(a,Cn,r0)}function e0(a){return YD(a,fi,RR)}var n0=zm?function(a){return zm.get(a)}:w0;function np(a){for(var c=a.name+"",h=Sl[c],m=_e.call(Sl,c)?h.length:0;m--;){var g=h[m],b=g.func;if(b==null||b==a)return g.name}return c}function kl(a){var c=_e.call(v,"placeholder")?v:a;return c.placeholder}function St(){var a=v.iteratee||b0;return a=a===b0?ZD:a,arguments.length?a(arguments[0],arguments[1]):a}function ip(a,c){var h=a.__data__;return I$(c)?h[typeof c=="string"?"string":"hash"]:h.map}function i0(a){for(var c=Cn(a),h=c.length;h--;){var m=c[h],g=a[m];c[h]=[m,g,PR(g)]}return c}function sa(a,c){var h=Tz(a,c);return XD(h)?h:e}function g$(a){var c=_e.call(a,ea),h=a[ea];try{a[ea]=e;var m=!0}catch{}var g=Om.call(a);return m&&(c?a[ea]=h:delete a[ea]),g}var r0=ky?function(a){return a==null?[]:(a=Ce(a),Yo(ky(a),function(c){return FD.call(a,c)}))}:x0,RR=ky?function(a){for(var c=[];a;)Qo(c,r0(a)),a=Lm(a);return c}:x0,Hn=ei;(My&&Hn(new My(new ArrayBuffer(1)))!=yl||uu&&Hn(new uu)!=ur||Py&&Hn(Py.resolve())!=qA||Tl&&Hn(new Tl)!=hr||hu&&Hn(new hu)!=au)&&(Hn=function(a){var c=ei(a),h=c==lo?a.constructor:e,m=h?aa(h):"";if(m)switch(m){case Zz:return yl;case Jz:return ur;case t4:return qA;case e4:return hr;case n4:return au}return c});function _$(a,c,h){for(var m=-1,g=h.length;++m<g;){var b=h[m],w=b.size;switch(b.type){case"drop":a+=w;break;case"dropRight":c-=w;break;case"take":c=$n(c,a+w);break;case"takeRight":a=yn(a,c-w);break}}return{start:a,end:c}}function v$(a){var c=a.match(EU);return c?c[1].split(CU):[]}function kR(a,c,h){c=ns(c,a);for(var m=-1,g=c.length,b=!1;++m<g;){var w=Mr(c[m]);if(!(b=a!=null&&h(a,w)))break;a=a[w]}return b||++m!=g?b:(g=a==null?0:a.length,!!g&&dp(g)&&po(w,g)&&(Ft(a)||la(a)))}function b$(a){var c=a.length,h=new a.constructor(c);return c&&typeof a[0]=="string"&&_e.call(a,"index")&&(h.index=a.index,h.input=a.input),h}function MR(a){return typeof a.constructor=="function"&&!wu(a)?Al(Lm(a)):{}}function y$(a,c,h){var m=a.constructor;switch(c){case lu:return Xy(a);case nu:case iu:return new m(+a);case yl:return i$(a,h);case iy:case ry:case oy:case sy:case ay:case ly:case cy:case dy:case uy:return mR(a,h);case ur:return new m;case ru:case su:return new m(a);case ou:return r$(a);case hr:return new m;case Em:return o$(a)}}function w$(a,c){var h=c.length;if(!h)return a;var m=h-1;return c[m]=(h>1?"& ":"")+c[m],c=c.join(h>2?", ":" "),a.replace(IU,`{
/* [wrapped with `+c+`] */
`)}function x$(a){return Ft(a)||la(a)||!!(LD&&a&&a[LD])}function po(a,c){var h=typeof a;return c=c??Ko,!!c&&(h=="number"||h!="symbol"&&OU.test(a))&&a>-1&&a%1==0&&a<c}function ni(a,c,h){if(!Ge(h))return!1;var m=typeof c;return(m=="number"?hi(h)&&po(c,h.length):m=="string"&&c in h)?pr(h[c],a):!1}function o0(a,c){if(Ft(a))return!1;var h=typeof a;return h=="number"||h=="symbol"||h=="boolean"||a==null||Ii(a)?!0:bU.test(a)||!vU.test(a)||c!=null&&a in Ce(c)}function I$(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function s0(a){var c=np(a),h=v[c];if(typeof h!="function"||!(c in Xt.prototype))return!1;if(a===h)return!0;var m=n0(h);return!!m&&a===m[0]}function E$(a){return!!PD&&PD in a}var C$=Mm?go:I0;function wu(a){var c=a&&a.constructor,h=typeof c=="function"&&c.prototype||Cl;return a===h}function PR(a){return a===a&&!Ge(a)}function OR(a,c){return function(h){return h==null?!1:h[a]===c&&(c!==e||a in Ce(h))}}function T$(a){var c=lp(a,function(m){return h.size===l&&h.clear(),m}),h=c.cache;return c}function S$(a,c){var h=a[1],m=c[1],g=h|m,b=g<(S|A|kt),w=m==kt&&h==K||m==kt&&h==Kt&&a[7].length<=c[8]||m==(kt|Kt)&&c[7].length<=c[8]&&h==K;if(!(b||w))return a;m&S&&(a[2]=c[2],g|=h&S?0:M);var I=c[3];if(I){var C=a[3];a[3]=C?gR(C,I,c[4]):I,a[4]=C?Xo(a[3],d):c[4]}return I=c[5],I&&(C=a[5],a[5]=C?_R(C,I,c[6]):I,a[6]=C?Xo(a[5],d):c[6]),I=c[7],I&&(a[7]=I),m&kt&&(a[8]=a[8]==null?c[8]:$n(a[8],c[8])),a[9]==null&&(a[9]=c[9]),a[0]=c[0],a[1]=g,a}function A$(a){var c=[];if(a!=null)for(var h in Ce(a))c.push(h);return c}function D$(a){return Om.call(a)}function NR(a,c,h){return c=yn(c===e?a.length-1:c,0),function(){for(var m=arguments,g=-1,b=yn(m.length-c,0),w=P(b);++g<b;)w[g]=m[c+g];g=-1;for(var I=P(c+1);++g<c;)I[g]=m[g];return I[c]=h(w),yi(a,this,I)}}function FR(a,c){return c.length<2?a:oa(a,Hi(c,0,-1))}function R$(a,c){for(var h=a.length,m=$n(c.length,h),g=ui(a);m--;){var b=c[m];a[m]=po(b,h)?g[b]:e}return a}function a0(a,c){if(!(c==="constructor"&&typeof a[c]=="function")&&c!="__proto__")return a[c]}var LR=BR(sR),xu=Wz||function(a,c){return En.setTimeout(a,c)},l0=BR(J4);function VR(a,c,h){var m=c+"";return l0(a,w$(m,k$(v$(m),h)))}function BR(a){var c=0,h=0;return function(){var m=Yz(),g=Zj-(m-h);if(h=m,g>0){if(++c>=bm)return arguments[0]}else c=0;return a.apply(e,arguments)}}function rp(a,c){var h=-1,m=a.length,g=m-1;for(c=c===e?m:c;++h<c;){var b=Hy(h,g),w=a[b];a[b]=a[h],a[h]=w}return a.length=c,a}var jR=T$(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(yU,function(h,m,g,b){c.push(g?b.replace(AU,"$1"):m||h)}),c});function Mr(a){if(typeof a=="string"||Ii(a))return a;var c=a+"";return c=="0"&&1/a==-Js?"-0":c}function aa(a){if(a!=null){try{return Pm.call(a)}catch{}try{return a+""}catch{}}return""}function k$(a,c){return ji(rU,function(h){var m="_."+h[0];c&h[1]&&!Am(a,m)&&a.push(m)}),a.sort()}function UR(a){if(a instanceof Xt)return a.clone();var c=new zi(a.__wrapped__,a.__chain__);return c.__actions__=ui(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}function M$(a,c,h){(h?ni(a,c,h):c===e)?c=1:c=yn(Ut(c),0);var m=a==null?0:a.length;if(!m||c<1)return[];for(var g=0,b=0,w=P(jm(m/c));g<m;)w[b++]=Hi(a,g,g+=c);return w}function P$(a){for(var c=-1,h=a==null?0:a.length,m=0,g=[];++c<h;){var b=a[c];b&&(g[m++]=b)}return g}function O$(){var a=arguments.length;if(!a)return[];for(var c=P(a-1),h=arguments[0],m=a;m--;)c[m-1]=arguments[m];return Qo(Ft(h)?ui(h):[h],Ln(c,1))}var N$=Wt(function(a,c){return on(a)?gu(a,Ln(c,1,on,!0)):[]}),F$=Wt(function(a,c){var h=Wi(c);return on(h)&&(h=e),on(a)?gu(a,Ln(c,1,on,!0),St(h,2)):[]}),L$=Wt(function(a,c){var h=Wi(c);return on(h)&&(h=e),on(a)?gu(a,Ln(c,1,on,!0),e,h):[]});function V$(a,c,h){var m=a==null?0:a.length;return m?(c=h||c===e?1:Ut(c),Hi(a,c<0?0:c,m)):[]}function B$(a,c,h){var m=a==null?0:a.length;return m?(c=h||c===e?1:Ut(c),c=m-c,Hi(a,0,c<0?0:c)):[]}function j$(a,c){return a&&a.length?Qm(a,St(c,3),!0,!0):[]}function U$(a,c){return a&&a.length?Qm(a,St(c,3),!0):[]}function z$(a,c,h,m){var g=a==null?0:a.length;return g?(h&&typeof h!="number"&&ni(a,c,h)&&(h=0,m=g),O4(a,c,h,m)):[]}function zR(a,c,h){var m=a==null?0:a.length;if(!m)return-1;var g=h==null?0:Ut(h);return g<0&&(g=yn(m+g,0)),Dm(a,St(c,3),g)}function $R(a,c,h){var m=a==null?0:a.length;if(!m)return-1;var g=m-1;return h!==e&&(g=Ut(h),g=h<0?yn(m+g,0):$n(g,m-1)),Dm(a,St(c,3),g,!0)}function HR(a){var c=a==null?0:a.length;return c?Ln(a,1):[]}function $$(a){var c=a==null?0:a.length;return c?Ln(a,Js):[]}function H$(a,c){var h=a==null?0:a.length;return h?(c=c===e?1:Ut(c),Ln(a,c)):[]}function W$(a){for(var c=-1,h=a==null?0:a.length,m={};++c<h;){var g=a[c];m[g[0]]=g[1]}return m}function WR(a){return a&&a.length?a[0]:e}function q$(a,c,h){var m=a==null?0:a.length;if(!m)return-1;var g=h==null?0:Ut(h);return g<0&&(g=yn(m+g,0)),xl(a,c,g)}function G$(a){var c=a==null?0:a.length;return c?Hi(a,0,-1):[]}var K$=Wt(function(a){var c=ze(a,Yy);return c.length&&c[0]===a[0]?By(c):[]}),Y$=Wt(function(a){var c=Wi(a),h=ze(a,Yy);return c===Wi(h)?c=e:h.pop(),h.length&&h[0]===a[0]?By(h,St(c,2)):[]}),Q$=Wt(function(a){var c=Wi(a),h=ze(a,Yy);return c=typeof c=="function"?c:e,c&&h.pop(),h.length&&h[0]===a[0]?By(h,e,c):[]});function X$(a,c){return a==null?"":Gz.call(a,c)}function Wi(a){var c=a==null?0:a.length;return c?a[c-1]:e}function Z$(a,c,h){var m=a==null?0:a.length;if(!m)return-1;var g=m;return h!==e&&(g=Ut(h),g=g<0?yn(m+g,0):$n(g,m-1)),c===c?kz(a,c,g):Dm(a,CD,g,!0)}function J$(a,c){return a&&a.length?nR(a,Ut(c)):e}var t5=Wt(qR);function qR(a,c){return a&&a.length&&c&&c.length?$y(a,c):a}function e5(a,c,h){return a&&a.length&&c&&c.length?$y(a,c,St(h,2)):a}function n5(a,c,h){return a&&a.length&&c&&c.length?$y(a,c,e,h):a}var i5=mo(function(a,c){var h=a==null?0:a.length,m=Ny(a,c);return oR(a,ze(c,function(g){return po(g,h)?+g:g}).sort(pR)),m});function r5(a,c){var h=[];if(!(a&&a.length))return h;var m=-1,g=[],b=a.length;for(c=St(c,3);++m<b;){var w=a[m];c(w,m,a)&&(h.push(w),g.push(m))}return oR(a,g),h}function c0(a){return a==null?a:Xz.call(a)}function o5(a,c,h){var m=a==null?0:a.length;return m?(h&&typeof h!="number"&&ni(a,c,h)?(c=0,h=m):(c=c==null?0:Ut(c),h=h===e?m:Ut(h)),Hi(a,c,h)):[]}function s5(a,c){return Ym(a,c)}function a5(a,c,h){return qy(a,c,St(h,2))}function l5(a,c){var h=a==null?0:a.length;if(h){var m=Ym(a,c);if(m<h&&pr(a[m],c))return m}return-1}function c5(a,c){return Ym(a,c,!0)}function d5(a,c,h){return qy(a,c,St(h,2),!0)}function u5(a,c){var h=a==null?0:a.length;if(h){var m=Ym(a,c,!0)-1;if(pr(a[m],c))return m}return-1}function h5(a){return a&&a.length?aR(a):[]}function f5(a,c){return a&&a.length?aR(a,St(c,2)):[]}function m5(a){var c=a==null?0:a.length;return c?Hi(a,1,c):[]}function p5(a,c,h){return a&&a.length?(c=h||c===e?1:Ut(c),Hi(a,0,c<0?0:c)):[]}function g5(a,c,h){var m=a==null?0:a.length;return m?(c=h||c===e?1:Ut(c),c=m-c,Hi(a,c<0?0:c,m)):[]}function _5(a,c){return a&&a.length?Qm(a,St(c,3),!1,!0):[]}function v5(a,c){return a&&a.length?Qm(a,St(c,3)):[]}var b5=Wt(function(a){return es(Ln(a,1,on,!0))}),y5=Wt(function(a){var c=Wi(a);return on(c)&&(c=e),es(Ln(a,1,on,!0),St(c,2))}),w5=Wt(function(a){var c=Wi(a);return c=typeof c=="function"?c:e,es(Ln(a,1,on,!0),e,c)});function x5(a){return a&&a.length?es(a):[]}function I5(a,c){return a&&a.length?es(a,St(c,2)):[]}function E5(a,c){return c=typeof c=="function"?c:e,a&&a.length?es(a,e,c):[]}function d0(a){if(!(a&&a.length))return[];var c=0;return a=Yo(a,function(h){if(on(h))return c=yn(h.length,c),!0}),Sy(c,function(h){return ze(a,Ey(h))})}function GR(a,c){if(!(a&&a.length))return[];var h=d0(a);return c==null?h:ze(h,function(m){return yi(c,e,m)})}var C5=Wt(function(a,c){return on(a)?gu(a,c):[]}),T5=Wt(function(a){return Ky(Yo(a,on))}),S5=Wt(function(a){var c=Wi(a);return on(c)&&(c=e),Ky(Yo(a,on),St(c,2))}),A5=Wt(function(a){var c=Wi(a);return c=typeof c=="function"?c:e,Ky(Yo(a,on),e,c)}),D5=Wt(d0);function R5(a,c){return uR(a||[],c||[],pu)}function k5(a,c){return uR(a||[],c||[],bu)}var M5=Wt(function(a){var c=a.length,h=c>1?a[c-1]:e;return h=typeof h=="function"?(a.pop(),h):e,GR(a,h)});function KR(a){var c=v(a);return c.__chain__=!0,c}function P5(a,c){return c(a),a}function op(a,c){return c(a)}var O5=mo(function(a){var c=a.length,h=c?a[0]:0,m=this.__wrapped__,g=function(b){return Ny(b,a)};return c>1||this.__actions__.length||!(m instanceof Xt)||!po(h)?this.thru(g):(m=m.slice(h,+h+(c?1:0)),m.__actions__.push({func:op,args:[g],thisArg:e}),new zi(m,this.__chain__).thru(function(b){return c&&!b.length&&b.push(e),b}))});function N5(){return KR(this)}function F5(){return new zi(this.value(),this.__chain__)}function L5(){this.__values__===e&&(this.__values__=l1(this.value()));var a=this.__index__>=this.__values__.length,c=a?e:this.__values__[this.__index__++];return{done:a,value:c}}function V5(){return this}function B5(a){for(var c,h=this;h instanceof Hm;){var m=UR(h);m.__index__=0,m.__values__=e,c?g.__wrapped__=m:c=m;var g=m;h=h.__wrapped__}return g.__wrapped__=a,c}function j5(){var a=this.__wrapped__;if(a instanceof Xt){var c=a;return this.__actions__.length&&(c=new Xt(this)),c=c.reverse(),c.__actions__.push({func:op,args:[c0],thisArg:e}),new zi(c,this.__chain__)}return this.thru(c0)}function U5(){return dR(this.__wrapped__,this.__actions__)}var z5=Xm(function(a,c,h){_e.call(a,h)?++a[h]:ho(a,h,1)});function $5(a,c,h){var m=Ft(a)?ID:P4;return h&&ni(a,c,h)&&(c=e),m(a,St(c,3))}function H5(a,c){var h=Ft(a)?Yo:GD;return h(a,St(c,3))}var W5=wR(zR),q5=wR($R);function G5(a,c){return Ln(sp(a,c),1)}function K5(a,c){return Ln(sp(a,c),Js)}function Y5(a,c,h){return h=h===e?1:Ut(h),Ln(sp(a,c),h)}function YR(a,c){var h=Ft(a)?ji:ts;return h(a,St(c,3))}function QR(a,c){var h=Ft(a)?mz:qD;return h(a,St(c,3))}var Q5=Xm(function(a,c,h){_e.call(a,h)?a[h].push(c):ho(a,h,[c])});function X5(a,c,h,m){a=hi(a)?a:Pl(a),h=h&&!m?Ut(h):0;var g=a.length;return h<0&&(h=yn(g+h,0)),up(a)?h<=g&&a.indexOf(c,h)>-1:!!g&&xl(a,c,h)>-1}var Z5=Wt(function(a,c,h){var m=-1,g=typeof c=="function",b=hi(a)?P(a.length):[];return ts(a,function(w){b[++m]=g?yi(c,w,h):_u(w,c,h)}),b}),J5=Xm(function(a,c,h){ho(a,h,c)});function sp(a,c){var h=Ft(a)?ze:JD;return h(a,St(c,3))}function tH(a,c,h,m){return a==null?[]:(Ft(c)||(c=c==null?[]:[c]),h=m?e:h,Ft(h)||(h=h==null?[]:[h]),iR(a,c,h))}var eH=Xm(function(a,c,h){a[h?0:1].push(c)},function(){return[[],[]]});function nH(a,c,h){var m=Ft(a)?xy:SD,g=arguments.length<3;return m(a,St(c,4),h,g,ts)}function iH(a,c,h){var m=Ft(a)?pz:SD,g=arguments.length<3;return m(a,St(c,4),h,g,qD)}function rH(a,c){var h=Ft(a)?Yo:GD;return h(a,cp(St(c,3)))}function oH(a){var c=Ft(a)?zD:X4;return c(a)}function sH(a,c,h){(h?ni(a,c,h):c===e)?c=1:c=Ut(c);var m=Ft(a)?A4:Z4;return m(a,c)}function aH(a){var c=Ft(a)?D4:t$;return c(a)}function lH(a){if(a==null)return 0;if(hi(a))return up(a)?El(a):a.length;var c=Hn(a);return c==ur||c==hr?a.size:Uy(a).length}function cH(a,c,h){var m=Ft(a)?Iy:e$;return h&&ni(a,c,h)&&(c=e),m(a,St(c,3))}var dH=Wt(function(a,c){if(a==null)return[];var h=c.length;return h>1&&ni(a,c[0],c[1])?c=[]:h>2&&ni(c[0],c[1],c[2])&&(c=[c[0]]),iR(a,Ln(c,1),[])}),ap=Hz||function(){return En.Date.now()};function uH(a,c){if(typeof c!="function")throw new Ui(r);return a=Ut(a),function(){if(--a<1)return c.apply(this,arguments)}}function XR(a,c,h){return c=h?e:c,c=a&&c==null?a.length:c,fo(a,kt,e,e,e,e,c)}function ZR(a,c){var h;if(typeof c!="function")throw new Ui(r);return a=Ut(a),function(){return--a>0&&(h=c.apply(this,arguments)),a<=1&&(c=e),h}}var u0=Wt(function(a,c,h){var m=S;if(h.length){var g=Xo(h,kl(u0));m|=Y}return fo(a,m,c,h,g)}),JR=Wt(function(a,c,h){var m=S|A;if(h.length){var g=Xo(h,kl(JR));m|=Y}return fo(c,m,a,h,g)});function t1(a,c,h){c=h?e:c;var m=fo(a,K,e,e,e,e,e,c);return m.placeholder=t1.placeholder,m}function e1(a,c,h){c=h?e:c;var m=fo(a,ut,e,e,e,e,e,c);return m.placeholder=e1.placeholder,m}function n1(a,c,h){var m,g,b,w,I,C,V=0,B=!1,z=!1,nt=!0;if(typeof a!="function")throw new Ui(r);c=qi(c)||0,Ge(h)&&(B=!!h.leading,z="maxWait"in h,b=z?yn(qi(h.maxWait)||0,c):b,nt="trailing"in h?!!h.trailing:nt);function mt(sn){var gr=m,vo=g;return m=g=e,V=sn,w=a.apply(vo,gr),w}function At(sn){return V=sn,I=xu(Qt,c),B?mt(sn):w}function Ht(sn){var gr=sn-C,vo=sn-V,w1=c-gr;return z?$n(w1,b-vo):w1}function Dt(sn){var gr=sn-C,vo=sn-V;return C===e||gr>=c||gr<0||z&&vo>=b}function Qt(){var sn=ap();if(Dt(sn))return ee(sn);I=xu(Qt,Ht(sn))}function ee(sn){return I=e,nt&&m?mt(sn):(m=g=e,w)}function Ei(){I!==e&&hR(I),V=0,m=C=g=I=e}function ii(){return I===e?w:ee(ap())}function Ci(){var sn=ap(),gr=Dt(sn);if(m=arguments,g=this,C=sn,gr){if(I===e)return At(C);if(z)return hR(I),I=xu(Qt,c),mt(C)}return I===e&&(I=xu(Qt,c)),w}return Ci.cancel=Ei,Ci.flush=ii,Ci}var hH=Wt(function(a,c){return WD(a,1,c)}),fH=Wt(function(a,c,h){return WD(a,qi(c)||0,h)});function mH(a){return fo(a,Ue)}function lp(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new Ui(r);var h=function(){var m=arguments,g=c?c.apply(this,m):m[0],b=h.cache;if(b.has(g))return b.get(g);var w=a.apply(this,m);return h.cache=b.set(g,w)||b,w};return h.cache=new(lp.Cache||uo),h}lp.Cache=uo;function cp(a){if(typeof a!="function")throw new Ui(r);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}function pH(a){return ZR(2,a)}var gH=n$(function(a,c){c=c.length==1&&Ft(c[0])?ze(c[0],wi(St())):ze(Ln(c,1),wi(St()));var h=c.length;return Wt(function(m){for(var g=-1,b=$n(m.length,h);++g<b;)m[g]=c[g].call(this,m[g]);return yi(a,this,m)})}),h0=Wt(function(a,c){var h=Xo(c,kl(h0));return fo(a,Y,e,c,h)}),i1=Wt(function(a,c){var h=Xo(c,kl(i1));return fo(a,Rt,e,c,h)}),_H=mo(function(a,c){return fo(a,Kt,e,e,e,c)});function vH(a,c){if(typeof a!="function")throw new Ui(r);return c=c===e?c:Ut(c),Wt(a,c)}function bH(a,c){if(typeof a!="function")throw new Ui(r);return c=c==null?0:yn(Ut(c),0),Wt(function(h){var m=h[c],g=is(h,0,c);return m&&Qo(g,m),yi(a,this,g)})}function yH(a,c,h){var m=!0,g=!0;if(typeof a!="function")throw new Ui(r);return Ge(h)&&(m="leading"in h?!!h.leading:m,g="trailing"in h?!!h.trailing:g),n1(a,c,{leading:m,maxWait:c,trailing:g})}function wH(a){return XR(a,1)}function xH(a,c){return h0(Qy(c),a)}function IH(){if(!arguments.length)return[];var a=arguments[0];return Ft(a)?a:[a]}function EH(a){return $i(a,p)}function CH(a,c){return c=typeof c=="function"?c:e,$i(a,p,c)}function TH(a){return $i(a,u|p)}function SH(a,c){return c=typeof c=="function"?c:e,$i(a,u|p,c)}function AH(a,c){return c==null||HD(a,c,Cn(c))}function pr(a,c){return a===c||a!==a&&c!==c}var DH=ep(Vy),RH=ep(function(a,c){return a>=c}),la=QD(function(){return arguments}())?QD:function(a){return Ze(a)&&_e.call(a,"callee")&&!FD.call(a,"callee")},Ft=P.isArray,kH=_D?wi(_D):B4;function hi(a){return a!=null&&dp(a.length)&&!go(a)}function on(a){return Ze(a)&&hi(a)}function MH(a){return a===!0||a===!1||Ze(a)&&ei(a)==nu}var rs=qz||I0,PH=vD?wi(vD):j4;function OH(a){return Ze(a)&&a.nodeType===1&&!Iu(a)}function NH(a){if(a==null)return!0;if(hi(a)&&(Ft(a)||typeof a=="string"||typeof a.splice=="function"||rs(a)||Ml(a)||la(a)))return!a.length;var c=Hn(a);if(c==ur||c==hr)return!a.size;if(wu(a))return!Uy(a).length;for(var h in a)if(_e.call(a,h))return!1;return!0}function FH(a,c){return vu(a,c)}function LH(a,c,h){h=typeof h=="function"?h:e;var m=h?h(a,c):e;return m===e?vu(a,c,e,h):!!m}function f0(a){if(!Ze(a))return!1;var c=ei(a);return c==xm||c==sU||typeof a.message=="string"&&typeof a.name=="string"&&!Iu(a)}function VH(a){return typeof a=="number"&&VD(a)}function go(a){if(!Ge(a))return!1;var c=ei(a);return c==Im||c==WA||c==oU||c==lU}function r1(a){return typeof a=="number"&&a==Ut(a)}function dp(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=Ko}function Ge(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}function Ze(a){return a!=null&&typeof a=="object"}var o1=bD?wi(bD):z4;function BH(a,c){return a===c||jy(a,c,i0(c))}function jH(a,c,h){return h=typeof h=="function"?h:e,jy(a,c,i0(c),h)}function UH(a){return s1(a)&&a!=+a}function zH(a){if(C$(a))throw new Ot(n);return XD(a)}function $H(a){return a===null}function HH(a){return a==null}function s1(a){return typeof a=="number"||Ze(a)&&ei(a)==ru}function Iu(a){if(!Ze(a)||ei(a)!=lo)return!1;var c=Lm(a);if(c===null)return!0;var h=_e.call(c,"constructor")&&c.constructor;return typeof h=="function"&&h instanceof h&&Pm.call(h)==jz}var m0=yD?wi(yD):$4;function WH(a){return r1(a)&&a>=-Ko&&a<=Ko}var a1=wD?wi(wD):H4;function up(a){return typeof a=="string"||!Ft(a)&&Ze(a)&&ei(a)==su}function Ii(a){return typeof a=="symbol"||Ze(a)&&ei(a)==Em}var Ml=xD?wi(xD):W4;function qH(a){return a===e}function GH(a){return Ze(a)&&Hn(a)==au}function KH(a){return Ze(a)&&ei(a)==dU}var YH=ep(zy),QH=ep(function(a,c){return a<=c});function l1(a){if(!a)return[];if(hi(a))return up(a)?fr(a):ui(a);if(du&&a[du])return Az(a[du]());var c=Hn(a),h=c==ur?Dy:c==hr?Rm:Pl;return h(a)}function _o(a){if(!a)return a===0?a:0;if(a=qi(a),a===Js||a===-Js){var c=a<0?-1:1;return c*eU}return a===a?a:0}function Ut(a){var c=_o(a),h=c%1;return c===c?h?c-h:c:0}function c1(a){return a?ra(Ut(a),0,Dr):0}function qi(a){if(typeof a=="number")return a;if(Ii(a))return ym;if(Ge(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=Ge(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=AD(a);var h=kU.test(a);return h||PU.test(a)?uz(a.slice(2),h?2:8):RU.test(a)?ym:+a}function d1(a){return kr(a,fi(a))}function XH(a){return a?ra(Ut(a),-Ko,Ko):a===0?a:0}function fe(a){return a==null?"":xi(a)}var ZH=Dl(function(a,c){if(wu(c)||hi(c)){kr(c,Cn(c),a);return}for(var h in c)_e.call(c,h)&&pu(a,h,c[h])}),u1=Dl(function(a,c){kr(c,fi(c),a)}),hp=Dl(function(a,c,h,m){kr(c,fi(c),a,m)}),JH=Dl(function(a,c,h,m){kr(c,Cn(c),a,m)}),tW=mo(Ny);function eW(a,c){var h=Al(a);return c==null?h:$D(h,c)}var nW=Wt(function(a,c){a=Ce(a);var h=-1,m=c.length,g=m>2?c[2]:e;for(g&&ni(c[0],c[1],g)&&(m=1);++h<m;)for(var b=c[h],w=fi(b),I=-1,C=w.length;++I<C;){var V=w[I],B=a[V];(B===e||pr(B,Cl[V])&&!_e.call(a,V))&&(a[V]=b[V])}return a}),iW=Wt(function(a){return a.push(e,AR),yi(h1,e,a)});function rW(a,c){return ED(a,St(c,3),Rr)}function oW(a,c){return ED(a,St(c,3),Ly)}function sW(a,c){return a==null?a:Fy(a,St(c,3),fi)}function aW(a,c){return a==null?a:KD(a,St(c,3),fi)}function lW(a,c){return a&&Rr(a,St(c,3))}function cW(a,c){return a&&Ly(a,St(c,3))}function dW(a){return a==null?[]:Gm(a,Cn(a))}function uW(a){return a==null?[]:Gm(a,fi(a))}function p0(a,c,h){var m=a==null?e:oa(a,c);return m===e?h:m}function hW(a,c){return a!=null&&kR(a,c,N4)}function g0(a,c){return a!=null&&kR(a,c,F4)}var fW=IR(function(a,c,h){c!=null&&typeof c.toString!="function"&&(c=Om.call(c)),a[c]=h},v0(mi)),mW=IR(function(a,c,h){c!=null&&typeof c.toString!="function"&&(c=Om.call(c)),_e.call(a,c)?a[c].push(h):a[c]=[h]},St),pW=Wt(_u);function Cn(a){return hi(a)?UD(a):Uy(a)}function fi(a){return hi(a)?UD(a,!0):q4(a)}function gW(a,c){var h={};return c=St(c,3),Rr(a,function(m,g,b){ho(h,c(m,g,b),m)}),h}function _W(a,c){var h={};return c=St(c,3),Rr(a,function(m,g,b){ho(h,g,c(m,g,b))}),h}var vW=Dl(function(a,c,h){Km(a,c,h)}),h1=Dl(function(a,c,h,m){Km(a,c,h,m)}),bW=mo(function(a,c){var h={};if(a==null)return h;var m=!1;c=ze(c,function(b){return b=ns(b,a),m||(m=b.length>1),b}),kr(a,e0(a),h),m&&(h=$i(h,u|f|p,f$));for(var g=c.length;g--;)Gy(h,c[g]);return h});function yW(a,c){return f1(a,cp(St(c)))}var wW=mo(function(a,c){return a==null?{}:K4(a,c)});function f1(a,c){if(a==null)return{};var h=ze(e0(a),function(m){return[m]});return c=St(c),rR(a,h,function(m,g){return c(m,g[0])})}function xW(a,c,h){c=ns(c,a);var m=-1,g=c.length;for(g||(g=1,a=e);++m<g;){var b=a==null?e:a[Mr(c[m])];b===e&&(m=g,b=h),a=go(b)?b.call(a):b}return a}function IW(a,c,h){return a==null?a:bu(a,c,h)}function EW(a,c,h,m){return m=typeof m=="function"?m:e,a==null?a:bu(a,c,h,m)}var m1=TR(Cn),p1=TR(fi);function CW(a,c,h){var m=Ft(a),g=m||rs(a)||Ml(a);if(c=St(c,4),h==null){var b=a&&a.constructor;g?h=m?new b:[]:Ge(a)?h=go(b)?Al(Lm(a)):{}:h={}}return(g?ji:Rr)(a,function(w,I,C){return c(h,w,I,C)}),h}function TW(a,c){return a==null?!0:Gy(a,c)}function SW(a,c,h){return a==null?a:cR(a,c,Qy(h))}function AW(a,c,h,m){return m=typeof m=="function"?m:e,a==null?a:cR(a,c,Qy(h),m)}function Pl(a){return a==null?[]:Ay(a,Cn(a))}function DW(a){return a==null?[]:Ay(a,fi(a))}function RW(a,c,h){return h===e&&(h=c,c=e),h!==e&&(h=qi(h),h=h===h?h:0),c!==e&&(c=qi(c),c=c===c?c:0),ra(qi(a),c,h)}function kW(a,c,h){return c=_o(c),h===e?(h=c,c=0):h=_o(h),a=qi(a),L4(a,c,h)}function MW(a,c,h){if(h&&typeof h!="boolean"&&ni(a,c,h)&&(c=h=e),h===e&&(typeof c=="boolean"?(h=c,c=e):typeof a=="boolean"&&(h=a,a=e)),a===e&&c===e?(a=0,c=1):(a=_o(a),c===e?(c=a,a=0):c=_o(c)),a>c){var m=a;a=c,c=m}if(h||a%1||c%1){var g=BD();return $n(a+g*(c-a+dz("1e-"+((g+"").length-1))),c)}return Hy(a,c)}var PW=Rl(function(a,c,h){return c=c.toLowerCase(),a+(h?g1(c):c)});function g1(a){return _0(fe(a).toLowerCase())}function _1(a){return a=fe(a),a&&a.replace(NU,Iz).replace(tz,"")}function OW(a,c,h){a=fe(a),c=xi(c);var m=a.length;h=h===e?m:ra(Ut(h),0,m);var g=h;return h-=c.length,h>=0&&a.slice(h,g)==c}function NW(a){return a=fe(a),a&&pU.test(a)?a.replace(KA,Ez):a}function FW(a){return a=fe(a),a&&wU.test(a)?a.replace(hy,"\\$&"):a}var LW=Rl(function(a,c,h){return a+(h?"-":"")+c.toLowerCase()}),VW=Rl(function(a,c,h){return a+(h?" ":"")+c.toLowerCase()}),BW=yR("toLowerCase");function jW(a,c,h){a=fe(a),c=Ut(c);var m=c?El(a):0;if(!c||m>=c)return a;var g=(c-m)/2;return tp(Um(g),h)+a+tp(jm(g),h)}function UW(a,c,h){a=fe(a),c=Ut(c);var m=c?El(a):0;return c&&m<c?a+tp(c-m,h):a}function zW(a,c,h){a=fe(a),c=Ut(c);var m=c?El(a):0;return c&&m<c?tp(c-m,h)+a:a}function $W(a,c,h){return h||c==null?c=0:c&&(c=+c),Qz(fe(a).replace(fy,""),c||0)}function HW(a,c,h){return(h?ni(a,c,h):c===e)?c=1:c=Ut(c),Wy(fe(a),c)}function WW(){var a=arguments,c=fe(a[0]);return a.length<3?c:c.replace(a[1],a[2])}var qW=Rl(function(a,c,h){return a+(h?"_":"")+c.toLowerCase()});function GW(a,c,h){return h&&typeof h!="number"&&ni(a,c,h)&&(c=h=e),h=h===e?Dr:h>>>0,h?(a=fe(a),a&&(typeof c=="string"||c!=null&&!m0(c))&&(c=xi(c),!c&&Il(a))?is(fr(a),0,h):a.split(c,h)):[]}var KW=Rl(function(a,c,h){return a+(h?" ":"")+_0(c)});function YW(a,c,h){return a=fe(a),h=h==null?0:ra(Ut(h),0,a.length),c=xi(c),a.slice(h,h+c.length)==c}function QW(a,c,h){var m=v.templateSettings;h&&ni(a,c,h)&&(c=e),a=fe(a),c=hp({},c,m,SR);var g=hp({},c.imports,m.imports,SR),b=Cn(g),w=Ay(g,b),I,C,V=0,B=c.interpolate||Cm,z="__p += '",nt=Ry((c.escape||Cm).source+"|"+B.source+"|"+(B===YA?DU:Cm).source+"|"+(c.evaluate||Cm).source+"|$","g"),mt="//# sourceURL="+(_e.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++oz+"]")+`
`;a.replace(nt,function(Dt,Qt,ee,Ei,ii,Ci){return ee||(ee=Ei),z+=a.slice(V,Ci).replace(FU,Cz),Qt&&(I=!0,z+=`' +
__e(`+Qt+`) +
'`),ii&&(C=!0,z+=`';
`+ii+`;
__p += '`),ee&&(z+=`' +
((__t = (`+ee+`)) == null ? '' : __t) +
'`),V=Ci+Dt.length,Dt}),z+=`';
`;var At=_e.call(c,"variable")&&c.variable;if(!At)z=`with (obj) {
`+z+`
}
`;else if(SU.test(At))throw new Ot(o);z=(C?z.replace(uU,""):z).replace(hU,"$1").replace(fU,"$1;"),z="function("+(At||"obj")+`) {
`+(At?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(I?", __e = _.escape":"")+(C?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+z+`return __p
}`;var Ht=b1(function(){return ue(b,mt+"return "+z).apply(e,w)});if(Ht.source=z,f0(Ht))throw Ht;return Ht}function XW(a){return fe(a).toLowerCase()}function ZW(a){return fe(a).toUpperCase()}function JW(a,c,h){if(a=fe(a),a&&(h||c===e))return AD(a);if(!a||!(c=xi(c)))return a;var m=fr(a),g=fr(c),b=DD(m,g),w=RD(m,g)+1;return is(m,b,w).join("")}function t3(a,c,h){if(a=fe(a),a&&(h||c===e))return a.slice(0,MD(a)+1);if(!a||!(c=xi(c)))return a;var m=fr(a),g=RD(m,fr(c))+1;return is(m,0,g).join("")}function e3(a,c,h){if(a=fe(a),a&&(h||c===e))return a.replace(fy,"");if(!a||!(c=xi(c)))return a;var m=fr(a),g=DD(m,fr(c));return is(m,g).join("")}function n3(a,c){var h=Vi,m=ny;if(Ge(c)){var g="separator"in c?c.separator:g;h="length"in c?Ut(c.length):h,m="omission"in c?xi(c.omission):m}a=fe(a);var b=a.length;if(Il(a)){var w=fr(a);b=w.length}if(h>=b)return a;var I=h-El(m);if(I<1)return m;var C=w?is(w,0,I).join(""):a.slice(0,I);if(g===e)return C+m;if(w&&(I+=C.length-I),m0(g)){if(a.slice(I).search(g)){var V,B=C;for(g.global||(g=Ry(g.source,fe(QA.exec(g))+"g")),g.lastIndex=0;V=g.exec(B);)var z=V.index;C=C.slice(0,z===e?I:z)}}else if(a.indexOf(xi(g),I)!=I){var nt=C.lastIndexOf(g);nt>-1&&(C=C.slice(0,nt))}return C+m}function i3(a){return a=fe(a),a&&mU.test(a)?a.replace(GA,Mz):a}var r3=Rl(function(a,c,h){return a+(h?" ":"")+c.toUpperCase()}),_0=yR("toUpperCase");function v1(a,c,h){return a=fe(a),c=h?e:c,c===e?Sz(a)?Nz(a):vz(a):a.match(c)||[]}var b1=Wt(function(a,c){try{return yi(a,e,c)}catch(h){return f0(h)?h:new Ot(h)}}),o3=mo(function(a,c){return ji(c,function(h){h=Mr(h),ho(a,h,u0(a[h],a))}),a});function s3(a){var c=a==null?0:a.length,h=St();return a=c?ze(a,function(m){if(typeof m[1]!="function")throw new Ui(r);return[h(m[0]),m[1]]}):[],Wt(function(m){for(var g=-1;++g<c;){var b=a[g];if(yi(b[0],this,m))return yi(b[1],this,m)}})}function a3(a){return M4($i(a,u))}function v0(a){return function(){return a}}function l3(a,c){return a==null||a!==a?c:a}var c3=xR(),d3=xR(!0);function mi(a){return a}function b0(a){return ZD(typeof a=="function"?a:$i(a,u))}function u3(a){return tR($i(a,u))}function h3(a,c){return eR(a,$i(c,u))}var f3=Wt(function(a,c){return function(h){return _u(h,a,c)}}),m3=Wt(function(a,c){return function(h){return _u(a,h,c)}});function y0(a,c,h){var m=Cn(c),g=Gm(c,m);h==null&&!(Ge(c)&&(g.length||!m.length))&&(h=c,c=a,a=this,g=Gm(c,Cn(c)));var b=!(Ge(h)&&"chain"in h)||!!h.chain,w=go(a);return ji(g,function(I){var C=c[I];a[I]=C,w&&(a.prototype[I]=function(){var V=this.__chain__;if(b||V){var B=a(this.__wrapped__),z=B.__actions__=ui(this.__actions__);return z.push({func:C,args:arguments,thisArg:a}),B.__chain__=V,B}return C.apply(a,Qo([this.value()],arguments))})}),a}function p3(){return En._===this&&(En._=Uz),this}function w0(){}function g3(a){return a=Ut(a),Wt(function(c){return nR(c,a)})}var _3=Zy(ze),v3=Zy(ID),b3=Zy(Iy);function y1(a){return o0(a)?Ey(Mr(a)):Y4(a)}function y3(a){return function(c){return a==null?e:oa(a,c)}}var w3=ER(),x3=ER(!0);function x0(){return[]}function I0(){return!1}function I3(){return{}}function E3(){return""}function C3(){return!0}function T3(a,c){if(a=Ut(a),a<1||a>Ko)return[];var h=Dr,m=$n(a,Dr);c=St(c),a-=Dr;for(var g=Sy(m,c);++h<a;)c(h);return g}function S3(a){return Ft(a)?ze(a,Mr):Ii(a)?[a]:ui(jR(fe(a)))}function A3(a){var c=++Bz;return fe(a)+c}var D3=Jm(function(a,c){return a+c},0),R3=Jy("ceil"),k3=Jm(function(a,c){return a/c},1),M3=Jy("floor");function P3(a){return a&&a.length?qm(a,mi,Vy):e}function O3(a,c){return a&&a.length?qm(a,St(c,2),Vy):e}function N3(a){return TD(a,mi)}function F3(a,c){return TD(a,St(c,2))}function L3(a){return a&&a.length?qm(a,mi,zy):e}function V3(a,c){return a&&a.length?qm(a,St(c,2),zy):e}var B3=Jm(function(a,c){return a*c},1),j3=Jy("round"),U3=Jm(function(a,c){return a-c},0);function z3(a){return a&&a.length?Ty(a,mi):0}function $3(a,c){return a&&a.length?Ty(a,St(c,2)):0}return v.after=uH,v.ary=XR,v.assign=ZH,v.assignIn=u1,v.assignInWith=hp,v.assignWith=JH,v.at=tW,v.before=ZR,v.bind=u0,v.bindAll=o3,v.bindKey=JR,v.castArray=IH,v.chain=KR,v.chunk=M$,v.compact=P$,v.concat=O$,v.cond=s3,v.conforms=a3,v.constant=v0,v.countBy=z5,v.create=eW,v.curry=t1,v.curryRight=e1,v.debounce=n1,v.defaults=nW,v.defaultsDeep=iW,v.defer=hH,v.delay=fH,v.difference=N$,v.differenceBy=F$,v.differenceWith=L$,v.drop=V$,v.dropRight=B$,v.dropRightWhile=j$,v.dropWhile=U$,v.fill=z$,v.filter=H5,v.flatMap=G5,v.flatMapDeep=K5,v.flatMapDepth=Y5,v.flatten=HR,v.flattenDeep=$$,v.flattenDepth=H$,v.flip=mH,v.flow=c3,v.flowRight=d3,v.fromPairs=W$,v.functions=dW,v.functionsIn=uW,v.groupBy=Q5,v.initial=G$,v.intersection=K$,v.intersectionBy=Y$,v.intersectionWith=Q$,v.invert=fW,v.invertBy=mW,v.invokeMap=Z5,v.iteratee=b0,v.keyBy=J5,v.keys=Cn,v.keysIn=fi,v.map=sp,v.mapKeys=gW,v.mapValues=_W,v.matches=u3,v.matchesProperty=h3,v.memoize=lp,v.merge=vW,v.mergeWith=h1,v.method=f3,v.methodOf=m3,v.mixin=y0,v.negate=cp,v.nthArg=g3,v.omit=bW,v.omitBy=yW,v.once=pH,v.orderBy=tH,v.over=_3,v.overArgs=gH,v.overEvery=v3,v.overSome=b3,v.partial=h0,v.partialRight=i1,v.partition=eH,v.pick=wW,v.pickBy=f1,v.property=y1,v.propertyOf=y3,v.pull=t5,v.pullAll=qR,v.pullAllBy=e5,v.pullAllWith=n5,v.pullAt=i5,v.range=w3,v.rangeRight=x3,v.rearg=_H,v.reject=rH,v.remove=r5,v.rest=vH,v.reverse=c0,v.sampleSize=sH,v.set=IW,v.setWith=EW,v.shuffle=aH,v.slice=o5,v.sortBy=dH,v.sortedUniq=h5,v.sortedUniqBy=f5,v.split=GW,v.spread=bH,v.tail=m5,v.take=p5,v.takeRight=g5,v.takeRightWhile=_5,v.takeWhile=v5,v.tap=P5,v.throttle=yH,v.thru=op,v.toArray=l1,v.toPairs=m1,v.toPairsIn=p1,v.toPath=S3,v.toPlainObject=d1,v.transform=CW,v.unary=wH,v.union=b5,v.unionBy=y5,v.unionWith=w5,v.uniq=x5,v.uniqBy=I5,v.uniqWith=E5,v.unset=TW,v.unzip=d0,v.unzipWith=GR,v.update=SW,v.updateWith=AW,v.values=Pl,v.valuesIn=DW,v.without=C5,v.words=v1,v.wrap=xH,v.xor=T5,v.xorBy=S5,v.xorWith=A5,v.zip=D5,v.zipObject=R5,v.zipObjectDeep=k5,v.zipWith=M5,v.entries=m1,v.entriesIn=p1,v.extend=u1,v.extendWith=hp,y0(v,v),v.add=D3,v.attempt=b1,v.camelCase=PW,v.capitalize=g1,v.ceil=R3,v.clamp=RW,v.clone=EH,v.cloneDeep=TH,v.cloneDeepWith=SH,v.cloneWith=CH,v.conformsTo=AH,v.deburr=_1,v.defaultTo=l3,v.divide=k3,v.endsWith=OW,v.eq=pr,v.escape=NW,v.escapeRegExp=FW,v.every=$5,v.find=W5,v.findIndex=zR,v.findKey=rW,v.findLast=q5,v.findLastIndex=$R,v.findLastKey=oW,v.floor=M3,v.forEach=YR,v.forEachRight=QR,v.forIn=sW,v.forInRight=aW,v.forOwn=lW,v.forOwnRight=cW,v.get=p0,v.gt=DH,v.gte=RH,v.has=hW,v.hasIn=g0,v.head=WR,v.identity=mi,v.includes=X5,v.indexOf=q$,v.inRange=kW,v.invoke=pW,v.isArguments=la,v.isArray=Ft,v.isArrayBuffer=kH,v.isArrayLike=hi,v.isArrayLikeObject=on,v.isBoolean=MH,v.isBuffer=rs,v.isDate=PH,v.isElement=OH,v.isEmpty=NH,v.isEqual=FH,v.isEqualWith=LH,v.isError=f0,v.isFinite=VH,v.isFunction=go,v.isInteger=r1,v.isLength=dp,v.isMap=o1,v.isMatch=BH,v.isMatchWith=jH,v.isNaN=UH,v.isNative=zH,v.isNil=HH,v.isNull=$H,v.isNumber=s1,v.isObject=Ge,v.isObjectLike=Ze,v.isPlainObject=Iu,v.isRegExp=m0,v.isSafeInteger=WH,v.isSet=a1,v.isString=up,v.isSymbol=Ii,v.isTypedArray=Ml,v.isUndefined=qH,v.isWeakMap=GH,v.isWeakSet=KH,v.join=X$,v.kebabCase=LW,v.last=Wi,v.lastIndexOf=Z$,v.lowerCase=VW,v.lowerFirst=BW,v.lt=YH,v.lte=QH,v.max=P3,v.maxBy=O3,v.mean=N3,v.meanBy=F3,v.min=L3,v.minBy=V3,v.stubArray=x0,v.stubFalse=I0,v.stubObject=I3,v.stubString=E3,v.stubTrue=C3,v.multiply=B3,v.nth=J$,v.noConflict=p3,v.noop=w0,v.now=ap,v.pad=jW,v.padEnd=UW,v.padStart=zW,v.parseInt=$W,v.random=MW,v.reduce=nH,v.reduceRight=iH,v.repeat=HW,v.replace=WW,v.result=xW,v.round=j3,v.runInContext=E,v.sample=oH,v.size=lH,v.snakeCase=qW,v.some=cH,v.sortedIndex=s5,v.sortedIndexBy=a5,v.sortedIndexOf=l5,v.sortedLastIndex=c5,v.sortedLastIndexBy=d5,v.sortedLastIndexOf=u5,v.startCase=KW,v.startsWith=YW,v.subtract=U3,v.sum=z3,v.sumBy=$3,v.template=QW,v.times=T3,v.toFinite=_o,v.toInteger=Ut,v.toLength=c1,v.toLower=XW,v.toNumber=qi,v.toSafeInteger=XH,v.toString=fe,v.toUpper=ZW,v.trim=JW,v.trimEnd=t3,v.trimStart=e3,v.truncate=n3,v.unescape=i3,v.uniqueId=A3,v.upperCase=r3,v.upperFirst=_0,v.each=YR,v.eachRight=QR,v.first=WR,y0(v,function(){var a={};return Rr(v,function(c,h){_e.call(v.prototype,h)||(a[h]=c)}),a}(),{chain:!1}),v.VERSION=t,ji(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){v[a].placeholder=v}),ji(["drop","take"],function(a,c){Xt.prototype[a]=function(h){h=h===e?1:yn(Ut(h),0);var m=this.__filtered__&&!c?new Xt(this):this.clone();return m.__filtered__?m.__takeCount__=$n(h,m.__takeCount__):m.__views__.push({size:$n(h,Dr),type:a+(m.__dir__<0?"Right":"")}),m},Xt.prototype[a+"Right"]=function(h){return this.reverse()[a](h).reverse()}}),ji(["filter","map","takeWhile"],function(a,c){var h=c+1,m=h==HA||h==tU;Xt.prototype[a]=function(g){var b=this.clone();return b.__iteratees__.push({iteratee:St(g,3),type:h}),b.__filtered__=b.__filtered__||m,b}}),ji(["head","last"],function(a,c){var h="take"+(c?"Right":"");Xt.prototype[a]=function(){return this[h](1).value()[0]}}),ji(["initial","tail"],function(a,c){var h="drop"+(c?"":"Right");Xt.prototype[a]=function(){return this.__filtered__?new Xt(this):this[h](1)}}),Xt.prototype.compact=function(){return this.filter(mi)},Xt.prototype.find=function(a){return this.filter(a).head()},Xt.prototype.findLast=function(a){return this.reverse().find(a)},Xt.prototype.invokeMap=Wt(function(a,c){return typeof a=="function"?new Xt(this):this.map(function(h){return _u(h,a,c)})}),Xt.prototype.reject=function(a){return this.filter(cp(St(a)))},Xt.prototype.slice=function(a,c){a=Ut(a);var h=this;return h.__filtered__&&(a>0||c<0)?new Xt(h):(a<0?h=h.takeRight(-a):a&&(h=h.drop(a)),c!==e&&(c=Ut(c),h=c<0?h.dropRight(-c):h.take(c-a)),h)},Xt.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Xt.prototype.toArray=function(){return this.take(Dr)},Rr(Xt.prototype,function(a,c){var h=/^(?:filter|find|map|reject)|While$/.test(c),m=/^(?:head|last)$/.test(c),g=v[m?"take"+(c=="last"?"Right":""):c],b=m||/^find/.test(c);g&&(v.prototype[c]=function(){var w=this.__wrapped__,I=m?[1]:arguments,C=w instanceof Xt,V=I[0],B=C||Ft(w),z=function(Qt){var ee=g.apply(v,Qo([Qt],I));return m&&nt?ee[0]:ee};B&&h&&typeof V=="function"&&V.length!=1&&(C=B=!1);var nt=this.__chain__,mt=!!this.__actions__.length,At=b&&!nt,Ht=C&&!mt;if(!b&&B){w=Ht?w:new Xt(this);var Dt=a.apply(w,I);return Dt.__actions__.push({func:op,args:[z],thisArg:e}),new zi(Dt,nt)}return At&&Ht?a.apply(this,I):(Dt=this.thru(z),At?m?Dt.value()[0]:Dt.value():Dt)})}),ji(["pop","push","shift","sort","splice","unshift"],function(a){var c=km[a],h=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",m=/^(?:pop|shift)$/.test(a);v.prototype[a]=function(){var g=arguments;if(m&&!this.__chain__){var b=this.value();return c.apply(Ft(b)?b:[],g)}return this[h](function(w){return c.apply(Ft(w)?w:[],g)})}}),Rr(Xt.prototype,function(a,c){var h=v[c];if(h){var m=h.name+"";_e.call(Sl,m)||(Sl[m]=[]),Sl[m].push({name:c,func:h})}}),Sl[Zm(e,A).name]=[{name:"wrapper",func:e}],Xt.prototype.clone=i4,Xt.prototype.reverse=r4,Xt.prototype.value=o4,v.prototype.at=O5,v.prototype.chain=N5,v.prototype.commit=F5,v.prototype.next=L5,v.prototype.plant=B5,v.prototype.reverse=j5,v.prototype.toJSON=v.prototype.valueOf=v.prototype.value=U5,v.prototype.first=v.prototype.head,du&&(v.prototype[du]=V5),v},Zo=Fz();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(En._=Zo,define(function(){return Zo})):ta?((ta.exports=Zo)._=Zo,by._=Zo):En._=Zo}).call(Vd)});var G0=class{};var wa=class e{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(i=>{let n=i.indexOf(":");if(n>0){let r=i.slice(0,n),o=r.toLowerCase(),s=i.slice(n+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((i,n)=>{this.setHeaderEntries(n,i)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([i,n])=>{this.setHeaderEntries(i,n)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let i=this.headers.get(t.toLowerCase());return i&&i.length>0?i[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,i){return this.clone({name:t,value:i,op:"a"})}set(t,i){return this.clone({name:t,value:i,op:"s"})}delete(t,i){return this.clone({name:t,value:i,op:"d"})}maybeSetNormalizedName(t,i){this.normalizedNames.has(i)||this.normalizedNames.set(i,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(i=>{this.headers.set(i,t.headers.get(i)),this.normalizedNames.set(i,t.normalizedNames.get(i))})}clone(t){let i=new e;return i.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,i.lazyUpdate=(this.lazyUpdate||[]).concat([t]),i}applyUpdate(t){let i=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if(typeof n=="string"&&(n=[n]),n.length===0)return;this.maybeSetNormalizedName(t.name,i);let r=(t.op==="a"?this.headers.get(i):void 0)||[];r.push(...n),this.headers.set(i,r);break;case"d":let o=t.value;if(!o)this.headers.delete(i),this.normalizedNames.delete(i);else{let s=this.headers.get(i);if(!s)return;s=s.filter(l=>o.indexOf(l)===-1),s.length===0?(this.headers.delete(i),this.normalizedNames.delete(i)):this.headers.set(i,s)}break}}setHeaderEntries(t,i){let n=(Array.isArray(i)?i:[i]).map(o=>o.toString()),r=t.toLowerCase();this.headers.set(r,n),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(i=>t(this.normalizedNames.get(i),this.headers.get(i)))}};var K0=class{encodeKey(t){return kk(t)}encodeValue(t){return kk(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function G3(e,t){let i=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,l]=o==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],d=i.get(s)||[];d.push(l),i.set(s,d)}),i}var K3=/%(\d[a-f0-9])/gi,Y3={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function kk(e){return encodeURIComponent(e).replace(K3,(t,i)=>Y3[i]??t)}function Up(e){return`${e}`}var us=class e{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new K0,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=G3(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(i=>{let n=t.fromObject[i],r=Array.isArray(n)?n.map(Up):[Up(n)];this.map.set(i,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let i=this.map.get(t);return i?i[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,i){return this.clone({param:t,value:i,op:"a"})}appendAll(t){let i=[];return Object.keys(t).forEach(n=>{let r=t[n];Array.isArray(r)?r.forEach(o=>{i.push({param:n,value:o,op:"a"})}):i.push({param:n,value:r,op:"a"})}),this.clone(i)}set(t,i){return this.clone({param:t,value:i,op:"s"})}delete(t,i){return this.clone({param:t,value:i,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let i=this.encoder.encodeKey(t);return this.map.get(t).map(n=>i+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let i=new e({encoder:this.encoder});return i.cloneFrom=this.cloneFrom||this,i.updates=(this.updates||[]).concat(t),i}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let i=(t.op==="a"?this.map.get(t.param):void 0)||[];i.push(Up(t.value)),this.map.set(t.param,i);break;case"d":if(t.value!==void 0){let n=this.map.get(t.param)||[],r=n.indexOf(Up(t.value));r!==-1&&n.splice(r,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Y0=class{constructor(){this.map=new Map}set(t,i){return this.map.set(t,i),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function Q3(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Mk(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function Pk(e){return typeof Blob<"u"&&e instanceof Blob}function Ok(e){return typeof FormData<"u"&&e instanceof FormData}function X3(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var zu=class e{constructor(t,i,n,r){this.url=i,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(Q3(this.method)||r?(this.body=n!==void 0?n:null,o=r):o=n,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new wa,this.context??=new Y0,!this.params)this.params=new us,this.urlWithParams=i;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=i;else{let l=i.indexOf("?"),d=l===-1?"?":l<i.length-1?"&":"";this.urlWithParams=i+d+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Mk(this.body)||Pk(this.body)||Ok(this.body)||X3(this.body)?this.body:this.body instanceof us?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Ok(this.body)?null:Pk(this.body)?this.body.type||null:Mk(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof us?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let i=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,o=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,l=t.withCredentials??this.withCredentials,d=t.reportProgress??this.reportProgress,u=t.headers||this.headers,f=t.params||this.params,p=t.context??this.context;return t.setHeaders!==void 0&&(u=Object.keys(t.setHeaders).reduce((_,y)=>_.set(y,t.setHeaders[y]),u)),t.setParams&&(f=Object.keys(t.setParams).reduce((_,y)=>_.set(y,t.setParams[y]),f)),new e(i,n,s,{params:f,headers:u,context:p,reportProgress:d,responseType:r,withCredentials:l,transferCache:o})}},zk=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(zk||{}),Q0=class{constructor(t,i=$k.Ok,n="OK"){this.headers=t.headers||new wa,this.status=t.status!==void 0?t.status:i,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var $u=class e extends Q0{constructor(t={}){super(t),this.type=zk.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};var $k=function(e){return e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",e}($k||{});function q0(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var Hk=(()=>{let t=class t{constructor(n){this.handler=n}request(n,r,o={}){let s;if(n instanceof zu)s=n;else{let u;o.headers instanceof wa?u=o.headers:u=new wa(o.headers);let f;o.params&&(o.params instanceof us?f=o.params:f=new us({fromObject:o.params})),s=new zu(n,r,o.body!==void 0?o.body:null,{headers:u,context:o.context,params:f,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let l=tt(s).pipe(as(u=>this.handler.handle(u)));if(n instanceof zu||o.observe==="events")return l;let d=l.pipe(me(u=>u instanceof $u));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe(dt(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return d.pipe(dt(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return d.pipe(dt(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return d.pipe(dt(u=>u.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new us().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,o={}){return this.request("PATCH",n,q0(o,r))}post(n,r,o={}){return this.request("POST",n,q0(o,r))}put(n,r,o={}){return this.request("PUT",n,q0(o,r))}};t.\u0275fac=function(r){return new(r||t)(T(G0))},t.\u0275prov=q({token:t,factory:t.\u0275fac});let e=t;return e})();var Z3=new H("");var Nk="b",Fk="h",Lk="s",Vk="st",Bk="u",jk="rt",zp=new H(""),J3=["GET","HEAD"];function tq(e,t){let p=W(zp),{isCacheActive:i}=p,n=x1(p,["isCacheActive"]),{transferCache:r,method:o}=e;if(!i||o==="POST"&&!n.includePostRequests&&!r||o!=="POST"&&!J3.includes(o)||r===!1||n.filter?.(e)===!1)return t(e);let s=W(yp),l=nq(e),d=s.get(l,null),u=n.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(u=r.includeHeaders),d){let{[Nk]:_,[jk]:y,[Fk]:S,[Lk]:A,[Vk]:M,[Bk]:K}=d,ut=_;switch(y){case"arraybuffer":ut=new TextEncoder().encode(_).buffer;break;case"blob":ut=new Blob([_]);break}let Y=new wa(S);return tt(new $u({body:ut,headers:Y,status:A,statusText:M,url:K}))}let f=Eo(W(ri));return t(e).pipe(Me(_=>{_ instanceof $u&&f&&s.set(l,{[Nk]:_.body,[Fk]:eq(_.headers,u),[Lk]:_.status,[Vk]:_.statusText,[Bk]:_.url||"",[jk]:e.responseType})}))}function eq(e,t){if(!t)return{};let i={};for(let n of t){let r=e.getAll(n);r!==null&&(i[n]=r)}return i}function Uk(e){return[...e.keys()].sort().map(t=>`${t}=${e.getAll(t)}`).join("&")}function nq(e){let{params:t,method:i,responseType:n,url:r}=e,o=Uk(t),s=e.serializeBody();s instanceof URLSearchParams?s=Uk(s):typeof s!="string"&&(s="");let l=[i,n,r,s,o].join("|"),d=iq(l);return d}function iq(e){let t=0;for(let i of e)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,t.toString()}function Wk(e){return[{provide:zp,useFactory:()=>(xp("NgHttpTransferCache"),G({isCacheActive:!0},e))},{provide:Z3,useValue:tq,multi:!0,deps:[yp,zp]},{provide:Dp,multi:!0,useFactory:()=>{let t=W(ds),i=W(zp);return()=>{ik(t).then(()=>{i.isCacheActive=!1})}}}]}var J0=class extends uk{constructor(){super(...arguments),this.supportsDOMEvents=!0}},tw=class e extends J0{static makeCurrent(){dk(new e)}onAndCancel(t,i,n){return t.addEventListener(i,n),()=>{t.removeEventListener(i,n)}}dispatchEvent(t,i){t.dispatchEvent(i)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,i){return i=i||this.getDefaultDocument(),i.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,i){return i==="window"?window:i==="document"?t:i==="body"?t.body:null}getBaseHref(t){let i=sq();return i==null?null:aq(i)}resetBaseElement(){Hu=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return j0(document.cookie,t)}},Hu=null;function sq(){return Hu=Hu||document.querySelector("base"),Hu?Hu.getAttribute("href"):null}function aq(e){return new URL(e,document.baseURI).pathname}var ew=class{addToWindow(t){ls.getAngularTestability=(n,r=!0)=>{let o=t.findTestabilityInTree(n,r);if(o==null)throw new ve(5103,!1);return o},ls.getAllAngularTestabilities=()=>t.getAllTestabilities(),ls.getAllAngularRootElements=()=>t.getAllRootElements();let i=n=>{let r=ls.getAllAngularTestabilities(),o=r.length,s=function(){o--,o==0&&n()};r.forEach(l=>{l.whenStable(s)})};ls.frameworkStabilizers||(ls.frameworkStabilizers=[]),ls.frameworkStabilizers.push(i)}findTestabilityInTree(t,i,n){if(i==null)return null;let r=t.getTestability(i);return r??(n?_a().isShadowRoot(i)?this.findTestabilityInTree(t,i.host,!0):this.findTestabilityInTree(t,i.parentElement,!0):null)}},lq=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=q({token:t,factory:t.\u0275fac});let e=t;return e})(),nw=new H(""),Kk=(()=>{let t=class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(o=>{o.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,o){return this._findPluginFor(r).addEventListener(n,r,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new ve(5101,!1);return this._eventNameToPlugin.set(n,r),r}};t.\u0275fac=function(r){return new(r||t)(T(nw),T(Q))},t.\u0275prov=q({token:t,factory:t.\u0275fac});let e=t;return e})(),$p=class{constructor(t){this._doc=t}},X0="ng-app-id",Yk=(()=>{let t=class t{constructor(n,r,o,s={}){this.doc=n,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Eo(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(o=>o.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${X0}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(n,r){let o=this.styleRef;if(o.has(n)){let s=o.get(n);return s.usage+=r,s.usage}return o.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===n)return o.delete(r),s.removeAttribute(X0),s;{let l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(X0,this.appId),n.appendChild(l),l}}addStyleToHost(n,r){let o=this.getStyleElement(n,r),s=this.styleRef,l=s.get(r)?.elements;l?l.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}};t.\u0275fac=function(r){return new(r||t)(T(xt),T(Bl),T(Ru,8),T(ri))},t.\u0275prov=q({token:t,factory:t.\u0275fac});let e=t;return e})(),Z0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ow=/%COMP%/g,Qk="%COMP%",cq=`_nghost-${Qk}`,dq=`_ngcontent-${Qk}`,uq=!0,hq=new H("",{providedIn:"root",factory:()=>uq});function fq(e){return dq.replace(ow,e)}function mq(e){return cq.replace(ow,e)}function Xk(e,t){return t.map(i=>i.replace(ow,e))}var Hp=(()=>{let t=class t{constructor(n,r,o,s,l,d,u,f=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=l,this.platformId=d,this.ngZone=u,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=Eo(d),this.defaultRenderer=new Wu(n,l,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Au.ShadowDom&&(r=xe(G({},r),{encapsulation:Au.Emulated}));let o=this.getOrCreateRenderer(n,r);return o instanceof Wp?o.applyToHost(n):o instanceof qu&&o.applyStyles(),o}getOrCreateRenderer(n,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let l=this.doc,d=this.ngZone,u=this.eventManager,f=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,_=this.platformIsServer;switch(r.encapsulation){case Au.Emulated:s=new Wp(u,f,r,this.appId,p,l,d,_);break;case Au.ShadowDom:return new iw(u,f,n,r,l,d,this.nonce,_);default:s=new qu(u,f,r,p,l,d,_);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(r){return new(r||t)(T(Kk),T(Yk),T(Bl),T(hq),T(xt),T(ri),T(Q),T(Ru))},t.\u0275prov=q({token:t,factory:t.\u0275fac});let e=t;return e})(),Wu=class{constructor(t,i,n,r){this.eventManager=t,this.doc=i,this.ngZone=n,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,i){return i?this.doc.createElementNS(Z0[i]||i,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,i){(qk(t)?t.content:t).appendChild(i)}insertBefore(t,i,n){t&&(qk(t)?t.content:t).insertBefore(i,n)}removeChild(t,i){t&&t.removeChild(i)}selectRootElement(t,i){let n=typeof t=="string"?this.doc.querySelector(t):t;if(!n)throw new ve(-5104,!1);return i||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,i,n,r){if(r){i=r+":"+i;let o=Z0[r];o?t.setAttributeNS(o,i,n):t.setAttribute(i,n)}else t.setAttribute(i,n)}removeAttribute(t,i,n){if(n){let r=Z0[n];r?t.removeAttributeNS(r,i):t.removeAttribute(`${n}:${i}`)}else t.removeAttribute(i)}addClass(t,i){t.classList.add(i)}removeClass(t,i){t.classList.remove(i)}setStyle(t,i,n,r){r&(ku.DashCase|ku.Important)?t.style.setProperty(i,n,r&ku.Important?"important":""):t.style[i]=n}removeStyle(t,i,n){n&ku.DashCase?t.style.removeProperty(i):t.style[i]=""}setProperty(t,i,n){t!=null&&(t[i]=n)}setValue(t,i){t.nodeValue=i}listen(t,i,n){if(typeof t=="string"&&(t=_a().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${i}`);return this.eventManager.addEventListener(t,i,this.decoratePreventDefault(n))}decoratePreventDefault(t){return i=>{if(i==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(i)):t(i))===!1&&i.preventDefault()}}};function qk(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var iw=class extends Wu{constructor(t,i,n,r,o,s,l,d){super(t,o,s,d),this.sharedStylesHost=i,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=Xk(r.id,r.styles);for(let f of u){let p=document.createElement("style");l&&p.setAttribute("nonce",l),p.textContent=f,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,i){return super.appendChild(this.nodeOrShadowRoot(t),i)}insertBefore(t,i,n){return super.insertBefore(this.nodeOrShadowRoot(t),i,n)}removeChild(t,i){return super.removeChild(this.nodeOrShadowRoot(t),i)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},qu=class extends Wu{constructor(t,i,n,r,o,s,l,d){super(t,o,s,l),this.sharedStylesHost=i,this.removeStylesOnCompDestroy=r,this.styles=d?Xk(d,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Wp=class extends qu{constructor(t,i,n,r,o,s,l,d){let u=r+"-"+n.id;super(t,i,n,o,s,l,d,u),this.contentAttr=fq(u),this.hostAttr=mq(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,i){let n=super.createElement(t,i);return super.setAttribute(n,this.contentAttr,""),n}},pq=(()=>{let t=class t extends $p{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o){return n.addEventListener(r,o,!1),()=>this.removeEventListener(n,r,o)}removeEventListener(n,r,o){return n.removeEventListener(r,o)}};t.\u0275fac=function(r){return new(r||t)(T(xt))},t.\u0275prov=q({token:t,factory:t.\u0275fac});let e=t;return e})(),Gk=["alt","control","meta","shift"],gq={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_q={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},vq=(()=>{let t=class t extends $p{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,o){let s=t.parseEventName(r),l=t.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_a().onAndCancel(n,s.domEventName,l))}static parseEventName(n){let r=n.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=t._normalizeKey(r.pop()),l="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),l="code."),Gk.forEach(f=>{let p=r.indexOf(f);p>-1&&(r.splice(p,1),l+=f+".")}),l+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=o,u.fullKey=l,u}static matchEventFullKeyCode(n,r){let o=gq[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(o=n.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),Gk.forEach(l=>{if(l!==o){let d=_q[l];d(n)&&(s+=l+".")}}),s+=o,s===r)}static eventCallback(n,r,o){return s=>{t.matchEventFullKeyCode(s,n)&&o.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}};t.\u0275fac=function(r){return new(r||t)(T(xt))},t.\u0275prov=q({token:t,factory:t.\u0275fac});let e=t;return e})();function bq(){tw.makeCurrent()}function yq(){return new ma}function wq(){return O1(document),document}var xq=[{provide:ri,useValue:gk},{provide:N1,useValue:bq,multi:!0},{provide:xt,useFactory:wq,deps:[]}],Zk=rk(ok,"browser",xq),Iq=new H(""),Eq=[{provide:Tp,useClass:ew,deps:[]},{provide:nk,useClass:Sp,deps:[Q,L0,Tp]},{provide:Sp,useClass:Sp,deps:[Q,L0,Tp]}],Cq=[{provide:M1,useValue:"root"},{provide:ma,useFactory:yq,deps:[]},{provide:nw,useClass:pq,multi:!0,deps:[xt,Q,ri]},{provide:nw,useClass:vq,multi:!0,deps:[xt]},Hp,Yk,Kk,{provide:wp,useExisting:Hp},{provide:bk,useClass:lq,deps:[]},[]],Jk=(()=>{let t=class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Bl,useValue:n.appId}]}}};t.\u0275fac=function(r){return new(r||t)(T(Iq,12))},t.\u0275mod=st({type:t}),t.\u0275inj=ot({providers:[...Cq,...Eq],imports:[Ki,sk]});let e=t;return e})();var tM=(()=>{let t=class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}};t.\u0275fac=function(r){return new(r||t)(T(xt))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var sw=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=q({token:t,factory:function(r){let o=null;return r?o=new(r||t):o=T(Tq),o},providedIn:"root"});let e=t;return e})(),Tq=(()=>{let t=class t extends sw{constructor(n){super(),this._doc=n}sanitize(n,r){if(r==null)return null;switch(n){case Si.NONE:return r;case Si.HTML:return Ul(r,"HTML")?jl(r):z1(this._doc,String(r)).toString();case Si.STYLE:return Ul(r,"Style")?jl(r):r;case Si.SCRIPT:if(Ul(r,"Script"))return jl(r);throw new ve(5200,!1);case Si.URL:return Ul(r,"URL")?jl(r):U1(String(r));case Si.RESOURCE_URL:if(Ul(r,"ResourceURL"))return jl(r);throw new ve(5201,!1);default:throw new ve(5202,!1)}}bypassSecurityTrustHtml(n){return F1(n)}bypassSecurityTrustStyle(n){return L1(n)}bypassSecurityTrustScript(n){return V1(n)}bypassSecurityTrustUrl(n){return B1(n)}bypassSecurityTrustResourceUrl(n){return j1(n)}};t.\u0275fac=function(r){return new(r||t)(T(xt))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),rw=function(e){return e[e.NoHttpTransferCache=0]="NoHttpTransferCache",e[e.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",e}(rw||{});function eM(...e){let t=[],i=new Set,n=i.has(rw.HttpTransferCacheOptions);for(let{\u0275providers:r,\u0275kind:o}of e)i.add(o),r.length&&t.push(r);return Ll([[],ak(),i.has(rw.NoHttpTransferCache)||n?[]:Wk({}),t])}var $t="primary",lh=Symbol("RouteTitle"),hw=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let i=this.params[t];return Array.isArray(i)?i[0]:i}return null}getAll(t){if(this.has(t)){let i=this.params[t];return Array.isArray(i)?i:[i]}return[]}get keys(){return Object.keys(this.params)}};function ic(e){return new hw(e)}function Sq(e,t,i){let n=i.path.split("/");if(n.length>e.length||i.pathMatch==="full"&&(t.hasChildren()||n.length<e.length))return null;let r={};for(let o=0;o<n.length;o++){let s=n[o],l=e[o];if(s.startsWith(":"))r[s.substring(1)]=l;else if(s!==l.path)return null}return{consumed:e.slice(0,n.length),posParams:r}}function Aq(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(!jr(e[i],t[i]))return!1;return!0}function jr(e,t){let i=e?fw(e):void 0,n=t?fw(t):void 0;if(!i||!n||i.length!=n.length)return!1;let r;for(let o=0;o<i.length;o++)if(r=i[o],!dM(e[r],t[r]))return!1;return!0}function fw(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function dM(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let i=[...e].sort(),n=[...t].sort();return i.every((r,o)=>n[o]===r)}else return e===t}function uM(e){return e.length>0?e[e.length-1]:null}function ps(e){return Ol(e)?e:Ap(e)?Re(Promise.resolve(e)):tt(e)}var Dq={exact:fM,subset:mM},hM={exact:Rq,subset:kq,ignored:()=>!0};function nM(e,t,i){return Dq[i.paths](e.root,t.root,i.matrixParams)&&hM[i.queryParams](e.queryParams,t.queryParams)&&!(i.fragment==="exact"&&e.fragment!==t.fragment)}function Rq(e,t){return jr(e,t)}function fM(e,t,i){if(!Ia(e.segments,t.segments)||!Kp(e.segments,t.segments,i)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let n in t.children)if(!e.children[n]||!fM(e.children[n],t.children[n],i))return!1;return!0}function kq(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(i=>dM(e[i],t[i]))}function mM(e,t,i){return pM(e,t,t.segments,i)}function pM(e,t,i,n){if(e.segments.length>i.length){let r=e.segments.slice(0,i.length);return!(!Ia(r,i)||t.hasChildren()||!Kp(r,i,n))}else if(e.segments.length===i.length){if(!Ia(e.segments,i)||!Kp(e.segments,i,n))return!1;for(let r in t.children)if(!e.children[r]||!mM(e.children[r],t.children[r],n))return!1;return!0}else{let r=i.slice(0,e.segments.length),o=i.slice(e.segments.length);return!Ia(e.segments,r)||!Kp(e.segments,r,n)||!e.children[$t]?!1:pM(e.children[$t],t,o,n)}}function Kp(e,t,i){return t.every((n,r)=>hM[i](e[r].parameters,n.parameters))}var hs=class{constructor(t=new ge([],{}),i={},n=null){this.root=t,this.queryParams=i,this.fragment=n}get queryParamMap(){return this._queryParamMap??=ic(this.queryParams),this._queryParamMap}toString(){return Oq.serialize(this)}},ge=class{constructor(t,i){this.segments=t,this.children=i,this.parent=null,Object.values(i).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yp(this)}},xa=class{constructor(t,i){this.path=t,this.parameters=i}get parameterMap(){return this._parameterMap??=ic(this.parameters),this._parameterMap}toString(){return _M(this)}};function Mq(e,t){return Ia(e,t)&&e.every((i,n)=>jr(i.parameters,t[n].parameters))}function Ia(e,t){return e.length!==t.length?!1:e.every((i,n)=>i.path===t[n].path)}function Pq(e,t){let i=[];return Object.entries(e.children).forEach(([n,r])=>{n===$t&&(i=i.concat(t(r,n)))}),Object.entries(e.children).forEach(([n,r])=>{n!==$t&&(i=i.concat(t(r,n)))}),i}var ch=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=q({token:t,factory:()=>new Ju,providedIn:"root"});let e=t;return e})(),Ju=class{parse(t){let i=new pw(t);return new hs(i.parseRootSegment(),i.parseQueryParams(),i.parseFragment())}serialize(t){let i=`/${Gu(t.root,!0)}`,n=Lq(t.queryParams),r=typeof t.fragment=="string"?`#${Nq(t.fragment)}`:"";return`${i}${n}${r}`}},Oq=new Ju;function Yp(e){return e.segments.map(t=>_M(t)).join("/")}function Gu(e,t){if(!e.hasChildren())return Yp(e);if(t){let i=e.children[$t]?Gu(e.children[$t],!1):"",n=[];return Object.entries(e.children).forEach(([r,o])=>{r!==$t&&n.push(`${r}:${Gu(o,!1)}`)}),n.length>0?`${i}(${n.join("//")})`:i}else{let i=Pq(e,(n,r)=>r===$t?[Gu(e.children[$t],!1)]:[`${r}:${Gu(n,!1)}`]);return Object.keys(e.children).length===1&&e.children[$t]!=null?`${Yp(e)}/${i[0]}`:`${Yp(e)}/(${i.join("//")})`}}function gM(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qp(e){return gM(e).replace(/%3B/gi,";")}function Nq(e){return encodeURI(e)}function mw(e){return gM(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qp(e){return decodeURIComponent(e)}function iM(e){return Qp(e.replace(/\+/g,"%20"))}function _M(e){return`${mw(e.path)}${Fq(e.parameters)}`}function Fq(e){return Object.entries(e).map(([t,i])=>`;${mw(t)}=${mw(i)}`).join("")}function Lq(e){let t=Object.entries(e).map(([i,n])=>Array.isArray(n)?n.map(r=>`${qp(i)}=${qp(r)}`).join("&"):`${qp(i)}=${qp(n)}`).filter(i=>i);return t.length?`?${t.join("&")}`:""}var Vq=/^[^\/()?;#]+/;function lw(e){let t=e.match(Vq);return t?t[0]:""}var Bq=/^[^\/()?;=#]+/;function jq(e){let t=e.match(Bq);return t?t[0]:""}var Uq=/^[^=?&#]+/;function zq(e){let t=e.match(Uq);return t?t[0]:""}var $q=/^[^&#]+/;function Hq(e){let t=e.match($q);return t?t[0]:""}var pw=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ge([],{}):new ge([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let i={};this.peekStartsWith("/(")&&(this.capture("/"),i=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(i).length>0)&&(n[$t]=new ge(t,i)),n}parseSegment(){let t=lw(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new ve(4009,!1);return this.capture(t),new xa(Qp(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let i=jq(this.remaining);if(!i)return;this.capture(i);let n="";if(this.consumeOptional("=")){let r=lw(this.remaining);r&&(n=r,this.capture(n))}t[Qp(i)]=Qp(n)}parseQueryParam(t){let i=zq(this.remaining);if(!i)return;this.capture(i);let n="";if(this.consumeOptional("=")){let s=Hq(this.remaining);s&&(n=s,this.capture(n))}let r=iM(i),o=iM(n);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){let i={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=lw(this.remaining),r=this.remaining[n.length];if(r!=="/"&&r!==")"&&r!==";")throw new ve(4010,!1);let o;n.indexOf(":")>-1?(o=n.slice(0,n.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=$t);let s=this.parseChildren();i[o]=Object.keys(s).length===1?s[$t]:new ge([],s),this.consumeOptional("//")}return i}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new ve(4011,!1)}};function vM(e){return e.segments.length>0?new ge([],{[$t]:e}):e}function bM(e){let t={};for(let[n,r]of Object.entries(e.children)){let o=bM(r);if(n===$t&&o.segments.length===0&&o.hasChildren())for(let[s,l]of Object.entries(o.children))t[s]=l;else(o.segments.length>0||o.hasChildren())&&(t[n]=o)}let i=new ge(e.segments,t);return Wq(i)}function Wq(e){if(e.numberOfChildren===1&&e.children[$t]){let t=e.children[$t];return new ge(e.segments.concat(t.segments),t.children)}return e}function rc(e){return e instanceof hs}function qq(e,t,i=null,n=null){let r=yM(e);return wM(r,t,i,n)}function yM(e){let t;function i(o){let s={};for(let d of o.children){let u=i(d);s[d.outlet]=u}let l=new ge(o.url,s);return o===e&&(t=l),l}let n=i(e.root),r=vM(n);return t??r}function wM(e,t,i,n){let r=e;for(;r.parent;)r=r.parent;if(t.length===0)return cw(r,r,r,i,n);let o=Gq(t);if(o.toRoot())return cw(r,r,new ge([],{}),i,n);let s=Kq(o,r,e),l=s.processChildren?Qu(s.segmentGroup,s.index,o.commands):IM(s.segmentGroup,s.index,o.commands);return cw(r,s.segmentGroup,l,i,n)}function Xp(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function th(e){return typeof e=="object"&&e!=null&&e.outlets}function cw(e,t,i,n,r){let o={};n&&Object.entries(n).forEach(([d,u])=>{o[d]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`});let s;e===t?s=i:s=xM(e,t,i);let l=vM(bM(s));return new hs(l,o,r)}function xM(e,t,i){let n={};return Object.entries(e.children).forEach(([r,o])=>{o===t?n[r]=i:n[r]=xM(o,t,i)}),new ge(e.segments,n)}var Zp=class{constructor(t,i,n){if(this.isAbsolute=t,this.numberOfDoubleDots=i,this.commands=n,t&&n.length>0&&Xp(n[0]))throw new ve(4003,!1);let r=n.find(th);if(r&&r!==uM(n))throw new ve(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Gq(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Zp(!0,0,e);let t=0,i=!1,n=e.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let l={};return Object.entries(o.outlets).forEach(([d,u])=>{l[d]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:l}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((l,d)=>{d==0&&l==="."||(d==0&&l===""?i=!0:l===".."?t++:l!=""&&r.push(l))}),r):[...r,o]},[]);return new Zp(i,t,n)}var ec=class{constructor(t,i,n){this.segmentGroup=t,this.processChildren=i,this.index=n}};function Kq(e,t,i){if(e.isAbsolute)return new ec(t,!0,0);if(!i)return new ec(t,!1,NaN);if(i.parent===null)return new ec(i,!0,0);let n=Xp(e.commands[0])?0:1,r=i.segments.length-1+n;return Yq(i,r,e.numberOfDoubleDots)}function Yq(e,t,i){let n=e,r=t,o=i;for(;o>r;){if(o-=r,n=n.parent,!n)throw new ve(4005,!1);r=n.segments.length}return new ec(n,!1,r-o)}function Qq(e){return th(e[0])?e[0].outlets:{[$t]:e}}function IM(e,t,i){if(e??=new ge([],{}),e.segments.length===0&&e.hasChildren())return Qu(e,t,i);let n=Xq(e,t,i),r=i.slice(n.commandIndex);if(n.match&&n.pathIndex<e.segments.length){let o=new ge(e.segments.slice(0,n.pathIndex),{});return o.children[$t]=new ge(e.segments.slice(n.pathIndex),e.children),Qu(o,0,r)}else return n.match&&r.length===0?new ge(e.segments,{}):n.match&&!e.hasChildren()?gw(e,t,i):n.match?Qu(e,0,r):gw(e,t,i)}function Qu(e,t,i){if(i.length===0)return new ge(e.segments,{});{let n=Qq(i),r={};if(Object.keys(n).some(o=>o!==$t)&&e.children[$t]&&e.numberOfChildren===1&&e.children[$t].segments.length===0){let o=Qu(e.children[$t],t,i);return new ge(e.segments,o.children)}return Object.entries(n).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=IM(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{n[o]===void 0&&(r[o]=s)}),new ge(e.segments,r)}}function Xq(e,t,i){let n=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(n>=i.length)return o;let s=e.segments[r],l=i[n];if(th(l))break;let d=`${l}`,u=n<i.length-1?i[n+1]:null;if(r>0&&d===void 0)break;if(d&&u&&typeof u=="object"&&u.outlets===void 0){if(!oM(d,u,s))return o;n+=2}else{if(!oM(d,{},s))return o;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}function gw(e,t,i){let n=e.segments.slice(0,t),r=0;for(;r<i.length;){let o=i[r];if(th(o)){let d=Zq(o.outlets);return new ge(n,d)}if(r===0&&Xp(i[0])){let d=e.segments[t];n.push(new xa(d.path,rM(i[0]))),r++;continue}let s=th(o)?o.outlets[$t]:`${o}`,l=r<i.length-1?i[r+1]:null;s&&l&&Xp(l)?(n.push(new xa(s,rM(l))),r+=2):(n.push(new xa(s,{})),r++)}return new ge(n,{})}function Zq(e){let t={};return Object.entries(e).forEach(([i,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(t[i]=gw(new ge([],{}),0,n))}),t}function rM(e){let t={};return Object.entries(e).forEach(([i,n])=>t[i]=`${n}`),t}function oM(e,t,i){return e==i.path&&jr(t,i.parameters)}var Xu="imperative",kn=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(kn||{}),Qi=class{constructor(t,i){this.id=t,this.url=i}},oc=class extends Qi{constructor(t,i,n="imperative",r=null){super(t,i),this.type=kn.NavigationStart,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ur=class extends Qi{constructor(t,i,n){super(t,i),this.urlAfterRedirects=n,this.type=kn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Di=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(Di||{}),Jp=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Jp||{}),fs=class extends Qi{constructor(t,i,n,r){super(t,i),this.reason=n,this.code=r,this.type=kn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ms=class extends Qi{constructor(t,i,n,r){super(t,i),this.reason=n,this.code=r,this.type=kn.NavigationSkipped}},eh=class extends Qi{constructor(t,i,n,r){super(t,i),this.error=n,this.target=r,this.type=kn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},tg=class extends Qi{constructor(t,i,n,r){super(t,i),this.urlAfterRedirects=n,this.state=r,this.type=kn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_w=class extends Qi{constructor(t,i,n,r){super(t,i),this.urlAfterRedirects=n,this.state=r,this.type=kn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vw=class extends Qi{constructor(t,i,n,r,o){super(t,i),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=o,this.type=kn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},bw=class extends Qi{constructor(t,i,n,r){super(t,i),this.urlAfterRedirects=n,this.state=r,this.type=kn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yw=class extends Qi{constructor(t,i,n,r){super(t,i),this.urlAfterRedirects=n,this.state=r,this.type=kn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ww=class{constructor(t){this.route=t,this.type=kn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},xw=class{constructor(t){this.route=t,this.type=kn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Iw=class{constructor(t){this.snapshot=t,this.type=kn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ew=class{constructor(t){this.snapshot=t,this.type=kn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cw=class{constructor(t){this.snapshot=t,this.type=kn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tw=class{constructor(t){this.snapshot=t,this.type=kn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},eg=class{constructor(t,i,n){this.routerEvent=t,this.position=i,this.anchor=n,this.type=kn.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},nh=class{},ih=class{constructor(t){this.url=t}};var Sw=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new dh,this.attachRef=null}},dh=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){let o=this.getOrCreateContext(n);o.outlet=r,this.contexts.set(n,o)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Sw,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),ng=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let i=this.pathFromRoot(t);return i.length>1?i[i.length-2]:null}children(t){let i=Aw(t,this._root);return i?i.children.map(n=>n.value):[]}firstChild(t){let i=Aw(t,this._root);return i&&i.children.length>0?i.children[0].value:null}siblings(t){let i=Dw(t,this._root);return i.length<2?[]:i[i.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Dw(t,this._root).map(i=>i.value)}};function Aw(e,t){if(e===t.value)return t;for(let i of t.children){let n=Aw(e,i);if(n)return n}return null}function Dw(e,t){if(e===t.value)return[t];for(let i of t.children){let n=Dw(e,i);if(n.length)return n.unshift(t),n}return[]}var Ai=class{constructor(t,i){this.value=t,this.children=i}toString(){return`TreeNode(${this.value})`}};function tc(e){let t={};return e&&e.children.forEach(i=>t[i.value.outlet]=i),t}var ig=class extends ng{constructor(t,i){super(t),this.snapshot=i,Bw(this,t)}toString(){return this.snapshot.toString()}};function EM(e){let t=Jq(e),i=new Je([new xa("",{})]),n=new Je({}),r=new Je({}),o=new Je({}),s=new Je(""),l=new To(i,n,o,s,r,$t,e,t.root);return l.snapshot=t.root,new ig(new Ai(l,[]),t)}function Jq(e){let t={},i={},n={},r="",o=new rh([],t,n,r,i,$t,e,null,{});return new rg("",new Ai(o,[]))}var To=class{constructor(t,i,n,r,o,s,l,d){this.urlSubject=t,this.paramsSubject=i,this.queryParamsSubject=n,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=l,this._futureSnapshot=d,this.title=this.dataSubject?.pipe(dt(u=>u[lh]))??tt(void 0),this.url=t,this.params=i,this.queryParams=n,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(dt(t=>ic(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(dt(t=>ic(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Vw(e,t,i="emptyOnly"){let n,{routeConfig:r}=e;return t!==null&&(i==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?n={params:G(G({},t.params),e.params),data:G(G({},t.data),e.data),resolve:G(G(G(G({},e.data),t.data),r?.data),e._resolvedData)}:n={params:G({},e.params),data:G({},e.data),resolve:G(G({},e.data),e._resolvedData??{})},r&&TM(r)&&(n.resolve[lh]=r.title),n}var rh=class{get title(){return this.data?.[lh]}constructor(t,i,n,r,o,s,l,d,u){this.url=t,this.params=i,this.queryParams=n,this.fragment=r,this.data=o,this.outlet=s,this.component=l,this.routeConfig=d,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ic(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ic(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(n=>n.toString()).join("/"),i=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${i}')`}},rg=class extends ng{constructor(t,i){super(i),this.url=t,Bw(this,i)}toString(){return CM(this._root)}};function Bw(e,t){t.value._routerState=e,t.children.forEach(i=>Bw(e,i))}function CM(e){let t=e.children.length>0?` { ${e.children.map(CM).join(", ")} } `:"";return`${e.value}${t}`}function dw(e){if(e.snapshot){let t=e.snapshot,i=e._futureSnapshot;e.snapshot=i,jr(t.queryParams,i.queryParams)||e.queryParamsSubject.next(i.queryParams),t.fragment!==i.fragment&&e.fragmentSubject.next(i.fragment),jr(t.params,i.params)||e.paramsSubject.next(i.params),Aq(t.url,i.url)||e.urlSubject.next(i.url),jr(t.data,i.data)||e.dataSubject.next(i.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Rw(e,t){let i=jr(e.params,t.params)&&Mq(e.url,t.url),n=!e.parent!=!t.parent;return i&&!n&&(!e.parent||Rw(e.parent,t.parent))}function TM(e){return typeof e.title=="string"||e.title===null}var jw=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=$t,this.activateEvents=new qt,this.deactivateEvents=new qt,this.attachEvents=new qt,this.detachEvents=new qt,this.parentContexts=W(dh),this.location=W(Vn),this.changeDetector=W(Oe),this.environmentInjector=W(Vl),this.inputBinder=W(cg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:o}=n.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ve(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ve(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ve(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new ve(4013,!1);this._activatedRoute=n;let o=this.location,l=n.snapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,u=new kw(n,d,o.injector);this.activated=o.createComponent(l,{index:o.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=X({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[hn]});let e=t;return e})(),kw=class{constructor(t,i,n){this.route=t,this.childContexts=i,this.parent=n,this.__ngOutletInjector=!0}get(t,i){return t===To?this.route:t===dh?this.childContexts:this.parent.get(t,i)}},cg=new H(""),sM=(()=>{let t=class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,o=Or([r.queryParams,r.params,r.data]).pipe(ke(([s,l,d],u)=>(d=G(G(G({},s),l),d),u===0?tt(d):Promise.resolve(d)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let l=ck(r.component);if(!l){this.unsubscribeFromRouteData(n);return}for(let{templateName:d}of l.inputs)n.activatedComponentRef.setInput(d,s[d])});this.outletDataSubscriptions.set(n,o)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=q({token:t,factory:t.\u0275fac});let e=t;return e})();function tG(e,t,i){let n=oh(e,t._root,i?i._root:void 0);return new ig(n,t)}function oh(e,t,i){if(i&&e.shouldReuseRoute(t.value,i.value.snapshot)){let n=i.value;n._futureSnapshot=t.value;let r=eG(e,t,i);return new Ai(n,r)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(l=>oh(e,l)),s}}let n=nG(t.value),r=t.children.map(o=>oh(e,o));return new Ai(n,r)}}function eG(e,t,i){return t.children.map(n=>{for(let r of i.children)if(e.shouldReuseRoute(n.value,r.value.snapshot))return oh(e,n,r);return oh(e,n)})}function nG(e){return new To(new Je(e.url),new Je(e.params),new Je(e.queryParams),new Je(e.fragment),new Je(e.data),e.outlet,e.component,e)}var SM="ngNavigationCancelingError";function AM(e,t){let{redirectTo:i,navigationBehaviorOptions:n}=rc(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=DM(!1,Di.Redirect);return r.url=i,r.navigationBehaviorOptions=n,r}function DM(e,t){let i=new Error(`NavigationCancelingError: ${e||""}`);return i[SM]=!0,i.cancellationCode=t,i}function iG(e){return RM(e)&&rc(e.url)}function RM(e){return!!e&&e[SM]}var rG=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=ft({type:t,selectors:[["ng-component"]],standalone:!0,features:[zt],decls:1,vars:0,template:function(r,o){r&1&&ht(0,"router-outlet")},dependencies:[jw],encapsulation:2});let e=t;return e})();function oG(e,t){return e.providers&&!e._injector&&(e._injector=N0(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Uw(e){let t=e.children&&e.children.map(Uw),i=t?xe(G({},e),{children:t}):G({},e);return!i.component&&!i.loadComponent&&(t||i.loadChildren)&&i.outlet&&i.outlet!==$t&&(i.component=rG),i}function zr(e){return e.outlet||$t}function sG(e,t){let i=e.filter(n=>zr(n)===t);return i.push(...e.filter(n=>zr(n)!==t)),i}function uh(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let i=t.routeConfig;if(i?._loadedInjector)return i._loadedInjector;if(i?._injector)return i._injector}return null}var aG=(e,t,i,n)=>dt(r=>(new Mw(t,r.targetRouterState,r.currentRouterState,i,n).activate(e),r)),Mw=class{constructor(t,i,n,r,o){this.routeReuseStrategy=t,this.futureState=i,this.currState=n,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){let i=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(i,n,t),dw(this.futureState.root),this.activateChildRoutes(i,n,t)}deactivateChildRoutes(t,i,n){let r=tc(i);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],n),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,n)})}deactivateRoutes(t,i,n){let r=t.value,o=i?i.value:null;if(r===o)if(r.component){let s=n.getContext(r.outlet);s&&this.deactivateChildRoutes(t,i,s.children)}else this.deactivateChildRoutes(t,i,n);else o&&this.deactivateRouteAndItsChildren(i,n)}deactivateRouteAndItsChildren(t,i){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,i):this.deactivateRouteAndOutlet(t,i)}detachAndStoreRouteSubtree(t,i){let n=i.getContext(t.value.outlet),r=n&&t.value.component?n.children:i,o=tc(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(n&&n.outlet){let s=n.outlet.detach(),l=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:l})}}deactivateRouteAndOutlet(t,i){let n=i.getContext(t.value.outlet),r=n&&t.value.component?n.children:i,o=tc(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(t,i,n){let r=tc(i);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],n),this.forwardEvent(new Tw(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Ew(t.value.snapshot))}activateRoutes(t,i,n){let r=t.value,o=i?i.value:null;if(dw(r),r===o)if(r.component){let s=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,i,s.children)}else this.activateChildRoutes(t,i,n);else if(r.component){let s=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let l=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(l.contexts),s.attachRef=l.componentRef,s.route=l.route.value,s.outlet&&s.outlet.attach(l.componentRef,l.route.value),dw(l.route.value),this.activateChildRoutes(t,null,s.children)}else{let l=uh(r.snapshot);s.attachRef=null,s.route=r,s.injector=l,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,n)}},og=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},nc=class{constructor(t,i){this.component=t,this.route=i}};function lG(e,t,i){let n=e._root,r=t?t._root:null;return Ku(n,r,i,[n.value])}function cG(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function ac(e,t){let i=Symbol(),n=t.get(e,i);return n===i?typeof e=="function"&&!k1(e)?e:t.get(e):n}function Ku(e,t,i,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=tc(t);return e.children.forEach(s=>{dG(s,o[s.value.outlet],i,n.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,l])=>Zu(l,i.getContext(s),r)),r}function dG(e,t,i,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,l=i?i.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let d=uG(s,o,o.routeConfig.runGuardsAndResolvers);d?r.canActivateChecks.push(new og(n)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ku(e,t,l?l.children:null,n,r):Ku(e,t,i,n,r),d&&l&&l.outlet&&l.outlet.isActivated&&r.canDeactivateChecks.push(new nc(l.outlet.component,s))}else s&&Zu(t,l,r),r.canActivateChecks.push(new og(n)),o.component?Ku(e,null,l?l.children:null,n,r):Ku(e,null,i,n,r);return r}function uG(e,t,i){if(typeof i=="function")return i(e,t);switch(i){case"pathParamsChange":return!Ia(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Ia(e.url,t.url)||!jr(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Rw(e,t)||!jr(e.queryParams,t.queryParams);case"paramsChange":default:return!Rw(e,t)}}function Zu(e,t,i){let n=tc(e),r=e.value;Object.entries(n).forEach(([o,s])=>{r.component?t?Zu(s,t.children.getContext(o),i):Zu(s,null,i):Zu(s,t,i)}),r.component?t&&t.outlet&&t.outlet.isActivated?i.canDeactivateChecks.push(new nc(t.outlet.component,r)):i.canDeactivateChecks.push(new nc(null,r)):i.canDeactivateChecks.push(new nc(null,r))}function hh(e){return typeof e=="function"}function hG(e){return typeof e=="boolean"}function fG(e){return e&&hh(e.canLoad)}function mG(e){return e&&hh(e.canActivate)}function pG(e){return e&&hh(e.canActivateChild)}function gG(e){return e&&hh(e.canDeactivate)}function _G(e){return e&&hh(e.canMatch)}function kM(e){return e instanceof T1||e?.name==="EmptyError"}var Gp=Symbol("INITIAL_VALUE");function sc(){return ke(e=>Or(e.map(t=>t.pipe($e(1),qn(Gp)))).pipe(dt(t=>{for(let i of t)if(i!==!0){if(i===Gp)return Gp;if(i===!1||i instanceof hs)return i}return!0}),me(t=>t!==Gp),$e(1)))}function vG(e,t){return Ti(i=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=i;return s.length===0&&o.length===0?tt(xe(G({},i),{guardsResult:!0})):bG(s,n,r,e).pipe(Ti(l=>l&&hG(l)?yG(n,o,e,t):tt(l)),dt(l=>xe(G({},i),{guardsResult:l})))})}function bG(e,t,i,n){return Re(e).pipe(Ti(r=>CG(r.component,r.route,i,t,n)),Nr(r=>r!==!0,!0))}function yG(e,t,i,n){return Re(t).pipe(as(r=>gp(xG(r.route.parent,n),wG(r.route,n),EG(e,r.path,i),IG(e,r.route,i))),Nr(r=>r!==!0,!0))}function wG(e,t){return e!==null&&t&&t(new Cw(e)),tt(!0)}function xG(e,t){return e!==null&&t&&t(new Iw(e)),tt(!0)}function IG(e,t,i){let n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||n.length===0)return tt(!0);let r=n.map(o=>Cu(()=>{let s=uh(t)??i,l=ac(o,s),d=mG(l)?l.canActivate(t,e):bo(s,()=>l(t,e));return ps(d).pipe(Nr())}));return tt(r).pipe(sc())}function EG(e,t,i){let n=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>cG(s)).filter(s=>s!==null).map(s=>Cu(()=>{let l=s.guards.map(d=>{let u=uh(s.node)??i,f=ac(d,u),p=pG(f)?f.canActivateChild(n,e):bo(u,()=>f(n,e));return ps(p).pipe(Nr())});return tt(l).pipe(sc())}));return tt(o).pipe(sc())}function CG(e,t,i,n,r){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return tt(!0);let s=o.map(l=>{let d=uh(t)??r,u=ac(l,d),f=gG(u)?u.canDeactivate(e,t,i,n):bo(d,()=>u(e,t,i,n));return ps(f).pipe(Nr())});return tt(s).pipe(sc())}function TG(e,t,i,n){let r=t.canLoad;if(r===void 0||r.length===0)return tt(!0);let o=r.map(s=>{let l=ac(s,e),d=fG(l)?l.canLoad(t,i):bo(e,()=>l(t,i));return ps(d)});return tt(o).pipe(sc(),MM(n))}function MM(e){return E1(Me(t=>{if(rc(t))throw AM(e,t)}),dt(t=>t===!0))}function SG(e,t,i,n){let r=t.canMatch;if(!r||r.length===0)return tt(!0);let o=r.map(s=>{let l=ac(s,e),d=_G(l)?l.canMatch(t,i):bo(e,()=>l(t,i));return ps(d)});return tt(o).pipe(sc(),MM(n))}var sh=class{constructor(t){this.segmentGroup=t||null}},sg=class extends Error{constructor(t){super(),this.urlTree=t}};function Jl(e){return da(new sh(e))}function AG(e){return da(new ve(4e3,!1))}function DG(e){return da(DM(!1,Di.GuardRejected))}var Pw=class{constructor(t,i){this.urlSerializer=t,this.urlTree=i}lineralizeSegments(t,i){let n=[],r=i.root;for(;;){if(n=n.concat(r.segments),r.numberOfChildren===0)return tt(n);if(r.numberOfChildren>1||!r.children[$t])return AG(t.redirectTo);r=r.children[$t]}}applyRedirectCommands(t,i,n){let r=this.applyRedirectCreateUrlTree(i,this.urlSerializer.parse(i),t,n);if(i.startsWith("/"))throw new sg(r);return r}applyRedirectCreateUrlTree(t,i,n,r){let o=this.createSegmentGroup(t,i.root,n,r);return new hs(o,this.createQueryParams(i.queryParams,this.urlTree.queryParams),i.fragment)}createQueryParams(t,i){let n={};return Object.entries(t).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let l=o.substring(1);n[r]=i[l]}else n[r]=o}),n}createSegmentGroup(t,i,n,r){let o=this.createSegments(t,i.segments,n,r),s={};return Object.entries(i.children).forEach(([l,d])=>{s[l]=this.createSegmentGroup(t,d,n,r)}),new ge(o,s)}createSegments(t,i,n,r){return i.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,r):this.findOrReturn(o,n))}findPosParam(t,i,n){let r=n[i.path.substring(1)];if(!r)throw new ve(4001,!1);return r}findOrReturn(t,i){let n=0;for(let r of i){if(r.path===t.path)return i.splice(n),r;n++}return t}},Ow={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function RG(e,t,i,n,r){let o=zw(e,t,i);return o.matched?(n=oG(t,n),SG(n,t,i,r).pipe(dt(s=>s===!0?o:G({},Ow)))):tt(o)}function zw(e,t,i){if(t.path==="**")return kG(i);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||i.length>0)?G({},Ow):{matched:!0,consumedSegments:[],remainingSegments:i,parameters:{},positionalParamSegments:{}};let r=(t.matcher||Sq)(i,e,t);if(!r)return G({},Ow);let o={};Object.entries(r.posParams??{}).forEach(([l,d])=>{o[l]=d.path});let s=r.consumed.length>0?G(G({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:i.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function kG(e){return{matched:!0,parameters:e.length>0?uM(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function aM(e,t,i,n){return i.length>0&&OG(e,i,n)?{segmentGroup:new ge(t,PG(n,new ge(i,e.children))),slicedSegments:[]}:i.length===0&&NG(e,i,n)?{segmentGroup:new ge(e.segments,MG(e,i,n,e.children)),slicedSegments:i}:{segmentGroup:new ge(e.segments,e.children),slicedSegments:i}}function MG(e,t,i,n){let r={};for(let o of i)if(dg(e,t,o)&&!n[zr(o)]){let s=new ge([],{});r[zr(o)]=s}return G(G({},n),r)}function PG(e,t){let i={};i[$t]=t;for(let n of e)if(n.path===""&&zr(n)!==$t){let r=new ge([],{});i[zr(n)]=r}return i}function OG(e,t,i){return i.some(n=>dg(e,t,n)&&zr(n)!==$t)}function NG(e,t,i){return i.some(n=>dg(e,t,n))}function dg(e,t,i){return(e.hasChildren()||t.length>0)&&i.pathMatch==="full"?!1:i.path===""}function FG(e,t,i,n){return zr(e)!==n&&(n===$t||!dg(t,i,e))?!1:zw(t,e,i).matched}function LG(e,t,i){return t.length===0&&!e.children[i]}var Nw=class{};function VG(e,t,i,n,r,o,s="emptyOnly"){return new Fw(e,t,i,n,r,s,o).recognize()}var BG=31,Fw=class{constructor(t,i,n,r,o,s,l){this.injector=t,this.configLoader=i,this.rootComponentType=n,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=l,this.applyRedirects=new Pw(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new ve(4002,`'${t.segmentGroup}'`)}recognize(){let t=aM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(dt(i=>{let n=new rh([],Object.freeze({}),Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,{},$t,this.rootComponentType,null,{}),r=new Ai(n,i),o=new rg("",r),s=qq(n,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,$t).pipe(ss(n=>{if(n instanceof sg)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof sh?this.noMatchError(n):n}))}inheritParamsAndData(t,i){let n=t.value,r=Vw(n,i,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(o=>this.inheritParamsAndData(o,n))}processSegmentGroup(t,i,n,r){return n.segments.length===0&&n.hasChildren()?this.processChildren(t,i,n):this.processSegment(t,i,n,n.segments,r,!0).pipe(dt(o=>o instanceof Ai?[o]:[]))}processChildren(t,i,n){let r=[];for(let o of Object.keys(n.children))o==="primary"?r.unshift(o):r.push(o);return Re(r).pipe(as(o=>{let s=n.children[o],l=sG(i,o);return this.processSegmentGroup(t,l,s,o)}),Nl((o,s)=>(o.push(...s),o)),D0(null),A1(),Ti(o=>{if(o===null)return Jl(n);let s=PM(o);return jG(s),tt(s)}))}processSegment(t,i,n,r,o,s){return Re(i).pipe(as(l=>this.processSegmentAgainstRoute(l._injector??t,i,l,n,r,o,s).pipe(ss(d=>{if(d instanceof sh)return tt(null);throw d}))),Nr(l=>!!l),ss(l=>{if(kM(l))return LG(n,r,o)?tt(new Nw):Jl(n);throw l}))}processSegmentAgainstRoute(t,i,n,r,o,s,l){return FG(n,r,o,s)?n.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,n,o,s):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(t,r,i,n,o,s):Jl(r):Jl(r)}expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s){let{matched:l,consumedSegments:d,positionalParamSegments:u,remainingSegments:f}=zw(i,r,o);if(!l)return Jl(i);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>BG&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(d,r.redirectTo,u);return this.applyRedirects.lineralizeSegments(r,p).pipe(Ti(_=>this.processSegment(t,n,i,_.concat(f),s,!1)))}matchSegmentAgainstRoute(t,i,n,r,o){let s=RG(i,n,r,t,this.urlSerializer);return n.path==="**"&&(i.children={}),s.pipe(ke(l=>l.matched?(t=n._injector??t,this.getChildConfig(t,n,r).pipe(ke(({routes:d})=>{let u=n._loadedInjector??t,{consumedSegments:f,remainingSegments:p,parameters:_}=l,y=new rh(f,_,Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,zG(n),zr(n),n.component??n._loadedComponent??null,n,$G(n)),{segmentGroup:S,slicedSegments:A}=aM(i,f,p,d);if(A.length===0&&S.hasChildren())return this.processChildren(u,d,S).pipe(dt(K=>K===null?null:new Ai(y,K)));if(d.length===0&&A.length===0)return tt(new Ai(y,[]));let M=zr(n)===o;return this.processSegment(u,d,S,A,M?$t:o,!0).pipe(dt(K=>new Ai(y,K instanceof Ai?[K]:[])))}))):Jl(i)))}getChildConfig(t,i,n){return i.children?tt({routes:i.children,injector:t}):i.loadChildren?i._loadedRoutes!==void 0?tt({routes:i._loadedRoutes,injector:i._loadedInjector}):TG(t,i,n,this.urlSerializer).pipe(Ti(r=>r?this.configLoader.loadChildren(t,i).pipe(Me(o=>{i._loadedRoutes=o.routes,i._loadedInjector=o.injector})):DG(i))):tt({routes:[],injector:t})}};function jG(e){e.sort((t,i)=>t.value.outlet===$t?-1:i.value.outlet===$t?1:t.value.outlet.localeCompare(i.value.outlet))}function UG(e){let t=e.value.routeConfig;return t&&t.path===""}function PM(e){let t=[],i=new Set;for(let n of e){if(!UG(n)){t.push(n);continue}let r=t.find(o=>n.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...n.children),i.add(r)):t.push(n)}for(let n of i){let r=PM(n.children);t.push(new Ai(n.value,r))}return t.filter(n=>!i.has(n))}function zG(e){return e.data||{}}function $G(e){return e.resolve||{}}function HG(e,t,i,n,r,o){return Ti(s=>VG(e,t,i,n,s.extractedUrl,r,o).pipe(dt(({state:l,tree:d})=>xe(G({},s),{targetSnapshot:l,urlAfterRedirects:d}))))}function WG(e,t){return Ti(i=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=i;if(!r.length)return tt(i);let o=new Set(r.map(d=>d.route)),s=new Set;for(let d of o)if(!s.has(d))for(let u of OM(d))s.add(u);let l=0;return Re(s).pipe(as(d=>o.has(d)?qG(d,n,e,t):(d.data=Vw(d,d.parent,e).resolve,tt(void 0))),Me(()=>l++),k0(1),Ti(d=>l===s.size?tt(i):Pr))})}function OM(e){let t=e.children.map(i=>OM(i)).flat();return[e,...t]}function qG(e,t,i,n){let r=e.routeConfig,o=e._resolve;return r?.title!==void 0&&!TM(r)&&(o[lh]=r.title),GG(o,e,t,n).pipe(dt(s=>(e._resolvedData=s,e.data=Vw(e,e.parent,i).resolve,null)))}function GG(e,t,i,n){let r=fw(e);if(r.length===0)return tt({});let o={};return Re(r).pipe(Ti(s=>KG(e[s],t,i,n).pipe(Nr(),Me(l=>{o[s]=l}))),k0(1),S1(o),ss(s=>kM(s)?Pr:da(s)))}function KG(e,t,i,n){let r=uh(t)??n,o=ac(e,r),s=o.resolve?o.resolve(t,i):bo(r,()=>o(t,i));return ps(s)}function uw(e){return ke(t=>{let i=e(t);return i?Re(i).pipe(dt(()=>t)):tt(t)})}var NM=(()=>{let t=class t{buildTitle(n){let r,o=n.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===$t);return r}getResolvedTitleForRoute(n){return n.data[lh]}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=q({token:t,factory:()=>W(YG),providedIn:"root"});let e=t;return e})(),YG=(()=>{let t=class t extends NM{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}};t.\u0275fac=function(r){return new(r||t)(T(tM))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),fh=new H("",{providedIn:"root",factory:()=>({})}),ag=new H(""),$w=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=W(Rp)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return tt(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=ps(n.loadComponent()).pipe(dt(FM),Me(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),ha(()=>{this.componentLoaders.delete(n)})),o=new Eu(r,()=>new at).pipe(C0());return this.componentLoaders.set(n,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return tt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=QG(r,this.compiler,n,this.onLoadEndListener).pipe(ha(()=>{this.childrenLoaders.delete(r)})),l=new Eu(s,()=>new at).pipe(C0());return this.childrenLoaders.set(r,l),l}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function QG(e,t,i,n){return ps(e.loadChildren()).pipe(dt(FM),Ti(r=>r instanceof q1||Array.isArray(r)?tt(r):Re(t.compileModuleAsync(r))),dt(r=>{n&&n(e);let o,s,l=!1;return Array.isArray(r)?(s=r,l=!0):(o=r.create(i).injector,s=o.get(ag,[],{optional:!0,self:!0}).flat()),{routes:s.map(Uw),injector:o}}))}function XG(e){return e&&typeof e=="object"&&"default"in e}function FM(e){return XG(e)?e.default:e}var Hw=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=q({token:t,factory:()=>W(ZG),providedIn:"root"});let e=t;return e})(),ZG=(()=>{let t=class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),LM=new H(""),VM=new H("");function JG(e,t,i){let n=e.get(VM),r=e.get(xt);return e.get(Q).runOutsideAngular(()=>{if(!r.startViewTransition||n.skipNextTransition)return n.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(u=>{o=u}),l=r.startViewTransition(()=>(o(),t9(e))),{onViewTransitionCreated:d}=n;return d&&bo(e,()=>d({transition:l,from:t,to:i})),s})}function t9(e){return new Promise(t=>{W1(t,{injector:e})})}var Ww=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new at,this.transitionAbortSubject=new at,this.configLoader=W($w),this.environmentInjector=W(Vl),this.urlSerializer=W(ch),this.rootContexts=W(dh),this.location=W(va),this.inputBindingEnabled=W(cg,{optional:!0})!==null,this.titleStrategy=W(NM),this.options=W(fh,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=W(Hw),this.createViewTransition=W(LM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>tt(void 0),this.rootComponentType=null;let n=o=>this.events.next(new ww(o)),r=o=>this.events.next(new xw(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(xe(G(G({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,o){return this.transitions=new Je({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Xu,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(me(s=>s.id!==0),dt(s=>xe(G({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),ke(s=>{let l=!1,d=!1;return tt(s).pipe(ke(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Di.SupersededByNewNavigation),Pr;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?xe(G({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=u.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!f&&p!=="reload"){let _="";return this.events.next(new ms(u.id,this.urlSerializer.serialize(u.rawUrl),_,Jp.IgnoredSameUrlNavigation)),u.resolve(null),Pr}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return tt(u).pipe(ke(_=>{let y=this.transitions?.getValue();return this.events.next(new oc(_.id,this.urlSerializer.serialize(_.extractedUrl),_.source,_.restoredState)),y!==this.transitions?.getValue()?Pr:Promise.resolve(_)}),HG(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Me(_=>{s.targetSnapshot=_.targetSnapshot,s.urlAfterRedirects=_.urlAfterRedirects,this.currentNavigation=xe(G({},this.currentNavigation),{finalUrl:_.urlAfterRedirects});let y=new tg(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(y)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:_,extractedUrl:y,source:S,restoredState:A,extras:M}=u,K=new oc(_,this.urlSerializer.serialize(y),S,A);this.events.next(K);let ut=EM(this.rootComponentType).snapshot;return this.currentTransition=s=xe(G({},u),{targetSnapshot:ut,urlAfterRedirects:y,extras:xe(G({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,tt(s)}else{let _="";return this.events.next(new ms(u.id,this.urlSerializer.serialize(u.extractedUrl),_,Jp.IgnoredByUrlHandlingStrategy)),u.resolve(null),Pr}}),Me(u=>{let f=new _w(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),dt(u=>(this.currentTransition=s=xe(G({},u),{guards:lG(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),vG(this.environmentInjector,u=>this.events.next(u)),Me(u=>{if(s.guardsResult=u.guardsResult,rc(u.guardsResult))throw AM(this.urlSerializer,u.guardsResult);let f=new vw(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(f)}),me(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Di.GuardRejected),!1)),uw(u=>{if(u.guards.canActivateChecks.length)return tt(u).pipe(Me(f=>{let p=new bw(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}),ke(f=>{let p=!1;return tt(f).pipe(WG(this.paramsInheritanceStrategy,this.environmentInjector),Me({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(f,"",Di.NoDataFromResolver)}}))}),Me(f=>{let p=new yw(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}))}),uw(u=>{let f=p=>{let _=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&_.push(this.configLoader.loadComponent(p.routeConfig).pipe(Me(y=>{p.component=y}),dt(()=>{})));for(let y of p.children)_.push(...f(y));return _};return Or(f(u.targetSnapshot.root)).pipe(D0(null),$e(1))}),uw(()=>this.afterPreactivation()),ke(()=>{let{currentSnapshot:u,targetSnapshot:f}=s,p=this.createViewTransition?.(this.environmentInjector,u.root,f.root);return p?Re(p).pipe(dt(()=>s)):tt(s)}),dt(u=>{let f=tG(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=xe(G({},u),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,s}),Me(()=>{this.events.next(new nh)}),aG(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),$e(1),Me({next:u=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ur(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{l=!0}}),Lt(this.transitionAbortSubject.pipe(Me(u=>{throw u}))),ha(()=>{!l&&!d&&this.cancelNavigationTransition(s,"",Di.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),ss(u=>{if(d=!0,RM(u))this.events.next(new fs(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),iG(u)?this.events.next(new ih(u.url)):s.resolve(!1);else{this.events.next(new eh(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(n.errorHandler(u))}catch(f){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(f)}}return Pr}))}))}cancelNavigationTransition(n,r,o){let s=new fs(n.id,this.urlSerializer.serialize(n.extractedUrl),r,o);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function e9(e){return e!==Xu}var n9=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=q({token:t,factory:()=>W(i9),providedIn:"root"});let e=t;return e})(),Lw=class{shouldDetach(t){return!1}store(t,i){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,i){return t.routeConfig===i.routeConfig}},i9=(()=>{let t=class t extends Lw{};t.\u0275fac=(()=>{let n;return function(o){return(n||(n=Tn(t)))(o||t)}})(),t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),BM=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=q({token:t,factory:()=>W(r9),providedIn:"root"});let e=t;return e})(),r9=(()=>{let t=class t extends BM{constructor(){super(...arguments),this.location=W(va),this.urlSerializer=W(ch),this.options=W(fh,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=W(Hw),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new hs,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=EM(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof oc)this.stateMemento=this.createStateMemento();else if(n instanceof ms)this.rawUrlTree=r.initialUrl;else if(n instanceof tg){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else n instanceof nh?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):n instanceof fs&&(n.code===Di.GuardRejected||n.code===Di.NoDataFromResolver)?this.restoreHistory(r):n instanceof eh?this.restoreHistory(r,!0):n instanceof Ur&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let o=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let s=this.browserPageId,l=G(G({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(o,"",l)}else{let s=G(G({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}};t.\u0275fac=(()=>{let n;return function(o){return(n||(n=Tn(t)))(o||t)}})(),t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Yu=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(Yu||{});function jM(e,t){e.events.pipe(me(i=>i instanceof Ur||i instanceof fs||i instanceof eh||i instanceof ms),dt(i=>i instanceof Ur||i instanceof ms?Yu.COMPLETE:(i instanceof fs?i.code===Di.Redirect||i.code===Di.SupersededByNewNavigation:!1)?Yu.REDIRECTING:Yu.FAILED),me(i=>i!==Yu.REDIRECTING),$e(1)).subscribe(()=>{t()})}function o9(e){throw e}var s9={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},a9={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Gn=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=W(Cp),this.stateManager=W(BM),this.options=W(fh,{optional:!0})||{},this.pendingTasks=W(F0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=W(Ww),this.urlSerializer=W(ch),this.location=W(va),this.urlHandlingStrategy=W(Hw),this._events=new at,this.errorHandler=this.options.errorHandler||o9,this.navigated=!1,this.routeReuseStrategy=W(n9),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=W(ag,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!W(cg,{optional:!0}),this.eventsSubscription=new un,this.isNgZoneEnabled=W(Q)instanceof Q&&Q.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof fs&&r.code!==Di.Redirect&&r.code!==Di.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ur)this.navigated=!0;else if(r instanceof ih){let l=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),d={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||e9(o.source)};this.scheduleNavigation(l,Xu,null,d,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}c9(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Xu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,o){let s={replaceUrl:!0},l=o?.navigationId?o:null;if(o){let u=G({},o);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let d=this.parseUrl(n);this.scheduleNavigation(d,r,l,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Uw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:o,queryParams:s,fragment:l,queryParamsHandling:d,preserveFragment:u}=r,f=u?this.currentUrlTree.fragment:l,p=null;switch(d){case"merge":p=G(G({},this.currentUrlTree.queryParams),s);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}p!==null&&(p=this.removeEmptyProps(p));let _;try{let y=o?o.snapshot:this.routerState.snapshot.root;_=yM(y)}catch{(typeof n[0]!="string"||!n[0].startsWith("/"))&&(n=[]),_=this.currentUrlTree.root}return wM(_,n,p,f??null)}navigateByUrl(n,r={skipLocationChange:!1}){let o=rc(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Xu,null,r)}navigate(n,r={skipLocationChange:!1}){return l9(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let o;if(r===!0?o=G({},s9):r===!1?o=G({},a9):o=r,rc(n))return nM(this.currentUrlTree,n,o);let s=this.parseUrl(n);return nM(this.currentUrlTree,s,o)}removeEmptyProps(n){return Object.entries(n).reduce((r,[o,s])=>(s!=null&&(r[o]=s),r),{})}scheduleNavigation(n,r,o,s,l){if(this.disposed)return Promise.resolve(!1);let d,u,f;l?(d=l.resolve,u=l.reject,f=l.promise):f=new Promise((_,y)=>{d=_,u=y});let p=this.pendingTasks.add();return jM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:d,reject:u,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(_=>Promise.reject(_))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function l9(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new ve(4008,!1)}function c9(e){return!(e instanceof nh)&&!(e instanceof ih)}var ug=(()=>{let t=class t{constructor(n,r,o,s,l,d){this.router=n,this.route=r,this.tabIndexAttribute=o,this.renderer=s,this.el=l,this.locationStrategy=d,this.href=null,this.commands=null,this.onChanges=new at,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let u=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=n.events.subscribe(f=>{f instanceof Ur&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){n!=null?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,o,s,l){let d=this.urlTree;if(d===null||this.isAnchorElement&&(n!==0||r||o||s||l||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(d,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.href=n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;let r=this.href===null?null:$1(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){let o=this.renderer,s=this.el.nativeElement;r!==null?o.setAttribute(s,n,r):o.removeAttribute(s,n)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};t.\u0275fac=function(r){return new(r||t)(x(Gn),x(To),wo("tabindex"),x(Pu),x(gt),x(Nu))},t.\u0275dir=X({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,o){r&1&&Ct("click",function(l){return o.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),r&2&&Zt("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[F.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Tt],skipLocationChange:[F.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Tt],replaceUrl:[F.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Tt],routerLink:"routerLink"},standalone:!0,features:[he,hn]});let e=t;return e})();var lg=class{};var d9=(()=>{let t=class t{constructor(n,r,o,s,l){this.router=n,this.injector=o,this.preloadingStrategy=s,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(me(n=>n instanceof Ur),as(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let o=[];for(let s of r){s.providers&&!s._injector&&(s._injector=N0(s.providers,n,`Route: ${s.path}`));let l=s._injector??n,d=s._loadedInjector??l;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(l,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(d,s.children??s._loadedRoutes))}return Re(o).pipe(T0())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let o;r.loadChildren&&r.canLoad===void 0?o=this.loader.loadChildren(n,r):o=tt(null);let s=o.pipe(Ti(l=>l===null?tt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??n,l.routes))));if(r.loadComponent&&!r._loadedComponent){let l=this.loader.loadComponent(r);return Re([s,l]).pipe(T0())}else return s})}};t.\u0275fac=function(r){return new(r||t)(T(Gn),T(Rp),T(Vl),T(lg),T($w))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),UM=new H(""),u9=(()=>{let t=class t{constructor(n,r,o,s,l={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=o,this.zone=s,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration||="disabled",l.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof oc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Ur?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof ms&&n.code===Jp.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof eg&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new eg(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};t.\u0275fac=function(r){zl()},t.\u0275prov=q({token:t,factory:t.\u0275fac});let e=t;return e})();function h9(e){return e.routerState.root}function mh(e,t){return{\u0275kind:e,\u0275providers:t}}function f9(){let e=W(fn);return t=>{let i=e.get(ds);if(t!==i.components[0])return;let n=e.get(Gn),r=e.get(zM);e.get(qw)===1&&n.initialNavigation(),e.get($M,null,P0.Optional)?.setUpPreloading(),e.get(UM,null,P0.Optional)?.init(),n.resetRootComponentType(i.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var zM=new H("",{factory:()=>new at}),qw=new H("",{providedIn:"root",factory:()=>1});function m9(){return mh(2,[{provide:qw,useValue:0},{provide:V0,multi:!0,deps:[fn],useFactory:t=>{let i=t.get(hk,Promise.resolve());return()=>i.then(()=>new Promise(n=>{let r=t.get(Gn),o=t.get(zM);jM(r,()=>{n(!0)}),t.get(Ww).afterPreactivation=()=>(n(!0),o.closed?tt(void 0):o),r.initialNavigation()}))}}])}function p9(){return mh(3,[{provide:V0,multi:!0,useFactory:()=>{let t=W(Gn);return()=>{t.setUpLocationChangeListener()}}},{provide:qw,useValue:2}])}var $M=new H("");function g9(e){return mh(0,[{provide:$M,useExisting:d9},{provide:lg,useExisting:e}])}function _9(){return mh(8,[sM,{provide:cg,useExisting:sM}])}function v9(e){let t=[{provide:LM,useValue:JG},{provide:VM,useValue:G({skipNextTransition:!!e?.skipInitialTransition},e)}];return mh(9,t)}var lM=new H("ROUTER_FORROOT_GUARD"),b9=[va,{provide:ch,useClass:Ju},Gn,dh,{provide:To,useFactory:h9,deps:[Gn]},$w,[]],Gw=(()=>{let t=class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[b9,[],{provide:ag,multi:!0,useValue:n},{provide:lM,useFactory:I9,deps:[[Gn,new He,new fa]]},{provide:fh,useValue:r||{}},r?.useHash?w9():x9(),y9(),r?.preloadingStrategy?g9(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?E9(r):[],r?.bindToComponentInputs?_9().\u0275providers:[],r?.enableViewTransitions?v9().\u0275providers:[],C9()]}}static forChild(n){return{ngModule:t,providers:[{provide:ag,multi:!0,useValue:n}]}}};t.\u0275fac=function(r){return new(r||t)(T(lM,8))},t.\u0275mod=st({type:t}),t.\u0275inj=ot({});let e=t;return e})();function y9(){return{provide:UM,useFactory:()=>{let e=W(vk),t=W(Q),i=W(fh),n=W(Ww),r=W(ch);return i.scrollOffset&&e.setOffset(i.scrollOffset),new u9(r,n,e,t,i)}}}function w9(){return{provide:Nu,useClass:mk}}function x9(){return{provide:Nu,useClass:fk}}function I9(e){return"guarded"}function E9(e){return[e.initialNavigation==="disabled"?p9().\u0275providers:[],e.initialNavigation==="enabledBlocking"?m9().\u0275providers:[]]}var cM=new H("");function C9(){return[{provide:cM,useFactory:f9},{provide:Dp,multi:!0,useExisting:cM}]}var XM=(()=>{let t=class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}};t.\u0275fac=function(r){return new(r||t)(x(Pu),x(gt))},t.\u0275dir=X({type:t});let e=t;return e})(),T9=(()=>{let t=class t extends XM{};t.\u0275fac=(()=>{let n;return function(o){return(n||(n=Tn(t)))(o||t)}})(),t.\u0275dir=X({type:t,features:[oe]});let e=t;return e})(),ZM=new H("");var S9={provide:ZM,useExisting:Su(()=>fc),multi:!0};function A9(){let e=_a()?_a().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var D9=new H(""),fc=(()=>{let t=class t extends XM{constructor(n,r,o){super(n,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!A9())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}};t.\u0275fac=function(r){return new(r||t)(x(Pu),x(gt),x(D9,8))},t.\u0275dir=X({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&Ct("input",function(l){return o._handleInput(l.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(l){return o._compositionEnd(l.target.value)})},features:[pe([S9]),oe]});let e=t;return e})();function gs(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}function JM(e){return e!=null&&typeof e.length=="number"}var Zw=new H(""),Jw=new H(""),R9=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,dc=class{static min(t){return k9(t)}static max(t){return M9(t)}static required(t){return P9(t)}static requiredTrue(t){return O9(t)}static email(t){return N9(t)}static minLength(t){return F9(t)}static maxLength(t){return L9(t)}static pattern(t){return V9(t)}static nullValidator(t){return tP(t)}static compose(t){return sP(t)}static composeAsync(t){return aP(t)}};function k9(e){return t=>{if(gs(t.value)||gs(e))return null;let i=parseFloat(t.value);return!isNaN(i)&&i<e?{min:{min:e,actual:t.value}}:null}}function M9(e){return t=>{if(gs(t.value)||gs(e))return null;let i=parseFloat(t.value);return!isNaN(i)&&i>e?{max:{max:e,actual:t.value}}:null}}function P9(e){return gs(e.value)?{required:!0}:null}function O9(e){return e.value===!0?null:{required:!0}}function N9(e){return gs(e.value)||R9.test(e.value)?null:{email:!0}}function F9(e){return t=>gs(t.value)||!JM(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}function L9(e){return t=>JM(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}function V9(e){if(!e)return tP;let t,i;return typeof e=="string"?(i="",e.charAt(0)!=="^"&&(i+="^"),i+=e,e.charAt(e.length-1)!=="$"&&(i+="$"),t=new RegExp(i)):(i=e.toString(),t=e),n=>{if(gs(n.value))return null;let r=n.value;return t.test(r)?null:{pattern:{requiredPattern:i,actualValue:r}}}}function tP(e){return null}function eP(e){return e!=null}function nP(e){return Ap(e)?Re(e):e}function iP(e){let t={};return e.forEach(i=>{t=i!=null?G(G({},t),i):t}),Object.keys(t).length===0?null:t}function rP(e,t){return t.map(i=>i(e))}function B9(e){return!e.validate}function oP(e){return e.map(t=>B9(t)?t:i=>t.validate(i))}function sP(e){if(!e)return null;let t=e.filter(eP);return t.length==0?null:function(i){return iP(rP(i,t))}}function tx(e){return e!=null?sP(oP(e)):null}function aP(e){if(!e)return null;let t=e.filter(eP);return t.length==0?null:function(i){let n=rP(i,t).map(nP);return _p(n).pipe(dt(iP))}}function ex(e){return e!=null?aP(oP(e)):null}function HM(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function lP(e){return e._rawValidators}function cP(e){return e._rawAsyncValidators}function Kw(e){return e?Array.isArray(e)?e:[e]:[]}function fg(e,t){return Array.isArray(e)?e.includes(t):e===t}function WM(e,t){let i=Kw(t);return Kw(e).forEach(r=>{fg(i,r)||i.push(r)}),i}function qM(e,t){return Kw(t).filter(i=>!fg(e,i))}var mg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=tx(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=ex(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,i){return this.control?this.control.hasError(t,i):!1}getError(t,i){return this.control?this.control.getError(t,i):null}},_s=class extends mg{get formDirective(){return null}get path(){return null}},So=class extends mg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},pg=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},j9={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},$it=xe(G({},j9),{"[class.ng-submitted]":"isSubmitted"}),vg=(()=>{let t=class t extends pg{constructor(n){super(n)}};t.\u0275fac=function(r){return new(r||t)(x(So,2))},t.\u0275dir=X({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&Bt("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[oe]});let e=t;return e})(),bg=(()=>{let t=class t extends pg{constructor(n){super(n)}};t.\u0275fac=function(r){return new(r||t)(x(_s,10))},t.\u0275dir=X({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){r&2&&Bt("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[oe]});let e=t;return e})();var ph="VALID",hg="INVALID",cc="PENDING",gh="DISABLED";function nx(e){return(yg(e)?e.validators:e)||null}function U9(e){return Array.isArray(e)?tx(e):e||null}function ix(e,t){return(yg(t)?t.asyncValidators:e)||null}function z9(e){return Array.isArray(e)?ex(e):e||null}function yg(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function dP(e,t,i){let n=e.controls;if(!(t?Object.keys(n):n).length)throw new ve(1e3,"");if(!n[i])throw new ve(1001,"")}function uP(e,t,i){e._forEachChild((n,r)=>{if(i[r]===void 0)throw new ve(1002,"")})}var uc=class{constructor(t,i){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(i)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ph}get invalid(){return this.status===hg}get pending(){return this.status==cc}get disabled(){return this.status===gh}get enabled(){return this.status!==gh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(WM(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(WM(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(qM(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(qM(t,this._rawAsyncValidators))}hasValidator(t){return fg(this._rawValidators,t)}hasAsyncValidator(t){return fg(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(i=>{i.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=cc,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let i=this._parentMarkedDirty(t.onlySelf);this.status=gh,this.errors=null,this._forEachChild(n=>{n.disable(xe(G({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(xe(G({},t),{skipPristineCheck:i})),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){let i=this._parentMarkedDirty(t.onlySelf);this.status=ph,this._forEachChild(n=>{n.enable(xe(G({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(xe(G({},t),{skipPristineCheck:i})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ph||this.status===cc)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(i=>i._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?gh:ph}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=cc,this._hasOwnPendingAsyncValidator=!0;let i=nP(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,i={}){this.errors=t,this._updateControlsErrors(i.emitEvent!==!1)}get(t){let i=t;return i==null||(Array.isArray(i)||(i=i.split(".")),i.length===0)?null:i.reduce((n,r)=>n&&n._find(r),this)}getError(t,i){let n=i?this.get(i):this;return n&&n.errors?n.errors[t]:null}hasError(t,i){return!!this.getError(t,i)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new qt,this.statusChanges=new qt}_calculateStatus(){return this._allControlsDisabled()?gh:this.errors?hg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(cc)?cc:this._anyControlsHaveStatus(hg)?hg:ph}_anyControlsHaveStatus(t){return this._anyControls(i=>i.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){yg(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let i=this._parent&&this._parent.dirty;return!t&&!!i&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=U9(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=z9(this._rawAsyncValidators)}},hc=class extends uc{constructor(t,i,n){super(nx(i),ix(n,i)),this.controls=t,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,i){return this.controls[t]?this.controls[t]:(this.controls[t]=i,i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange),i)}addControl(t,i,n={}){this.registerControl(t,i),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}setControl(t,i,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],i&&this.registerControl(t,i),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,i={}){uP(this,!0,t),Object.keys(t).forEach(n=>{dP(this,!0,n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(t,i={}){t!=null&&(Object.keys(t).forEach(n=>{let r=this.controls[n];r&&r.patchValue(t[n],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(t={},i={}){this._forEachChild((n,r)=>{n.reset(t?t[r]:null,{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i),this._updateTouched(i),this.updateValueAndValidity(i)}getRawValue(){return this._reduceChildren({},(t,i,n)=>(t[n]=i.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(i,n)=>n._syncPendingControls()?!0:i);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(i=>{let n=this.controls[i];n&&t(n,i)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[i,n]of Object.entries(this.controls))if(this.contains(i)&&t(n))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(i,n,r)=>((n.enabled||this.disabled)&&(i[r]=n.value),i))}_reduceChildren(t,i){let n=t;return this._forEachChild((r,o)=>{n=i(n,r,o)}),n}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Yw=class extends hc{};var wg=new H("CallSetDisabledState",{providedIn:"root",factory:()=>xg}),xg="always";function $9(e,t){return[...t.path,e]}function Qw(e,t,i=xg){rx(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||i==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),W9(e,t),G9(e,t),q9(e,t),H9(e,t)}function GM(e,t,i=!0){let n=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(n),t.valueAccessor.registerOnTouched(n)),_g(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function gg(e,t){e.forEach(i=>{i.registerOnValidatorChange&&i.registerOnValidatorChange(t)})}function H9(e,t){if(t.valueAccessor.setDisabledState){let i=n=>{t.valueAccessor.setDisabledState(n)};e.registerOnDisabledChange(i),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(i)})}}function rx(e,t){let i=lP(e);t.validator!==null?e.setValidators(HM(i,t.validator)):typeof i=="function"&&e.setValidators([i]);let n=cP(e);t.asyncValidator!==null?e.setAsyncValidators(HM(n,t.asyncValidator)):typeof n=="function"&&e.setAsyncValidators([n]);let r=()=>e.updateValueAndValidity();gg(t._rawValidators,r),gg(t._rawAsyncValidators,r)}function _g(e,t){let i=!1;if(e!==null){if(t.validator!==null){let r=lP(e);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.validator);o.length!==r.length&&(i=!0,e.setValidators(o))}}if(t.asyncValidator!==null){let r=cP(e);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.asyncValidator);o.length!==r.length&&(i=!0,e.setAsyncValidators(o))}}}let n=()=>{};return gg(t._rawValidators,n),gg(t._rawAsyncValidators,n),i}function W9(e,t){t.valueAccessor.registerOnChange(i=>{e._pendingValue=i,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&hP(e,t)})}function q9(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&hP(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function hP(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function G9(e,t){let i=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};e.registerOnChange(i),t._registerOnDestroy(()=>{e._unregisterOnChange(i)})}function fP(e,t){e==null,rx(e,t)}function K9(e,t){return _g(e,t)}function Y9(e,t){if(!e.hasOwnProperty("model"))return!1;let i=e.model;return i.isFirstChange()?!0:!Object.is(t,i.currentValue)}function Q9(e){return Object.getPrototypeOf(e.constructor)===T9}function mP(e,t){e._syncPendingControls(),t.forEach(i=>{let n=i.control;n.updateOn==="submit"&&n._pendingChange&&(i.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function X9(e,t){if(!t)return null;Array.isArray(t);let i,n,r;return t.forEach(o=>{o.constructor===fc?i=o:Q9(o)?n=o:r=o}),r||n||i||null}function Z9(e,t){let i=e.indexOf(t);i>-1&&e.splice(i,1)}var J9={provide:_s,useExisting:Su(()=>vh)},_h=Promise.resolve(),vh=(()=>{let t=class t extends _s{constructor(n,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new qt,this.form=new hc({},tx(n),ex(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){_h.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),Qw(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){_h.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){_h.then(()=>{let r=this._findContainer(n.path),o=new hc({});fP(o,n),r.registerControl(n.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){_h.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){_h.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,mP(this.form,this._directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}};t.\u0275fac=function(r){return new(r||t)(x(Zw,10),x(Jw,10),x(wg,8))},t.\u0275dir=X({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,o){r&1&&Ct("submit",function(l){return o.onSubmit(l)})("reset",function(){return o.onReset()})},inputs:{options:[F.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[pe([J9]),oe]});let e=t;return e})();function KM(e,t){let i=e.indexOf(t);i>-1&&e.splice(i,1)}function YM(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var _i=class extends uc{constructor(t=null,i,n){super(nx(i),ix(n,i)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(i),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yg(i)&&(i.nonNullable||i.initialValueIsDefault)&&(YM(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,i={}){this.value=this._pendingValue=t,this._onChange.length&&i.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,i.emitViewToModelChange!==!1)),this.updateValueAndValidity(i)}patchValue(t,i={}){this.setValue(t,i)}reset(t=this.defaultValue,i={}){this._applyFormState(t),this.markAsPristine(i),this.markAsUntouched(i),this.setValue(this.value,i),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){KM(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){KM(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){YM(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var t6=e=>e instanceof _i;var Ig=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=X({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let e=t;return e})();var pP=new H("");var e6={provide:_s,useExisting:Su(()=>Ao)},Ao=(()=>{let t=class t extends _s{constructor(n,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new qt,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(_g(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){let r=this.form.get(n.path);return Qw(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){GM(n.control||null,n,!1),Z9(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this.submitted=!0,mP(this.form,this.directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{let r=n.control,o=this.form.get(n.path);r!==o&&(GM(r||null,n),t6(o)&&(Qw(o,n,this.callSetDisabledState),n.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let r=this.form.get(n.path);fP(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let r=this.form.get(n.path);r&&K9(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){rx(this.form,this),this._oldForm&&_g(this._oldForm,this)}_checkFormPresent(){this.form}};t.\u0275fac=function(r){return new(r||t)(x(Zw,10),x(Jw,10),x(wg,8))},t.\u0275dir=X({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,o){r&1&&Ct("submit",function(l){return o.onSubmit(l)})("reset",function(){return o.onReset()})},inputs:{form:[F.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[pe([e6]),oe,hn]});let e=t;return e})();var n6={provide:So,useExisting:Su(()=>bh)},bh=(()=>{let t=class t extends So{set isDisabled(n){}constructor(n,r,o,s,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.name=null,this.update=new qt,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=X9(this,s)}ngOnChanges(n){this._added||this._setUpControl(),Y9(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return $9(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};t._ngModelWarningSentOnce=!1,t.\u0275fac=function(r){return new(r||t)(x(_s,13),x(Zw,10),x(Jw,10),x(ZM,10),x(pP,8))},t.\u0275dir=X({type:t,selectors:[["","formControlName",""]],inputs:{name:[F.None,"formControlName","name"],isDisabled:[F.None,"disabled","isDisabled"],model:[F.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[pe([n6]),oe,hn]});let e=t;return e})();var gP=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({});let e=t;return e})(),Xw=class extends uc{constructor(t,i,n){super(nx(i),ix(n,i)),this.controls=t,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,i={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}insert(t,i,n={}){this.controls.splice(t,0,i),this._registerControl(i),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,i={}){let n=this._adjustIndex(t);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:i.emitEvent})}setControl(t,i,n={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),i&&(this.controls.splice(r,0,i),this._registerControl(i)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,i={}){uP(this,!1,t),t.forEach((n,r)=>{dP(this,!1,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(t,i={}){t!=null&&(t.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(t=[],i={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i),this._updateTouched(i),this.updateValueAndValidity(i)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(i=>i._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((i,n)=>n._syncPendingControls()?!0:i,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((i,n)=>{t(i,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(i=>i.enabled&&t(i))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function QM(e){return!!e&&(e.asyncValidators!==void 0||e.validators!==void 0||e.updateOn!==void 0)}var Eg=(()=>{let t=class t{constructor(){this.useNonNullable=!1}get nonNullable(){let n=new t;return n.useNonNullable=!0,n}group(n,r=null){let o=this._reduceControls(n),s={};return QM(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new hc(o,s)}record(n,r=null){let o=this._reduceControls(n);return new Yw(o,r)}control(n,r,o){let s={};return this.useNonNullable?(QM(r)?s=r:(s.validators=r,s.asyncValidators=o),new _i(n,xe(G({},s),{nonNullable:!0}))):new _i(n,r,o)}array(n,r,o){let s=n.map(l=>this._createControl(l));return new Xw(s,r,o)}_reduceControls(n){let r={};return Object.keys(n).forEach(o=>{r[o]=this._createControl(n[o])}),r}_createControl(n){if(n instanceof _i)return n;if(n instanceof uc)return n;if(Array.isArray(n)){let r=n[0],o=n.length>1?n[1]:null,s=n.length>2?n[2]:null;return this.control(r,o,s)}else return this.control(n)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var _P=(()=>{let t=class t{static withConfig(n){return{ngModule:t,providers:[{provide:wg,useValue:n.callSetDisabledState??xg}]}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({imports:[gP]});let e=t;return e})(),vP=(()=>{let t=class t{static withConfig(n){return{ngModule:t,providers:[{provide:pP,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:wg,useValue:n.callSetDisabledState??xg}]}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({imports:[gP]});let e=t;return e})();var i6="firebase",r6="10.11.0";Rn(i6,r6,"app");var Xi=new Wl("ANGULARFIRE2_VERSION");function pc(e,t,i){if(t){if(t.length===1)return t[0];let o=t.filter(s=>s.app===i);if(o.length===1)return o[0]}return i.container.getProvider(e).getImmediate({optional:!0})}var Ca=(e,t)=>{let i=t?[t]:Vp(),n=[];return i.forEach(r=>{r.container.getProvider(e).instances.forEach(s=>{n.includes(s)||n.push(s)})}),n},Ri=class{constructor(){return Ca(o6)}},o6="app-check";function mc(){}var Tg=class{zone;delegate;constructor(t,i=C1){this.zone=t,this.delegate=i}now(){return this.delegate.now()}schedule(t,i,n){let r=this.zone,o=function(s){r.runGuarded(()=>{t.apply(this,[s])})};return this.delegate.schedule(o,i,n)}},ox=class{zone;task=null;constructor(t){this.zone=t}call(t,i){let n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",mc,{},mc,mc)),i.pipe(Me({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},$r=(()=>{class e{ngZone;outsideAngular;insideAngular;constructor(i){this.ngZone=i,this.outsideAngular=i.runOutsideAngular(()=>new Tg(Zone.current)),this.insideAngular=i.run(()=>new Tg(Zone.current,pp)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(n){return new(n||e)(T(Q))};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Sg(){let e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return e}function s6(e){return Sg().ngZone.runOutsideAngular(()=>e())}function Ea(e){return Sg().ngZone.run(()=>e())}function si(e){return a6(Sg())(e)}function a6(e){return function(i){return i=i.lift(new ox(e.ngZone)),i.pipe(ca(e.outsideAngular),os(e.insideAngular))}}var l6=(e,t)=>function(){let n=arguments;return t&&setTimeout(()=>{t.state==="scheduled"&&t.invoke()},10),Ea(()=>e.apply(void 0,n))},gc=(e,t)=>function(){let i,n=arguments;for(let o=0;o<arguments.length;o++)typeof n[o]=="function"&&(t&&(i||=Ea(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",mc,{},mc,mc))),n[o]=l6(n[o],i));let r=s6(()=>e.apply(this,n));if(!t)if(r instanceof Wn){let o=Sg();return r.pipe(ca(o.outsideAngular),os(o.insideAngular))}else return Ea(()=>r);return r instanceof Wn?r.pipe(si):r instanceof Promise?Ea(()=>new Promise((o,s)=>r.then(l=>Ea(()=>o(l)),l=>Ea(()=>s(l))))):typeof r=="function"&&i?function(){return setTimeout(()=>{i&&i.state==="scheduled"&&i.invoke()},10),r.apply(this,arguments)}:Ea(()=>r)};var vs=class{constructor(t){return t}},bs=class{constructor(){return Vp()}};var c6=new Map,d6={activated:!1,tokenObservers:[]},u6={initialized:!1,enabled:!1};function _r(e){return c6.get(e)||Object.assign({},d6)}function EP(){return u6}var h6="https://content-firebaseappcheck.googleapis.com/v1";var f6="exchangeDebugToken",yP={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},prt=24*60*60*1e3;var ax=class{constructor(t,i,n,r,o){if(this.operation=t,this.retryPolicy=i,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return N(this,null,function*(){this.stop();try{this.pending=new Ql,this.pending.promise.catch(i=>{}),yield m6(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new Ql,this.pending.promise.catch(i=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(i){this.retryPolicy(i)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let i=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),i}}};function m6(e){return new Promise(t=>{setTimeout(t,e)})}var p6={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ys=new Ek("appCheck","AppCheck",p6);function CP(e){if(!_r(e).activated)throw ys.create("use-before-activation",{appName:e.name})}function TP(n,r){return N(this,arguments,function*({url:e,body:t},i){let o={"Content-Type":"application/json"},s=i.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let l={method:"POST",body:JSON.stringify(t),headers:o},d;try{d=yield fetch(e,l)}catch(y){throw ys.create("fetch-network-error",{originalErrorMessage:y?.message})}if(d.status!==200)throw ys.create("fetch-status-error",{httpStatus:d.status});let u;try{u=yield d.json()}catch(y){throw ys.create("fetch-parse-error",{originalErrorMessage:y?.message})}let f=u.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw ys.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let p=Number(f[1])*1e3,_=Date.now();return{token:u.token,expireTimeMillis:_+p,issuedAtTimeMillis:_}})}function SP(e,t){let{projectId:i,appId:n,apiKey:r}=e.options;return{url:`${h6}/projects/${i}/apps/${n}:${f6}?key=${r}`,body:{debug_token:t}}}var g6="firebase-app-check-database",_6=1,lx="firebase-app-check-store";var Ag=null;function v6(){return Ag||(Ag=new Promise((e,t)=>{try{let i=indexedDB.open(g6,_6);i.onsuccess=n=>{e(n.target.result)},i.onerror=n=>{var r;t(ys.create("storage-open",{originalErrorMessage:(r=n.target.error)===null||r===void 0?void 0:r.message}))},i.onupgradeneeded=n=>{let r=n.target.result;switch(n.oldVersion){case 0:r.createObjectStore(lx,{keyPath:"compositeKey"})}}}catch(i){t(ys.create("storage-open",{originalErrorMessage:i?.message}))}}),Ag)}function b6(e,t){return y6(w6(e),t)}function y6(e,t){return N(this,null,function*(){let n=(yield v6()).transaction(lx,"readwrite"),o=n.objectStore(lx).put({compositeKey:e,value:t});return new Promise((s,l)=>{o.onsuccess=d=>{s()},n.onerror=d=>{var u;l(ys.create("storage-set",{originalErrorMessage:(u=d.target.error)===null||u===void 0?void 0:u.message}))}})})}function w6(e){return`${e.options.appId}-${e.name}`}var cx=new Xl("@firebase/app-check");function sx(e,t){return Np()?b6(e,t).catch(i=>{cx.warn(`Failed to write token to IndexedDB. Error: ${i}`)}):Promise.resolve()}function AP(){return EP().enabled}function DP(){return N(this,null,function*(){let e=EP();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var x6={error:"UNKNOWN_ERROR"};function I6(e){return Mp.encodeString(JSON.stringify(e),!1)}function dx(e,t=!1){return N(this,null,function*(){let i=e.app;CP(i);let n=_r(i),r=n.token,o;if(r&&!yh(r)&&(n.token=void 0,r=void 0),!r){let d=yield n.cachedTokenPromise;d&&(yh(d)?r=d:yield sx(i,void 0))}if(!t&&r&&yh(r))return{token:r.token};let s=!1;if(AP()){n.exchangeTokenPromise||(n.exchangeTokenPromise=TP(SP(i,yield DP()),e.heartbeatServiceProvider).finally(()=>{n.exchangeTokenPromise=void 0}),s=!0);let d=yield n.exchangeTokenPromise;return yield sx(i,d),n.token=d,{token:d.token}}try{n.exchangeTokenPromise||(n.exchangeTokenPromise=n.provider.getToken().finally(()=>{n.exchangeTokenPromise=void 0}),s=!0),r=yield _r(i).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"?cx.warn(d.message):cx.error(d),o=d}let l;return r?o?yh(r)?l={token:r.token,internalError:o}:l=xP(o):(l={token:r.token},n.token=r,yield sx(i,r)):l=xP(o),s&&S6(i,l),l})}function E6(e){return N(this,null,function*(){let t=e.app;CP(t);let{provider:i}=_r(t);if(AP()){let n=yield DP(),{token:r}=yield TP(SP(t,n),e.heartbeatServiceProvider);return{token:r}}else{let{token:n}=yield i.getToken();return{token:n}}})}function C6(e,t,i,n){let{app:r}=e,o=_r(r),s={next:i,error:n,type:t};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&yh(o.token)){let l=o.token;Promise.resolve().then(()=>{i({token:l.token}),wP(e)}).catch(()=>{})}o.cachedTokenPromise.then(()=>wP(e))}function RP(e,t){let i=_r(e),n=i.tokenObservers.filter(r=>r.next!==t);n.length===0&&i.tokenRefresher&&i.tokenRefresher.isRunning()&&i.tokenRefresher.stop(),i.tokenObservers=n}function wP(e){let{app:t}=e,i=_r(t),n=i.tokenRefresher;n||(n=T6(e),i.tokenRefresher=n),!n.isRunning()&&i.isTokenAutoRefreshEnabled&&n.start()}function T6(e){let{app:t}=e;return new ax(()=>N(this,null,function*(){let i=_r(t),n;if(i.token?n=yield dx(e,!0):n=yield dx(e),n.error)throw n.error;if(n.internalError)throw n.internalError}),()=>!0,()=>{let i=_r(t);if(i.token){let n=i.token.issuedAtTimeMillis+(i.token.expireTimeMillis-i.token.issuedAtTimeMillis)*.5+3e5,r=i.token.expireTimeMillis-5*60*1e3;return n=Math.min(n,r),Math.max(0,n-Date.now())}else return 0},yP.RETRIAL_MIN_WAIT,yP.RETRIAL_MAX_WAIT)}function S6(e,t){let i=_r(e).tokenObservers;for(let n of i)try{n.type==="EXTERNAL"&&t.error!=null?n.error(t.error):n.next(t)}catch{}}function yh(e){return e.expireTimeMillis-Date.now()>0}function xP(e){return{token:I6(x6),error:e}}var ux=class{constructor(t,i){this.app=t,this.heartbeatServiceProvider=i}_delete(){let{tokenObservers:t}=_r(this.app);for(let i of t)RP(this.app,i.next);return Promise.resolve()}};function A6(e,t){return new ux(e,t)}function D6(e){return{getToken:t=>dx(e,t),getLimitedUseToken:()=>E6(e),addTokenListener:t=>C6(e,"INTERNAL",t),removeTokenListener:t=>RP(e.app,t)}}var R6="@firebase/app-check",k6="0.8.3";var M6="app-check",IP="app-check-internal";function P6(){ya(new Co(M6,e=>{let t=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat");return A6(t,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider(IP).initialize()})),ya(new Co(IP,e=>{let t=e.getProvider("app-check").getImmediate();return D6(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Rn(R6,k6)}P6();var O6=["localhost","0.0.0.0","127.0.0.1"],Srt=typeof window<"u"&&O6.includes(window.location.hostname);var N6="firebase",F6="10.11.0";gi.registerVersion(N6,F6,"app-compat");var L6=["ngOnDestroy"],PP=(e,t,i,n={})=>new Proxy(e,{get:(r,o)=>i.runOutsideAngular(()=>{if(e[o])return n?.spy?.get&&n.spy.get(o,e[o]),e[o];if(L6.indexOf(o)>-1)return()=>{};let s=t.toPromise().then(l=>{let d=l?.[o];return typeof d=="function"?d.bind(l):d?.then?d.then(u=>i.run(()=>u)):i.run(()=>d)});return new Proxy(()=>{},{get:(l,d)=>s[d],apply:(l,d,u)=>s.then(f=>{let p=f?.(...u);return n?.spy?.apply&&n.spy.apply(o,u,p),p})})})});var Dg=class{constructor(t){return t}},_c=new H("angularfire2.app.options"),vc=new H("angularfire2.app.name");function wh(e,t,i){let n=typeof i=="string"&&i||"[DEFAULT]",r=typeof i=="object"&&i||{};r.name=r.name||n;let s=gi.apps.filter(l=>l&&l.name===r.name)[0]||t.runOutsideAngular(()=>gi.initializeApp(e,r));try{if(JSON.stringify(e)!==JSON.stringify(s.options)){let l=!!module.hot;V6("error",`${s.name} Firebase App already initialized with different options${l?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Dg(s)}var V6=(e,...t)=>{B0()&&typeof console<"u"&&console[e](...t)},B6={provide:Dg,useFactory:wh,deps:[_c,Q,[new He,vc]]},OP=(()=>{class e{static initializeApp(i,n){return{ngModule:e,providers:[{provide:_c,useValue:i},{provide:vc,useValue:n}]}}constructor(i){gi.registerVersion("angularfire",Xi.full,"core"),gi.registerVersion("angularfire",Xi.full,"app-compat"),gi.registerVersion("angular",ek.full,i.toString())}static \u0275fac=function(n){return new(n||e)(T(ri))};static \u0275mod=st({type:e});static \u0275inj=ot({providers:[B6]})}return e})();function Rg(e,t,i,n,r){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(l=>l[0]===e)||[];if(o)return j6(r,s)||(MP("error",`${t} was already initialized on the ${i} Firebase App with different settings.${U6?" You may need to reload as Firebase is not HMR aware.":""}`),MP("warn",{is:r,was:s})),o;{let l=n();return globalThis.\u0275AngularfireInstanceCache.push([e,l,r]),l}}function j6(e,t){try{return e.toString()===t.toString()}catch{return e===t}}var U6=typeof module<"u"&&!!module.hot,MP=(e,...t)=>{B0()&&typeof console<"u"&&console[e](...t)};globalThis.\u0275AngularfireInstanceCache||=[];var hx=new H("angularfire2.auth.use-emulator"),fx=new H("angularfire2.auth.settings"),mx=new H("angularfire2.auth.tenant-id"),px=new H("angularfire2.auth.langugage-code"),gx=new H("angularfire2.auth.use-device-language"),_x=new H("angularfire.auth.persistence"),vx=(e,t,i,n,r,o,s,l)=>Rg(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{let d=t.runOutsideAngular(()=>e.auth());if(i&&d.useEmulator(...i),n&&(d.tenantId=n),d.languageCode=r,o&&d.useDeviceLanguage(),s)for(let[u,f]of Object.entries(s))d.settings[u]=f;return l&&d.setPersistence(l),d},[i,n,r,o,s,l]),xh=(()=>{class e{authState;idToken;user;idTokenResult;credential;constructor(i,n,r,o,s,l,d,u,f,p,_,y){let S=new at,A=tt(void 0).pipe(os(s.outsideAngular),ke(()=>o.runOutsideAngular(()=>import("./chunk-3FSE7Z3H.js"))),dt(()=>wh(i,o,n)),dt(M=>vx(M,o,l,u,f,p,d,_)),Fl({bufferSize:1,refCount:!1}));if(Eo(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=tt(null);else{A.pipe(Nr()).subscribe();let M=A.pipe(ke(Y=>Y.getRedirectResult().then(Rt=>Rt,()=>null)),si,Fl({bufferSize:1,refCount:!1})),K=A.pipe(ke(Y=>new Wn(Rt=>({unsubscribe:o.runOutsideAngular(()=>Y.onAuthStateChanged(kt=>Rt.next(kt),kt=>Rt.error(kt),()=>Rt.complete()))})))),ut=A.pipe(ke(Y=>new Wn(Rt=>({unsubscribe:o.runOutsideAngular(()=>Y.onIdTokenChanged(kt=>Rt.next(kt),kt=>Rt.error(kt),()=>Rt.complete()))}))));this.authState=M.pipe(M0(K),ca(s.outsideAngular),os(s.insideAngular)),this.user=M.pipe(M0(ut),ca(s.outsideAngular),os(s.insideAngular)),this.idToken=this.user.pipe(ke(Y=>Y?Re(Y.getIdToken()):tt(null))),this.idTokenResult=this.user.pipe(ke(Y=>Y?Re(Y.getIdTokenResult()):tt(null))),this.credential=wn(M,S,this.authState.pipe(me(Y=>!Y))).pipe(dt(Y=>Y?.user?Y:null),ca(s.outsideAngular),os(s.insideAngular))}return PP(this,A,o,{spy:{apply:(M,K,ut)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&ut.then(Y=>S.next(Y))}}})}static \u0275fac=function(n){return new(n||e)(T(_c),T(vc,8),T(ri),T(Q),T($r),T(hx,8),T(fx,8),T(mx,8),T(px,8),T(gx,8),T(_x,8),T(Ri,8))};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})(),NP=(()=>{class e{constructor(){gi.registerVersion("angularfire",Xi.full,"auth-compat")}static \u0275fac=function(n){return new(n||e)};static \u0275mod=st({type:e});static \u0275inj=ot({providers:[xh]})}return e})();var z6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},br={},rt,jx=jx||{},Pt=z6||self;function Hg(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Fh(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function $6(e){return Object.prototype.hasOwnProperty.call(e,bx)&&e[bx]||(e[bx]=++H6)}var bx="closure_uid_"+(1e9*Math.random()>>>0),H6=0;function W6(e,t,i){return e.call.apply(e.bind,arguments)}function q6(e,t,i){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function Kn(e,t,i){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Kn=W6:Kn=q6,Kn.apply(null,arguments)}function kg(e,t){var i=Array.prototype.slice.call(arguments,1);return function(){var n=i.slice();return n.push.apply(n,arguments),e.apply(this,n)}}function Pn(e,t){function i(){}i.prototype=t.prototype,e.$=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.ac=function(n,r,o){for(var s=Array(arguments.length-2),l=2;l<arguments.length;l++)s[l-2]=arguments[l];return t.prototype[r].apply(n,s)}}function ws(){this.s=this.s,this.o=this.o}var G6=0;ws.prototype.s=!1;ws.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),G6!=0)&&$6(this)};ws.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var YP=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let i=0;i<e.length;i++)if(i in e&&e[i]===t)return i;return-1};function Ux(e){let t=e.length;if(0<t){let i=Array(t);for(let n=0;n<t;n++)i[n]=e[n];return i}return[]}function LP(e,t){for(let i=1;i<arguments.length;i++){let n=arguments[i];if(Hg(n)){let r=e.length||0,o=n.length||0;e.length=r+o;for(let s=0;s<o;s++)e[r+s]=n[s]}else e.push(n)}}function Yn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Yn.prototype.h=function(){this.defaultPrevented=!0};var K6=function(){if(!Pt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{let i=()=>{};Pt.addEventListener("test",i,t),Pt.removeEventListener("test",i,t)}catch{}return e}();function Ah(e){return/^[\s\xa0]*$/.test(e)}function Wg(){var e=Pt.navigator;return e&&(e=e.userAgent)?e:""}function Hr(e){return Wg().indexOf(e)!=-1}function zx(e){return zx[" "](e),e}zx[" "]=function(){};function Y6(e,t){var i=L8;return Object.prototype.hasOwnProperty.call(i,e)?i[e]:i[e]=t(e)}var Q6=Hr("Opera"),xc=Hr("Trident")||Hr("MSIE"),QP=Hr("Edge"),Ex=QP||xc,XP=Hr("Gecko")&&!(Wg().toLowerCase().indexOf("webkit")!=-1&&!Hr("Edge"))&&!(Hr("Trident")||Hr("MSIE"))&&!Hr("Edge"),X6=Wg().toLowerCase().indexOf("webkit")!=-1&&!Hr("Edge");function ZP(){var e=Pt.document;return e?e.documentMode:void 0}var Cx;t:{if(Mg="",Pg=function(){var e=Wg();if(XP)return/rv:([^\);]+)(\)|;)/.exec(e);if(QP)return/Edge\/([\d\.]+)/.exec(e);if(xc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(X6)return/WebKit\/(\S+)/.exec(e);if(Q6)return/(?:Version)[ \/]?(\S+)/.exec(e)}(),Pg&&(Mg=Pg?Pg[1]:""),xc&&(Og=ZP(),Og!=null&&Og>parseFloat(Mg))){Cx=String(Og);break t}Cx=Mg}var Mg,Pg,Og,Tx;Pt.document&&xc?(yx=ZP(),Tx=yx||parseInt(Cx,10)||void 0):Tx=void 0;var yx,Z6=Tx;function Dh(e,t){if(Yn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var i=this.type=e.type,n=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(XP){t:{try{zx(t.nodeName);var r=!0;break t}catch{}r=!1}r||(t=null)}}else i=="mouseover"?t=e.fromElement:i=="mouseout"&&(t=e.toElement);this.relatedTarget=t,n?(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:J6[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Dh.$.h.call(this)}}Pn(Dh,Yn);var J6={2:"touch",3:"pen",4:"mouse"};Dh.prototype.h=function(){Dh.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Lh="closure_listenable_"+(1e6*Math.random()|0),t8=0;function e8(e,t,i,n,r){this.listener=e,this.proxy=null,this.src=t,this.type=i,this.capture=!!n,this.la=r,this.key=++t8,this.fa=this.ia=!1}function qg(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function $x(e,t,i){for(let n in e)t.call(i,e[n],n,e)}function n8(e,t){for(let i in e)t.call(void 0,e[i],i,e)}function JP(e){let t={};for(let i in e)t[i]=e[i];return t}var VP="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tO(e,t){let i,n;for(let r=1;r<arguments.length;r++){n=arguments[r];for(i in n)e[i]=n[i];for(let o=0;o<VP.length;o++)i=VP[o],Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}}function Gg(e){this.src=e,this.g={},this.h=0}Gg.prototype.add=function(e,t,i,n,r){var o=e.toString();e=this.g[o],e||(e=this.g[o]=[],this.h++);var s=Ax(e,t,n,r);return-1<s?(t=e[s],i||(t.ia=!1)):(t=new e8(t,this.src,o,!!n,r),t.ia=i,e.push(t)),t};function Sx(e,t){var i=t.type;if(i in e.g){var n=e.g[i],r=YP(n,t),o;(o=0<=r)&&Array.prototype.splice.call(n,r,1),o&&(qg(t),e.g[i].length==0&&(delete e.g[i],e.h--))}}function Ax(e,t,i,n){for(var r=0;r<e.length;++r){var o=e[r];if(!o.fa&&o.listener==t&&o.capture==!!i&&o.la==n)return r}return-1}var Hx="closure_lm_"+(1e6*Math.random()|0),wx={};function eO(e,t,i,n,r){if(n&&n.once)return iO(e,t,i,n,r);if(Array.isArray(t)){for(var o=0;o<t.length;o++)eO(e,t[o],i,n,r);return null}return i=Gx(i),e&&e[Lh]?e.O(t,i,Fh(n)?!!n.capture:!!n,r):nO(e,t,i,!1,n,r)}function nO(e,t,i,n,r,o){if(!t)throw Error("Invalid event type");var s=Fh(r)?!!r.capture:!!r,l=qx(e);if(l||(e[Hx]=l=new Gg(e)),i=l.add(t,i,n,s,o),i.proxy)return i;if(n=i8(),i.proxy=n,n.src=e,n.listener=i,e.addEventListener)K6||(r=s),r===void 0&&(r=!1),e.addEventListener(t.toString(),n,r);else if(e.attachEvent)e.attachEvent(oO(t.toString()),n);else if(e.addListener&&e.removeListener)e.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return i}function i8(){function e(i){return t.call(e.src,e.listener,i)}let t=r8;return e}function iO(e,t,i,n,r){if(Array.isArray(t)){for(var o=0;o<t.length;o++)iO(e,t[o],i,n,r);return null}return i=Gx(i),e&&e[Lh]?e.P(t,i,Fh(n)?!!n.capture:!!n,r):nO(e,t,i,!0,n,r)}function rO(e,t,i,n,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)rO(e,t[o],i,n,r);else n=Fh(n)?!!n.capture:!!n,i=Gx(i),e&&e[Lh]?(e=e.i,t=String(t).toString(),t in e.g&&(o=e.g[t],i=Ax(o,i,n,r),-1<i&&(qg(o[i]),Array.prototype.splice.call(o,i,1),o.length==0&&(delete e.g[t],e.h--)))):e&&(e=qx(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ax(t,i,n,r)),(i=-1<e?t[e]:null)&&Wx(i))}function Wx(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[Lh])Sx(t.i,e);else{var i=e.type,n=e.proxy;t.removeEventListener?t.removeEventListener(i,n,e.capture):t.detachEvent?t.detachEvent(oO(i),n):t.addListener&&t.removeListener&&t.removeListener(n),(i=qx(t))?(Sx(i,e),i.h==0&&(i.src=null,t[Hx]=null)):qg(e)}}}function oO(e){return e in wx?wx[e]:wx[e]="on"+e}function r8(e,t){if(e.fa)e=!0;else{t=new Dh(t,this);var i=e.listener,n=e.la||e.src;e.ia&&Wx(e),e=i.call(n,t)}return e}function qx(e){return e=e[Hx],e instanceof Gg?e:null}var xx="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gx(e){return typeof e=="function"?e:(e[xx]||(e[xx]=function(t){return e.handleEvent(t)}),e[xx])}function Mn(){ws.call(this),this.i=new Gg(this),this.S=this,this.J=null}Pn(Mn,ws);Mn.prototype[Lh]=!0;Mn.prototype.removeEventListener=function(e,t,i,n){rO(this,e,t,i,n)};function Un(e,t){var i,n=e.J;if(n)for(i=[];n;n=n.J)i.push(n);if(e=e.S,n=t.type||t,typeof t=="string")t=new Yn(t,e);else if(t instanceof Yn)t.target=t.target||e;else{var r=t;t=new Yn(n,e),tO(t,r)}if(r=!0,i)for(var o=i.length-1;0<=o;o--){var s=t.g=i[o];r=Ng(s,n,!0,t)&&r}if(s=t.g=e,r=Ng(s,n,!0,t)&&r,r=Ng(s,n,!1,t)&&r,i)for(o=0;o<i.length;o++)s=t.g=i[o],r=Ng(s,n,!1,t)&&r}Mn.prototype.N=function(){if(Mn.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var i=e.g[t],n=0;n<i.length;n++)qg(i[n]);delete e.g[t],e.h--}}this.J=null};Mn.prototype.O=function(e,t,i,n){return this.i.add(String(e),t,!1,i,n)};Mn.prototype.P=function(e,t,i,n){return this.i.add(String(e),t,!0,i,n)};function Ng(e,t,i,n){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var r=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==i){var l=s.listener,d=s.la||s.src;s.ia&&Sx(e.i,s),r=l.call(d,n)!==!1&&r}}return r&&!n.defaultPrevented}var Kx=Pt.JSON.stringify,Dx=class{constructor(t,i){this.i=t,this.j=i,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}};function o8(){var e=Yx;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Rx=class{constructor(){this.h=this.g=null}add(t,i){let n=sO.get();n.set(t,i),this.h?this.h.next=n:this.g=n,this.h=n}},sO=new Dx(()=>new kx,e=>e.reset()),kx=class{constructor(){this.next=this.g=this.h=null}set(t,i){this.h=t,this.g=i,this.next=null}reset(){this.next=this.g=this.h=null}};function s8(e){var t=1;e=e.split(":");let i=[];for(;0<t&&e.length;)i.push(e.shift()),t--;return e.length&&i.push(e.join(":")),i}function a8(e){Pt.setTimeout(()=>{throw e},0)}var Rh,kh=!1,Yx=new Rx,aO=()=>{let e=Pt.Promise.resolve(void 0);Rh=()=>{e.then(l8)}},l8=()=>{for(var e;e=o8();){try{e.h.call(e.g)}catch(i){a8(i)}var t=sO;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}kh=!1};function Kg(e,t){Mn.call(this),this.h=e||1,this.g=t||Pt,this.j=Kn(this.qb,this),this.l=Date.now()}Pn(Kg,Mn);rt=Kg.prototype;rt.ga=!1;rt.T=null;rt.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Un(this,"tick"),this.ga&&(Qx(this),this.start()))}};rt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Qx(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}rt.N=function(){Kg.$.N.call(this),Qx(this),delete this.g};function Xx(e,t,i){if(typeof e=="function")i&&(e=Kn(e,i));else if(e&&typeof e.handleEvent=="function")e=Kn(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:Pt.setTimeout(e,t||0)}function lO(e){e.g=Xx(()=>{e.g=null,e.i&&(e.i=!1,lO(e))},e.j);let t=e.h;e.h=null,e.m.apply(null,t)}var Mx=class extends ws{constructor(t,i){super(),this.m=t,this.j=i,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:lO(this)}N(){super.N(),this.g&&(Pt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Mh(e){ws.call(this),this.h=e,this.g={}}Pn(Mh,ws);var BP=[];function cO(e,t,i,n){Array.isArray(i)||(i&&(BP[0]=i.toString()),i=BP);for(var r=0;r<i.length;r++){var o=eO(t,i[r],n||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function dO(e){$x(e.g,function(t,i){this.g.hasOwnProperty(i)&&Wx(t)},e),e.g={}}Mh.prototype.N=function(){Mh.$.N.call(this),dO(this)};Mh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Yg(){this.g=!0}Yg.prototype.Ea=function(){this.g=!1};function c8(e,t,i,n,r,o){e.info(function(){if(e.g)if(o)for(var s="",l=o.split("&"),d=0;d<l.length;d++){var u=l[d].split("=");if(1<u.length){var f=u[0];u=u[1];var p=f.split("_");s=2<=p.length&&p[1]=="type"?s+(f+"="+u+"&"):s+(f+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+n+") [attempt "+r+"]: "+t+`
`+i+`
`+s})}function d8(e,t,i,n,r,o,s){e.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+r+"]: "+t+`
`+i+`
`+o+" "+s})}function yc(e,t,i,n){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+h8(e,i)+(n?" "+n:"")})}function u8(e,t){e.info(function(){return"TIMEOUT: "+t})}Yg.prototype.info=function(){};function h8(e,t){if(!e.g)return t;if(!t)return null;try{var i=JSON.parse(t);if(i){for(e=0;e<i.length;e++)if(Array.isArray(i[e])){var n=i[e];if(!(2>n.length)){var r=n[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<r.length;s++)r[s]=""}}}}return Kx(i)}catch{return t}}var Da={},jP=null;function Qg(){return jP=jP||new Mn}Da.Ta="serverreachability";function uO(e){Yn.call(this,Da.Ta,e)}Pn(uO,Yn);function Ph(e){let t=Qg();Un(t,new uO(t))}Da.STAT_EVENT="statevent";function hO(e,t){Yn.call(this,Da.STAT_EVENT,e),this.stat=t}Pn(hO,Yn);function ai(e){let t=Qg();Un(t,new hO(t,e))}Da.Ua="timingevent";function fO(e,t){Yn.call(this,Da.Ua,e),this.size=t}Pn(fO,Yn);function Vh(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return Pt.setTimeout(function(){e()},t)}var Xg={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},mO={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Zx(){}Zx.prototype.h=null;function UP(e){return e.h||(e.h=e.i())}function pO(){}var Bh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Jx(){Yn.call(this,"d")}Pn(Jx,Yn);function tI(){Yn.call(this,"c")}Pn(tI,Yn);var Px;function Zg(){}Pn(Zg,Zx);Zg.prototype.g=function(){return new XMLHttpRequest};Zg.prototype.i=function(){return{}};Px=new Zg;function jh(e,t,i,n){this.l=e,this.j=t,this.m=i,this.W=n||1,this.U=new Mh(this),this.P=f8,e=Ex?125:void 0,this.V=new Kg(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new gO}function gO(){this.i=null,this.g="",this.h=!1}var f8=45e3,_O={},Ox={};rt=jh.prototype;rt.setTimeout=function(e){this.P=e};function Nx(e,t,i){e.L=1,e.A=t_(Ro(t)),e.u=i,e.S=!0,vO(e,null)}function vO(e,t){e.G=Date.now(),Uh(e),e.B=Ro(e.A);var i=e.B,n=e.W;Array.isArray(n)||(n=[String(n)]),TO(i.i,"t",n),e.o=0,i=e.l.J,e.h=new gO,e.g=GO(e.l,i?t:null,!e.u),0<e.O&&(e.M=new Mx(Kn(e.Pa,e,e.g),e.O)),cO(e.U,e.g,"readystatechange",e.nb),t=e.I?JP(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Ph(),c8(e.j,e.v,e.B,e.m,e.W,e.u)}rt.nb=function(e){e=e.target;let t=this.M;t&&Wr(e)==3?t.l():this.Pa(e)};rt.Pa=function(e){try{if(e==this.g)t:{let f=Wr(this.g);var t=this.g.Ia();let p=this.g.da();if(!(3>f)&&(f!=3||Ex||this.g&&(this.h.h||this.g.ja()||WP(this.g)))){this.J||f!=4||t==7||(t==8||0>=p?Ph(3):Ph(2)),Jg(this);var i=this.g.da();this.ca=i;e:if(bO(this)){var n=WP(this.g);e="";var r=n.length,o=Wr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ta(this),Sh(this);var s="";break e}this.h.i=new Pt.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,e+=this.h.i.decode(n[t],{stream:o&&t==r-1});n.length=0,this.h.g+=e,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=i==200,d8(this.j,this.v,this.B,this.m,this.W,f,i),this.i){if(this.aa&&!this.K){e:{if(this.g){var l,d=this.g;if((l=d.g?d.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ah(l)){var u=l;break e}}u=null}if(i=u)yc(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fx(this,i);else{this.i=!1,this.s=3,ai(12),Ta(this),Sh(this);break t}}this.S?(yO(this,f,s),Ex&&this.i&&f==3&&(cO(this.U,this.V,"tick",this.mb),this.V.start())):(yc(this.j,this.m,s,null),Fx(this,s)),f==4&&Ta(this),this.i&&!this.J&&(f==4?$O(this.l,this):(this.i=!1,Uh(this)))}else O8(this.g),i==400&&0<s.indexOf("Unknown SID")?(this.s=3,ai(12)):(this.s=0,ai(13)),Ta(this),Sh(this)}}}catch{}finally{}};function bO(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function yO(e,t,i){let n=!0,r;for(;!e.J&&e.o<i.length;)if(r=m8(e,i),r==Ox){t==4&&(e.s=4,ai(14),n=!1),yc(e.j,e.m,null,"[Incomplete Response]");break}else if(r==_O){e.s=4,ai(15),yc(e.j,e.m,i,"[Invalid Chunk]"),n=!1;break}else yc(e.j,e.m,r,null),Fx(e,r);bO(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||i.length!=0||e.h.h||(e.s=1,ai(16),n=!1),e.i=e.i&&n,n?0<i.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+i.length),sI(t),t.M=!0,ai(11))):(yc(e.j,e.m,i,"[Invalid Chunked Response]"),Ta(e),Sh(e))}rt.mb=function(){if(this.g){var e=Wr(this.g),t=this.g.ja();this.o<t.length&&(Jg(this),yO(this,e,t),this.i&&e!=4&&Uh(this))}};function m8(e,t){var i=e.o,n=t.indexOf(`
`,i);return n==-1?Ox:(i=Number(t.substring(i,n)),isNaN(i)?_O:(n+=1,n+i>t.length?Ox:(t=t.slice(n,n+i),e.o=n+i,t)))}rt.cancel=function(){this.J=!0,Ta(this)};function Uh(e){e.Y=Date.now()+e.P,wO(e,e.P)}function wO(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=Vh(Kn(e.lb,e),t)}function Jg(e){e.C&&(Pt.clearTimeout(e.C),e.C=null)}rt.lb=function(){this.C=null;let e=Date.now();0<=e-this.Y?(u8(this.j,this.B),this.L!=2&&(Ph(),ai(17)),Ta(this),this.s=2,Sh(this)):wO(this,this.Y-e)};function Sh(e){e.l.H==0||e.J||$O(e.l,e)}function Ta(e){Jg(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,Qx(e.V),dO(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Fx(e,t){try{var i=e.l;if(i.H!=0&&(i.g==e||Lx(i.i,e))){if(!e.K&&Lx(i.i,e)&&i.H==3){try{var n=i.Ja.g.parse(t)}catch{n=null}if(Array.isArray(n)&&n.length==3){var r=n;if(r[0]==0){t:if(!i.u){if(i.g)if(i.g.G+3e3<e.G)jg(i),i_(i);else break t;oI(i),ai(18)}}else i.Fa=r[1],0<i.Fa-i.V&&37500>r[2]&&i.G&&i.A==0&&!i.v&&(i.v=Vh(Kn(i.ib,i),6e3));if(1>=DO(i.i)&&i.oa){try{i.oa()}catch{}i.oa=void 0}}else Sa(i,11)}else if((e.K||i.g==e)&&jg(i),!Ah(t))for(r=i.Ja.g.parse(t),t=0;t<r.length;t++){let u=r[t];if(i.V=u[0],u=u[1],i.H==2)if(u[0]=="c"){i.K=u[1],i.pa=u[2];let f=u[3];f!=null&&(i.ra=f,i.l.info("VER="+i.ra));let p=u[4];p!=null&&(i.Ga=p,i.l.info("SVER="+i.Ga));let _=u[5];_!=null&&typeof _=="number"&&0<_&&(n=1.5*_,i.L=n,i.l.info("backChannelRequestTimeoutMs_="+n)),n=i;let y=e.g;if(y){let S=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(S){var o=n.i;o.g||S.indexOf("spdy")==-1&&S.indexOf("quic")==-1&&S.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(eI(o,o.h),o.h=null))}if(n.F){let A=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;A&&(n.Da=A,Ve(n.I,n.F,A))}}i.H=3,i.h&&i.h.Ba(),i.ca&&(i.S=Date.now()-e.G,i.l.info("Handshake RTT: "+i.S+"ms")),n=i;var s=e;if(n.wa=qO(n,n.J?n.pa:null,n.Y),s.K){RO(n.i,s);var l=s,d=n.L;d&&l.setTimeout(d),l.C&&(Jg(l),Uh(l)),n.g=s}else UO(n);0<i.j.length&&r_(i)}else u[0]!="stop"&&u[0]!="close"||Sa(i,7);else i.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Sa(i,7):rI(i):u[0]!="noop"&&i.h&&i.h.Aa(u),i.A=0)}}Ph(4)}catch{}}function p8(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(Hg(e)){for(var t=[],i=e.length,n=0;n<i;n++)t.push(e[n]);return t}t=[],i=0;for(n in e)t[i++]=e[n];return t}function g8(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(Hg(e)||typeof e=="string"){var t=[];e=e.length;for(var i=0;i<e;i++)t.push(i);return t}t=[],i=0;for(let n in e)t[i++]=n;return t}}}function xO(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(Hg(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var i=g8(e),n=p8(e),r=n.length,o=0;o<r;o++)t.call(void 0,n[o],i&&i[o],e)}var IO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _8(e,t){if(e){e=e.split("&");for(var i=0;i<e.length;i++){var n=e[i].indexOf("="),r=null;if(0<=n){var o=e[i].substring(0,n);r=e[i].substring(n+1)}else o=e[i];t(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Aa(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Aa){this.h=e.h,Vg(this,e.j),this.s=e.s,this.g=e.g,Bg(this,e.m),this.l=e.l;var t=e.i,i=new Oh;i.i=t.i,t.g&&(i.g=new Map(t.g),i.h=t.h),zP(this,i),this.o=e.o}else e&&(t=String(e).match(IO))?(this.h=!1,Vg(this,t[1]||"",!0),this.s=Ch(t[2]||""),this.g=Ch(t[3]||"",!0),Bg(this,t[4]),this.l=Ch(t[5]||"",!0),zP(this,t[6]||"",!0),this.o=Ch(t[7]||"")):(this.h=!1,this.i=new Oh(null,this.h))}Aa.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Th(t,$P,!0),":");var i=this.g;return(i||t=="file")&&(e.push("//"),(t=this.s)&&e.push(Th(t,$P,!0),"@"),e.push(encodeURIComponent(String(i)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i=this.m,i!=null&&e.push(":",String(i))),(i=this.l)&&(this.g&&i.charAt(0)!="/"&&e.push("/"),e.push(Th(i,i.charAt(0)=="/"?y8:b8,!0))),(i=this.i.toString())&&e.push("?",i),(i=this.o)&&e.push("#",Th(i,x8)),e.join("")};function Ro(e){return new Aa(e)}function Vg(e,t,i){e.j=i?Ch(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Bg(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function zP(e,t,i){t instanceof Oh?(e.i=t,I8(e.i,e.h)):(i||(t=Th(t,w8)),e.i=new Oh(t,e.h))}function Ve(e,t,i){e.i.set(t,i)}function t_(e){return Ve(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ch(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Th(e,t,i){return typeof e=="string"?(e=encodeURI(e).replace(t,v8),i&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function v8(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var $P=/[#\/\?@]/g,b8=/[#\?:]/g,y8=/[#\?]/g,w8=/[#\?@]/g,x8=/#/g;function Oh(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xs(e){e.g||(e.g=new Map,e.h=0,e.i&&_8(e.i,function(t,i){e.add(decodeURIComponent(t.replace(/\+/g," ")),i)}))}rt=Oh.prototype;rt.add=function(e,t){xs(this),this.i=null,e=Ic(this,e);var i=this.g.get(e);return i||this.g.set(e,i=[]),i.push(t),this.h+=1,this};function EO(e,t){xs(e),t=Ic(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function CO(e,t){return xs(e),t=Ic(e,t),e.g.has(t)}rt.forEach=function(e,t){xs(this),this.g.forEach(function(i,n){i.forEach(function(r){e.call(t,r,n,this)},this)},this)};rt.ta=function(){xs(this);let e=Array.from(this.g.values()),t=Array.from(this.g.keys()),i=[];for(let n=0;n<t.length;n++){let r=e[n];for(let o=0;o<r.length;o++)i.push(t[n])}return i};rt.Z=function(e){xs(this);let t=[];if(typeof e=="string")CO(this,e)&&(t=t.concat(this.g.get(Ic(this,e))));else{e=Array.from(this.g.values());for(let i=0;i<e.length;i++)t=t.concat(e[i])}return t};rt.set=function(e,t){return xs(this),this.i=null,e=Ic(this,e),CO(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};rt.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function TO(e,t,i){EO(e,t),0<i.length&&(e.i=null,e.g.set(Ic(e,t),Ux(i)),e.h+=i.length)}rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";let e=[],t=Array.from(this.g.keys());for(var i=0;i<t.length;i++){var n=t[i];let o=encodeURIComponent(String(n)),s=this.Z(n);for(n=0;n<s.length;n++){var r=o;s[n]!==""&&(r+="="+encodeURIComponent(String(s[n]))),e.push(r)}}return this.i=e.join("&")};function Ic(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function I8(e,t){t&&!e.j&&(xs(e),e.i=null,e.g.forEach(function(i,n){var r=n.toLowerCase();n!=r&&(EO(this,n),TO(this,r,i))},e)),e.j=t}var E8=class{constructor(e,t){this.g=e,this.map=t}};function SO(e){this.l=e||C8,Pt.PerformanceNavigationTiming?(e=Pt.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(Pt.g&&Pt.g.Ka&&Pt.g.Ka()&&Pt.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var C8=10;function AO(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function DO(e){return e.h?1:e.g?e.g.size:0}function Lx(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function eI(e,t){e.g?e.g.add(t):e.h=t}function RO(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}SO.prototype.cancel=function(){if(this.i=kO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function kO(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let i of e.g.values())t=t.concat(i.F);return t}return Ux(e.i)}var T8=class{stringify(e){return Pt.JSON.stringify(e,void 0)}parse(e){return Pt.JSON.parse(e,void 0)}};function S8(){this.g=new T8}function A8(e,t,i){let n=i||"";try{xO(e,function(r,o){let s=r;Fh(r)&&(s=Kx(r)),t.push(n+o+"="+encodeURIComponent(s))})}catch(r){throw t.push(n+"type="+encodeURIComponent("_badmap")),r}}function D8(e,t){let i=new Yg;if(Pt.Image){let n=new Image;n.onload=kg(Fg,i,n,"TestLoadImage: loaded",!0,t),n.onerror=kg(Fg,i,n,"TestLoadImage: error",!1,t),n.onabort=kg(Fg,i,n,"TestLoadImage: abort",!1,t),n.ontimeout=kg(Fg,i,n,"TestLoadImage: timeout",!1,t),Pt.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=e}else t(!1)}function Fg(e,t,i,n,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(n)}catch{}}function zh(e){this.l=e.ec||null,this.j=e.ob||!1}Pn(zh,Zx);zh.prototype.g=function(){return new e_(this.l,this.j)};zh.prototype.i=function(e){return function(){return e}}({});function e_(e,t){Mn.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=nI,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pn(e_,Mn);var nI=0;rt=e_.prototype;rt.open=function(e,t){if(this.readyState!=nI)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Nh(this)};rt.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Pt).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$h(this)),this.readyState=nI};rt.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Nh(this)),this.g&&(this.readyState=3,Nh(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Pt.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;MO(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function MO(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}rt.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?$h(this):Nh(this),this.readyState==3&&MO(this)}};rt.Za=function(e){this.g&&(this.response=this.responseText=e,$h(this))};rt.Ya=function(e){this.g&&(this.response=e,$h(this))};rt.ka=function(){this.g&&$h(this)};function $h(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Nh(e)}rt.setRequestHeader=function(e,t){this.v.append(e,t)};rt.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};rt.getAllResponseHeaders=function(){if(!this.h)return"";let e=[],t=this.h.entries();for(var i=t.next();!i.done;)i=i.value,e.push(i[0]+": "+i[1]),i=t.next();return e.join(`\r
`)};function Nh(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(e_.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var R8=Pt.JSON.parse;function en(e){Mn.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=PO,this.L=this.M=!1}Pn(en,Mn);var PO="",k8=/^https?$/i,M8=["POST","PUT"];rt=en.prototype;rt.Oa=function(e){this.M=e};rt.ha=function(e,t,i,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Px.g(),this.C=this.u?UP(this.u):UP(Px),this.g.onreadystatechange=Kn(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(o){HP(this,o);return}if(e=i||"",i=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var r in n)i.set(r,n[r]);else if(typeof n.keys=="function"&&typeof n.get=="function")for(let o of n.keys())i.set(o,n.get(o));else throw Error("Unknown input type for opt_headers: "+String(n));n=Array.from(i.keys()).find(o=>o.toLowerCase()=="content-type"),r=Pt.FormData&&e instanceof Pt.FormData,!(0<=YP(M8,t))||n||r||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of i)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{FO(this),0<this.B&&((this.L=P8(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Kn(this.ua,this)):this.A=Xx(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){HP(this,o)}};function P8(e){return xc&&typeof e.timeout=="number"&&e.ontimeout!==void 0}rt.ua=function(){typeof jx<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Un(this,"timeout"),this.abort(8))};function HP(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,OO(e),n_(e)}function OO(e){e.F||(e.F=!0,Un(e,"complete"),Un(e,"error"))}rt.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Un(this,"complete"),Un(this,"abort"),n_(this))};rt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),n_(this,!0)),en.$.N.call(this)};rt.La=function(){this.s||(this.G||this.v||this.l?NO(this):this.kb())};rt.kb=function(){NO(this)};function NO(e){if(e.h&&typeof jx<"u"&&(!e.C[1]||Wr(e)!=4||e.da()!=2)){if(e.v&&Wr(e)==4)Xx(e.La,0,e);else if(Un(e,"readystatechange"),Wr(e)==4){e.h=!1;try{let s=e.da();t:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var i;if(!(i=t)){var n;if(n=s===0){var r=String(e.I).match(IO)[1]||null;!r&&Pt.self&&Pt.self.location&&(r=Pt.self.location.protocol.slice(0,-1)),n=!k8.test(r?r.toLowerCase():"")}i=n}if(i)Un(e,"complete"),Un(e,"success");else{e.m=6;try{var o=2<Wr(e)?e.g.statusText:""}catch{o=""}e.j=o+" ["+e.da()+"]",OO(e)}}finally{n_(e)}}}}function n_(e,t){if(e.g){FO(e);let i=e.g,n=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Un(e,"ready");try{i.onreadystatechange=n}catch{}}}function FO(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Pt.clearTimeout(e.A),e.A=null)}rt.isActive=function(){return!!this.g};function Wr(e){return e.g?e.g.readyState:0}rt.da=function(){try{return 2<Wr(this)?this.g.status:-1}catch{return-1}};rt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};rt.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),R8(t)}};function WP(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case PO:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function O8(e){let t={};e=(e.g&&2<=Wr(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let n=0;n<e.length;n++){if(Ah(e[n]))continue;var i=s8(e[n]);let r=i[0];if(i=i[1],typeof i!="string")continue;i=i.trim();let o=t[r]||[];t[r]=o,o.push(i)}n8(t,function(n){return n.join(", ")})}rt.Ia=function(){return this.m};rt.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function LO(e){let t="";return $x(e,function(i,n){t+=n,t+=":",t+=i,t+=`\r
`}),t}function iI(e,t,i){t:{for(n in i){var n=!1;break t}n=!0}n||(i=LO(i),typeof e=="string"?i!=null&&encodeURIComponent(String(i)):Ve(e,t,i))}function Ih(e,t,i){return i&&i.internalChannelParams&&i.internalChannelParams[e]||t}function VO(e){this.Ga=0,this.j=[],this.l=new Yg,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ih("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ih("baseRetryDelayMs",5e3,e),this.hb=Ih("retryDelaySeedMs",1e4,e),this.eb=Ih("forwardChannelMaxRetries",2,e),this.xa=Ih("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new SO(e&&e.concurrentRequestLimit),this.Ja=new S8,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}rt=VO.prototype;rt.ra=8;rt.H=1;function rI(e){if(BO(e),e.H==3){var t=e.W++,i=Ro(e.I);if(Ve(i,"SID",e.K),Ve(i,"RID",t),Ve(i,"TYPE","terminate"),Hh(e,i),t=new jh(e,e.l,t),t.L=2,t.A=t_(Ro(i)),i=!1,Pt.navigator&&Pt.navigator.sendBeacon)try{i=Pt.navigator.sendBeacon(t.A.toString(),"")}catch{}!i&&Pt.Image&&(new Image().src=t.A,i=!0),i||(t.g=GO(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Uh(t)}WO(e)}function i_(e){e.g&&(sI(e),e.g.cancel(),e.g=null)}function BO(e){i_(e),e.u&&(Pt.clearTimeout(e.u),e.u=null),jg(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&Pt.clearTimeout(e.m),e.m=null)}function r_(e){if(!AO(e.i)&&!e.m){e.m=!0;var t=e.Na;Rh||aO(),kh||(Rh(),kh=!0),Yx.add(t,e),e.C=0}}function N8(e,t){return DO(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=Vh(Kn(e.Na,e,t),HO(e,e.C)),e.C++,!0)}rt.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;let r=new jh(this,this.l,e),o=this.s;if(this.U&&(o?(o=JP(o),tO(o,this.U)):o=this.U),this.o!==null||this.O||(r.I=o,o=null),this.P)t:{for(var t=0,i=0;i<this.j.length;i++){e:{var n=this.j[i];if("__data__"in n.map&&(n=n.map.__data__,typeof n=="string")){n=n.length;break e}n=void 0}if(n===void 0)break;if(t+=n,4096<t){t=i;break t}if(t===4096||i===this.j.length-1){t=i+1;break t}}t=1e3}else t=1e3;t=jO(this,r,t),i=Ro(this.I),Ve(i,"RID",e),Ve(i,"CVER",22),this.F&&Ve(i,"X-HTTP-Session-Id",this.F),Hh(this,i),o&&(this.O?t="headers="+encodeURIComponent(String(LO(o)))+"&"+t:this.o&&iI(i,this.o,o)),eI(this.i,r),this.bb&&Ve(i,"TYPE","init"),this.P?(Ve(i,"$req",t),Ve(i,"SID","null"),r.aa=!0,Nx(r,i,null)):Nx(r,i,t),this.H=2}}else this.H==3&&(e?qP(this,e):this.j.length==0||AO(this.i)||qP(this))};function qP(e,t){var i;t?i=t.m:i=e.W++;let n=Ro(e.I);Ve(n,"SID",e.K),Ve(n,"RID",i),Ve(n,"AID",e.V),Hh(e,n),e.o&&e.s&&iI(n,e.o,e.s),i=new jh(e,e.l,i,e.C+1),e.o===null&&(i.I=e.s),t&&(e.j=t.F.concat(e.j)),t=jO(e,i,1e3),i.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),eI(e.i,i),Nx(i,n,t)}function Hh(e,t){e.na&&$x(e.na,function(i,n){Ve(t,n,i)}),e.h&&xO({},function(i,n){Ve(t,n,i)})}function jO(e,t,i){i=Math.min(e.j.length,i);var n=e.h?Kn(e.h.Va,e.h,e):null;t:{var r=e.j;let o=-1;for(;;){let s=["count="+i];o==-1?0<i?(o=r[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let l=!0;for(let d=0;d<i;d++){let u=r[d].g,f=r[d].map;if(u-=o,0>u)o=Math.max(0,r[d].g-100),l=!1;else try{A8(f,s,"req"+u+"_")}catch{n&&n(f)}}if(l){n=s.join("&");break t}}}return e=e.j.splice(0,i),t.F=e,n}function UO(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Rh||aO(),kh||(Rh(),kh=!0),Yx.add(t,e),e.A=0}}function oI(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=Vh(Kn(e.Ma,e),HO(e,e.A)),e.A++,!0)}rt.Ma=function(){if(this.u=null,zO(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Vh(Kn(this.jb,this),e)}};rt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ai(10),i_(this),zO(this))};function sI(e){e.B!=null&&(Pt.clearTimeout(e.B),e.B=null)}function zO(e){e.g=new jh(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=Ro(e.wa);Ve(t,"RID","rpc"),Ve(t,"SID",e.K),Ve(t,"AID",e.V),Ve(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Ve(t,"TO",e.qa),Ve(t,"TYPE","xmlhttp"),Hh(e,t),e.o&&e.s&&iI(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var i=e.g;e=e.pa,i.L=1,i.A=t_(Ro(t)),i.u=null,i.S=!0,vO(i,e)}rt.ib=function(){this.v!=null&&(this.v=null,i_(this),oI(this),ai(19))};function jg(e){e.v!=null&&(Pt.clearTimeout(e.v),e.v=null)}function $O(e,t){var i=null;if(e.g==t){jg(e),sI(e),e.g=null;var n=2}else if(Lx(e.i,t))i=t.F,RO(e.i,t),n=1;else return;if(e.H!=0){if(t.i)if(n==1){i=t.u?t.u.length:0,t=Date.now()-t.G;var r=e.C;n=Qg(),Un(n,new fO(n,i)),r_(e)}else UO(e);else if(r=t.s,r==3||r==0&&0<t.ca||!(n==1&&N8(e,t)||n==2&&oI(e)))switch(i&&0<i.length&&(t=e.i,t.i=t.i.concat(i)),r){case 1:Sa(e,5);break;case 4:Sa(e,10);break;case 3:Sa(e,6);break;default:Sa(e,2)}}}function HO(e,t){let i=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(i*=2),i*t}function Sa(e,t){if(e.l.info("Error code "+t),t==2){var i=null;e.h&&(i=null);var n=Kn(e.pb,e);i||(i=new Aa("//www.google.com/images/cleardot.gif"),Pt.location&&Pt.location.protocol=="http"||Vg(i,"https"),t_(i)),D8(i.toString(),n)}else ai(2);e.H=0,e.h&&e.h.za(t),WO(e),BO(e)}rt.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ai(2)):(this.l.info("Failed to ping google.com"),ai(1))};function WO(e){if(e.H=0,e.ma=[],e.h){let t=kO(e.i);(t.length!=0||e.j.length!=0)&&(LP(e.ma,t),LP(e.ma,e.j),e.i.i.length=0,Ux(e.j),e.j.length=0),e.h.ya()}}function qO(e,t,i){var n=i instanceof Aa?Ro(i):new Aa(i);if(n.g!="")t&&(n.g=t+"."+n.g),Bg(n,n.m);else{var r=Pt.location;n=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var o=new Aa(null);n&&Vg(o,n),t&&(o.g=t),r&&Bg(o,r),i&&(o.l=i),n=o}return i=e.F,t=e.Da,i&&t&&Ve(n,i,t),Ve(n,"VER",e.ra),Hh(e,n),n}function GO(e,t,i){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new en(new zh({ob:i})):new en(e.va),t.Oa(e.J),t}rt.isActive=function(){return!!this.h&&this.h.isActive(this)};function KO(){}rt=KO.prototype;rt.Ba=function(){};rt.Aa=function(){};rt.za=function(){};rt.ya=function(){};rt.isActive=function(){return!0};rt.Va=function(){};function Ug(){if(xc&&!(10<=Number(Z6)))throw Error("Environmental error: no available transport.")}Ug.prototype.g=function(e,t){return new ki(e,t)};function ki(e,t){Mn.call(this),this.g=new VO(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Ah(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ah(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Ec(this)}Pn(ki,Mn);ki.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,i=this.h||void 0;ai(0),e.Y=t,e.na=i||{},e.G=e.aa,e.I=qO(e,null,e.Y),r_(e)};ki.prototype.close=function(){rI(this.g)};ki.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var i={};i.__data__=e,e=i}else this.v&&(i={},i.__data__=Kx(e),e=i);t.j.push(new E8(t.fb++,e)),t.H==3&&r_(t)};ki.prototype.N=function(){this.g.h=null,delete this.j,rI(this.g),delete this.g,ki.$.N.call(this)};function YO(e){Jx.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(let i in t){e=i;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}Pn(YO,Jx);function QO(){tI.call(this),this.status=1}Pn(QO,tI);function Ec(e){this.g=e}Pn(Ec,KO);Ec.prototype.Ba=function(){Un(this.g,"a")};Ec.prototype.Aa=function(e){Un(this.g,new YO(e))};Ec.prototype.za=function(e){Un(this.g,new QO)};Ec.prototype.ya=function(){Un(this.g,"b")};function F8(){this.blockSize=-1}function vr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Pn(vr,F8);vr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Ix(e,t,i){i||(i=0);var n=Array(16);if(typeof t=="string")for(var r=0;16>r;++r)n[r]=t.charCodeAt(i++)|t.charCodeAt(i++)<<8|t.charCodeAt(i++)<<16|t.charCodeAt(i++)<<24;else for(r=0;16>r;++r)n[r]=t[i++]|t[i++]<<8|t[i++]<<16|t[i++]<<24;t=e.g[0],i=e.g[1],r=e.g[2];var o=e.g[3],s=t+(o^i&(r^o))+n[0]+3614090360&4294967295;t=i+(s<<7&4294967295|s>>>25),s=o+(r^t&(i^r))+n[1]+3905402710&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(i^o&(t^i))+n[2]+606105819&4294967295,r=o+(s<<17&4294967295|s>>>15),s=i+(t^r&(o^t))+n[3]+3250441966&4294967295,i=r+(s<<22&4294967295|s>>>10),s=t+(o^i&(r^o))+n[4]+4118548399&4294967295,t=i+(s<<7&4294967295|s>>>25),s=o+(r^t&(i^r))+n[5]+1200080426&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(i^o&(t^i))+n[6]+2821735955&4294967295,r=o+(s<<17&4294967295|s>>>15),s=i+(t^r&(o^t))+n[7]+4249261313&4294967295,i=r+(s<<22&4294967295|s>>>10),s=t+(o^i&(r^o))+n[8]+1770035416&4294967295,t=i+(s<<7&4294967295|s>>>25),s=o+(r^t&(i^r))+n[9]+2336552879&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(i^o&(t^i))+n[10]+4294925233&4294967295,r=o+(s<<17&4294967295|s>>>15),s=i+(t^r&(o^t))+n[11]+2304563134&4294967295,i=r+(s<<22&4294967295|s>>>10),s=t+(o^i&(r^o))+n[12]+1804603682&4294967295,t=i+(s<<7&4294967295|s>>>25),s=o+(r^t&(i^r))+n[13]+4254626195&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(i^o&(t^i))+n[14]+2792965006&4294967295,r=o+(s<<17&4294967295|s>>>15),s=i+(t^r&(o^t))+n[15]+1236535329&4294967295,i=r+(s<<22&4294967295|s>>>10),s=t+(r^o&(i^r))+n[1]+4129170786&4294967295,t=i+(s<<5&4294967295|s>>>27),s=o+(i^r&(t^i))+n[6]+3225465664&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^i&(o^t))+n[11]+643717713&4294967295,r=o+(s<<14&4294967295|s>>>18),s=i+(o^t&(r^o))+n[0]+3921069994&4294967295,i=r+(s<<20&4294967295|s>>>12),s=t+(r^o&(i^r))+n[5]+3593408605&4294967295,t=i+(s<<5&4294967295|s>>>27),s=o+(i^r&(t^i))+n[10]+38016083&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^i&(o^t))+n[15]+3634488961&4294967295,r=o+(s<<14&4294967295|s>>>18),s=i+(o^t&(r^o))+n[4]+3889429448&4294967295,i=r+(s<<20&4294967295|s>>>12),s=t+(r^o&(i^r))+n[9]+568446438&4294967295,t=i+(s<<5&4294967295|s>>>27),s=o+(i^r&(t^i))+n[14]+3275163606&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^i&(o^t))+n[3]+4107603335&4294967295,r=o+(s<<14&4294967295|s>>>18),s=i+(o^t&(r^o))+n[8]+1163531501&4294967295,i=r+(s<<20&4294967295|s>>>12),s=t+(r^o&(i^r))+n[13]+2850285829&4294967295,t=i+(s<<5&4294967295|s>>>27),s=o+(i^r&(t^i))+n[2]+4243563512&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^i&(o^t))+n[7]+1735328473&4294967295,r=o+(s<<14&4294967295|s>>>18),s=i+(o^t&(r^o))+n[12]+2368359562&4294967295,i=r+(s<<20&4294967295|s>>>12),s=t+(i^r^o)+n[5]+4294588738&4294967295,t=i+(s<<4&4294967295|s>>>28),s=o+(t^i^r)+n[8]+2272392833&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^i)+n[11]+1839030562&4294967295,r=o+(s<<16&4294967295|s>>>16),s=i+(r^o^t)+n[14]+4259657740&4294967295,i=r+(s<<23&4294967295|s>>>9),s=t+(i^r^o)+n[1]+2763975236&4294967295,t=i+(s<<4&4294967295|s>>>28),s=o+(t^i^r)+n[4]+1272893353&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^i)+n[7]+4139469664&4294967295,r=o+(s<<16&4294967295|s>>>16),s=i+(r^o^t)+n[10]+3200236656&4294967295,i=r+(s<<23&4294967295|s>>>9),s=t+(i^r^o)+n[13]+681279174&4294967295,t=i+(s<<4&4294967295|s>>>28),s=o+(t^i^r)+n[0]+3936430074&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^i)+n[3]+3572445317&4294967295,r=o+(s<<16&4294967295|s>>>16),s=i+(r^o^t)+n[6]+76029189&4294967295,i=r+(s<<23&4294967295|s>>>9),s=t+(i^r^o)+n[9]+3654602809&4294967295,t=i+(s<<4&4294967295|s>>>28),s=o+(t^i^r)+n[12]+3873151461&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^i)+n[15]+530742520&4294967295,r=o+(s<<16&4294967295|s>>>16),s=i+(r^o^t)+n[2]+3299628645&4294967295,i=r+(s<<23&4294967295|s>>>9),s=t+(r^(i|~o))+n[0]+4096336452&4294967295,t=i+(s<<6&4294967295|s>>>26),s=o+(i^(t|~r))+n[7]+1126891415&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~i))+n[14]+2878612391&4294967295,r=o+(s<<15&4294967295|s>>>17),s=i+(o^(r|~t))+n[5]+4237533241&4294967295,i=r+(s<<21&4294967295|s>>>11),s=t+(r^(i|~o))+n[12]+1700485571&4294967295,t=i+(s<<6&4294967295|s>>>26),s=o+(i^(t|~r))+n[3]+2399980690&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~i))+n[10]+4293915773&4294967295,r=o+(s<<15&4294967295|s>>>17),s=i+(o^(r|~t))+n[1]+2240044497&4294967295,i=r+(s<<21&4294967295|s>>>11),s=t+(r^(i|~o))+n[8]+1873313359&4294967295,t=i+(s<<6&4294967295|s>>>26),s=o+(i^(t|~r))+n[15]+4264355552&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~i))+n[6]+2734768916&4294967295,r=o+(s<<15&4294967295|s>>>17),s=i+(o^(r|~t))+n[13]+1309151649&4294967295,i=r+(s<<21&4294967295|s>>>11),s=t+(r^(i|~o))+n[4]+4149444226&4294967295,t=i+(s<<6&4294967295|s>>>26),s=o+(i^(t|~r))+n[11]+3174756917&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~i))+n[2]+718787259&4294967295,r=o+(s<<15&4294967295|s>>>17),s=i+(o^(r|~t))+n[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+o&4294967295}vr.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var i=t-this.blockSize,n=this.m,r=this.h,o=0;o<t;){if(r==0)for(;o<=i;)Ix(this,e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<t;)if(n[r++]=e.charCodeAt(o++),r==this.blockSize){Ix(this,n),r=0;break}}else for(;o<t;)if(n[r++]=e[o++],r==this.blockSize){Ix(this,n),r=0;break}}this.h=r,this.i+=t};vr.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var i=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=i&255,i/=256;for(this.j(e),e=Array(16),t=i=0;4>t;++t)for(var n=0;32>n;n+=8)e[i++]=this.g[t]>>>n&255;return e};function ye(e,t){this.h=t;for(var i=[],n=!0,r=e.length-1;0<=r;r--){var o=e[r]|0;n&&o==t||(i[r]=o,n=!1)}this.g=i}var L8={};function aI(e){return-128<=e&&128>e?Y6(e,function(t){return new ye([t|0],0>t?-1:0)}):new ye([e|0],0>e?-1:0)}function qr(e){if(isNaN(e)||!isFinite(e))return wc;if(0>e)return jn(qr(-e));for(var t=[],i=1,n=0;e>=i;n++)t[n]=e/i|0,i*=Vx;return new ye(t,0)}function XO(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return jn(XO(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=qr(Math.pow(t,8)),n=wc,r=0;r<e.length;r+=8){var o=Math.min(8,e.length-r),s=parseInt(e.substring(r,r+o),t);8>o?(o=qr(Math.pow(t,o)),n=n.R(o).add(qr(s))):(n=n.R(i),n=n.add(qr(s)))}return n}var Vx=4294967296,wc=aI(0),Bx=aI(1),GP=aI(16777216);rt=ye.prototype;rt.ea=function(){if(Zi(this))return-jn(this).ea();for(var e=0,t=1,i=0;i<this.g.length;i++){var n=this.D(i);e+=(0<=n?n:Vx+n)*t,t*=Vx}return e};rt.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(Do(this))return"0";if(Zi(this))return"-"+jn(this).toString(e);for(var t=qr(Math.pow(e,6)),i=this,n="";;){var r=$g(i,t).g;i=zg(i,r.R(t));var o=((0<i.g.length?i.g[0]:i.h)>>>0).toString(e);if(i=r,Do(i))return o+n;for(;6>o.length;)o="0"+o;n=o+n}};rt.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function Do(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function Zi(e){return e.h==-1}rt.X=function(e){return e=zg(this,e),Zi(e)?-1:Do(e)?0:1};function jn(e){for(var t=e.g.length,i=[],n=0;n<t;n++)i[n]=~e.g[n];return new ye(i,~e.h).add(Bx)}rt.abs=function(){return Zi(this)?jn(this):this};rt.add=function(e){for(var t=Math.max(this.g.length,e.g.length),i=[],n=0,r=0;r<=t;r++){var o=n+(this.D(r)&65535)+(e.D(r)&65535),s=(o>>>16)+(this.D(r)>>>16)+(e.D(r)>>>16);n=s>>>16,o&=65535,s&=65535,i[r]=s<<16|o}return new ye(i,i[i.length-1]&-2147483648?-1:0)};function zg(e,t){return e.add(jn(t))}rt.R=function(e){if(Do(this)||Do(e))return wc;if(Zi(this))return Zi(e)?jn(this).R(jn(e)):jn(jn(this).R(e));if(Zi(e))return jn(this.R(jn(e)));if(0>this.X(GP)&&0>e.X(GP))return qr(this.ea()*e.ea());for(var t=this.g.length+e.g.length,i=[],n=0;n<2*t;n++)i[n]=0;for(n=0;n<this.g.length;n++)for(var r=0;r<e.g.length;r++){var o=this.D(n)>>>16,s=this.D(n)&65535,l=e.D(r)>>>16,d=e.D(r)&65535;i[2*n+2*r]+=s*d,Lg(i,2*n+2*r),i[2*n+2*r+1]+=o*d,Lg(i,2*n+2*r+1),i[2*n+2*r+1]+=s*l,Lg(i,2*n+2*r+1),i[2*n+2*r+2]+=o*l,Lg(i,2*n+2*r+2)}for(n=0;n<t;n++)i[n]=i[2*n+1]<<16|i[2*n];for(n=t;n<2*t;n++)i[n]=0;return new ye(i,0)};function Lg(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Eh(e,t){this.g=e,this.h=t}function $g(e,t){if(Do(t))throw Error("division by zero");if(Do(e))return new Eh(wc,wc);if(Zi(e))return t=$g(jn(e),t),new Eh(jn(t.g),jn(t.h));if(Zi(t))return t=$g(e,jn(t)),new Eh(jn(t.g),t.h);if(30<e.g.length){if(Zi(e)||Zi(t))throw Error("slowDivide_ only works with positive integers.");for(var i=Bx,n=t;0>=n.X(e);)i=KP(i),n=KP(n);var r=bc(i,1),o=bc(n,1);for(n=bc(n,2),i=bc(i,2);!Do(n);){var s=o.add(n);0>=s.X(e)&&(r=r.add(i),o=s),n=bc(n,1),i=bc(i,1)}return t=zg(e,r.R(t)),new Eh(r,t)}for(r=wc;0<=e.X(t);){for(i=Math.max(1,Math.floor(e.ea()/t.ea())),n=Math.ceil(Math.log(i)/Math.LN2),n=48>=n?1:Math.pow(2,n-48),o=qr(i),s=o.R(t);Zi(s)||0<s.X(e);)i-=n,o=qr(i),s=o.R(t);Do(o)&&(o=Bx),r=r.add(o),e=zg(e,s)}return new Eh(r,e)}rt.gb=function(e){return $g(this,e).h};rt.and=function(e){for(var t=Math.max(this.g.length,e.g.length),i=[],n=0;n<t;n++)i[n]=this.D(n)&e.D(n);return new ye(i,this.h&e.h)};rt.or=function(e){for(var t=Math.max(this.g.length,e.g.length),i=[],n=0;n<t;n++)i[n]=this.D(n)|e.D(n);return new ye(i,this.h|e.h)};rt.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),i=[],n=0;n<t;n++)i[n]=this.D(n)^e.D(n);return new ye(i,this.h^e.h)};function KP(e){for(var t=e.g.length+1,i=[],n=0;n<t;n++)i[n]=e.D(n)<<1|e.D(n-1)>>>31;return new ye(i,e.h)}function bc(e,t){var i=t>>5;t%=32;for(var n=e.g.length-i,r=[],o=0;o<n;o++)r[o]=0<t?e.D(o+i)>>>t|e.D(o+i+1)<<32-t:e.D(o+i);return new ye(r,e.h)}Ug.prototype.createWebChannel=Ug.prototype.g;ki.prototype.send=ki.prototype.u;ki.prototype.open=ki.prototype.m;ki.prototype.close=ki.prototype.close;Xg.NO_ERROR=0;Xg.TIMEOUT=8;Xg.HTTP_ERROR=6;mO.COMPLETE="complete";pO.EventType=Bh;Bh.OPEN="a";Bh.CLOSE="b";Bh.ERROR="c";Bh.MESSAGE="d";Mn.prototype.listen=Mn.prototype.O;en.prototype.listenOnce=en.prototype.P;en.prototype.getLastError=en.prototype.Sa;en.prototype.getLastErrorCode=en.prototype.Ia;en.prototype.getStatus=en.prototype.da;en.prototype.getResponseJson=en.prototype.Wa;en.prototype.getResponseText=en.prototype.ja;en.prototype.send=en.prototype.ha;en.prototype.setWithCredentials=en.prototype.Oa;vr.prototype.digest=vr.prototype.l;vr.prototype.reset=vr.prototype.reset;vr.prototype.update=vr.prototype.j;ye.prototype.add=ye.prototype.add;ye.prototype.multiply=ye.prototype.R;ye.prototype.modulo=ye.prototype.gb;ye.prototype.compare=ye.prototype.X;ye.prototype.toNumber=ye.prototype.ea;ye.prototype.toString=ye.prototype.toString;ye.prototype.getBits=ye.prototype.D;ye.fromNumber=qr;ye.fromString=XO;var ZO=br.createWebChannelTransport=function(){return new Ug},JO=br.getStatEventTarget=function(){return Qg()},o_=br.ErrorCode=Xg,tN=br.EventType=mO,eN=br.Event=Da,lI=br.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Zrt=br.FetchXmlHttpFactory=zh,Wh=br.WebChannel=pO,nN=br.XhrIo=en,iN=br.Md5=vr,Ra=br.Integer=ye;var rN="@firebase/firestore";var gn=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");var ed="10.11.0";var Ds=new Xl("@firebase/firestore");function Dc(){return Ds.logLevel}function uC(e){Ds.setLogLevel(e)}function $(e,...t){if(Ds.logLevel<=Yi.DEBUG){let i=t.map(hC);Ds.debug(`Firestore (${ed}): ${e}`,...i)}}function an(e,...t){if(Ds.logLevel<=Yi.ERROR){let i=t.map(hC);Ds.error(`Firestore (${ed}): ${e}`,...i)}}function tr(e,...t){if(Ds.logLevel<=Yi.WARN){let i=t.map(hC);Ds.warn(`Firestore (${ed}): ${e}`,...i)}}function hC(e){if(typeof e=="string")return e;try{return function(i){return JSON.stringify(i)}(e)}catch{return e}}function lt(e="Unexpected state"){let t=`FIRESTORE (${ed}) INTERNAL ASSERTION FAILED: `+e;throw an(t),new Error(t)}function _t(e,t){e||lt()}function rF(e,t){e||lt()}function et(e,t){return e}var O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},U=class extends Ik{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var _n=class{constructor(){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}};var g_=class{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},fI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable(()=>i(gn.UNAUTHENTICATED))}shutdown(){}},mI=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}},pI=class{constructor(t){this.t=t,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){let n=this.i,r=d=>this.i!==n?(n=this.i,i(d)):Promise.resolve(),o=new _n;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new _n,t.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let d=o;t.enqueueRetryable(()=>N(this,null,function*(){yield d.promise,yield r(this.currentUser)}))},l=d=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(d=>l(d)),setTimeout(()=>{if(!this.auth){let d=this.t.getImmediate({optional:!0});d?l(d):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new _n)}},0),s()}getToken(){let t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(n=>this.i!==t?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(_t(typeof n.accessToken=="string"),new g_(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return _t(t===null||typeof t=="string"),new gn(t)}},gI=class{constructor(t,i,n){this.l=t,this.h=i,this.P=n,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},_I=class{constructor(t,i,n){this.l=t,this.h=i,this.P=n}getToken(){return Promise.resolve(new gI(this.l,this.h,this.P))}start(t,i){t.enqueueRetryable(()=>i(gn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},vI=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},bI=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,i){let n=o=>{o.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,$("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?i(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>n(o))};let r=o=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(i=>i?(_t(typeof i.token=="string"),this.R=i.token,new vI(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function V8(e){let t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let n=0;n<e;n++)i[n]=Math.floor(256*Math.random());return i}var __=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=Math.floor(256/t.length)*t.length,n="";for(;n.length<20;){let r=V8(40);for(let o=0;o<r.length;++o)n.length<20&&r[o]<i&&(n+=t.charAt(r[o]%t.length))}return n}};function Vt(e,t){return e<t?-1:e>t?1:0}function Vc(e,t,i){return e.length===t.length&&e.every((n,r)=>i(n,t[r]))}function oF(e){return e+"\0"}var Qe=class e{constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new U(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new U(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<-62135596800)throw new U(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new U(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let i=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*i));return new e(i,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Vt(this.nanoseconds,t.nanoseconds):Vt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var yt=class e{constructor(t){this.timestamp=t}static fromTimestamp(t){return new e(t)}static min(){return new e(new Qe(0,0))}static max(){return new e(new Qe(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var v_=class e{constructor(t,i,n){i===void 0?i=0:i>t.length&&lt(),n===void 0?n=t.length-i:n>t.length-i&&lt(),this.segments=t,this.offset=i,this.len=n}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let i=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(n=>{i.push(n)}):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,n=this.limit();i<n;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){let n=Math.min(t.length,i.length);for(let r=0;r<n;r++){let o=t.get(r),s=i.get(r);if(o<s)return-1;if(o>s)return 1}return t.length<i.length?-1:t.length>i.length?1:0}},ae=class e extends v_{construct(t,i,n){return new e(t,i,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let i=[];for(let n of t){if(n.indexOf("//")>=0)throw new U(O.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);i.push(...n.split("/").filter(r=>r.length>0))}return new e(i)}static emptyPath(){return new e([])}},B8=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ln=class e extends v_{construct(t,i,n){return new e(t,i,n)}static isValidIdentifier(t){return B8.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new e(["__name__"])}static fromServerFormat(t){let i=[],n="",r=0,o=()=>{if(n.length===0)throw new U(O.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(n),n=""},s=!1;for(;r<t.length;){let l=t[r];if(l==="\\"){if(r+1===t.length)throw new U(O.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let d=t[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new U(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=d,r+=2}else l==="`"?(s=!s,r++):l!=="."||s?(n+=l,r++):(o(),r++)}if(o(),s)throw new U(O.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(i)}static emptyPath(){return new e([])}};var J=class e{constructor(t){this.path=t}static fromPath(t){return new e(ae.fromString(t))}static fromName(t){return new e(ae.fromString(t).popFirst(5))}static empty(){return new e(ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ae.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return ae.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new e(new ae(t.slice()))}};var Bc=class{constructor(t,i,n,r){this.indexId=t,this.collectionGroup=i,this.fields=n,this.indexState=r}};function yI(e){return e.fields.find(t=>t.kind===2)}function Ma(e){return e.fields.filter(t=>t.kind!==2)}Bc.UNKNOWN_ID=-1;var Nc=class{constructor(t,i){this.fieldPath=t,this.kind=i}};var rf=class e{constructor(t,i){this.sequenceNumber=t,this.offset=i}static empty(){return new e(0,er.min())}};function sF(e,t){let i=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,r=yt.fromTimestamp(n===1e9?new Qe(i+1,0):new Qe(i,n));return new er(r,J.empty(),t)}function aF(e){return new er(e.readTime,e.key,-1)}var er=class e{constructor(t,i,n){this.readTime=t,this.documentKey=i,this.largestBatchId=n}static min(){return new e(yt.min(),J.empty(),-1)}static max(){return new e(yt.max(),J.empty(),-1)}};function fC(e,t){let i=e.readTime.compareTo(t.readTime);return i!==0?i:(i=J.comparator(e.documentKey,t.documentKey),i!==0?i:Vt(e.largestBatchId,t.largestBatchId))}var lF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",b_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function Vs(e){return N(this,null,function*(){if(e.code!==O.FAILED_PRECONDITION||e.message!==lF)throw e;$("LocalStore","Unexpectedly lost primary lease")})}var k=class e{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new e((n,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(n,r)},this.catchCallback=o=>{this.wrapFailure(i,o).next(n,r)}})}toPromise(){return new Promise((t,i)=>{this.next(t,i)})}wrapUserFunction(t){try{let i=t();return i instanceof e?i:e.resolve(i)}catch(i){return e.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction(()=>t(i)):e.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction(()=>t(i)):e.reject(i)}static resolve(t){return new e((i,n)=>{i(t)})}static reject(t){return new e((i,n)=>{n(t)})}static waitFor(t){return new e((i,n)=>{let r=0,o=0,s=!1;t.forEach(l=>{++r,l.next(()=>{++o,s&&o===r&&i()},d=>n(d))}),s=!0,o===r&&i()})}static or(t){let i=e.resolve(!1);for(let n of t)i=i.next(r=>r?e.resolve(r):n());return i}static forEach(t,i){let n=[];return t.forEach((r,o)=>{n.push(i.call(this,r,o))}),this.waitFor(n)}static mapArray(t,i){return new e((n,r)=>{let o=t.length,s=new Array(o),l=0;for(let d=0;d<o;d++){let u=d;i(t[u]).next(f=>{s[u]=f,++l,l===o&&n(s)},f=>r(f))}})}static doWhile(t,i){return new e((n,r)=>{let o=()=>{t()===!0?i().next(()=>{o()},r):n()};o()})}};var y_=class e{constructor(t,i){this.action=t,this.transaction=i,this.aborted=!1,this.V=new _n,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{i.error?this.V.reject(new Va(t,i.error)):this.V.resolve()},this.transaction.onerror=n=>{let r=mC(n.target.error);this.V.reject(new Va(t,r))}}static open(t,i,n,r){try{return new e(i,t.transaction(r,n))}catch(o){throw new Va(i,o)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||($("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){let i=this.transaction.objectStore(t);return new xI(i)}},Po=class e{constructor(t,i,n){this.name=t,this.version=i,this.p=n,e.S(Fu())===12.2&&an("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return $("SimpleDb","Removing database:",t),Pa(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!Np())return!1;if(e.C())return!0;let t=Fu(),i=e.S(t),n=0<i&&i<10,r=e.v(t),o=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||o)}static C(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,i){return t.store(i)}static S(t){let i=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=i?i[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(t){let i=t.match(/Android ([\d.]+)/i),n=i?i[1].split(".").slice(0,2).join("."):"-1";return Number(n)}O(t){return N(this,null,function*(){return this.db||($("SimpleDb","Opening database:",this.name),this.db=yield new Promise((i,n)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{let s=o.target.result;i(s)},r.onblocked=()=>{n(new Va(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{let s=o.target.error;s.name==="VersionError"?n(new U(O.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?n(new U(O.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):n(new Va(t,s))},r.onupgradeneeded=o=>{$("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,r.transaction,o.oldVersion,this.version).next(()=>{$("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=i=>this.L(i)),this.db})}B(t){this.L=t,this.db&&(this.db.onversionchange=i=>t(i))}runTransaction(t,i,n,r){return N(this,null,function*(){let o=i==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(t);let l=y_.open(this.db,t,o?"readonly":"readwrite",n),d=r(l).next(u=>(l.g(),u)).catch(u=>(l.abort(u),k.reject(u))).toPromise();return d.catch(()=>{}),yield l.m,d}catch(l){let d=l,u=d.name!=="FirebaseError"&&s<3;if($("SimpleDb","Transaction failed with error:",d.message,"Retrying:",u),this.close(),!u)return Promise.reject(d)}}})}close(){this.db&&this.db.close(),this.db=void 0}},wI=class{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return Pa(this.k.delete())}},Va=class extends U{constructor(t,i){super(O.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${i}`),this.name="IndexedDbTransactionError"}};function Bs(e){return e.name==="IndexedDbTransactionError"}var xI=class{constructor(t){this.store=t}put(t,i){let n;return i!==void 0?($("SimpleDb","PUT",this.store.name,t,i),n=this.store.put(i,t)):($("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Pa(n)}add(t){return $("SimpleDb","ADD",this.store.name,t,t),Pa(this.store.add(t))}get(t){return Pa(this.store.get(t)).next(i=>(i===void 0&&(i=null),$("SimpleDb","GET",this.store.name,t,i),i))}delete(t){return $("SimpleDb","DELETE",this.store.name,t),Pa(this.store.delete(t))}count(){return $("SimpleDb","COUNT",this.store.name),Pa(this.store.count())}W(t,i){let n=this.options(t,i),r=n.index?this.store.index(n.index):this.store;if(typeof r.getAll=="function"){let o=r.getAll(n.range);return new k((s,l)=>{o.onerror=d=>{l(d.target.error)},o.onsuccess=d=>{s(d.target.result)}})}{let o=this.cursor(n),s=[];return this.G(o,(l,d)=>{s.push(d)}).next(()=>s)}}j(t,i){let n=this.store.getAll(t,i===null?void 0:i);return new k((r,o)=>{n.onerror=s=>{o(s.target.error)},n.onsuccess=s=>{r(s.target.result)}})}H(t,i){$("SimpleDb","DELETE ALL",this.store.name);let n=this.options(t,i);n.J=!1;let r=this.cursor(n);return this.G(r,(o,s,l)=>l.delete())}Y(t,i){let n;i?n=t:(n={},i=t);let r=this.cursor(n);return this.G(r,i)}Z(t){let i=this.cursor({});return new k((n,r)=>{i.onerror=o=>{let s=mC(o.target.error);r(s)},i.onsuccess=o=>{let s=o.target.result;s?t(s.primaryKey,s.value).next(l=>{l?s.continue():n()}):n()}})}G(t,i){let n=[];return new k((r,o)=>{t.onerror=s=>{o(s.target.error)},t.onsuccess=s=>{let l=s.target.result;if(!l)return void r();let d=new wI(l),u=i(l.primaryKey,l.value,d);if(u instanceof k){let f=u.catch(p=>(d.done(),k.reject(p)));n.push(f)}d.isDone?r():d.$===null?l.continue():l.continue(d.$)}}).next(()=>k.waitFor(n))}options(t,i){let n;return t!==void 0&&(typeof t=="string"?n=t:i=t),{index:n,range:i}}cursor(t){let i="next";if(t.reverse&&(i="prev"),t.index){let n=this.store.index(t.index);return t.J?n.openKeyCursor(t.range,i):n.openCursor(t.range,i)}return this.store.openCursor(t.range,i)}};function Pa(e){return new k((t,i)=>{e.onsuccess=n=>{let r=n.target.result;t(r)},e.onerror=n=>{let r=mC(n.target.error);i(r)}})}var oN=!1;function mC(e){let t=Po.S(Fu());if(t>=12.2&&t<13){let i="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(i)>=0){let n=new U("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${i}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return oN||(oN=!0,setTimeout(()=>{throw n},0)),n}}return e}var II=class{constructor(t,i){this.asyncQueue=t,this.X=i,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(t){$("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,()=>N(this,null,function*(){this.task=null;try{$("IndexBackfiller",`Documents written: ${yield this.X.te()}`)}catch(i){Bs(i)?$("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",i):yield Vs(i)}yield this.ee(6e4)}))}},EI=class{constructor(t,i){this.localStore=t,this.persistence=i}te(t=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>this.ne(i,t))})}ne(t,i){let n=new Set,r=i,o=!0;return k.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(s=>{if(s!==null&&!n.has(s))return $("IndexBackfiller",`Processing collection: ${s}`),this.re(t,s,r).next(l=>{r-=l,n.add(s)});o=!1})).next(()=>i-r)}re(t,i,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,i).next(r=>this.localStore.localDocuments.getNextDocuments(t,i,r,n).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(t,s).next(()=>this.ie(r,o)).next(l=>($("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(t,i,l))).next(()=>s.size)}))}ie(t,i){let n=t;return i.changes.forEach((r,o)=>{let s=aF(o);fC(s,n)>0&&(n=s)}),new er(n.readTime,n.documentKey,Math.max(i.batchId,t.largestBatchId))}};var Mi=(()=>{class e{constructor(i,n){this.previousValue=i,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(i){return this.previousValue=Math.max(i,this.previousValue),this.previousValue}next(){let i=++this.previousValue;return this.oe&&this.oe(i),i}}return e._e=-1,e})();function Tf(e){return e==null}function of(e){return e===0&&1/e==-1/0}function cF(e){return typeof e=="number"&&Number.isInteger(e)&&!of(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function li(e){let t="";for(let i=0;i<e.length;i++)t.length>0&&(t=sN(t)),t=j8(e.get(i),t);return sN(t)}function j8(e,t){let i=t,n=e.length;for(let r=0;r<n;r++){let o=e.charAt(r);switch(o){case"\0":i+="";break;case"":i+="";break;default:i+=o}}return i}function sN(e){return e+""}function Gr(e){let t=e.length;if(_t(t>=2),t===2)return _t(e.charAt(0)===""&&e.charAt(1)===""),ae.emptyPath();let i=t-2,n=[],r="";for(let o=0;o<t;){let s=e.indexOf("",o);switch((s<0||s>i)&&lt(),e.charAt(s+1)){case"":let l=e.substring(o,s),d;r.length===0?d=l:(r+=l,d=r,r=""),n.push(d);break;case"":r+=e.substring(o,s),r+="\0";break;case"":r+=e.substring(o,s+1);break;default:lt()}o=s+2}return new ae(n)}var aN=["userId","batchId"];function d_(e,t){return[e,li(t)]}function dF(e,t,i){return[e,li(t),i]}var U8={},z8=["prefixPath","collectionGroup","readTime","documentId"],$8=["prefixPath","collectionGroup","documentId"],H8=["collectionGroup","readTime","prefixPath","documentId"],W8=["canonicalId","targetId"],q8=["targetId","path"],G8=["path","targetId"],K8=["collectionId","parent"],Y8=["indexId","uid"],Q8=["uid","sequenceNumber"],X8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Z8=["indexId","uid","orderedDocumentKey"],J8=["userId","collectionPath","documentId"],tK=["userId","collectionPath","largestBatchId"],eK=["userId","collectionGroup","largestBatchId"],uF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],nK=[...uF,"documentOverlays"],hF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fF=hF,mF=[...fF,"indexConfiguration","indexState","indexEntries"],iK=mF;var sf=class extends b_{constructor(t,i){super(),this.ae=t,this.currentSequenceNumber=i}};function Nn(e,t){let i=et(e);return Po.M(i.ae,t)}function lN(e){let t=0;for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&t++;return t}function Qa(e,t){for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&t(i,e[i])}function pF(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Be=class e{constructor(t,i){this.comparator=t,this.root=i||Yr.EMPTY}insert(t,i){return new e(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,Yr.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Yr.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){let n=this.comparator(t,i.key);if(n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}indexOf(t){let i=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(t,n.key);if(r===0)return i+n.left.size;r<0?n=n.left:(i+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((i,n)=>(t(i,n),!1))}toString(){let t=[];return this.inorderTraversal((i,n)=>(t.push(`${i}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Oc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Oc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Oc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Oc(this.root,t,this.comparator,!0)}},Oc=class{constructor(t,i,n,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=i?n(t.key,i):1,i&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Yr=class e{constructor(t,i,n,r,o){this.key=t,this.value=i,this.color=n??e.RED,this.left=r??e.EMPTY,this.right=o??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,n,r,o){return new e(t??this.key,i??this.value,n??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,n){let r=this,o=n(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,i,n),null):o===0?r.copy(null,i,null,null,null):r.copy(null,null,null,null,r.right.insert(t,i,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let n,r=this;if(i(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),i(t,r.key)===0){if(r.right.isEmpty())return e.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();let t=this.left.check();if(t!==this.right.check())throw lt();return t+(this.isRed()?0:1)}};Yr.EMPTY=null,Yr.RED=!0,Yr.BLACK=!1;Yr.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(t,i,n,r,o){return this}insert(t,i,n){return new Yr(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Se=class e{constructor(t){this.comparator=t,this.data=new Be(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((i,n)=>(t(i),!1))}forEachInRange(t,i){let n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;i(r.key)}}forEachWhile(t,i){let n;for(n=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){let i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new w_(this.data.getIterator())}getIteratorFrom(t){return new w_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach(n=>{i=i.add(n)}),i}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let i=this.data.getIterator(),n=t.data.getIterator();for(;i.hasNext();){let r=i.getNext().key,o=n.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(i=>{t.push(i)}),t}toString(){let t=[];return this.forEach(i=>t.push(i)),"SortedSet("+t.toString()+")"}copy(t){let i=new e(this.comparator);return i.data=t,i}},w_=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Cc(e){return e.hasNext()?e.getNext():void 0}var Pi=class e{constructor(t){this.fields=t,t.sort(ln.comparator)}static empty(){return new e([])}unionWith(t){let i=new Se(ln.comparator);for(let n of this.fields)i=i.add(n);for(let n of t)i=i.add(n);return new e(i.toArray())}covers(t){for(let i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return Vc(this.fields,t.fields,(i,n)=>i.isEqual(n))}};var x_=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function gF(){return typeof atob<"u"}var On=class e{constructor(t){this.binaryString=t}static fromBase64String(t){let i=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new x_("Invalid base64 string: "+o):o}}(t);return new e(i)}static fromUint8Array(t){let i=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(t);return new e(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){let n=new Uint8Array(i.length);for(let r=0;r<i.length;r++)n[r]=i.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Vt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};On.EMPTY_BYTE_STRING=new On("");var rK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oo(e){if(_t(!!e),typeof e=="string"){let t=0,i=rK.exec(e);if(_t(!!i),i[1]){let r=i[1];r=(r+"000000000").substr(0,9),t=Number(r)}let n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:nn(e.seconds),nanos:nn(e.nanos)}}function nn(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Rs(e){return typeof e=="string"?On.fromBase64String(e):On.fromUint8Array(e)}function hv(e){var t,i;return((i=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||i===void 0?void 0:i.stringValue)==="server_timestamp"}function pC(e){let t=e.mapValue.fields.__previous_value__;return hv(t)?pC(t):t}function af(e){let t=Oo(e.mapValue.fields.__local_write_time__.timestampValue);return new Qe(t.seconds,t.nanos)}var CI=class{constructor(t,i,n,r,o,s,l,d,u){this.databaseId=t,this.appId=i,this.persistenceKey=n,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=d,this.useFetchStreams=u}},ks=class e{constructor(t,i){this.projectId=t,this.database=i||"(default)"}static empty(){return new e("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}};var Ss={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},u_={nullValue:"NULL_VALUE"};function Ba(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?hv(e)?4:_F(e)?9007199254740991:10:lt()}function Zr(e,t){if(e===t)return!0;let i=Ba(e);if(i!==Ba(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return af(e).isEqual(af(t));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=Oo(r.timestampValue),l=Oo(o.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,o){return Rs(r.bytesValue).isEqual(Rs(o.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,o){return nn(r.geoPointValue.latitude)===nn(o.geoPointValue.latitude)&&nn(r.geoPointValue.longitude)===nn(o.geoPointValue.longitude)}(e,t);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return nn(r.integerValue)===nn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=nn(r.doubleValue),l=nn(o.doubleValue);return s===l?of(s)===of(l):isNaN(s)&&isNaN(l)}return!1}(e,t);case 9:return Vc(e.arrayValue.values||[],t.arrayValue.values||[],Zr);case 10:return function(r,o){let s=r.mapValue.fields||{},l=o.mapValue.fields||{};if(lN(s)!==lN(l))return!1;for(let d in s)if(s.hasOwnProperty(d)&&(l[d]===void 0||!Zr(s[d],l[d])))return!1;return!0}(e,t);default:return lt()}}function lf(e,t){return(e.values||[]).find(i=>Zr(i,t))!==void 0}function Ms(e,t){if(e===t)return 0;let i=Ba(e),n=Ba(t);if(i!==n)return Vt(i,n);switch(i){case 0:case 9007199254740991:return 0;case 1:return Vt(e.booleanValue,t.booleanValue);case 2:return function(o,s){let l=nn(o.integerValue||o.doubleValue),d=nn(s.integerValue||s.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(e,t);case 3:return cN(e.timestampValue,t.timestampValue);case 4:return cN(af(e),af(t));case 5:return Vt(e.stringValue,t.stringValue);case 6:return function(o,s){let l=Rs(o),d=Rs(s);return l.compareTo(d)}(e.bytesValue,t.bytesValue);case 7:return function(o,s){let l=o.split("/"),d=s.split("/");for(let u=0;u<l.length&&u<d.length;u++){let f=Vt(l[u],d[u]);if(f!==0)return f}return Vt(l.length,d.length)}(e.referenceValue,t.referenceValue);case 8:return function(o,s){let l=Vt(nn(o.latitude),nn(s.latitude));return l!==0?l:Vt(nn(o.longitude),nn(s.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(o,s){let l=o.values||[],d=s.values||[];for(let u=0;u<l.length&&u<d.length;++u){let f=Ms(l[u],d[u]);if(f)return f}return Vt(l.length,d.length)}(e.arrayValue,t.arrayValue);case 10:return function(o,s){if(o===Ss.mapValue&&s===Ss.mapValue)return 0;if(o===Ss.mapValue)return 1;if(s===Ss.mapValue)return-1;let l=o.fields||{},d=Object.keys(l),u=s.fields||{},f=Object.keys(u);d.sort(),f.sort();for(let p=0;p<d.length&&p<f.length;++p){let _=Vt(d[p],f[p]);if(_!==0)return _;let y=Ms(l[d[p]],u[f[p]]);if(y!==0)return y}return Vt(d.length,f.length)}(e.mapValue,t.mapValue);default:throw lt()}}function cN(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Vt(e,t);let i=Oo(e),n=Oo(t),r=Vt(i.seconds,n.seconds);return r!==0?r:Vt(i.nanos,n.nanos)}function jc(e){return TI(e)}function TI(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(i){let n=Oo(i);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(i){return Rs(i).toBase64()}(e.bytesValue):"referenceValue"in e?function(i){return J.fromName(i).toString()}(e.referenceValue):"geoPointValue"in e?function(i){return`geo(${i.latitude},${i.longitude})`}(e.geoPointValue):"arrayValue"in e?function(i){let n="[",r=!0;for(let o of i.values||[])r?r=!1:n+=",",n+=TI(o);return n+"]"}(e.arrayValue):"mapValue"in e?function(i){let n=Object.keys(i.fields||{}).sort(),r="{",o=!0;for(let s of n)o?o=!1:r+=",",r+=`${s}:${TI(i.fields[s])}`;return r+"}"}(e.mapValue):lt()}function ja(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function SI(e){return!!e&&"integerValue"in e}function cf(e){return!!e&&"arrayValue"in e}function dN(e){return!!e&&"nullValue"in e}function uN(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function h_(e){return!!e&&"mapValue"in e}function Zh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return Qa(e.mapValue.fields,(i,n)=>t.mapValue.fields[i]=Zh(n)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let i=0;i<(e.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=Zh(e.arrayValue.values[i]);return t}return Object.assign({},e)}function _F(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function oK(e){return"nullValue"in e?u_:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?ja(ks.empty(),J.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:lt()}function sK(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?ja(ks.empty(),J.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Ss:lt()}function hN(e,t){let i=Ms(e.value,t.value);return i!==0?i:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function fN(e,t){let i=Ms(e.value,t.value);return i!==0?i:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Xn=class e{constructor(t){this.value=t}static empty(){return new e({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let n=0;n<t.length-1;++n)if(i=(i.mapValue.fields||{})[t.get(n)],!h_(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=Zh(i)}setAll(t){let i=ln.emptyPath(),n={},r=[];t.forEach((s,l)=>{if(!i.isImmediateParentOf(l)){let d=this.getFieldsMap(i);this.applyChanges(d,n,r),n={},r=[],i=l.popLast()}s?n[l.lastSegment()]=Zh(s):r.push(l.lastSegment())});let o=this.getFieldsMap(i);this.applyChanges(o,n,r)}delete(t){let i=this.field(t.popLast());h_(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return Zr(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=i.mapValue.fields[t.get(n)];h_(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},i.mapValue.fields[t.get(n)]=r),i=r}return i.mapValue.fields}applyChanges(t,i,n){Qa(i,(r,o)=>t[r]=o);for(let r of n)delete t[r]}clone(){return new e(Zh(this.value))}};function vF(e){let t=[];return Qa(e.fields,(i,n)=>{let r=new ln([i]);if(h_(n)){let o=vF(n.mapValue).fields;if(o.length===0)t.push(r);else for(let s of o)t.push(r.child(s))}else t.push(r)}),new Pi(t)}var vn=class e{constructor(t,i,n,r,o,s,l){this.key=t,this.documentType=i,this.version=n,this.readTime=r,this.createTime=o,this.data=s,this.documentState=l}static newInvalidDocument(t){return new e(t,0,yt.min(),yt.min(),yt.min(),Xn.empty(),0)}static newFoundDocument(t,i,n,r){return new e(t,1,i,yt.min(),n,r,0)}static newNoDocument(t,i){return new e(t,2,i,yt.min(),yt.min(),Xn.empty(),0)}static newUnknownDocument(t,i){return new e(t,3,i,yt.min(),yt.min(),Xn.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Jr=class{constructor(t,i){this.position=t,this.inclusive=i}};function mN(e,t,i){let n=0;for(let r=0;r<e.position.length;r++){let o=t[r],s=e.position[r];if(o.field.isKeyField()?n=J.comparator(J.fromName(s.referenceValue),i.key):n=Ms(s,i.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function pN(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let i=0;i<e.position.length;i++)if(!Zr(e.position[i],t.position[i]))return!1;return!0}var Ua=class{constructor(t,i="asc"){this.field=t,this.dir=i}};function aK(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var I_=class{},Jt=class e extends I_{constructor(t,i,n){super(),this.field=t,this.op=i,this.value=n}static create(t,i,n){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,n):new RI(t,i,n):i==="array-contains"?new PI(t,n):i==="in"?new E_(t,n):i==="not-in"?new OI(t,n):i==="array-contains-any"?new NI(t,n):new e(t,i,n)}static createKeyFieldInFilter(t,i,n){return i==="in"?new kI(t,n):new MI(t,n)}matches(t){let i=t.data.field(this.field);return this.op==="!="?i!==null&&this.matchesComparison(Ms(i,this.value)):i!==null&&Ba(this.value)===Ba(i)&&this.matchesComparison(Ms(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return lt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},we=class e extends I_{constructor(t,i){super(),this.filters=t,this.op=i,this.ue=null}static create(t,i){return new e(t,i)}matches(t){return Uc(this)?this.filters.find(i=>!i.matches(t))===void 0:this.filters.find(i=>i.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,i)=>t.concat(i.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function Uc(e){return e.op==="and"}function AI(e){return e.op==="or"}function gC(e){return bF(e)&&Uc(e)}function bF(e){for(let t of e.filters)if(t instanceof we)return!1;return!0}function DI(e){if(e instanceof Jt)return e.field.canonicalString()+e.op.toString()+jc(e.value);if(gC(e))return e.filters.map(t=>DI(t)).join(",");{let t=e.filters.map(i=>DI(i)).join(",");return`${e.op}(${t})`}}function yF(e,t){return e instanceof Jt?function(n,r){return r instanceof Jt&&n.op===r.op&&n.field.isEqual(r.field)&&Zr(n.value,r.value)}(e,t):e instanceof we?function(n,r){return r instanceof we&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((o,s,l)=>o&&yF(s,r.filters[l]),!0):!1}(e,t):void lt()}function wF(e,t){let i=e.filters.concat(t);return we.create(i,e.op)}function xF(e){return e instanceof Jt?function(i){return`${i.field.canonicalString()} ${i.op} ${jc(i.value)}`}(e):e instanceof we?function(i){return i.op.toString()+" {"+i.getFilters().map(xF).join(" ,")+"}"}(e):"Filter"}var RI=class extends Jt{constructor(t,i,n){super(t,i,n),this.key=J.fromName(n.referenceValue)}matches(t){let i=J.comparator(t.key,this.key);return this.matchesComparison(i)}},kI=class extends Jt{constructor(t,i){super(t,"in",i),this.keys=IF("in",i)}matches(t){return this.keys.some(i=>i.isEqual(t.key))}},MI=class extends Jt{constructor(t,i){super(t,"not-in",i),this.keys=IF("not-in",i)}matches(t){return!this.keys.some(i=>i.isEqual(t.key))}};function IF(e,t){var i;return(((i=t.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(n=>J.fromName(n.referenceValue))}var PI=class extends Jt{constructor(t,i){super(t,"array-contains",i)}matches(t){let i=t.data.field(this.field);return cf(i)&&lf(i.arrayValue,this.value)}},E_=class extends Jt{constructor(t,i){super(t,"in",i)}matches(t){let i=t.data.field(this.field);return i!==null&&lf(this.value.arrayValue,i)}},OI=class extends Jt{constructor(t,i){super(t,"not-in",i)}matches(t){if(lf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let i=t.data.field(this.field);return i!==null&&!lf(this.value.arrayValue,i)}},NI=class extends Jt{constructor(t,i){super(t,"array-contains-any",i)}matches(t){let i=t.data.field(this.field);return!(!cf(i)||!i.arrayValue.values)&&i.arrayValue.values.some(n=>lf(this.value.arrayValue,n))}};var FI=class{constructor(t,i=null,n=[],r=[],o=null,s=null,l=null){this.path=t,this.collectionGroup=i,this.orderBy=n,this.filters=r,this.limit=o,this.startAt=s,this.endAt=l,this.ce=null}};function LI(e,t=null,i=[],n=[],r=null,o=null,s=null){return new FI(e,t,i,n,r,o,s)}function za(e){let t=et(e);if(t.ce===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map(n=>DI(n)).join(","),i+="|ob:",i+=t.orderBy.map(n=>function(o){return o.field.canonicalString()+o.dir}(n)).join(","),Tf(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(n=>jc(n)).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(n=>jc(n)).join(",")),t.ce=i}return t.ce}function Sf(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++)if(!aK(e.orderBy[i],t.orderBy[i]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if(!yF(e.filters[i],t.filters[i]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!pN(e.startAt,t.startAt)&&pN(e.endAt,t.endAt)}function C_(e){return J.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}function T_(e,t){return e.filters.filter(i=>i instanceof Jt&&i.field.isEqual(t))}function gN(e,t,i){let n=u_,r=!0;for(let o of T_(e,t)){let s=u_,l=!0;switch(o.op){case"<":case"<=":s=oK(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,l=!1;break;case"!=":case"not-in":s=u_}hN({value:n,inclusive:r},{value:s,inclusive:l})<0&&(n=s,r=l)}if(i!==null){for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){let s=i.position[o];hN({value:n,inclusive:r},{value:s,inclusive:i.inclusive})<0&&(n=s,r=i.inclusive);break}}return{value:n,inclusive:r}}function _N(e,t,i){let n=Ss,r=!0;for(let o of T_(e,t)){let s=Ss,l=!0;switch(o.op){case">=":case">":s=sK(o.value),l=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,l=!1;break;case"!=":case"not-in":s=Ss}fN({value:n,inclusive:r},{value:s,inclusive:l})>0&&(n=s,r=l)}if(i!==null){for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){let s=i.position[o];fN({value:n,inclusive:r},{value:s,inclusive:i.inclusive})>0&&(n=s,r=i.inclusive);break}}return{value:n,inclusive:r}}var yr=class{constructor(t,i=null,n=[],r=[],o=null,s="F",l=null,d=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=n,this.filters=r,this.limit=o,this.limitType=s,this.startAt=l,this.endAt=d,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function EF(e,t,i,n,r,o,s,l){return new yr(e,t,i,n,r,o,s,l)}function nd(e){return new yr(e)}function vN(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function _C(e){return e.collectionGroup!==null}function Fc(e){let t=et(e);if(t.le===null){t.le=[];let i=new Set;for(let o of t.explicitOrderBy)t.le.push(o),i.add(o.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new Se(ln.comparator);return s.filters.forEach(d=>{d.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(t).forEach(o=>{i.has(o.canonicalString())||o.isKeyField()||t.le.push(new Ua(o,n))}),i.has(ln.keyField().canonicalString())||t.le.push(new Ua(ln.keyField(),n))}return t.le}function ci(e){let t=et(e);return t.he||(t.he=lK(t,Fc(e))),t.he}function lK(e,t){if(e.limitType==="F")return LI(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new Ua(r.field,o)});let i=e.endAt?new Jr(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new Jr(e.startAt.position,e.startAt.inclusive):null;return LI(e.path,e.collectionGroup,t,e.filters,e.limit,i,n)}}function VI(e,t){let i=e.filters.concat([t]);return new yr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),i,e.limit,e.limitType,e.startAt,e.endAt)}function S_(e,t,i){return new yr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,i,e.startAt,e.endAt)}function Af(e,t){return Sf(ci(e),ci(t))&&e.limitType===t.limitType}function CF(e){return`${za(ci(e))}|lt:${e.limitType}`}function Rc(e){return`Query(target=${function(i){let n=i.path.canonicalString();return i.collectionGroup!==null&&(n+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(n+=`, filters: [${i.filters.map(r=>xF(r)).join(", ")}]`),Tf(i.limit)||(n+=", limit: "+i.limit),i.orderBy.length>0&&(n+=`, orderBy: [${i.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),i.startAt&&(n+=", startAt: ",n+=i.startAt.inclusive?"b:":"a:",n+=i.startAt.position.map(r=>jc(r)).join(",")),i.endAt&&(n+=", endAt: ",n+=i.endAt.inclusive?"a:":"b:",n+=i.endAt.position.map(r=>jc(r)).join(",")),`Target(${n})`}(ci(e))}; limitType=${e.limitType})`}function Df(e,t){return t.isFoundDocument()&&function(n,r){let o=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):J.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(e,t)&&function(n,r){for(let o of Fc(n))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(e,t)&&function(n,r){for(let o of n.filters)if(!o.matches(r))return!1;return!0}(e,t)&&function(n,r){return!(n.startAt&&!function(s,l,d){let u=mN(s,l,d);return s.inclusive?u<=0:u<0}(n.startAt,Fc(n),r)||n.endAt&&!function(s,l,d){let u=mN(s,l,d);return s.inclusive?u>=0:u>0}(n.endAt,Fc(n),r))}(e,t)}function TF(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function SF(e){return(t,i)=>{let n=!1;for(let r of Fc(e)){let o=cK(r,t,i);if(o!==0)return o;n=n||r.field.isKeyField()}return 0}}function cK(e,t,i){let n=e.field.isKeyField()?J.comparator(t.key,i.key):function(o,s,l){let d=s.data.field(o),u=l.data.field(o);return d!==null&&u!==null?Ms(d,u):lt()}(e.field,t,i);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return lt()}}var to=class{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){let i=this.mapKeyFn(t),n=this.inner[i];if(n!==void 0){for(let[r,o]of n)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,i){let n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return this.inner[n]=[[t,i]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,i]);r.push([t,i]),this.innerSize++}delete(t){let i=this.mapKeyFn(t),n=this.inner[i];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return n.length===1?delete this.inner[i]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Qa(this.inner,(i,n)=>{for(let[r,o]of n)t(r,o)})}isEmpty(){return pF(this.inner)}size(){return this.innerSize}};var dK=new Be(J.comparator);function vi(){return dK}var AF=new Be(J.comparator);function Qh(...e){let t=AF;for(let i of e)t=t.insert(i.key,i);return t}function DF(e){let t=AF;return e.forEach((i,n)=>t=t.insert(i,n.overlayedDocument)),t}function Kr(){return Jh()}function RF(){return Jh()}function Jh(){return new to(e=>e.toString(),(e,t)=>e.isEqual(t))}var uK=new Be(J.comparator),hK=new Se(J.comparator);function jt(...e){let t=hK;for(let i of e)t=t.add(i);return t}var fK=new Se(Vt);function vC(){return fK}function kF(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:of(t)?"-0":t}}function MF(e){return{integerValue:""+e}}function PF(e,t){return cF(t)?MF(t):kF(e,t)}var zc=class{constructor(){this._=void 0}};function mK(e,t,i){return e instanceof Ps?function(r,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&hv(o)&&(o=pC(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(i,t):e instanceof No?NF(e,t):e instanceof Fo?FF(e,t):function(r,o){let s=OF(r,o),l=bN(s)+bN(r.Ie);return SI(s)&&SI(r.Ie)?MF(l):kF(r.serializer,l)}(e,t)}function pK(e,t,i){return e instanceof No?NF(e,t):e instanceof Fo?FF(e,t):i}function OF(e,t){return e instanceof Os?function(n){return SI(n)||function(o){return!!o&&"doubleValue"in o}(n)}(t)?t:{integerValue:0}:null}var Ps=class extends zc{},No=class extends zc{constructor(t){super(),this.elements=t}};function NF(e,t){let i=LF(t);for(let n of e.elements)i.some(r=>Zr(r,n))||i.push(n);return{arrayValue:{values:i}}}var Fo=class extends zc{constructor(t){super(),this.elements=t}};function FF(e,t){let i=LF(t);for(let n of e.elements)i=i.filter(r=>!Zr(r,n));return{arrayValue:{values:i}}}var Os=class extends zc{constructor(t,i){super(),this.serializer=t,this.Ie=i}};function bN(e){return nn(e.integerValue||e.doubleValue)}function LF(e){return cf(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var $a=class{constructor(t,i){this.field=t,this.transform=i}};function gK(e,t){return e.field.isEqual(t.field)&&function(n,r){return n instanceof No&&r instanceof No||n instanceof Fo&&r instanceof Fo?Vc(n.elements,r.elements,Zr):n instanceof Os&&r instanceof Os?Zr(n.Ie,r.Ie):n instanceof Ps&&r instanceof Ps}(e.transform,t.transform)}var BI=class{constructor(t,i){this.version=t,this.transformResults=i}},rn=class e{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function f_(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}var $c=class{};function VF(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Fs(e.key,rn.none()):new Ns(e.key,e.data,rn.none());{let i=e.data,n=Xn.empty(),r=new Se(ln.comparator);for(let o of t.fields)if(!r.has(o)){let s=i.field(o);s===null&&o.length>1&&(o=o.popLast(),s=i.field(o)),s===null?n.delete(o):n.set(o,s),r=r.add(o)}return new wr(e.key,n,new Pi(r.toArray()),rn.none())}}function _K(e,t,i){e instanceof Ns?function(r,o,s){let l=r.value.clone(),d=wN(r.fieldTransforms,o,s.transformResults);l.setAll(d),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(e,t,i):e instanceof wr?function(r,o,s){if(!f_(r.precondition,o))return void o.convertToUnknownDocument(s.version);let l=wN(r.fieldTransforms,o,s.transformResults),d=o.data;d.setAll(BF(r)),d.setAll(l),o.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(e,t,i):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,i)}function tf(e,t,i,n){return e instanceof Ns?function(o,s,l,d){if(!f_(o.precondition,s))return l;let u=o.value.clone(),f=xN(o.fieldTransforms,d,s);return u.setAll(f),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(e,t,i,n):e instanceof wr?function(o,s,l,d){if(!f_(o.precondition,s))return l;let u=xN(o.fieldTransforms,d,s),f=s.data;return f.setAll(BF(o)),f.setAll(u),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(e,t,i,n):function(o,s,l){return f_(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l}(e,t,i)}function vK(e,t){let i=null;for(let n of e.fieldTransforms){let r=t.data.field(n.field),o=OF(n.transform,r||null);o!=null&&(i===null&&(i=Xn.empty()),i.set(n.field,o))}return i||null}function yN(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Vc(n,r,(o,s)=>gK(o,s))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Ns=class extends $c{constructor(t,i,n,r=[]){super(),this.key=t,this.value=i,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},wr=class extends $c{constructor(t,i,n,r,o=[]){super(),this.key=t,this.data=i,this.fieldMask=n,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function BF(e){let t=new Map;return e.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){let n=e.data.field(i);t.set(i,n)}}),t}function wN(e,t,i){let n=new Map;_t(e.length===i.length);for(let r=0;r<i.length;r++){let o=e[r],s=o.transform,l=t.data.field(o.field);n.set(o.field,pK(s,l,i[r]))}return n}function xN(e,t,i){let n=new Map;for(let r of e){let o=r.transform,s=i.data.field(r.field);n.set(r.field,mK(o,s,t))}return n}var Fs=class extends $c{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},df=class extends $c{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var uf=class{constructor(t,i,n,r){this.batchId=t,this.localWriteTime=i,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,i){let n=i.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(t.key)&&_K(o,t,n[r])}}applyToLocalView(t,i){for(let n of this.baseMutations)n.key.isEqual(t.key)&&(i=tf(n,t,i,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(t.key)&&(i=tf(n,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){let n=RF();return this.mutations.forEach(r=>{let o=t.get(r.key),s=o.overlayedDocument,l=this.applyToLocalView(s,o.mutatedFields);l=i.has(r.key)?null:l;let d=VF(s,l);d!==null&&n.set(r.key,d),s.isValidDocument()||s.convertToNoDocument(yt.min())}),n}keys(){return this.mutations.reduce((t,i)=>t.add(i.key),jt())}isEqual(t){return this.batchId===t.batchId&&Vc(this.mutations,t.mutations,(i,n)=>yN(i,n))&&Vc(this.baseMutations,t.baseMutations,(i,n)=>yN(i,n))}},jI=class e{constructor(t,i,n,r){this.batch=t,this.commitVersion=i,this.mutationResults=n,this.docVersions=r}static from(t,i,n){_t(t.mutations.length===n.length);let r=function(){return uK}(),o=t.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,n[s].version);return new e(t,i,n,r)}};var hf=class{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var UI=class{constructor(t,i){this.count=t,this.unchangedNames=i}};var mn,se;function jF(e){switch(e){default:return lt();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function UF(e){if(e===void 0)return an("GRPC error has no .code"),O.UNKNOWN;switch(e){case mn.OK:return O.OK;case mn.CANCELLED:return O.CANCELLED;case mn.UNKNOWN:return O.UNKNOWN;case mn.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case mn.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case mn.INTERNAL:return O.INTERNAL;case mn.UNAVAILABLE:return O.UNAVAILABLE;case mn.UNAUTHENTICATED:return O.UNAUTHENTICATED;case mn.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case mn.NOT_FOUND:return O.NOT_FOUND;case mn.ALREADY_EXISTS:return O.ALREADY_EXISTS;case mn.PERMISSION_DENIED:return O.PERMISSION_DENIED;case mn.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case mn.ABORTED:return O.ABORTED;case mn.OUT_OF_RANGE:return O.OUT_OF_RANGE;case mn.UNIMPLEMENTED:return O.UNIMPLEMENTED;case mn.DATA_LOSS:return O.DATA_LOSS;default:return lt()}}(se=mn||(mn={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";var IN=null;function zF(){return new TextEncoder}var bK=new Ra([4294967295,4294967295],0);function EN(e){let t=zF().encode(e),i=new iN;return i.update(t),new Uint8Array(i.digest())}function CN(e){let t=new DataView(e.buffer),i=t.getUint32(0,!0),n=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Ra([i,n],0),new Ra([r,o],0)]}var zI=class e{constructor(t,i,n){if(this.bitmap=t,this.padding=i,this.hashCount=n,i<0||i>=8)throw new La(`Invalid padding: ${i}`);if(n<0)throw new La(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new La(`Invalid hash count: ${n}`);if(t.length===0&&i!==0)throw new La(`Invalid padding when bitmap length is 0: ${i}`);this.Te=8*t.length-i,this.Ee=Ra.fromNumber(this.Te)}de(t,i,n){let r=t.add(i.multiply(Ra.fromNumber(n)));return r.compare(bK)===1&&(r=new Ra([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;let i=EN(t),[n,r]=CN(i);for(let o=0;o<this.hashCount;o++){let s=this.de(n,r,o);if(!this.Ae(s))return!1}return!0}static create(t,i,n){let r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),s=new e(o,r,i);return n.forEach(l=>s.insert(l)),s}insert(t){if(this.Te===0)return;let i=EN(t),[n,r]=CN(i);for(let o=0;o<this.hashCount;o++){let s=this.de(n,r,o);this.Re(s)}}Re(t){let i=Math.floor(t/8),n=t%8;this.bitmap[i]|=1<<n}},La=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ff=class e{constructor(t,i,n,r,o){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,i,n){let r=new Map;return r.set(t,mf.createSynthesizedTargetChangeForCurrentChange(t,i,n)),new e(yt.min(),r,new Be(Vt),vi(),jt())}},mf=class e{constructor(t,i,n,r,o){this.resumeToken=t,this.current=i,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,i,n){return new e(n,i,jt(),jt(),jt())}};var Lc=class{constructor(t,i,n,r){this.Ve=t,this.removedTargetIds=i,this.key=n,this.me=r}},A_=class{constructor(t,i){this.targetId=t,this.fe=i}},D_=class{constructor(t,i,n=On.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=i,this.resumeToken=n,this.cause=r}},R_=class{constructor(){this.ge=0,this.pe=SN(),this.ye=On.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=jt(),i=jt(),n=jt();return this.pe.forEach((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:i=i.add(r);break;case 1:n=n.add(r);break;default:lt()}}),new mf(this.ye,this.we,t,i,n)}Fe(){this.Se=!1,this.pe=SN()}Me(t,i){this.Se=!0,this.pe=this.pe.insert(t,i)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,_t(this.ge>=0)}Le(){this.Se=!0,this.we=!0}},$I=class{constructor(t){this.Be=t,this.ke=new Map,this.qe=vi(),this.Qe=TN(),this.Ke=new Be(Vt)}$e(t){for(let i of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(i,t.me):this.We(i,t.key,t.me);for(let i of t.removedTargetIds)this.We(i,t.key,t.me)}Ge(t){this.forEachTarget(t,i=>{let n=this.ze(i);switch(t.state){case 0:this.je(i)&&n.Ce(t.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(t.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(i);break;case 3:this.je(i)&&(n.Le(),n.Ce(t.resumeToken));break;case 4:this.je(i)&&(this.He(i),n.Ce(t.resumeToken));break;default:lt()}})}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.ke.forEach((n,r)=>{this.je(r)&&i(r)})}Je(t){let i=t.targetId,n=t.fe.count,r=this.Ye(i);if(r){let o=r.target;if(C_(o))if(n===0){let s=new J(o.path);this.We(i,s,vn.newNoDocument(s,yt.min()))}else _t(n===1);else{let s=this.Ze(i);if(s!==n){let l=this.Xe(t),d=l?this.et(l,t,s):1;if(d!==0){this.He(i);let u=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(i,u)}IN?.tt(function(f,p,_,y,S){var A,M,K,ut,Y,Rt;let kt={localCacheCount:f,existenceFilterCount:p.count,databaseId:_.database,projectId:_.projectId},Kt=p.unchangedNames;return Kt&&(kt.bloomFilter={applied:S===0,hashCount:(A=Kt?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(ut=(K=(M=Kt?.bits)===null||M===void 0?void 0:M.bitmap)===null||K===void 0?void 0:K.length)!==null&&ut!==void 0?ut:0,padding:(Rt=(Y=Kt?.bits)===null||Y===void 0?void 0:Y.padding)!==null&&Rt!==void 0?Rt:0,mightContain:Ue=>{var Vi;return(Vi=y?.mightContain(Ue))!==null&&Vi!==void 0&&Vi}}),kt}(s,t.fe,this.Be.nt(),l,d))}}}}Xe(t){let i=t.fe.unchangedNames;if(!i||!i.bits)return null;let{bits:{bitmap:n="",padding:r=0},hashCount:o=0}=i,s,l;try{s=Rs(n).toUint8Array()}catch(d){if(d instanceof x_)return tr("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{l=new zI(s,r,o)}catch(d){return tr(d instanceof La?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return l.Te===0?null:l}et(t,i,n){return i.fe.count===n-this.rt(t,i.targetId)?0:2}rt(t,i){let n=this.Be.getRemoteKeysForTarget(i),r=0;return n.forEach(o=>{let s=this.Be.nt(),l=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;t.mightContain(l)||(this.We(i,o,null),r++)}),r}it(t){let i=new Map;this.ke.forEach((o,s)=>{let l=this.Ye(s);if(l){if(o.current&&C_(l.target)){let d=new J(l.target.path);this.qe.get(d)!==null||this.st(s,d)||this.We(s,d,vn.newNoDocument(d,t))}o.De&&(i.set(s,o.ve()),o.Fe())}});let n=jt();this.Qe.forEach((o,s)=>{let l=!0;s.forEachWhile(d=>{let u=this.Ye(d);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(t));let r=new ff(t,i,this.Ke,this.qe,n);return this.qe=vi(),this.Qe=TN(),this.Ke=new Be(Vt),r}Ue(t,i){if(!this.je(t))return;let n=this.st(t,i.key)?2:0;this.ze(t).Me(i.key,n),this.qe=this.qe.insert(i.key,i),this.Qe=this.Qe.insert(i.key,this.ot(i.key).add(t))}We(t,i,n){if(!this.je(t))return;let r=this.ze(t);this.st(t,i)?r.Me(i,1):r.xe(i),this.Qe=this.Qe.insert(i,this.ot(i).delete(t)),n&&(this.qe=this.qe.insert(i,n))}removeTarget(t){this.ke.delete(t)}Ze(t){let i=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let i=this.ke.get(t);return i||(i=new R_,this.ke.set(t,i)),i}ot(t){let i=this.Qe.get(t);return i||(i=new Se(Vt),this.Qe=this.Qe.insert(t,i)),i}je(t){let i=this.Ye(t)!==null;return i||$("WatchChangeAggregator","Detected inactive target",t),i}Ye(t){let i=this.ke.get(t);return i&&i.be?null:this.Be._t(t)}He(t){this.ke.set(t,new R_),this.Be.getRemoteKeysForTarget(t).forEach(i=>{this.We(t,i,null)})}st(t,i){return this.Be.getRemoteKeysForTarget(t).has(i)}};function TN(){return new Be(J.comparator)}function SN(){return new Be(J.comparator)}var yK={asc:"ASCENDING",desc:"DESCENDING"},wK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xK={and:"AND",or:"OR"},HI=class{constructor(t,i){this.databaseId=t,this.useProto3Json=i}};function WI(e,t){return e.useProto3Json||Tf(t)?t:{value:t}}function Hc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function $F(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function IK(e,t){return Hc(e,t.toTimestamp())}function cn(e){return _t(!!e),yt.fromTimestamp(function(i){let n=Oo(i);return new Qe(n.seconds,n.nanos)}(e))}function bC(e,t){return qI(e,t).canonicalString()}function qI(e,t){let i=function(r){return new ae(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?i:i.child(t)}function HF(e){let t=ae.fromString(e);return _t(tL(t)),t}function pf(e,t){return bC(e.databaseId,t.path)}function Qr(e,t){let i=HF(t);if(i.get(1)!==e.databaseId.projectId)throw new U(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+e.databaseId.projectId);if(i.get(3)!==e.databaseId.database)throw new U(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+e.databaseId.database);return new J(GF(i))}function WF(e,t){return bC(e.databaseId,t)}function qF(e){let t=HF(e);return t.length===4?ae.emptyPath():GF(t)}function GI(e){return new ae(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function GF(e){return _t(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function AN(e,t,i){return{name:pf(e,t),fields:i.value.mapValue.fields}}function KF(e,t,i){let n=Qr(e,t.name),r=cn(t.updateTime),o=t.createTime?cn(t.createTime):yt.min(),s=new Xn({mapValue:{fields:t.fields}}),l=vn.newFoundDocument(n,r,o,s);return i&&l.setHasCommittedMutations(),i?l.setHasCommittedMutations():l}function EK(e,t){return"found"in t?function(n,r){_t(!!r.found),r.found.name,r.found.updateTime;let o=Qr(n,r.found.name),s=cn(r.found.updateTime),l=r.found.createTime?cn(r.found.createTime):yt.min(),d=new Xn({mapValue:{fields:r.found.fields}});return vn.newFoundDocument(o,s,l,d)}(e,t):"missing"in t?function(n,r){_t(!!r.missing),_t(!!r.readTime);let o=Qr(n,r.missing),s=cn(r.readTime);return vn.newNoDocument(o,s)}(e,t):lt()}function CK(e,t){let i;if("targetChange"in t){t.targetChange;let n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:lt()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=function(u,f){return u.useProto3Json?(_t(f===void 0||typeof f=="string"),On.fromBase64String(f||"")):(_t(f===void 0||f instanceof Buffer||f instanceof Uint8Array),On.fromUint8Array(f||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,l=s&&function(u){let f=u.code===void 0?O.UNKNOWN:UF(u.code);return new U(f,u.message||"")}(s);i=new D_(n,r,o,l||null)}else if("documentChange"in t){t.documentChange;let n=t.documentChange;n.document,n.document.name,n.document.updateTime;let r=Qr(e,n.document.name),o=cn(n.document.updateTime),s=n.document.createTime?cn(n.document.createTime):yt.min(),l=new Xn({mapValue:{fields:n.document.fields}}),d=vn.newFoundDocument(r,o,s,l),u=n.targetIds||[],f=n.removedTargetIds||[];i=new Lc(u,f,d.key,d)}else if("documentDelete"in t){t.documentDelete;let n=t.documentDelete;n.document;let r=Qr(e,n.document),o=n.readTime?cn(n.readTime):yt.min(),s=vn.newNoDocument(r,o),l=n.removedTargetIds||[];i=new Lc([],l,s.key,s)}else if("documentRemove"in t){t.documentRemove;let n=t.documentRemove;n.document;let r=Qr(e,n.document),o=n.removedTargetIds||[];i=new Lc([],o,r,null)}else{if(!("filter"in t))return lt();{t.filter;let n=t.filter;n.targetId;let{count:r=0,unchangedNames:o}=n,s=new UI(r,o),l=n.targetId;i=new A_(l,s)}}return i}function gf(e,t){let i;if(t instanceof Ns)i={update:AN(e,t.key,t.value)};else if(t instanceof Fs)i={delete:pf(e,t.key)};else if(t instanceof wr)i={update:AN(e,t.key,t.data),updateMask:kK(t.fieldMask)};else{if(!(t instanceof df))return lt();i={verify:pf(e,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(n=>function(o,s){let l=s.transform;if(l instanceof Ps)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof No)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Fo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Os)return{fieldPath:s.field.canonicalString(),increment:l.Ie};throw lt()}(0,n))),t.precondition.isNone||(i.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:IK(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:lt()}(e,t.precondition)),i}function KI(e,t){let i=t.currentDocument?function(o){return o.updateTime!==void 0?rn.updateTime(cn(o.updateTime)):o.exists!==void 0?rn.exists(o.exists):rn.none()}(t.currentDocument):rn.none(),n=t.updateTransforms?t.updateTransforms.map(r=>function(s,l){let d=null;if("setToServerValue"in l)_t(l.setToServerValue==="REQUEST_TIME"),d=new Ps;else if("appendMissingElements"in l){let f=l.appendMissingElements.values||[];d=new No(f)}else if("removeAllFromArray"in l){let f=l.removeAllFromArray.values||[];d=new Fo(f)}else"increment"in l?d=new Os(s,l.increment):lt();let u=ln.fromServerFormat(l.fieldPath);return new $a(u,d)}(e,r)):[];if(t.update){t.update.name;let r=Qr(e,t.update.name),o=new Xn({mapValue:{fields:t.update.fields}});if(t.updateMask){let s=function(d){let u=d.fieldPaths||[];return new Pi(u.map(f=>ln.fromServerFormat(f)))}(t.updateMask);return new wr(r,o,s,i,n)}return new Ns(r,o,i,n)}if(t.delete){let r=Qr(e,t.delete);return new Fs(r,i)}if(t.verify){let r=Qr(e,t.verify);return new df(r,i)}return lt()}function TK(e,t){return e&&e.length>0?(_t(t!==void 0),e.map(i=>function(r,o){let s=r.updateTime?cn(r.updateTime):cn(o);return s.isEqual(yt.min())&&(s=cn(o)),new BI(s,r.transformResults||[])}(i,t))):[]}function YF(e,t){return{documents:[WF(e,t.path)]}}function QF(e,t){let i={structuredQuery:{}},n=t.path,r;t.collectionGroup!==null?(r=n,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=n.popLast(),i.structuredQuery.from=[{collectionId:n.lastSegment()}]),i.parent=WF(e,r);let o=function(u){if(u.length!==0)return JF(we.create(u,"and"))}(t.filters);o&&(i.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(f=>function(_){return{field:kc(_.field),direction:AK(_.dir)}}(f))}(t.orderBy);s&&(i.structuredQuery.orderBy=s);let l=WI(e,t.limit);return l!==null&&(i.structuredQuery.limit=l),t.startAt&&(i.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(i.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ut:i,parent:r}}function XF(e){let t=qF(e.parent),i=e.structuredQuery,n=i.from?i.from.length:0,r=null;if(n>0){_t(n===1);let f=i.from[0];f.allDescendants?r=f.collectionId:t=t.child(f.collectionId)}let o=[];i.where&&(o=function(p){let _=ZF(p);return _ instanceof we&&gC(_)?_.getFilters():[_]}(i.where));let s=[];i.orderBy&&(s=function(p){return p.map(_=>function(S){return new Ua(Mc(S.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(_))}(i.orderBy));let l=null;i.limit&&(l=function(p){let _;return _=typeof p=="object"?p.value:p,Tf(_)?null:_}(i.limit));let d=null;i.startAt&&(d=function(p){let _=!!p.before,y=p.values||[];return new Jr(y,_)}(i.startAt));let u=null;return i.endAt&&(u=function(p){let _=!p.before,y=p.values||[];return new Jr(y,_)}(i.endAt)),EF(t,r,s,o,l,"F",d,u)}function SK(e,t){let i=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt()}}(t.purpose);return i==null?null:{"goog-listen-tags":i}}function ZF(e){return e.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":let n=Mc(i.unaryFilter.field);return Jt.create(n,"==",{doubleValue:NaN});case"IS_NULL":let r=Mc(i.unaryFilter.field);return Jt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Mc(i.unaryFilter.field);return Jt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Mc(i.unaryFilter.field);return Jt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}(e):e.fieldFilter!==void 0?function(i){return Jt.create(Mc(i.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(i.fieldFilter.op),i.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(i){return we.create(i.compositeFilter.filters.map(n=>ZF(n)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return lt()}}(i.compositeFilter.op))}(e):lt()}function AK(e){return yK[e]}function DK(e){return wK[e]}function RK(e){return xK[e]}function kc(e){return{fieldPath:e.canonicalString()}}function Mc(e){return ln.fromServerFormat(e.fieldPath)}function JF(e){return e instanceof Jt?function(i){if(i.op==="=="){if(uN(i.value))return{unaryFilter:{field:kc(i.field),op:"IS_NAN"}};if(dN(i.value))return{unaryFilter:{field:kc(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(uN(i.value))return{unaryFilter:{field:kc(i.field),op:"IS_NOT_NAN"}};if(dN(i.value))return{unaryFilter:{field:kc(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kc(i.field),op:DK(i.op),value:i.value}}}(e):e instanceof we?function(i){let n=i.getFilters().map(r=>JF(r));return n.length===1?n[0]:{compositeFilter:{op:RK(i.op),filters:n}}}(e):lt()}function kK(e){let t=[];return e.fields.forEach(i=>t.push(i.canonicalString())),{fieldPaths:t}}function tL(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}var Wc=class e{constructor(t,i,n,r,o=yt.min(),s=yt.min(),l=On.EMPTY_BYTE_STRING,d=null){this.target=t,this.targetId=i,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=d}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var k_=class{constructor(t){this.ct=t}};function MK(e,t){let i;if(t.document)i=KF(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){let n=J.fromSegments(t.noDocument.path),r=Wa(t.noDocument.readTime);i=vn.newNoDocument(n,r),t.hasCommittedMutations&&i.setHasCommittedMutations()}else{if(!t.unknownDocument)return lt();{let n=J.fromSegments(t.unknownDocument.path),r=Wa(t.unknownDocument.version);i=vn.newUnknownDocument(n,r)}}return t.readTime&&i.setReadTime(function(r){let o=new Qe(r[0],r[1]);return yt.fromTimestamp(o)}(t.readTime)),i}function DN(e,t){let i=t.key,n={prefixPath:i.getCollectionPath().popLast().toArray(),collectionGroup:i.collectionGroup,documentId:i.path.lastSegment(),readTime:M_(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())n.document=function(o,s){return{name:pf(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Hc(o,s.version.toTimestamp()),createTime:Hc(o,s.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())n.noDocument={path:i.path.toArray(),readTime:Ha(t.version)};else{if(!t.isUnknownDocument())return lt();n.unknownDocument={path:i.path.toArray(),version:Ha(t.version)}}return n}function M_(e){let t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Ha(e){let t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Wa(e){let t=new Qe(e.seconds,e.nanoseconds);return yt.fromTimestamp(t)}function Oa(e,t){let i=(t.baseMutations||[]).map(o=>KI(e.ct,o));for(let o=0;o<t.mutations.length-1;++o){let s=t.mutations[o];if(o+1<t.mutations.length&&t.mutations[o+1].transform!==void 0){let l=t.mutations[o+1];s.updateTransforms=l.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}let n=t.mutations.map(o=>KI(e.ct,o)),r=Qe.fromMillis(t.localWriteTimeMs);return new uf(t.batchId,r,i,n)}function Xh(e){let t=Wa(e.readTime),i=e.lastLimboFreeSnapshotVersion!==void 0?Wa(e.lastLimboFreeSnapshotVersion):yt.min(),n;return n=function(o){return o.documents!==void 0}(e.query)?function(o){return _t(o.documents.length===1),ci(nd(qF(o.documents[0])))}(e.query):function(o){return ci(XF(o))}(e.query),new Wc(n,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,i,On.fromBase64String(e.resumeToken))}function eL(e,t){let i=Ha(t.snapshotVersion),n=Ha(t.lastLimboFreeSnapshotVersion),r;r=C_(t.target)?YF(e.ct,t.target):QF(e.ct,t.target).ut;let o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:za(t.target),readTime:i,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:r}}function yC(e){let t=XF({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?S_(t,t.limit,"L"):t}function cI(e,t){return new hf(t.largestBatchId,KI(e.ct,t.overlayMutation))}function RN(e,t){let i=t.path.lastSegment();return[e,li(t.path.popLast()),i]}function kN(e,t,i,n){return{indexId:e,uid:t,sequenceNumber:i,readTime:Ha(n.readTime),documentKey:li(n.documentKey.path),largestBatchId:n.largestBatchId}}var YI=class{getBundleMetadata(t,i){return MN(t).get(i).next(n=>{if(n)return function(o){return{id:o.bundleId,createTime:Wa(o.createTime),version:o.version}}(n)})}saveBundleMetadata(t,i){return MN(t).put(function(r){return{bundleId:r.id,createTime:Ha(cn(r.createTime)),version:r.version}}(i))}getNamedQuery(t,i){return PN(t).get(i).next(n=>{if(n)return function(o){return{name:o.name,query:yC(o.bundledQuery),readTime:Wa(o.readTime)}}(n)})}saveNamedQuery(t,i){return PN(t).put(function(r){return{name:r.name,readTime:Ha(cn(r.readTime)),bundledQuery:r.bundledQuery}}(i))}};function MN(e){return Nn(e,"bundles")}function PN(e){return Nn(e,"namedQueries")}var P_=class e{constructor(t,i){this.serializer=t,this.userId=i}static lt(t,i){let n=i.uid||"";return new e(t,n)}getOverlay(t,i){return qh(t).get(RN(this.userId,i)).next(n=>n?cI(this.serializer,n):null)}getOverlays(t,i){let n=Kr();return k.forEach(i,r=>this.getOverlay(t,r).next(o=>{o!==null&&n.set(r,o)})).next(()=>n)}saveOverlays(t,i,n){let r=[];return n.forEach((o,s)=>{let l=new hf(i,s);r.push(this.ht(t,l))}),k.waitFor(r)}removeOverlaysForBatchId(t,i,n){let r=new Set;i.forEach(s=>r.add(li(s.getCollectionPath())));let o=[];return r.forEach(s=>{let l=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,n+1],!1,!0);o.push(qh(t).H("collectionPathOverlayIndex",l))}),k.waitFor(o)}getOverlaysForCollection(t,i,n){let r=Kr(),o=li(i),s=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,Number.POSITIVE_INFINITY],!0);return qh(t).W("collectionPathOverlayIndex",s).next(l=>{for(let d of l){let u=cI(this.serializer,d);r.set(u.getKey(),u)}return r})}getOverlaysForCollectionGroup(t,i,n,r){let o=Kr(),s,l=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return qh(t).Y({index:"collectionGroupOverlayIndex",range:l},(d,u,f)=>{let p=cI(this.serializer,u);o.size()<r||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):f.done()}).next(()=>o)}ht(t,i){return qh(t).put(function(r,o,s){let[l,d,u]=RN(o,s.mutation.key);return{userId:o,collectionPath:d,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:gf(r.ct,s.mutation)}}(this.serializer,this.userId,i))}};function qh(e){return Nn(e,"documentOverlays")}var ko=class{constructor(){}Pt(t,i){this.It(t,i),i.Tt()}It(t,i){if("nullValue"in t)this.Et(i,5);else if("booleanValue"in t)this.Et(i,10),i.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(i,15),i.dt(nn(t.integerValue));else if("doubleValue"in t){let n=nn(t.doubleValue);isNaN(n)?this.Et(i,13):(this.Et(i,15),of(n)?i.dt(0):i.dt(n))}else if("timestampValue"in t){let n=t.timestampValue;this.Et(i,20),typeof n=="string"&&(n=Oo(n)),i.At(`${n.seconds||""}`),i.dt(n.nanos||0)}else if("stringValue"in t)this.Rt(t.stringValue,i),this.Vt(i);else if("bytesValue"in t)this.Et(i,30),i.ft(Rs(t.bytesValue)),this.Vt(i);else if("referenceValue"in t)this.gt(t.referenceValue,i);else if("geoPointValue"in t){let n=t.geoPointValue;this.Et(i,45),i.dt(n.latitude||0),i.dt(n.longitude||0)}else"mapValue"in t?_F(t)?this.Et(i,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,i),this.Vt(i)):"arrayValue"in t?(this.wt(t.arrayValue,i),this.Vt(i)):lt()}Rt(t,i){this.Et(i,25),this.St(t,i)}St(t,i){i.At(t)}yt(t,i){let n=t.fields||{};this.Et(i,55);for(let r of Object.keys(n))this.Rt(r,i),this.It(n[r],i)}wt(t,i){let n=t.values||[];this.Et(i,50);for(let r of n)this.It(r,i)}gt(t,i){this.Et(i,37),J.fromName(t).path.forEach(n=>{this.Et(i,60),this.St(n,i)})}Et(t,i){t.dt(i)}Vt(t){t.dt(2)}};ko.bt=new ko;function PK(e){if(e===0)return 8;let t=0;return!(e>>4)&&(t+=4,e<<=4),!(e>>6)&&(t+=2,e<<=2),!(e>>7)&&(t+=1),t}function ON(e){let t=64-function(n){let r=0;for(let o=0;o<8;++o){let s=PK(255&n[o]);if(r+=s,s!==8)break}return r}(e);return Math.ceil(t/8)}var QI=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(t){let i=t[Symbol.iterator](),n=i.next();for(;!n.done;)this.Ct(n.value),n=i.next();this.vt()}Ft(t){let i=t[Symbol.iterator](),n=i.next();for(;!n.done;)this.Mt(n.value),n=i.next();this.xt()}Ot(t){for(let i of t){let n=i.charCodeAt(0);if(n<128)this.Ct(n);else if(n<2048)this.Ct(960|n>>>6),this.Ct(128|63&n);else if(i<"\uD800"||"\uDBFF"<i)this.Ct(480|n>>>12),this.Ct(128|63&n>>>6),this.Ct(128|63&n);else{let r=i.codePointAt(0);this.Ct(240|r>>>18),this.Ct(128|63&r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r)}}this.vt()}Nt(t){for(let i of t){let n=i.charCodeAt(0);if(n<128)this.Mt(n);else if(n<2048)this.Mt(960|n>>>6),this.Mt(128|63&n);else if(i<"\uD800"||"\uDBFF"<i)this.Mt(480|n>>>12),this.Mt(128|63&n>>>6),this.Mt(128|63&n);else{let r=i.codePointAt(0);this.Mt(240|r>>>18),this.Mt(128|63&r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r)}}this.xt()}Lt(t){let i=this.Bt(t),n=ON(i);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=i.length-n;r<i.length;++r)this.buffer[this.position++]=255&i[r]}qt(t){let i=this.Bt(t),n=ON(i);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=i.length-n;r<i.length;++r)this.buffer[this.position++]=~(255&i[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(t){this.kt(t.length),this.buffer.set(t,this.position),this.position+=t.length}Wt(){return this.buffer.slice(0,this.position)}Bt(t){let i=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(t),n=(128&i[0])!=0;i[0]^=n?255:128;for(let r=1;r<i.length;++r)i[r]^=n?255:0;return i}Ct(t){let i=255&t;i===0?(this.Kt(0),this.Kt(255)):i===255?(this.Kt(255),this.Kt(0)):this.Kt(i)}Mt(t){let i=255&t;i===0?(this.Ut(0),this.Ut(255)):i===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(t){this.kt(1),this.buffer[this.position++]=t}Ut(t){this.kt(1),this.buffer[this.position++]=~t}kt(t){let i=t+this.position;if(i<=this.buffer.length)return;let n=2*this.buffer.length;n<i&&(n=i);let r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}},XI=class{constructor(t){this.Gt=t}ft(t){this.Gt.Dt(t)}At(t){this.Gt.Ot(t)}dt(t){this.Gt.Lt(t)}Tt(){this.Gt.Qt()}},ZI=class{constructor(t){this.Gt=t}ft(t){this.Gt.Ft(t)}At(t){this.Gt.Nt(t)}dt(t){this.Gt.qt(t)}Tt(){this.Gt.$t()}},Na=class{constructor(){this.Gt=new QI,this.zt=new XI(this.Gt),this.jt=new ZI(this.Gt)}seed(t){this.Gt.seed(t)}Ht(t){return t===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Fa=class e{constructor(t,i,n,r){this.indexId=t,this.documentKey=i,this.arrayValue=n,this.directionalValue=r}Jt(){let t=this.directionalValue.length,i=t===0||this.directionalValue[t-1]===255?t+1:t,n=new Uint8Array(i);return n.set(this.directionalValue,0),i!==t?n.set([0],this.directionalValue.length):++n[n.length-1],new e(this.indexId,this.documentKey,this.arrayValue,n)}};function Is(e,t){let i=e.indexId-t.indexId;return i!==0?i:(i=NN(e.arrayValue,t.arrayValue),i!==0?i:(i=NN(e.directionalValue,t.directionalValue),i!==0?i:J.comparator(e.documentKey,t.documentKey)))}function NN(e,t){for(let i=0;i<e.length&&i<t.length;++i){let n=e[i]-t[i];if(n!==0)return n}return e.length-t.length}var O_=class{constructor(t){this.Yt=new Se((i,n)=>ln.comparator(i.field,n.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.Zt=t.orderBy,this.Xt=[];for(let i of t.filters){let n=i;n.isInequality()?this.Yt=this.Yt.add(n):this.Xt.push(n)}}get en(){return this.Yt.size>1}tn(t){if(_t(t.collectionGroup===this.collectionId),this.en)return!1;let i=yI(t);if(i!==void 0&&!this.nn(i))return!1;let n=Ma(t),r=new Set,o=0,s=0;for(;o<n.length&&this.nn(n[o]);++o)r=r.add(n[o].fieldPath.canonicalString());if(o===n.length)return!0;if(this.Yt.size>0){let l=this.Yt.getIterator().getNext();if(!r.has(l.field.canonicalString())){let d=n[o];if(!this.rn(l,d)||!this.sn(this.Zt[s++],d))return!1}++o}for(;o<n.length;++o){let l=n[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],l))return!1}return!0}on(){if(this.en)return null;let t=new Se(ln.comparator),i=[];for(let n of this.Xt)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")i.push(new Nc(n.field,2));else{if(t.has(n.field))continue;t=t.add(n.field),i.push(new Nc(n.field,0))}for(let n of this.Zt)n.field.isKeyField()||t.has(n.field)||(t=t.add(n.field),i.push(new Nc(n.field,n.dir==="asc"?0:1)));return new Bc(Bc.UNKNOWN_ID,this.collectionId,i,rf.empty())}nn(t){for(let i of this.Xt)if(this.rn(i,t))return!0;return!1}rn(t,i){if(t===void 0||!t.field.isEqual(i.fieldPath))return!1;let n=t.op==="array-contains"||t.op==="array-contains-any";return i.kind===2===n}sn(t,i){return!!t.field.isEqual(i.fieldPath)&&(i.kind===0&&t.dir==="asc"||i.kind===1&&t.dir==="desc")}};function nL(e){var t,i;if(_t(e instanceof Jt||e instanceof we),e instanceof Jt){if(e instanceof E_){let r=((i=(t=e.value.arrayValue)===null||t===void 0?void 0:t.values)===null||i===void 0?void 0:i.map(o=>Jt.create(e.field,"==",o)))||[];return we.create(r,"or")}return e}let n=e.filters.map(r=>nL(r));return we.create(n,e.op)}function OK(e){if(e.getFilters().length===0)return[];let t=eE(nL(e));return _t(iL(t)),JI(t)||tE(t)?[t]:t.getFilters()}function JI(e){return e instanceof Jt}function tE(e){return e instanceof we&&gC(e)}function iL(e){return JI(e)||tE(e)||function(i){if(i instanceof we&&AI(i)){for(let n of i.getFilters())if(!JI(n)&&!tE(n))return!1;return!0}return!1}(e)}function eE(e){if(_t(e instanceof Jt||e instanceof we),e instanceof Jt)return e;if(e.filters.length===1)return eE(e.filters[0]);let t=e.filters.map(n=>eE(n)),i=we.create(t,e.op);return i=N_(i),iL(i)?i:(_t(i instanceof we),_t(Uc(i)),_t(i.filters.length>1),i.filters.reduce((n,r)=>wC(n,r)))}function wC(e,t){let i;return _t(e instanceof Jt||e instanceof we),_t(t instanceof Jt||t instanceof we),i=e instanceof Jt?t instanceof Jt?function(r,o){return we.create([r,o],"and")}(e,t):FN(e,t):t instanceof Jt?FN(t,e):function(r,o){if(_t(r.filters.length>0&&o.filters.length>0),Uc(r)&&Uc(o))return wF(r,o.getFilters());let s=AI(r)?r:o,l=AI(r)?o:r,d=s.filters.map(u=>wC(u,l));return we.create(d,"or")}(e,t),N_(i)}function FN(e,t){if(Uc(t))return wF(t,e.getFilters());{let i=t.filters.map(n=>wC(e,n));return we.create(i,"or")}}function N_(e){if(_t(e instanceof Jt||e instanceof we),e instanceof Jt)return e;let t=e.getFilters();if(t.length===1)return N_(t[0]);if(bF(e))return e;let i=t.map(r=>N_(r)),n=[];return i.forEach(r=>{r instanceof Jt?n.push(r):r instanceof we&&(r.op===e.op?n.push(...r.filters):n.push(r))}),n.length===1?n[0]:we.create(n,e.op)}var nE=class{constructor(){this._n=new _f}addToCollectionParentIndex(t,i){return this._n.add(i),k.resolve()}getCollectionParents(t,i){return k.resolve(this._n.getEntries(i))}addFieldIndex(t,i){return k.resolve()}deleteFieldIndex(t,i){return k.resolve()}deleteAllFieldIndexes(t){return k.resolve()}createTargetIndexes(t,i){return k.resolve()}getDocumentsMatchingTarget(t,i){return k.resolve(null)}getIndexType(t,i){return k.resolve(0)}getFieldIndexes(t,i){return k.resolve([])}getNextCollectionGroupToUpdate(t){return k.resolve(null)}getMinOffset(t,i){return k.resolve(er.min())}getMinOffsetFromCollectionGroup(t,i){return k.resolve(er.min())}updateCollectionGroup(t,i,n){return k.resolve()}updateIndexEntries(t,i){return k.resolve()}},_f=class{constructor(){this.index={}}add(t){let i=t.lastSegment(),n=t.popLast(),r=this.index[i]||new Se(ae.comparator),o=!r.has(n);return this.index[i]=r.add(n),o}has(t){let i=t.lastSegment(),n=t.popLast(),r=this.index[i];return r&&r.has(n)}getEntries(t){return(this.index[t]||new Se(ae.comparator)).toArray()}};var s_=new Uint8Array(0),iE=class{constructor(t,i){this.databaseId=i,this.an=new _f,this.un=new to(n=>za(n),(n,r)=>Sf(n,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,i){if(!this.an.has(i)){let n=i.lastSegment(),r=i.popLast();t.addOnCommittedListener(()=>{this.an.add(i)});let o={collectionId:n,parent:li(r)};return LN(t).put(o)}return k.resolve()}getCollectionParents(t,i){let n=[],r=IDBKeyRange.bound([i,""],[oF(i),""],!1,!0);return LN(t).W(r).next(o=>{for(let s of o){if(s.collectionId!==i)break;n.push(Gr(s.parent))}return n})}addFieldIndex(t,i){let n=Gh(t),r=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])}}(i);delete r.indexId;let o=n.add(r);if(i.indexState){let s=Sc(t);return o.next(l=>{s.put(kN(l,this.uid,i.indexState.sequenceNumber,i.indexState.offset))})}return o.next()}deleteFieldIndex(t,i){let n=Gh(t),r=Sc(t),o=Tc(t);return n.delete(i.indexId).next(()=>r.delete(IDBKeyRange.bound([i.indexId],[i.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([i.indexId],[i.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){let i=Gh(t),n=Tc(t),r=Sc(t);return i.H().next(()=>n.H()).next(()=>r.H())}createTargetIndexes(t,i){return k.forEach(this.cn(i),n=>this.getIndexType(t,n).next(r=>{if(r===0||r===1){let o=new O_(n).on();if(o!=null)return this.addFieldIndex(t,o)}}))}getDocumentsMatchingTarget(t,i){let n=Tc(t),r=!0,o=new Map;return k.forEach(this.cn(i),s=>this.ln(t,s).next(l=>{r&&(r=!!l),o.set(s,l)})).next(()=>{if(r){let s=jt(),l=[];return k.forEach(o,(d,u)=>{$("IndexedDbIndexManager",`Using index ${function(Y){return`id=${Y.indexId}|cg=${Y.collectionGroup}|f=${Y.fields.map(Rt=>`${Rt.fieldPath}:${Rt.kind}`).join(",")}`}(d)} to execute ${za(i)}`);let f=function(Y,Rt){let kt=yI(Rt);if(kt===void 0)return null;for(let Kt of T_(Y,kt.fieldPath))switch(Kt.op){case"array-contains-any":return Kt.value.arrayValue.values||[];case"array-contains":return[Kt.value]}return null}(u,d),p=function(Y,Rt){let kt=new Map;for(let Kt of Ma(Rt))for(let Ue of T_(Y,Kt.fieldPath))switch(Ue.op){case"==":case"in":kt.set(Kt.fieldPath.canonicalString(),Ue.value);break;case"not-in":case"!=":return kt.set(Kt.fieldPath.canonicalString(),Ue.value),Array.from(kt.values())}return null}(u,d),_=function(Y,Rt){let kt=[],Kt=!0;for(let Ue of Ma(Rt)){let Vi=Ue.kind===0?gN(Y,Ue.fieldPath,Y.startAt):_N(Y,Ue.fieldPath,Y.startAt);kt.push(Vi.value),Kt&&(Kt=Vi.inclusive)}return new Jr(kt,Kt)}(u,d),y=function(Y,Rt){let kt=[],Kt=!0;for(let Ue of Ma(Rt)){let Vi=Ue.kind===0?_N(Y,Ue.fieldPath,Y.endAt):gN(Y,Ue.fieldPath,Y.endAt);kt.push(Vi.value),Kt&&(Kt=Vi.inclusive)}return new Jr(kt,Kt)}(u,d),S=this.hn(d,u,_),A=this.hn(d,u,y),M=this.Pn(d,u,p),K=this.In(d.indexId,f,S,_.inclusive,A,y.inclusive,M);return k.forEach(K,ut=>n.j(ut,i.limit).next(Y=>{Y.forEach(Rt=>{let kt=J.fromSegments(Rt.documentKey);s.has(kt)||(s=s.add(kt),l.push(kt))})}))}).next(()=>l)}return k.resolve(null)})}cn(t){let i=this.un.get(t);return i||(t.filters.length===0?i=[t]:i=OK(we.create(t.filters,"and")).map(n=>LI(t.path,t.collectionGroup,t.orderBy,n.getFilters(),t.limit,t.startAt,t.endAt)),this.un.set(t,i),i)}In(t,i,n,r,o,s,l){let d=(i!=null?i.length:1)*Math.max(n.length,o.length),u=d/(i!=null?i.length:1),f=[];for(let p=0;p<d;++p){let _=i?this.Tn(i[p/u]):s_,y=this.En(t,_,n[p%u],r),S=this.dn(t,_,o[p%u],s),A=l.map(M=>this.En(t,_,M,!0));f.push(...this.createRange(y,S,A))}return f}En(t,i,n,r){let o=new Fa(t,J.empty(),i,n);return r?o:o.Jt()}dn(t,i,n,r){let o=new Fa(t,J.empty(),i,n);return r?o.Jt():o}ln(t,i){let n=new O_(i),r=i.collectionGroup!=null?i.collectionGroup:i.path.lastSegment();return this.getFieldIndexes(t,r).next(o=>{let s=null;for(let l of o)n.tn(l)&&(!s||l.fields.length>s.fields.length)&&(s=l);return s})}getIndexType(t,i){let n=2,r=this.cn(i);return k.forEach(r,o=>this.ln(t,o).next(s=>{s?n!==0&&s.fields.length<function(d){let u=new Se(ln.comparator),f=!1;for(let p of d.filters)for(let _ of p.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?f=!0:u=u.add(_.field));for(let p of d.orderBy)p.field.isKeyField()||(u=u.add(p.field));return u.size+(f?1:0)}(o)&&(n=1):n=0})).next(()=>function(s){return s.limit!==null}(i)&&r.length>1&&n===2?1:n)}An(t,i){let n=new Na;for(let r of Ma(t)){let o=i.data.field(r.fieldPath);if(o==null)return null;let s=n.Ht(r.kind);ko.bt.Pt(o,s)}return n.Wt()}Tn(t){let i=new Na;return ko.bt.Pt(t,i.Ht(0)),i.Wt()}Rn(t,i){let n=new Na;return ko.bt.Pt(ja(this.databaseId,i),n.Ht(function(o){let s=Ma(o);return s.length===0?0:s[s.length-1].kind}(t))),n.Wt()}Pn(t,i,n){if(n===null)return[];let r=[];r.push(new Na);let o=0;for(let s of Ma(t)){let l=n[o++];for(let d of r)if(this.Vn(i,s.fieldPath)&&cf(l))r=this.mn(r,s,l);else{let u=d.Ht(s.kind);ko.bt.Pt(l,u)}}return this.fn(r)}hn(t,i,n){return this.Pn(t,i,n.position)}fn(t){let i=[];for(let n=0;n<t.length;++n)i[n]=t[n].Wt();return i}mn(t,i,n){let r=[...t],o=[];for(let s of n.arrayValue.values||[])for(let l of r){let d=new Na;d.seed(l.Wt()),ko.bt.Pt(s,d.Ht(i.kind)),o.push(d)}return o}Vn(t,i){return!!t.filters.find(n=>n instanceof Jt&&n.field.isEqual(i)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(t,i){let n=Gh(t),r=Sc(t);return(i?n.W("collectionGroupIndex",IDBKeyRange.bound(i,i)):n.W()).next(o=>{let s=[];return k.forEach(o,l=>r.get([l.indexId,this.uid]).next(d=>{s.push(function(f,p){let _=p?new rf(p.sequenceNumber,new er(Wa(p.readTime),new J(Gr(p.documentKey)),p.largestBatchId)):rf.empty(),y=f.fields.map(([S,A])=>new Nc(ln.fromServerFormat(S),A));return new Bc(f.indexId,f.collectionGroup,y,_)}(l,d))})).next(()=>s)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(i=>i.length===0?null:(i.sort((n,r)=>{let o=n.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:Vt(n.collectionGroup,r.collectionGroup)}),i[0].collectionGroup))}updateCollectionGroup(t,i,n){let r=Gh(t),o=Sc(t);return this.gn(t).next(s=>r.W("collectionGroupIndex",IDBKeyRange.bound(i,i)).next(l=>k.forEach(l,d=>o.put(kN(d.indexId,this.uid,s,n)))))}updateIndexEntries(t,i){let n=new Map;return k.forEach(i,(r,o)=>{let s=n.get(r.collectionGroup);return(s?k.resolve(s):this.getFieldIndexes(t,r.collectionGroup)).next(l=>(n.set(r.collectionGroup,l),k.forEach(l,d=>this.pn(t,r,d).next(u=>{let f=this.yn(o,d);return u.isEqual(f)?k.resolve():this.wn(t,o,d,u,f)}))))})}Sn(t,i,n,r){return Tc(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,i.key),documentKey:i.key.path.toArray()})}bn(t,i,n,r){return Tc(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,i.key),i.key.path.toArray()])}pn(t,i,n){let r=Tc(t),o=new Se(Is);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,i)])},(s,l)=>{o=o.add(new Fa(n.indexId,i,l.arrayValue,l.directionalValue))}).next(()=>o)}yn(t,i){let n=new Se(Is),r=this.An(i,t);if(r==null)return n;let o=yI(i);if(o!=null){let s=t.data.field(o.fieldPath);if(cf(s))for(let l of s.arrayValue.values||[])n=n.add(new Fa(i.indexId,t.key,this.Tn(l),r))}else n=n.add(new Fa(i.indexId,t.key,s_,r));return n}wn(t,i,n,r,o){$("IndexedDbIndexManager","Updating index entries for document '%s'",i.key);let s=[];return function(d,u,f,p,_){let y=d.getIterator(),S=u.getIterator(),A=Cc(y),M=Cc(S);for(;A||M;){let K=!1,ut=!1;if(A&&M){let Y=f(A,M);Y<0?ut=!0:Y>0&&(K=!0)}else A!=null?ut=!0:K=!0;K?(p(M),M=Cc(S)):ut?(_(A),A=Cc(y)):(A=Cc(y),M=Cc(S))}}(r,o,Is,l=>{s.push(this.Sn(t,i,n,l))},l=>{s.push(this.bn(t,i,n,l))}),k.waitFor(s)}gn(t){let i=1;return Sc(t).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,r,o)=>{o.done(),i=r.sequenceNumber+1}).next(()=>i)}createRange(t,i,n){n=n.sort((s,l)=>Is(s,l)).filter((s,l,d)=>!l||Is(s,d[l-1])!==0);let r=[];r.push(t);for(let s of n){let l=Is(s,t),d=Is(s,i);if(l===0)r[0]=t.Jt();else if(l>0&&d<0)r.push(s),r.push(s.Jt());else if(d>0)break}r.push(i);let o=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];let l=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,s_,[]],d=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,s_,[]];o.push(IDBKeyRange.bound(l,d))}return o}Dn(t,i){return Is(t,i)>0}getMinOffsetFromCollectionGroup(t,i){return this.getFieldIndexes(t,i).next(VN)}getMinOffset(t,i){return k.mapArray(this.cn(i),n=>this.ln(t,n).next(r=>r||lt())).next(VN)}};function LN(e){return Nn(e,"collectionParents")}function Tc(e){return Nn(e,"indexEntries")}function Gh(e){return Nn(e,"indexConfiguration")}function Sc(e){return Nn(e,"indexState")}function VN(e){_t(e.length!==0);let t=e[0].indexState.offset,i=t.largestBatchId;for(let n=1;n<e.length;n++){let r=e[n].indexState.offset;fC(r,t)<0&&(t=r),i<r.largestBatchId&&(i=r.largestBatchId)}return new er(t.readTime,t.documentKey,i)}var BN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ji=class e{constructor(t,i,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function rL(e,t,i){let n=e.store("mutations"),r=e.store("documentMutations"),o=[],s=IDBKeyRange.only(i.batchId),l=0,d=n.Y({range:s},(f,p,_)=>(l++,_.delete()));o.push(d.next(()=>{_t(l===1)}));let u=[];for(let f of i.mutations){let p=dF(t,f.key.path,i.batchId);o.push(r.delete(p)),u.push(f.key)}return k.waitFor(o).next(()=>u)}function F_(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw lt();t=e.noDocument}return JSON.stringify(t).length}Ji.DEFAULT_COLLECTION_PERCENTILE=10,Ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ji.DEFAULT=new Ji(41943040,Ji.DEFAULT_COLLECTION_PERCENTILE,Ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ji.DISABLED=new Ji(-1,0,0);var L_=class e{constructor(t,i,n,r){this.userId=t,this.serializer=i,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(t,i,n,r){_t(t.uid!=="");let o=t.isAuthenticated()?t.uid:"";return new e(o,i,n,r)}checkEmpty(t){let i=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Es(t).Y({index:"userMutationsIndex",range:n},(r,o,s)=>{i=!1,s.done()}).next(()=>i)}addMutationBatch(t,i,n,r){let o=Pc(t),s=Es(t);return s.add({}).next(l=>{_t(typeof l=="number");let d=new uf(l,i,n,r),u=function(y,S,A){let M=A.baseMutations.map(ut=>gf(y.ct,ut)),K=A.mutations.map(ut=>gf(y.ct,ut));return{userId:S,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:M,mutations:K}}(this.serializer,this.userId,d),f=[],p=new Se((_,y)=>Vt(_.canonicalString(),y.canonicalString()));for(let _ of r){let y=dF(this.userId,_.key.path,l);p=p.add(_.key.path.popLast()),f.push(s.put(u)),f.push(o.put(y,U8))}return p.forEach(_=>{f.push(this.indexManager.addToCollectionParentIndex(t,_))}),t.addOnCommittedListener(()=>{this.Cn[l]=d.keys()}),k.waitFor(f).next(()=>d)})}lookupMutationBatch(t,i){return Es(t).get(i).next(n=>n?(_t(n.userId===this.userId),Oa(this.serializer,n)):null)}vn(t,i){return this.Cn[i]?k.resolve(this.Cn[i]):this.lookupMutationBatch(t,i).next(n=>{if(n){let r=n.keys();return this.Cn[i]=r,r}return null})}getNextMutationBatchAfterBatchId(t,i){let n=i+1,r=IDBKeyRange.lowerBound([this.userId,n]),o=null;return Es(t).Y({index:"userMutationsIndex",range:r},(s,l,d)=>{l.userId===this.userId&&(_t(l.batchId>=n),o=Oa(this.serializer,l)),d.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(t){let i=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Es(t).Y({index:"userMutationsIndex",range:i,reverse:!0},(r,o,s)=>{n=o.batchId,s.done()}).next(()=>n)}getAllMutationBatches(t){let i=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Es(t).W("userMutationsIndex",i).next(n=>n.map(r=>Oa(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(t,i){let n=d_(this.userId,i.path),r=IDBKeyRange.lowerBound(n),o=[];return Pc(t).Y({range:r},(s,l,d)=>{let[u,f,p]=s,_=Gr(f);if(u===this.userId&&i.path.isEqual(_))return Es(t).get(p).next(y=>{if(!y)throw lt();_t(y.userId===this.userId),o.push(Oa(this.serializer,y))});d.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(t,i){let n=new Se(Vt),r=[];return i.forEach(o=>{let s=d_(this.userId,o.path),l=IDBKeyRange.lowerBound(s),d=Pc(t).Y({range:l},(u,f,p)=>{let[_,y,S]=u,A=Gr(y);_===this.userId&&o.path.isEqual(A)?n=n.add(S):p.done()});r.push(d)}),k.waitFor(r).next(()=>this.Fn(t,n))}getAllMutationBatchesAffectingQuery(t,i){let n=i.path,r=n.length+1,o=d_(this.userId,n),s=IDBKeyRange.lowerBound(o),l=new Se(Vt);return Pc(t).Y({range:s},(d,u,f)=>{let[p,_,y]=d,S=Gr(_);p===this.userId&&n.isPrefixOf(S)?S.length===r&&(l=l.add(y)):f.done()}).next(()=>this.Fn(t,l))}Fn(t,i){let n=[],r=[];return i.forEach(o=>{r.push(Es(t).get(o).next(s=>{if(s===null)throw lt();_t(s.userId===this.userId),n.push(Oa(this.serializer,s))}))}),k.waitFor(r).next(()=>n)}removeMutationBatch(t,i){return rL(t.ae,this.userId,i).next(n=>(t.addOnCommittedListener(()=>{this.Mn(i.batchId)}),k.forEach(n,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}Mn(t){delete this.Cn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(i=>{if(!i)return k.resolve();let n=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),r=[];return Pc(t).Y({range:n},(o,s,l)=>{if(o[0]===this.userId){let d=Gr(o[1]);r.push(d)}else l.done()}).next(()=>{_t(r.length===0)})})}containsKey(t,i){return oL(t,this.userId,i)}xn(t){return sL(t).get(this.userId).next(i=>i||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function oL(e,t,i){let n=d_(t,i.path),r=n[1],o=IDBKeyRange.lowerBound(n),s=!1;return Pc(e).Y({range:o,J:!0},(l,d,u)=>{let[f,p,_]=l;f===t&&p===r&&(s=!0),u.done()}).next(()=>s)}function Es(e){return Nn(e,"mutations")}function Pc(e){return Nn(e,"documentMutations")}function sL(e){return Nn(e,"mutationQueues")}var qc=class e{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new e(0)}static Ln(){return new e(-1)}};var rE=class{constructor(t,i){this.referenceDelegate=t,this.serializer=i}allocateTargetId(t){return this.Bn(t).next(i=>{let n=new qc(i.highestTargetId);return i.highestTargetId=n.next(),this.kn(t,i).next(()=>i.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Bn(t).next(i=>yt.fromTimestamp(new Qe(i.lastRemoteSnapshotVersion.seconds,i.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Bn(t).next(i=>i.highestListenSequenceNumber)}setTargetsMetadata(t,i,n){return this.Bn(t).next(r=>(r.highestListenSequenceNumber=i,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),i>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=i),this.kn(t,r)))}addTargetData(t,i){return this.qn(t,i).next(()=>this.Bn(t).next(n=>(n.targetCount+=1,this.Qn(i,n),this.kn(t,n))))}updateTargetData(t,i){return this.qn(t,i)}removeTargetData(t,i){return this.removeMatchingKeysForTargetId(t,i.targetId).next(()=>Ac(t).delete(i.targetId)).next(()=>this.Bn(t)).next(n=>(_t(n.targetCount>0),n.targetCount-=1,this.kn(t,n)))}removeTargets(t,i,n){let r=0,o=[];return Ac(t).Y((s,l)=>{let d=Xh(l);d.sequenceNumber<=i&&n.get(d.targetId)===null&&(r++,o.push(this.removeTargetData(t,d)))}).next(()=>k.waitFor(o)).next(()=>r)}forEachTarget(t,i){return Ac(t).Y((n,r)=>{let o=Xh(r);i(o)})}Bn(t){return jN(t).get("targetGlobalKey").next(i=>(_t(i!==null),i))}kn(t,i){return jN(t).put("targetGlobalKey",i)}qn(t,i){return Ac(t).put(eL(this.serializer,i))}Qn(t,i){let n=!1;return t.targetId>i.highestTargetId&&(i.highestTargetId=t.targetId,n=!0),t.sequenceNumber>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.Bn(t).next(i=>i.targetCount)}getTargetData(t,i){let n=za(i),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),o=null;return Ac(t).Y({range:r,index:"queryTargetsIndex"},(s,l,d)=>{let u=Xh(l);Sf(i,u.target)&&(o=u,d.done())}).next(()=>o)}addMatchingKeys(t,i,n){let r=[],o=Cs(t);return i.forEach(s=>{let l=li(s.path);r.push(o.put({targetId:n,path:l})),r.push(this.referenceDelegate.addReference(t,n,s))}),k.waitFor(r)}removeMatchingKeys(t,i,n){let r=Cs(t);return k.forEach(i,o=>{let s=li(o.path);return k.waitFor([r.delete([n,s]),this.referenceDelegate.removeReference(t,n,o)])})}removeMatchingKeysForTargetId(t,i){let n=Cs(t),r=IDBKeyRange.bound([i],[i+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(t,i){let n=IDBKeyRange.bound([i],[i+1],!1,!0),r=Cs(t),o=jt();return r.Y({range:n,J:!0},(s,l,d)=>{let u=Gr(s[1]),f=new J(u);o=o.add(f)}).next(()=>o)}containsKey(t,i){let n=li(i.path),r=IDBKeyRange.bound([n],[oF(n)],!1,!0),o=0;return Cs(t).Y({index:"documentTargetsIndex",J:!0,range:r},([s,l],d,u)=>{s!==0&&(o++,u.done())}).next(()=>o>0)}_t(t,i){return Ac(t).get(i).next(n=>n?Xh(n):null)}};function Ac(e){return Nn(e,"targets")}function jN(e){return Nn(e,"targetGlobal")}function Cs(e){return Nn(e,"targetDocuments")}function UN([e,t],[i,n]){let r=Vt(e,i);return r===0?Vt(t,n):r}var oE=class{constructor(t){this.Kn=t,this.buffer=new Se(UN),this.$n=0}Un(){return++this.$n}Wn(t){let i=[t,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(i);else{let n=this.buffer.last();UN(i,n)<0&&(this.buffer=this.buffer.delete(n).add(i))}}get maxValue(){return this.buffer.last()[0]}},sE=class{constructor(t,i,n){this.garbageCollector=t,this.asyncQueue=i,this.localStore=n,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(t){$("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,()=>N(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(i){Bs(i)?$("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Vs(i)}yield this.zn(3e5)}))}},aE=class{constructor(t,i){this.jn=t,this.params=i}calculateTargetCount(t,i){return this.jn.Hn(t).next(n=>Math.floor(i/100*n))}nthSequenceNumber(t,i){if(i===0)return k.resolve(Mi._e);let n=new oE(i);return this.jn.forEachTarget(t,r=>n.Wn(r.sequenceNumber)).next(()=>this.jn.Jn(t,r=>n.Wn(r))).next(()=>n.maxValue)}removeTargets(t,i,n){return this.jn.removeTargets(t,i,n)}removeOrphanedDocuments(t,i){return this.jn.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(BN)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),BN):this.Yn(t,i))}getCacheSize(t){return this.jn.getCacheSize(t)}Yn(t,i){let n,r,o,s,l,d,u,f=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,s=Date.now(),this.nthSequenceNumber(t,r))).next(p=>(n=p,l=Date.now(),this.removeTargets(t,n,i))).next(p=>(o=p,d=Date.now(),this.removeOrphanedDocuments(t,n))).next(p=>(u=Date.now(),Dc()<=Yi.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${r} in `+(l-s)+`ms
	Removed ${o} targets in `+(d-l)+`ms
	Removed ${p} documents in `+(u-d)+`ms
Total Duration: ${u-f}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:p})))}};function NK(e,t){return new aE(e,t)}var lE=class{constructor(t,i){this.db=t,this.garbageCollector=NK(this,i)}Hn(t){let i=this.Zn(t);return this.db.getTargetCache().getTargetCount(t).next(n=>i.next(r=>n+r))}Zn(t){let i=0;return this.Jn(t,n=>{i++}).next(()=>i)}forEachTarget(t,i){return this.db.getTargetCache().forEachTarget(t,i)}Jn(t,i){return this.Xn(t,(n,r)=>i(r))}addReference(t,i,n){return a_(t,n)}removeReference(t,i,n){return a_(t,n)}removeTargets(t,i,n){return this.db.getTargetCache().removeTargets(t,i,n)}markPotentiallyOrphaned(t,i){return a_(t,i)}er(t,i){return function(r,o){let s=!1;return sL(r).Z(l=>oL(r,l,o).next(d=>(d&&(s=!0),k.resolve(!d)))).next(()=>s)}(t,i)}removeOrphanedDocuments(t,i){let n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.Xn(t,(s,l)=>{if(l<=i){let d=this.er(t,s).next(u=>{if(!u)return o++,n.getEntry(t,s).next(()=>(n.removeEntry(s,yt.min()),Cs(t).delete(function(p){return[0,li(p.path)]}(s))))});r.push(d)}}).next(()=>k.waitFor(r)).next(()=>n.apply(t)).next(()=>o)}removeTarget(t,i){let n=i.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,i){return a_(t,i)}Xn(t,i){let n=Cs(t),r,o=Mi._e;return n.Y({index:"documentTargetsIndex"},([s,l],{path:d,sequenceNumber:u})=>{s===0?(o!==Mi._e&&i(new J(Gr(r)),o),o=u,r=d):o=Mi._e}).next(()=>{o!==Mi._e&&i(new J(Gr(r)),o)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}};function a_(e,t){return Cs(e).put(function(n,r){return{targetId:0,path:li(n.path),sequenceNumber:r}}(t,e.currentSequenceNumber))}var V_=class{constructor(){this.changes=new to(t=>t.toString(),(t,i)=>t.isEqual(i)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,vn.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();let n=this.changes.get(i);return n!==void 0?k.resolve(n):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var cE=class{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,i,n){return ka(t).put(n)}removeEntry(t,i,n){return ka(t).delete(function(o,s){let l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],M_(s),l[l.length-1]]}(i,n))}updateMetadata(t,i){return this.getMetadata(t).next(n=>(n.byteSize+=i,this.tr(t,n)))}getEntry(t,i){let n=vn.newInvalidDocument(i);return ka(t).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Kh(i))},(r,o)=>{n=this.nr(i,o)}).next(()=>n)}rr(t,i){let n={size:0,document:vn.newInvalidDocument(i)};return ka(t).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Kh(i))},(r,o)=>{n={document:this.nr(i,o),size:F_(o)}}).next(()=>n)}getEntries(t,i){let n=vi();return this.ir(t,i,(r,o)=>{let s=this.nr(r,o);n=n.insert(r,s)}).next(()=>n)}sr(t,i){let n=vi(),r=new Be(J.comparator);return this.ir(t,i,(o,s)=>{let l=this.nr(o,s);n=n.insert(o,l),r=r.insert(o,F_(s))}).next(()=>({documents:n,_r:r}))}ir(t,i,n){if(i.isEmpty())return k.resolve();let r=new Se(HN);i.forEach(d=>r=r.add(d));let o=IDBKeyRange.bound(Kh(r.first()),Kh(r.last())),s=r.getIterator(),l=s.getNext();return ka(t).Y({index:"documentKeyIndex",range:o},(d,u,f)=>{let p=J.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;l&&HN(l,p)<0;)n(l,null),l=s.getNext();l&&l.isEqual(p)&&(n(l,u),l=s.hasNext()?s.getNext():null),l?f.U(Kh(l)):f.done()}).next(()=>{for(;l;)n(l,null),l=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(t,i,n,r,o){let s=i.path,l=[s.popLast().toArray(),s.lastSegment(),M_(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ka(t).W(IDBKeyRange.bound(l,d,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let f=vi();for(let p of u){let _=this.nr(J.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);_.isFoundDocument()&&(Df(i,_)||r.has(_.key))&&(f=f.insert(_.key,_))}return f})}getAllFromCollectionGroup(t,i,n,r){let o=vi(),s=$N(i,n),l=$N(i,er.max());return ka(t).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,l,!0)},(d,u,f)=>{let p=this.nr(J.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(p.key,p),o.size===r&&f.done()}).next(()=>o)}newChangeBuffer(t){return new dE(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(i=>i.byteSize)}getMetadata(t){return zN(t).get("remoteDocumentGlobalKey").next(i=>(_t(!!i),i))}tr(t,i){return zN(t).put("remoteDocumentGlobalKey",i)}nr(t,i){if(i){let n=MK(this.serializer,i);if(!(n.isNoDocument()&&n.version.isEqual(yt.min())))return n}return vn.newInvalidDocument(t)}};function aL(e){return new cE(e)}var dE=class extends V_{constructor(t,i){super(),this.ar=t,this.trackRemovals=i,this.ur=new to(n=>n.toString(),(n,r)=>n.isEqual(r))}applyChanges(t){let i=[],n=0,r=new Se((o,s)=>Vt(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let l=this.ur.get(o);if(i.push(this.ar.removeEntry(t,o,l.readTime)),s.isValidDocument()){let d=DN(this.ar.serializer,s);r=r.add(o.path.popLast());let u=F_(d);n+=u-l.size,i.push(this.ar.addEntry(t,o,d))}else if(n-=l.size,this.trackRemovals){let d=DN(this.ar.serializer,s.convertToNoDocument(yt.min()));i.push(this.ar.addEntry(t,o,d))}}),r.forEach(o=>{i.push(this.ar.indexManager.addToCollectionParentIndex(t,o))}),i.push(this.ar.updateMetadata(t,n)),k.waitFor(i)}getFromCache(t,i){return this.ar.rr(t,i).next(n=>(this.ur.set(i,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(t,i){return this.ar.sr(t,i).next(({documents:n,_r:r})=>(r.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:n.get(o).readTime})}),n))}};function zN(e){return Nn(e,"remoteDocumentGlobal")}function ka(e){return Nn(e,"remoteDocumentsV14")}function Kh(e){let t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function $N(e,t){let i=t.documentKey.path.toArray();return[e,M_(t.readTime),i.slice(0,i.length-2),i.length>0?i[i.length-1]:""]}function HN(e,t){let i=e.path.toArray(),n=t.path.toArray(),r=0;for(let o=0;o<i.length-2&&o<n.length-2;++o)if(r=Vt(i[o],n[o]),r)return r;return r=Vt(i.length,n.length),r||(r=Vt(i[i.length-2],n[n.length-2]),r||Vt(i[i.length-1],n[n.length-1]))}var uE=class{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}};var B_=class{constructor(t,i,n,r){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,i){let n=null;return this.documentOverlayCache.getOverlay(t,i).next(r=>(n=r,this.remoteDocumentCache.getEntry(t,i))).next(r=>(n!==null&&tf(n.mutation,r,Pi.empty(),Qe.now()),r))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next(n=>this.getLocalViewOfDocuments(t,n,jt()).next(()=>n))}getLocalViewOfDocuments(t,i,n=jt()){let r=Kr();return this.populateOverlays(t,r,i).next(()=>this.computeViews(t,i,r,n).next(o=>{let s=Qh();return o.forEach((l,d)=>{s=s.insert(l,d.overlayedDocument)}),s}))}getOverlayedDocuments(t,i){let n=Kr();return this.populateOverlays(t,n,i).next(()=>this.computeViews(t,i,n,jt()))}populateOverlays(t,i,n){let r=[];return n.forEach(o=>{i.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(t,r).next(o=>{o.forEach((s,l)=>{i.set(s,l)})})}computeViews(t,i,n,r){let o=vi(),s=Jh(),l=function(){return Jh()}();return i.forEach((d,u)=>{let f=n.get(u.key);r.has(u.key)&&(f===void 0||f.mutation instanceof wr)?o=o.insert(u.key,u):f!==void 0?(s.set(u.key,f.mutation.getFieldMask()),tf(f.mutation,u,f.mutation.getFieldMask(),Qe.now())):s.set(u.key,Pi.empty())}),this.recalculateAndSaveOverlays(t,o).next(d=>(d.forEach((u,f)=>s.set(u,f)),i.forEach((u,f)=>{var p;return l.set(u,new uE(f,(p=s.get(u))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(t,i){let n=Jh(),r=new Be((s,l)=>s-l),o=jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next(s=>{for(let l of s)l.keys().forEach(d=>{let u=i.get(d);if(u===null)return;let f=n.get(d)||Pi.empty();f=l.applyToLocalView(u,f),n.set(d,f);let p=(r.get(l.batchId)||jt()).add(d);r=r.insert(l.batchId,p)})}).next(()=>{let s=[],l=r.getReverseIterator();for(;l.hasNext();){let d=l.getNext(),u=d.key,f=d.value,p=RF();f.forEach(_=>{if(!o.has(_)){let y=VF(i.get(_),n.get(_));y!==null&&p.set(_,y),o=o.add(_)}}),s.push(this.documentOverlayCache.saveOverlays(t,u,p))}return k.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,i,n,r){return function(s){return J.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):_C(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,n,r):this.getDocumentsMatchingCollectionQuery(t,i,n,r)}getNextDocuments(t,i,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,n,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,n.largestBatchId,r-o.size):k.resolve(Kr()),l=-1,d=o;return s.next(u=>k.forEach(u,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),o.get(f)?k.resolve():this.remoteDocumentCache.getEntry(t,f).next(_=>{d=d.insert(f,_)}))).next(()=>this.populateOverlays(t,u,o)).next(()=>this.computeViews(t,d,u,jt())).next(f=>({batchId:l,changes:DF(f)})))})}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new J(i)).next(n=>{let r=Qh();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(t,i,n,r){let o=i.collectionGroup,s=Qh();return this.indexManager.getCollectionParents(t,o).next(l=>k.forEach(l,d=>{let u=function(p,_){return new yr(_,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(i,d.child(o));return this.getDocumentsMatchingCollectionQuery(t,u,n,r).next(f=>{f.forEach((p,_)=>{s=s.insert(p,_)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,i,n,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,n.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,n,o,r))).next(s=>{o.forEach((d,u)=>{let f=u.getKey();s.get(f)===null&&(s=s.insert(f,vn.newInvalidDocument(f)))});let l=Qh();return s.forEach((d,u)=>{let f=o.get(d);f!==void 0&&tf(f.mutation,u,Pi.empty(),Qe.now()),Df(i,u)&&(l=l.insert(d,u))}),l})}};var hE=class{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,i){return k.resolve(this.cr.get(i))}saveBundleMetadata(t,i){return this.cr.set(i.id,function(r){return{id:r.id,version:r.version,createTime:cn(r.createTime)}}(i)),k.resolve()}getNamedQuery(t,i){return k.resolve(this.lr.get(i))}saveNamedQuery(t,i){return this.lr.set(i.name,function(r){return{name:r.name,query:yC(r.bundledQuery),readTime:cn(r.readTime)}}(i)),k.resolve()}};var fE=class{constructor(){this.overlays=new Be(J.comparator),this.hr=new Map}getOverlay(t,i){return k.resolve(this.overlays.get(i))}getOverlays(t,i){let n=Kr();return k.forEach(i,r=>this.getOverlay(t,r).next(o=>{o!==null&&n.set(r,o)})).next(()=>n)}saveOverlays(t,i,n){return n.forEach((r,o)=>{this.ht(t,i,o)}),k.resolve()}removeOverlaysForBatchId(t,i,n){let r=this.hr.get(n);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(n)),k.resolve()}getOverlaysForCollection(t,i,n){let r=Kr(),o=i.length+1,s=new J(i.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){let d=l.getNext().value,u=d.getKey();if(!i.isPrefixOf(u.path))break;u.path.length===o&&d.largestBatchId>n&&r.set(d.getKey(),d)}return k.resolve(r)}getOverlaysForCollectionGroup(t,i,n,r){let o=new Be((u,f)=>u-f),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===i&&u.largestBatchId>n){let f=o.get(u.largestBatchId);f===null&&(f=Kr(),o=o.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}let l=Kr(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((u,f)=>l.set(u,f)),!(l.size()>=r)););return k.resolve(l)}ht(t,i,n){let r=this.overlays.get(n.key);if(r!==null){let s=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new hf(i,n));let o=this.hr.get(i);o===void 0&&(o=jt(),this.hr.set(i,o)),this.hr.set(i,o.add(n.key))}};var vf=class{constructor(){this.Pr=new Se(pn.Ir),this.Tr=new Se(pn.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,i){let n=new pn(t,i);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,i){t.forEach(n=>this.addReference(n,i))}removeReference(t,i){this.Ar(new pn(t,i))}Rr(t,i){t.forEach(n=>this.removeReference(n,i))}Vr(t){let i=new J(new ae([])),n=new pn(i,t),r=new pn(i,t+1),o=[];return this.Tr.forEachInRange([n,r],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){let i=new J(new ae([])),n=new pn(i,t),r=new pn(i,t+1),o=jt();return this.Tr.forEachInRange([n,r],s=>{o=o.add(s.key)}),o}containsKey(t){let i=new pn(t,0),n=this.Pr.firstAfterOrEqual(i);return n!==null&&t.isEqual(n.key)}},pn=class{constructor(t,i){this.key=t,this.pr=i}static Ir(t,i){return J.comparator(t.key,i.key)||Vt(t.pr,i.pr)}static Er(t,i){return Vt(t.pr,i.pr)||J.comparator(t.key,i.key)}};var mE=class{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.yr=1,this.wr=new Se(pn.Ir)}checkEmpty(t){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,n,r){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new uf(o,i,n,r);this.mutationQueue.push(s);for(let l of r)this.wr=this.wr.add(new pn(l.key,o)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return k.resolve(s)}lookupMutationBatch(t,i){return k.resolve(this.Sr(i))}getNextMutationBatchAfterBatchId(t,i){let n=i+1,r=this.br(n),o=r<0?0:r;return k.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){let n=new pn(i,0),r=new pn(i,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([n,r],s=>{let l=this.Sr(s.pr);o.push(l)}),k.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,i){let n=new Se(Vt);return i.forEach(r=>{let o=new pn(r,0),s=new pn(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],l=>{n=n.add(l.pr)})}),k.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,i){let n=i.path,r=n.length+1,o=n;J.isDocumentKey(o)||(o=o.child(""));let s=new pn(new J(o),0),l=new Se(Vt);return this.wr.forEachWhile(d=>{let u=d.key.path;return!!n.isPrefixOf(u)&&(u.length===r&&(l=l.add(d.pr)),!0)},s),k.resolve(this.Dr(l))}Dr(t){let i=[];return t.forEach(n=>{let r=this.Sr(n);r!==null&&i.push(r)}),i}removeMutationBatch(t,i){_t(this.Cr(i.batchId,"removed")===0),this.mutationQueue.shift();let n=this.wr;return k.forEach(i.mutations,r=>{let o=new pn(r.key,i.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.wr=n})}Mn(t){}containsKey(t,i){let n=new pn(i,0),r=this.wr.firstAfterOrEqual(n);return k.resolve(i.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,k.resolve()}Cr(t,i){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){let i=this.br(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}};var pE=class{constructor(t){this.vr=t,this.docs=function(){return new Be(J.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){let n=i.key,r=this.docs.get(n),o=r?r.size:0,s=this.vr(i);return this.docs=this.docs.insert(n,{document:i.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){let i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){let n=this.docs.get(i);return k.resolve(n?n.document.mutableCopy():vn.newInvalidDocument(i))}getEntries(t,i){let n=vi();return i.forEach(r=>{let o=this.docs.get(r);n=n.insert(r,o?o.document.mutableCopy():vn.newInvalidDocument(r))}),k.resolve(n)}getDocumentsMatchingQuery(t,i,n,r){let o=vi(),s=i.path,l=new J(s.child("")),d=this.docs.getIteratorFrom(l);for(;d.hasNext();){let{key:u,value:{document:f}}=d.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||fC(aF(f),n)<=0||(r.has(f.key)||Df(i,f))&&(o=o.insert(f.key,f.mutableCopy()))}return k.resolve(o)}getAllFromCollectionGroup(t,i,n,r){lt()}Fr(t,i){return k.forEach(this.docs,n=>i(n))}newChangeBuffer(t){return new gE(this)}getSize(t){return k.resolve(this.size)}},gE=class extends V_{constructor(t){super(),this.ar=t}applyChanges(t){let i=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?i.push(this.ar.addEntry(t,r)):this.ar.removeEntry(n)}),k.waitFor(i)}getFromCache(t,i){return this.ar.getEntry(t,i)}getAllFromCache(t,i){return this.ar.getEntries(t,i)}};var _E=class{constructor(t){this.persistence=t,this.Mr=new to(i=>za(i),Sf),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.Or=0,this.Nr=new vf,this.targetCount=0,this.Lr=qc.Nn()}forEachTarget(t,i){return this.Mr.forEach((n,r)=>i(r)),k.resolve()}getLastRemoteSnapshotVersion(t){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return k.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(t,i,n){return n&&(this.lastRemoteSnapshotVersion=n),i>this.Or&&(this.Or=i),k.resolve()}qn(t){this.Mr.set(t.target,t);let i=t.targetId;i>this.highestTargetId&&(this.Lr=new qc(i),this.highestTargetId=i),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,i){return this.qn(i),this.targetCount+=1,k.resolve()}updateTargetData(t,i){return this.qn(i),k.resolve()}removeTargetData(t,i){return this.Mr.delete(i.target),this.Nr.Vr(i.targetId),this.targetCount-=1,k.resolve()}removeTargets(t,i,n){let r=0,o=[];return this.Mr.forEach((s,l)=>{l.sequenceNumber<=i&&n.get(l.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),k.waitFor(o).next(()=>r)}getTargetCount(t){return k.resolve(this.targetCount)}getTargetData(t,i){let n=this.Mr.get(i)||null;return k.resolve(n)}addMatchingKeys(t,i,n){return this.Nr.dr(i,n),k.resolve()}removeMatchingKeys(t,i,n){this.Nr.Rr(i,n);let r=this.persistence.referenceDelegate,o=[];return r&&i.forEach(s=>{o.push(r.markPotentiallyOrphaned(t,s))}),k.waitFor(o)}removeMatchingKeysForTargetId(t,i){return this.Nr.Vr(i),k.resolve()}getMatchingKeysForTargetId(t,i){let n=this.Nr.gr(i);return k.resolve(n)}containsKey(t,i){return k.resolve(this.Nr.containsKey(i))}};var j_=class{constructor(t,i){this.Br={},this.overlays={},this.kr=new Mi(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new _E(this),this.indexManager=new nE,this.remoteDocumentCache=function(r){return new pE(r)}(n=>this.referenceDelegate.Kr(n)),this.serializer=new k_(i),this.$r=new hE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new fE,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let n=this.Br[t.toKey()];return n||(n=new mE(i,this.referenceDelegate),this.Br[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,i,n){$("MemoryPersistence","Starting transaction:",t);let r=new vE(this.kr.next());return this.referenceDelegate.Ur(),n(r).next(o=>this.referenceDelegate.Wr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Gr(t,i){return k.or(Object.values(this.Br).map(n=>()=>n.containsKey(t,i)))}},vE=class extends b_{constructor(t){super(),this.currentSequenceNumber=t}},U_=class e{constructor(t){this.persistence=t,this.zr=new vf,this.jr=null}static Hr(t){return new e(t)}get Jr(){if(this.jr)return this.jr;throw lt()}addReference(t,i,n){return this.zr.addReference(n,i),this.Jr.delete(n.toString()),k.resolve()}removeReference(t,i,n){return this.zr.removeReference(n,i),this.Jr.add(n.toString()),k.resolve()}markPotentiallyOrphaned(t,i){return this.Jr.add(i.toString()),k.resolve()}removeTarget(t,i){this.zr.Vr(i.targetId).forEach(r=>this.Jr.add(r.toString()));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,i.targetId).next(r=>{r.forEach(o=>this.Jr.add(o.toString()))}).next(()=>n.removeTargetData(t,i))}Ur(){this.jr=new Set}Wr(t){let i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Jr,n=>{let r=J.fromPath(n);return this.Yr(t,r).next(o=>{o||i.removeEntry(r,yt.min())})}).next(()=>(this.jr=null,i.apply(t)))}updateLimboDocument(t,i){return this.Yr(t,i).next(n=>{n?this.Jr.delete(i.toString()):this.Jr.add(i.toString())})}Kr(t){return 0}Yr(t,i){return k.or([()=>k.resolve(this.zr.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Gr(t,i)])}};var bE=class{constructor(t){this.serializer=t}N(t,i,n,r){let o=new y_("createOrUpgrade",i);n<1&&r>=1&&(function(d){d.createObjectStore("owner")}(t),function(d){d.createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aN,{unique:!0}),d.createObjectStore("documentMutations")}(t),WN(t),function(d){d.createObjectStore("remoteDocuments")}(t));let s=k.resolve();return n<3&&r>=3&&(n!==0&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(t),WN(t)),s=s.next(()=>function(d){let u=d.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yt.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",f)}(o))),n<4&&r>=4&&(n!==0&&(s=s.next(()=>function(d,u){return u.store("mutations").W().next(f=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aN,{unique:!0});let p=u.store("mutations"),_=f.map(y=>p.put(y));return k.waitFor(_)})}(t,o))),s=s.next(()=>{(function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})})(t)})),n<5&&r>=5&&(s=s.next(()=>this.Xr(o))),n<6&&r>=6&&(s=s.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(t),this.ei(o)))),n<7&&r>=7&&(s=s.next(()=>this.ti(o))),n<8&&r>=8&&(s=s.next(()=>this.ni(t,o))),n<9&&r>=9&&(s=s.next(()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(t)})),n<10&&r>=10&&(s=s.next(()=>this.ri(o))),n<11&&r>=11&&(s=s.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),n<12&&r>=12&&(s=s.next(()=>{(function(d){let u=d.createObjectStore("documentOverlays",{keyPath:J8});u.createIndex("collectionPathOverlayIndex",tK,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",eK,{unique:!1})})(t)})),n<13&&r>=13&&(s=s.next(()=>function(d){let u=d.createObjectStore("remoteDocumentsV14",{keyPath:z8});u.createIndex("documentKeyIndex",$8),u.createIndex("collectionGroupIndex",H8)}(t)).next(()=>this.ii(t,o)).next(()=>t.deleteObjectStore("remoteDocuments"))),n<14&&r>=14&&(s=s.next(()=>this.si(t,o))),n<15&&r>=15&&(s=s.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:Y8}).createIndex("sequenceNumberIndex",Q8,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:X8}).createIndex("documentKeyIndex",Z8,{unique:!1})}(t))),n<16&&r>=16&&(s=s.next(()=>{i.objectStore("indexState").clear()}).next(()=>{i.objectStore("indexEntries").clear()})),s}ei(t){let i=0;return t.store("remoteDocuments").Y((n,r)=>{i+=F_(r)}).next(()=>{let n={byteSize:i};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}Xr(t){let i=t.store("mutationQueues"),n=t.store("mutations");return i.W().next(r=>k.forEach(r,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",s).next(l=>k.forEach(l,d=>{_t(d.userId===o.userId);let u=Oa(this.serializer,d);return rL(t,o.userId,u).next(()=>{})}))}))}ti(t){let i=t.store("targetDocuments"),n=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{let o=[];return n.Y((s,l)=>{let d=new ae(s),u=function(p){return[0,li(p)]}(d);o.push(i.get(u).next(f=>f?k.resolve():(p=>i.put({targetId:0,path:li(p),sequenceNumber:r.highestListenSequenceNumber}))(d)))}).next(()=>k.waitFor(o))})}ni(t,i){t.createObjectStore("collectionParents",{keyPath:K8});let n=i.store("collectionParents"),r=new _f,o=s=>{if(r.add(s)){let l=s.lastSegment(),d=s.popLast();return n.put({collectionId:l,parent:li(d)})}};return i.store("remoteDocuments").Y({J:!0},(s,l)=>{let d=new ae(s);return o(d.popLast())}).next(()=>i.store("documentMutations").Y({J:!0},([s,l,d],u)=>{let f=Gr(l);return o(f.popLast())}))}ri(t){let i=t.store("targets");return i.Y((n,r)=>{let o=Xh(r),s=eL(this.serializer,o);return i.put(s)})}ii(t,i){let n=i.store("remoteDocuments"),r=[];return n.Y((o,s)=>{let l=i.store("remoteDocumentsV14"),d=function(p){return p.document?new J(ae.fromString(p.document.name).popFirst(5)):p.noDocument?J.fromSegments(p.noDocument.path):p.unknownDocument?J.fromSegments(p.unknownDocument.path):lt()}(s).path.toArray(),u={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};r.push(l.put(u))}).next(()=>k.waitFor(r))}si(t,i){let n=i.store("mutations"),r=aL(this.serializer),o=new j_(U_.Hr,this.serializer.ct);return n.W().next(s=>{let l=new Map;return s.forEach(d=>{var u;let f=(u=l.get(d.userId))!==null&&u!==void 0?u:jt();Oa(this.serializer,d).keys().forEach(p=>f=f.add(p)),l.set(d.userId,f)}),k.forEach(l,(d,u)=>{let f=new gn(u),p=P_.lt(this.serializer,f),_=o.getIndexManager(f),y=L_.lt(f,this.serializer,_,o.referenceDelegate);return new B_(r,y,p,_).recalculateAndSaveOverlaysForDocumentKeys(new sf(i,Mi._e),d).next()})})}};function WN(e){e.createObjectStore("targetDocuments",{keyPath:q8}).createIndex("documentTargetsIndex",G8,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",W8,{unique:!0}),e.createObjectStore("targetGlobal")}var dI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",yE=class e{constructor(t,i,n,r,o,s,l,d,u,f,p=16){if(this.allowTabSynchronization=t,this.persistenceKey=i,this.clientId=n,this.oi=o,this.window=s,this.document=l,this._i=u,this.ai=f,this.ui=p,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=_=>Promise.resolve(),!e.D())throw new U(O.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lE(this,r),this.Ti=i+"main",this.serializer=new k_(d),this.Ei=new Po(this.Ti,this.ui,new bE(this.serializer)),this.Qr=new rE(this.referenceDelegate,this.serializer),this.remoteDocumentCache=aL(this.serializer),this.$r=new YI,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,f===!1&&an("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new U(O.FAILED_PRECONDITION,dI);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Qr.getHighestSequenceNumber(t))}).then(t=>{this.kr=new Mi(t,this._i)}).then(()=>{this.qr=!0}).catch(t=>(this.Ei&&this.Ei.close(),Promise.reject(t)))}fi(t){return this.Ii=i=>N(this,null,function*(){if(this.started)return t(i)}),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ei.B(i=>N(this,null,function*(){i.newVersion===null&&(yield t())}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.oi.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>l_(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(t).next(i=>{i||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(t)).next(i=>this.isPrimary&&!i?this.yi(t).next(()=>!1):!!i&&this.wi(t).next(()=>!0))).catch(t=>{if(Bs(t))return $("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return $("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.oi.enqueueRetryable(()=>this.Ii(t)),this.isPrimary=t})}gi(t){return Yh(t).get("owner").next(i=>k.resolve(this.Si(i)))}bi(t){return l_(t).delete(this.clientId)}Di(){return N(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let t=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{let n=Nn(i,"clientMetadata");return n.W().next(r=>{let o=this.vi(r,18e5),s=r.filter(l=>o.indexOf(l)===-1);return k.forEach(s,l=>n.delete(l.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let i of t)this.di.removeItem(this.Fi(i.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(t){return!!t&&t.ownerId===this.clientId}pi(t){return this.ai?k.resolve(!0):Yh(t).get("owner").next(i=>{if(i!==null&&this.Ci(i.leaseTimestampMs,5e3)&&!this.Mi(i.ownerId)){if(this.Si(i)&&this.networkEnabled)return!0;if(!this.Si(i)){if(!i.allowTabSynchronization)throw new U(O.FAILED_PRECONDITION,dI);return!1}}return!(!this.networkEnabled||!this.inForeground)||l_(t).W().next(n=>this.vi(n,5e3).find(r=>{if(this.clientId!==r.clientId){let o=!this.networkEnabled&&r.networkEnabled,s=!this.inForeground&&r.inForeground,l=this.networkEnabled===r.networkEnabled;if(o||s&&l)return!0}return!1})===void 0)}).next(i=>(this.isPrimary!==i&&$("IndexedDbPersistence",`Client ${i?"is":"is not"} eligible for a primary lease.`),i))}shutdown(){return N(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{let i=new sf(t,Mi._e);return this.yi(i).next(()=>this.bi(i))}),this.Ei.close(),this.Li()})}vi(t,i){return t.filter(n=>this.Ci(n.updateTimeMs,i)&&!this.Mi(n.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",t=>l_(t).W().next(i=>this.vi(i,18e5).map(n=>n.clientId)))}get started(){return this.qr}getMutationQueue(t,i){return L_.lt(t,this.serializer,i,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new iE(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return P_.lt(this.serializer,t)}getBundleCache(){return this.$r}runTransaction(t,i,n){$("IndexedDbPersistence","Starting transaction:",t);let r=i==="readonly"?"readonly":"readwrite",o=function(d){return d===16?iK:d===15?mF:d===14?fF:d===13?hF:d===12?nK:d===11?uF:void lt()}(this.ui),s;return this.Ei.runTransaction(t,r,o,l=>(s=new sf(l,this.kr?this.kr.next():Mi._e),i==="readwrite-primary"?this.gi(s).next(d=>!!d||this.pi(s)).next(d=>{if(!d)throw an(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new U(O.FAILED_PRECONDITION,lF);return n(s)}).next(d=>this.wi(s).next(()=>d)):this.ki(s).next(()=>n(s)))).then(l=>(s.raiseOnCommittedEvent(),l))}ki(t){return Yh(t).get("owner").next(i=>{if(i!==null&&this.Ci(i.leaseTimestampMs,5e3)&&!this.Mi(i.ownerId)&&!this.Si(i)&&!(this.ai||this.allowTabSynchronization&&i.allowTabSynchronization))throw new U(O.FAILED_PRECONDITION,dI)})}wi(t){let i={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yh(t).put("owner",i)}static D(){return Po.D()}yi(t){let i=Yh(t);return i.get("owner").next(n=>this.Si(n)?($("IndexedDbPersistence","Releasing primary lease."),i.delete("owner")):k.resolve())}Ci(t,i){let n=Date.now();return!(t<n-i)&&(!(t>n)||(an(`Detected an update time that is in the future: ${t} > ${n}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.ci=()=>{this.xi();let i=/(?:Version|Mobile)\/1[456]/;z0()&&(navigator.appVersion.match(i)||navigator.userAgent.match(i))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(t){var i;try{let n=((i=this.di)===null||i===void 0?void 0:i.getItem(this.Fi(t)))!==null;return $("IndexedDbPersistence",`Client '${t}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return an("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(t){an("Failed to set zombie client id.",t)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}};function Yh(e){return Nn(e,"owner")}function l_(e){return Nn(e,"clientMetadata")}function xC(e,t){let i=e.projectId;return e.isDefaultDatabase||(i+="."+e.database),"firestore/"+t+"/"+i+"/"}var wE=class e{constructor(t,i,n,r){this.targetId=t,this.fromCache=i,this.qi=n,this.Qi=r}static Ki(t,i){let n=jt(),r=jt();for(let o of i.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new e(t,i.fromCache,n,r)}};var xE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var z_=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return z0()?8:Po.v(Fu())>0?6:4}()}initialize(t,i){this.zi=t,this.indexManager=i,this.$i=!0}getDocumentsMatchingQuery(t,i,n,r){let o={result:null};return this.ji(t,i).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(t,i,r,n).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new xE;return this.Ji(t,i,s).next(l=>{if(o.result=l,this.Ui)return this.Yi(t,i,s,l.size)})}).next(()=>o.result)}Yi(t,i,n,r){return n.documentReadCount<this.Wi?(Dc()<=Yi.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",Rc(i),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),k.resolve()):(Dc()<=Yi.DEBUG&&$("QueryEngine","Query:",Rc(i),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Dc()<=Yi.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",Rc(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ci(i))):k.resolve())}ji(t,i){if(vN(i))return k.resolve(null);let n=ci(i);return this.indexManager.getIndexType(t,n).next(r=>r===0?null:(i.limit!==null&&r===1&&(i=S_(i,null,"F"),n=ci(i)),this.indexManager.getDocumentsMatchingTarget(t,n).next(o=>{let s=jt(...o);return this.zi.getDocuments(t,s).next(l=>this.indexManager.getMinOffset(t,n).next(d=>{let u=this.Zi(i,l);return this.Xi(i,u,s,d.readTime)?this.ji(t,S_(i,null,"F")):this.es(t,u,i,d)}))})))}Hi(t,i,n,r){return vN(i)||r.isEqual(yt.min())?k.resolve(null):this.zi.getDocuments(t,n).next(o=>{let s=this.Zi(i,o);return this.Xi(i,s,n,r)?k.resolve(null):(Dc()<=Yi.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Rc(i)),this.es(t,s,i,sF(r,-1)).next(l=>l))})}Zi(t,i){let n=new Se(SF(t));return i.forEach((r,o)=>{Df(t,o)&&(n=n.add(o))}),n}Xi(t,i,n,r){if(t.limit===null)return!1;if(n.size!==i.size)return!0;let o=t.limitType==="F"?i.last():i.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ji(t,i,n){return Dc()<=Yi.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",Rc(i)),this.zi.getDocumentsMatchingQuery(t,i,er.min(),n)}es(t,i,n,r){return this.zi.getDocumentsMatchingQuery(t,n,r).next(o=>(i.forEach(s=>{o=o.insert(s.key,s)}),o))}};var IE=class{constructor(t,i,n,r){this.persistence=t,this.ts=i,this.serializer=r,this.ns=new Be(Vt),this.rs=new to(o=>za(o),Sf),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new B_(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>t.collect(i,this.ns))}};function lL(e,t,i,n){return new IE(e,t,i,n)}function cL(e,t){return N(this,null,function*(){let i=et(e);return yield i.persistence.runTransaction("Handle user change","readonly",n=>{let r;return i.mutationQueue.getAllMutationBatches(n).next(o=>(r=o,i._s(t),i.mutationQueue.getAllMutationBatches(n))).next(o=>{let s=[],l=[],d=jt();for(let u of r){s.push(u.batchId);for(let f of u.mutations)d=d.add(f.key)}for(let u of o){l.push(u.batchId);for(let f of u.mutations)d=d.add(f.key)}return i.localDocuments.getDocuments(n,d).next(u=>({us:u,removedBatchIds:s,addedBatchIds:l}))})})})}function FK(e,t){let i=et(e);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{let r=t.batch.keys(),o=i.os.newChangeBuffer({trackRemovals:!0});return function(l,d,u,f){let p=u.batch,_=p.keys(),y=k.resolve();return _.forEach(S=>{y=y.next(()=>f.getEntry(d,S)).next(A=>{let M=u.docVersions.get(S);_t(M!==null),A.version.compareTo(M)<0&&(p.applyToRemoteDocument(A,u),A.isValidDocument()&&(A.setReadTime(u.commitVersion),f.addEntry(A)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(d,p))}(i,n,t,o).next(()=>o.apply(n)).next(()=>i.mutationQueue.performConsistencyCheck(n)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(n,r,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let d=jt();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(d=d.add(l.batch.mutations[u].key));return d}(t))).next(()=>i.localDocuments.getDocuments(n,r))})}function dL(e){let t=et(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",i=>t.Qr.getLastRemoteSnapshotVersion(i))}function LK(e,t){let i=et(e),n=t.snapshotVersion,r=i.ns;return i.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=i.os.newChangeBuffer({trackRemovals:!0});r=i.ns;let l=[];t.targetChanges.forEach((f,p)=>{let _=r.get(p);if(!_)return;l.push(i.Qr.removeMatchingKeys(o,f.removedDocuments,p).next(()=>i.Qr.addMatchingKeys(o,f.addedDocuments,p)));let y=_.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(p)!==null?y=y.withResumeToken(On.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,n)),r=r.insert(p,y),function(A,M,K){return A.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0}(_,y,f)&&l.push(i.Qr.updateTargetData(o,y))});let d=vi(),u=jt();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&l.push(i.persistence.referenceDelegate.updateLimboDocument(o,f))}),l.push(uL(o,s,t.documentUpdates).next(f=>{d=f.cs,u=f.ls})),!n.isEqual(yt.min())){let f=i.Qr.getLastRemoteSnapshotVersion(o).next(p=>i.Qr.setTargetsMetadata(o,o.currentSequenceNumber,n));l.push(f)}return k.waitFor(l).next(()=>s.apply(o)).next(()=>i.localDocuments.getLocalViewOfDocuments(o,d,u)).next(()=>d)}).then(o=>(i.ns=r,o))}function uL(e,t,i){let n=jt(),r=jt();return i.forEach(o=>n=n.add(o)),t.getEntries(e,n).next(o=>{let s=vi();return i.forEach((l,d)=>{let u=o.get(l);d.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(l)),d.isNoDocument()&&d.version.isEqual(yt.min())?(t.removeEntry(l,d.readTime),s=s.insert(l,d)):!u.isValidDocument()||d.version.compareTo(u.version)>0||d.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(d),s=s.insert(l,d)):$("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",d.version)}),{cs:s,ls:r}})}function VK(e,t){let i=et(e);return i.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=-1),i.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function Gc(e,t){let i=et(e);return i.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return i.Qr.getTargetData(n,t).next(o=>o?(r=o,k.resolve(r)):i.Qr.allocateTargetId(n).next(s=>(r=new Wc(t,s,"TargetPurposeListen",n.currentSequenceNumber),i.Qr.addTargetData(n,r).next(()=>r))))}).then(n=>{let r=i.ns.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(i.ns=i.ns.insert(n.targetId,n),i.rs.set(t,n.targetId)),n})}function Kc(e,t,i){return N(this,null,function*(){let n=et(e),r=n.ns.get(t),o=i?"readwrite":"readwrite-primary";try{i||(yield n.persistence.runTransaction("Release target",o,s=>n.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!Bs(s))throw s;$("LocalStore",`Failed to update sequence numbers for target ${t}: ${s}`)}n.ns=n.ns.remove(t),n.rs.delete(r.target)})}function $_(e,t,i){let n=et(e),r=yt.min(),o=jt();return n.persistence.runTransaction("Execute query","readwrite",s=>function(d,u,f){let p=et(d),_=p.rs.get(f);return _!==void 0?k.resolve(p.ns.get(_)):p.Qr.getTargetData(u,f)}(n,s,ci(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,n.Qr.getMatchingKeysForTargetId(s,l.targetId).next(d=>{o=d})}).next(()=>n.ts.getDocumentsMatchingQuery(s,t,i?r:yt.min(),i?o:jt())).next(l=>(mL(n,TF(t),l),{documents:l,hs:o})))}function hL(e,t){let i=et(e),n=et(i.Qr),r=i.ns.get(t);return r?Promise.resolve(r.target):i.persistence.runTransaction("Get target data","readonly",o=>n._t(o,t).next(s=>s?s.target:null))}function fL(e,t){let i=et(e),n=i.ss.get(t)||yt.min();return i.persistence.runTransaction("Get new document changes","readonly",r=>i.os.getAllFromCollectionGroup(r,t,sF(n,-1),Number.MAX_SAFE_INTEGER)).then(r=>(mL(i,t,r),r))}function mL(e,t,i){let n=e.ss.get(t)||yt.min();i.forEach((r,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)}),e.ss.set(t,n)}function BK(e,t,i,n){return N(this,null,function*(){let r=et(e),o=jt(),s=vi();for(let u of i){let f=t.Ps(u.metadata.name);u.document&&(o=o.add(f));let p=t.Is(u);p.setReadTime(t.Ts(u.metadata.readTime)),s=s.insert(f,p)}let l=r.os.newChangeBuffer({trackRemovals:!0}),d=yield Gc(r,function(f){return ci(nd(ae.fromString(`__bundle__/docs/${f}`)))}(n));return r.persistence.runTransaction("Apply bundle documents","readwrite",u=>uL(u,l,s).next(f=>(l.apply(u),f)).next(f=>r.Qr.removeMatchingKeysForTargetId(u,d.targetId).next(()=>r.Qr.addMatchingKeys(u,o,d.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(u,f.cs,f.ls)).next(()=>f.cs)))})}function jK(n,r){return N(this,arguments,function*(e,t,i=jt()){let o=yield Gc(e,ci(yC(t.bundledQuery))),s=et(e);return s.persistence.runTransaction("Save named query","readwrite",l=>{let d=cn(t.readTime);if(o.snapshotVersion.compareTo(d)>=0)return s.$r.saveNamedQuery(l,t);let u=o.withResumeToken(On.EMPTY_BYTE_STRING,d);return s.ns=s.ns.insert(u.targetId,u),s.Qr.updateTargetData(l,u).next(()=>s.Qr.removeMatchingKeysForTargetId(l,o.targetId)).next(()=>s.Qr.addMatchingKeys(l,i,o.targetId)).next(()=>s.$r.saveNamedQuery(l,t))})})}function qN(e,t){return`firestore_clients_${e}_${t}`}function GN(e,t,i){let n=`firestore_mutations_${e}_${i}`;return t.isAuthenticated()&&(n+=`_${t.uid}`),n}function uI(e,t){return`firestore_targets_${e}_${t}`}var H_=class e{constructor(t,i,n,r){this.user=t,this.batchId=i,this.state=n,this.error=r}static Es(t,i,n){let r=JSON.parse(n),o,s=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(o=new U(r.error.code,r.error.message))),s?new e(t,i,r.state,o):(an("SharedClientState",`Failed to parse mutation state for ID '${i}': ${n}`),null)}ds(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}},ef=class e{constructor(t,i,n){this.targetId=t,this.state=i,this.error=n}static Es(t,i){let n=JSON.parse(i),r,o=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return o&&n.error&&(o=typeof n.error.message=="string"&&typeof n.error.code=="string",o&&(r=new U(n.error.code,n.error.message))),o?new e(t,n.state,r):(an("SharedClientState",`Failed to parse target state for ID '${t}': ${i}`),null)}ds(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}},W_=class e{constructor(t,i){this.clientId=t,this.activeTargetIds=i}static Es(t,i){let n=JSON.parse(i),r=typeof n=="object"&&n.activeTargetIds instanceof Array,o=vC();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=cF(n.activeTargetIds[s]),o=o.add(n.activeTargetIds[s]);return r?new e(t,o):(an("SharedClientState",`Failed to parse client data for instance '${t}': ${i}`),null)}},EE=class e{constructor(t,i){this.clientId=t,this.onlineState=i}static Es(t){let i=JSON.parse(t);return typeof i=="object"&&["Unknown","Online","Offline"].indexOf(i.onlineState)!==-1&&typeof i.clientId=="string"?new e(i.clientId,i.onlineState):(an("SharedClientState",`Failed to parse online state: ${t}`),null)}},bf=class{constructor(){this.activeTargetIds=vC()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}},nf=class{constructor(t,i,n,r,o){this.window=t,this.oi=i,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Be(Vt),this.started=!1,this.ys=[];let s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=qN(this.persistenceKey,this.Vs),this.Ss=function(d){return`firestore_sequence_number_${d}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new bf),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(d){return`firestore_online_state_${d}`}(this.persistenceKey),this.Fs=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(t){return!(!t||!t.localStorage)}start(){return N(this,null,function*(){let t=yield this.syncEngine.Bi();for(let n of t){if(n===this.Vs)continue;let r=this.getItem(qN(this.persistenceKey,n));if(r){let o=W_.Es(n,r);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let i=this.storage.getItem(this.vs);if(i){let n=this.xs(i);n&&this.Os(n)}for(let n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(t){this.setItem(this.Ss,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(t){let i=!1;return this.ps.forEach((n,r)=>{r.activeTargetIds.has(t)&&(i=!0)}),i}addPendingMutation(t){this.Ls(t,"pending")}updateMutationState(t,i,n){this.Ls(t,i,n),this.Bs(t)}addLocalQueryTarget(t){let i="not-current";if(this.isActiveQueryTarget(t)){let n=this.storage.getItem(uI(this.persistenceKey,t));if(n){let r=ef.Es(t,n);r&&(i=r.state)}}return this.ks.As(t),this.Ms(),i}removeLocalQueryTarget(t){this.ks.Rs(t),this.Ms()}isLocalQueryTarget(t){return this.ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(uI(this.persistenceKey,t))}updateQueryState(t,i,n){this.qs(t,i,n)}handleUserChange(t,i,n){i.forEach(r=>{this.Bs(r)}),this.currentUser=t,n.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Qs(t)}notifyBundleLoaded(t){this.Ks(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(t){let i=this.storage.getItem(t);return $("SharedClientState","READ",t,i),i}setItem(t,i){$("SharedClientState","SET",t,i),this.storage.setItem(t,i)}removeItem(t){$("SharedClientState","REMOVE",t),this.storage.removeItem(t)}gs(t){let i=t;if(i.storageArea===this.storage){if($("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ws)return void an("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(i.key!==null){if(this.bs.test(i.key)){if(i.newValue==null){let n=this.$s(i.key);return this.Us(n,null)}{let n=this.Ws(i.key,i.newValue);if(n)return this.Us(n.clientId,n)}}else if(this.Ds.test(i.key)){if(i.newValue!==null){let n=this.Gs(i.key,i.newValue);if(n)return this.zs(n)}}else if(this.Cs.test(i.key)){if(i.newValue!==null){let n=this.js(i.key,i.newValue);if(n)return this.Hs(n)}}else if(i.key===this.vs){if(i.newValue!==null){let n=this.xs(i.newValue);if(n)return this.Os(n)}}else if(i.key===this.Ss){let n=function(o){let s=Mi._e;if(o!=null)try{let l=JSON.parse(o);_t(typeof l=="number"),s=l}catch(l){an("SharedClientState","Failed to read sequence number from WebStorage",l)}return s}(i.newValue);n!==Mi._e&&this.sequenceNumberHandler(n)}else if(i.key===this.Fs){let n=this.Js(i.newValue);yield Promise.all(n.map(r=>this.syncEngine.Ys(r)))}}}else this.ys.push(i)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(t,i,n){let r=new H_(this.currentUser,t,i,n),o=GN(this.persistenceKey,this.currentUser,t);this.setItem(o,r.ds())}Bs(t){let i=GN(this.persistenceKey,this.currentUser,t);this.removeItem(i)}Qs(t){let i={clientId:this.Vs,onlineState:t};this.storage.setItem(this.vs,JSON.stringify(i))}qs(t,i,n){let r=uI(this.persistenceKey,t),o=new ef(t,i,n);this.setItem(r,o.ds())}Ks(t){let i=JSON.stringify(Array.from(t));this.setItem(this.Fs,i)}$s(t){let i=this.bs.exec(t);return i?i[1]:null}Ws(t,i){let n=this.$s(t);return W_.Es(n,i)}Gs(t,i){let n=this.Ds.exec(t),r=Number(n[1]),o=n[2]!==void 0?n[2]:null;return H_.Es(new gn(o),r,i)}js(t,i){let n=this.Cs.exec(t),r=Number(n[1]);return ef.Es(r,i)}xs(t){return EE.Es(t)}Js(t){return JSON.parse(t)}zs(t){return N(this,null,function*(){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Zs(t.batchId,t.state,t.error);$("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})}Hs(t){return this.syncEngine.Xs(t.targetId,t.state,t.error)}Us(t,i){let n=i?this.ps.insert(t,i):this.ps.remove(t),r=this.Ns(this.ps),o=this.Ns(n),s=[],l=[];return o.forEach(d=>{r.has(d)||s.push(d)}),r.forEach(d=>{o.has(d)||l.push(d)}),this.syncEngine.eo(s,l).then(()=>{this.ps=n})}Os(t){this.ps.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ns(t){let i=vC();return t.forEach((n,r)=>{i=i.unionWith(r.activeTargetIds)}),i}},q_=class{constructor(){this.no=new bf,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,i,n){this.ro[t]=i}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new bf,Promise.resolve()}handleUserChange(t,i,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var CE=class{io(t){}shutdown(){}};var G_=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){$("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.uo)t(0)}ao(){$("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var c_=null;function hI(){return c_===null?c_=function(){return 268435456+Math.round(2147483648*Math.random())}():c_++,"0x"+c_.toString(16)}var UK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var TE=class{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}};var Qn="WebChannelConnection",SE=class extends class{constructor(i){this.databaseInfo=i,this.databaseId=i.databaseId;let n=i.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=n+"://"+i.host,this.po=`projects/${r}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get wo(){return!1}So(i,n,r,o,s){let l=hI(),d=this.bo(i,n.toUriEncodedString());$("RestConnection",`Sending RPC '${i}' ${l}:`,d,r);let u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,o,s),this.Co(i,d,u,r).then(f=>($("RestConnection",`Received RPC '${i}' ${l}: `,f),f),f=>{throw tr("RestConnection",`RPC '${i}' ${l} failed with error: `,f,"url: ",d,"request:",r),f})}vo(i,n,r,o,s,l){return this.So(i,n,r,o,s)}Do(i,n,r){i["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ed}(),i["Content-Type"]="text/plain",this.databaseInfo.appId&&(i["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,s)=>i[s]=o),r&&r.headers.forEach((o,s)=>i[s]=o)}bo(i,n){let r=UK[i];return`${this.fo}/v1/${n}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,i,n,r){let o=hI();return new Promise((s,l)=>{let d=new nN;d.setWithCredentials(!0),d.listenOnce(tN.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case o_.NO_ERROR:let f=d.getResponseJson();$(Qn,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(f)),s(f);break;case o_.TIMEOUT:$(Qn,`RPC '${t}' ${o} timed out`),l(new U(O.DEADLINE_EXCEEDED,"Request time out"));break;case o_.HTTP_ERROR:let p=d.getStatus();if($(Qn,`RPC '${t}' ${o} failed with status:`,p,"response text:",d.getResponseText()),p>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);let y=_?.error;if(y&&y.status&&y.message){let S=function(M){let K=M.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(K)>=0?K:O.UNKNOWN}(y.status);l(new U(S,y.message))}else l(new U(O.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new U(O.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{$(Qn,`RPC '${t}' ${o} completed.`)}});let u=JSON.stringify(r);$(Qn,`RPC '${t}' ${o} sending request:`,r),d.send(i,"POST",u,n,15)})}Fo(t,i,n){let r=hI(),o=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=ZO(),l=JO(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(d.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Do(d.initMessageHeaders,i,n),d.encodeInitMessageHeaders=!0;let f=o.join("");$(Qn,`Creating RPC '${t}' stream ${r}: ${f}`,d);let p=s.createWebChannel(f,d),_=!1,y=!1,S=new TE({lo:M=>{y?$(Qn,`Not sending because RPC '${t}' stream ${r} is closed:`,M):(_||($(Qn,`Opening RPC '${t}' stream ${r} transport.`),p.open(),_=!0),$(Qn,`RPC '${t}' stream ${r} sending:`,M),p.send(M))},ho:()=>p.close()}),A=(M,K,ut)=>{M.listen(K,Y=>{try{ut(Y)}catch(Rt){setTimeout(()=>{throw Rt},0)}})};return A(p,Wh.EventType.OPEN,()=>{y||$(Qn,`RPC '${t}' stream ${r} transport opened.`)}),A(p,Wh.EventType.CLOSE,()=>{y||(y=!0,$(Qn,`RPC '${t}' stream ${r} transport closed`),S.Vo())}),A(p,Wh.EventType.ERROR,M=>{y||(y=!0,tr(Qn,`RPC '${t}' stream ${r} transport errored:`,M),S.Vo(new U(O.UNAVAILABLE,"The operation could not be completed")))}),A(p,Wh.EventType.MESSAGE,M=>{var K;if(!y){let ut=M.data[0];_t(!!ut);let Y=ut,Rt=Y.error||((K=Y[0])===null||K===void 0?void 0:K.error);if(Rt){$(Qn,`RPC '${t}' stream ${r} received error:`,Rt);let kt=Rt.status,Kt=function(ny){let bm=mn[ny];if(bm!==void 0)return UF(bm)}(kt),Ue=Rt.message;Kt===void 0&&(Kt=O.INTERNAL,Ue="Unknown error status: "+kt+" with message "+Rt.message),y=!0,S.Vo(new U(Kt,Ue)),p.close()}else $(Qn,`RPC '${t}' stream ${r} received:`,ut),S.mo(ut)}}),A(l,eN.STAT_EVENT,M=>{M.stat===lI.PROXY?$(Qn,`RPC '${t}' stream ${r} detected buffering proxy`):M.stat===lI.NOPROXY&&$(Qn,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{S.Ro()},0),S}};function pL(){return typeof window<"u"?window:null}function m_(){return typeof document<"u"?document:null}function Rf(e){return new HI(e,!0)}var yf=class{constructor(t,i,n=1e3,r=1.5,o=6e4){this.oi=t,this.timerId=i,this.Mo=n,this.xo=r,this.Oo=o,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();let i=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,i-n);r>0&&$("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.No} ms, delay with jitter: ${i} ms, last attempt: ${n} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Bo=Date.now(),t())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}};var K_=class{constructor(t,i,n,r,o,s,l,d){this.oi=t,this.$o=n,this.Uo=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=d,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new yf(t,i)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return N(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(t){this.n_(),this.stream.send(t)}e_(){return N(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(t,i){return N(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,t!==4?this.jo.reset():i&&i.code===O.RESOURCE_EXHAUSTED?(an(i.toString()),an("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):i&&i.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.To(i)})}i_(){}auth(){this.state=1;let t=this.s_(this.Wo),i=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.Wo===i&&this.o_(n,r)},n=>{t(()=>{let r=new U(O.UNKNOWN,"Fetching auth token failed: "+n.message);return this.__(r)})})}o_(t,i){let n=this.s_(this.Wo);this.stream=this.a_(t,i),this.stream.Po(()=>{n(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(r=>{n(()=>this.__(r))}),this.stream.onMessage(r=>{n(()=>this.onMessage(r))})}Yo(){this.state=5,this.jo.qo(()=>N(this,null,function*(){this.state=0,this.start()}))}__(t){return $("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return i=>{this.oi.enqueueAndForget(()=>this.Wo===t?i():($("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},AE=class extends K_{constructor(t,i,n,r,o,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,n,r,s),this.serializer=o}a_(t,i){return this.connection.Fo("Listen",t,i)}onMessage(t){this.jo.reset();let i=CK(this.serializer,t),n=function(o){if(!("targetChange"in o))return yt.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?yt.min():s.readTime?cn(s.readTime):yt.min()}(t);return this.listener.u_(i,n)}c_(t){let i={};i.database=GI(this.serializer),i.addTarget=function(o,s){let l,d=s.target;if(l=C_(d)?{documents:YF(o,d)}:{query:QF(o,d).ut},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=$F(o,s.resumeToken);let u=WI(o,s.expectedCount);u!==null&&(l.expectedCount=u)}else if(s.snapshotVersion.compareTo(yt.min())>0){l.readTime=Hc(o,s.snapshotVersion.toTimestamp());let u=WI(o,s.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,t);let n=SK(this.serializer,t);n&&(i.labels=n),this.t_(i)}l_(t){let i={};i.database=GI(this.serializer),i.removeTarget=t,this.t_(i)}},DE=class extends K_{constructor(t,i,n,r,o,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,n,r,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,i){return this.connection.Fo("Write",t,i)}onMessage(t){if(_t(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();let i=TK(t.writeResults,t.commitTime),n=cn(t.commitTime);return this.listener.T_(n,i)}return _t(!t.writeResults||t.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let t={};t.database=GI(this.serializer),this.t_(t)}I_(t){let i={streamToken:this.lastStreamToken,writes:t.map(n=>gf(this.serializer,n))};this.t_(i)}};var RE=class extends class{}{constructor(t,i,n,r){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new U(O.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,i,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(t,qI(i,n),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new U(O.UNKNOWN,o.toString())})}vo(t,i,n,r,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.vo(t,qI(i,n),r,s,l,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new U(O.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var kE=class{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(t){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,t==="Online"&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){let i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(an(i),this.g_=!1):$("OnlineStateTracker",i)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var ME=class{constructor(t,i,n,r,o){this.localStore=t,this.datastore=i,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(s=>{n.enqueueAndForget(()=>N(this,null,function*(){js(this)&&($("RemoteStore","Restarting streams for network reachability change."),yield function(d){return N(this,null,function*(){let u=et(d);u.v_.add(4),yield id(u),u.x_.set("Unknown"),u.v_.delete(4),yield kf(u)})}(this))}))}),this.x_=new kE(n,r)}};function kf(e){return N(this,null,function*(){if(js(e))for(let t of e.F_)yield t(!0)})}function id(e){return N(this,null,function*(){for(let t of e.F_)yield t(!1)})}function fv(e,t){let i=et(e);i.C_.has(t.targetId)||(i.C_.set(t.targetId,t),CC(i)?EC(i):od(i).Jo()&&IC(i,t))}function Yc(e,t){let i=et(e),n=od(i);i.C_.delete(t),n.Jo()&&gL(i,t),i.C_.size===0&&(n.Jo()?n.Xo():js(i)&&i.x_.set("Unknown"))}function IC(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(yt.min())>0){let i=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}od(e).c_(t)}function gL(e,t){e.O_.Oe(t),od(e).l_(t)}function EC(e){e.O_=new $I({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),od(e).start(),e.x_.p_()}function CC(e){return js(e)&&!od(e).Ho()&&e.C_.size>0}function js(e){return et(e).v_.size===0}function _L(e){e.O_=void 0}function zK(e){return N(this,null,function*(){e.C_.forEach((t,i)=>{IC(e,t)})})}function $K(e,t){return N(this,null,function*(){_L(e),CC(e)?(e.x_.S_(t),EC(e)):e.x_.set("Unknown")})}function HK(e,t,i){return N(this,null,function*(){if(e.x_.set("Online"),t instanceof D_&&t.state===2&&t.cause)try{yield function(r,o){return N(this,null,function*(){let s=o.cause;for(let l of o.targetIds)r.C_.has(l)&&(yield r.remoteSyncer.rejectListen(l,s),r.C_.delete(l),r.O_.removeTarget(l))})}(e,t)}catch(n){$("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),yield Y_(e,n)}else if(t instanceof Lc?e.O_.$e(t):t instanceof A_?e.O_.Je(t):e.O_.Ge(t),!i.isEqual(yt.min()))try{let n=yield dL(e.localStore);i.compareTo(n)>=0&&(yield function(o,s){let l=o.O_.it(s);return l.targetChanges.forEach((d,u)=>{if(d.resumeToken.approximateByteSize()>0){let f=o.C_.get(u);f&&o.C_.set(u,f.withResumeToken(d.resumeToken,s))}}),l.targetMismatches.forEach((d,u)=>{let f=o.C_.get(d);if(!f)return;o.C_.set(d,f.withResumeToken(On.EMPTY_BYTE_STRING,f.snapshotVersion)),gL(o,d);let p=new Wc(f.target,d,u,f.sequenceNumber);IC(o,p)}),o.remoteSyncer.applyRemoteEvent(l)}(e,i))}catch(n){$("RemoteStore","Failed to raise snapshot:",n),yield Y_(e,n)}})}function Y_(e,t,i){return N(this,null,function*(){if(!Bs(t))throw t;e.v_.add(1),yield id(e),e.x_.set("Offline"),i||(i=()=>dL(e.localStore)),e.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){$("RemoteStore","Retrying IndexedDB access"),yield i(),e.v_.delete(1),yield kf(e)}))})}function vL(e,t){return t().catch(i=>Y_(e,i,t))}function rd(e){return N(this,null,function*(){let t=et(e),i=Ls(t),n=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;WK(t);)try{let r=yield VK(t.localStore,n);if(r===null){t.D_.length===0&&i.Xo();break}n=r.batchId,qK(t,r)}catch(r){yield Y_(t,r)}bL(t)&&yL(t)})}function WK(e){return js(e)&&e.D_.length<10}function qK(e,t){e.D_.push(t);let i=Ls(e);i.Jo()&&i.P_&&i.I_(t.mutations)}function bL(e){return js(e)&&!Ls(e).Ho()&&e.D_.length>0}function yL(e){Ls(e).start()}function GK(e){return N(this,null,function*(){Ls(e).d_()})}function KK(e){return N(this,null,function*(){let t=Ls(e);for(let i of e.D_)t.I_(i.mutations)})}function YK(e,t,i){return N(this,null,function*(){let n=e.D_.shift(),r=jI.from(n,t,i);yield vL(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),yield rd(e)})}function QK(e,t){return N(this,null,function*(){t&&Ls(e).P_&&(yield function(n,r){return N(this,null,function*(){if(function(s){return jF(s)&&s!==O.ABORTED}(r.code)){let o=n.D_.shift();Ls(n).Zo(),yield vL(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield rd(n)}})}(e,t)),bL(e)&&yL(e)})}function KN(e,t){return N(this,null,function*(){let i=et(e);i.asyncQueue.verifyOperationInProgress(),$("RemoteStore","RemoteStore received new credentials");let n=js(i);i.v_.add(3),yield id(i),n&&i.x_.set("Unknown"),yield i.remoteSyncer.handleCredentialChange(t),i.v_.delete(3),yield kf(i)})}function PE(e,t){return N(this,null,function*(){let i=et(e);t?(i.v_.delete(2),yield kf(i)):t||(i.v_.add(2),yield id(i),i.x_.set("Unknown"))})}function od(e){return e.N_||(e.N_=function(i,n,r){let o=et(i);return o.R_(),new AE(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(e.datastore,e.asyncQueue,{Po:zK.bind(null,e),To:$K.bind(null,e),u_:HK.bind(null,e)}),e.F_.push(t=>N(this,null,function*(){t?(e.N_.Zo(),CC(e)?EC(e):e.x_.set("Unknown")):(yield e.N_.stop(),_L(e))}))),e.N_}function Ls(e){return e.L_||(e.L_=function(i,n,r){let o=et(i);return o.R_(),new DE(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(e.datastore,e.asyncQueue,{Po:GK.bind(null,e),To:QK.bind(null,e),E_:KK.bind(null,e),T_:YK.bind(null,e)}),e.F_.push(t=>N(this,null,function*(){t?(e.L_.Zo(),yield rd(e)):(yield e.L_.stop(),e.D_.length>0&&($("RemoteStore",`Stopping write stream with ${e.D_.length} pending writes`),e.D_=[]))}))),e.L_}var OE=class e{constructor(t,i,n,r,o){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=n,this.op=r,this.removalCallback=o,this.deferred=new _n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,i,n,r,o){let s=Date.now()+n,l=new e(t,i,s,r,o);return l.start(n),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(O.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function sd(e,t){if(an("AsyncQueue",`${t}: ${e}`),Bs(e))return new U(O.UNAVAILABLE,`${t}: ${e}`);throw e}var Q_=class e{constructor(t){this.comparator=t?(i,n)=>t(i,n)||J.comparator(i.key,n.key):(i,n)=>J.comparator(i.key,n.key),this.keyedMap=Qh(),this.sortedSet=new Be(this.comparator)}static emptySet(t){return new e(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((i,n)=>(t(i),!1))}add(t){let i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){let i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let i=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;i.hasNext();){let r=i.getNext().key,o=n.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let t=[];return this.forEach(i=>{t.push(i.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){let n=new e;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=i,n}};var X_=class{constructor(){this.B_=new Be(J.comparator)}track(t){let i=t.doc.key,n=this.B_.get(i);n?t.type!==0&&n.type===3?this.B_=this.B_.insert(i,t):t.type===3&&n.type!==1?this.B_=this.B_.insert(i,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.B_=this.B_.insert(i,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.B_=this.B_.insert(i,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.B_=this.B_.remove(i):t.type===1&&n.type===2?this.B_=this.B_.insert(i,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.B_=this.B_.insert(i,{type:2,doc:t.doc}):lt():this.B_=this.B_.insert(i,t)}k_(){let t=[];return this.B_.inorderTraversal((i,n)=>{t.push(n)}),t}},Qc=class e{constructor(t,i,n,r,o,s,l,d,u){this.query=t,this.docs=i,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=d,this.hasCachedResults=u}static fromInitialDocuments(t,i,n,r,o){let s=[];return i.forEach(l=>{s.push({type:0,doc:l})}),new e(t,i,Q_.emptySet(i),s,n,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Af(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let i=this.docChanges,n=t.docChanges;if(i.length!==n.length)return!1;for(let r=0;r<i.length;r++)if(i[r].type!==n[r].type||!i[r].doc.isEqual(n[r].doc))return!1;return!0}};var NE=class{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(t=>t.U_())}},FE=class{constructor(){this.queries=new to(t=>CF(t),Af),this.onlineState="Unknown",this.W_=new Set}};function TC(e,t){return N(this,null,function*(){let i=et(e),n=3,r=t.query,o=i.queries.get(r);o?!o.K_()&&t.U_()&&(n=2):(o=new NE,n=t.U_()?0:1);try{switch(n){case 0:o.q_=yield i.onListen(r,!0);break;case 1:o.q_=yield i.onListen(r,!1);break;case 2:yield i.onFirstRemoteStoreListen(r)}}catch(s){let l=sd(s,`Initialization of query '${Rc(t.query)}' failed`);return void t.onError(l)}i.queries.set(r,o),o.Q_.push(t),t.G_(i.onlineState),o.q_&&t.z_(o.q_)&&AC(i)})}function SC(e,t){return N(this,null,function*(){let i=et(e),n=t.query,r=3,o=i.queries.get(n);if(o){let s=o.Q_.indexOf(t);s>=0&&(o.Q_.splice(s,1),o.Q_.length===0?r=t.U_()?0:1:!o.K_()&&t.U_()&&(r=2))}switch(r){case 0:return i.queries.delete(n),i.onUnlisten(n,!0);case 1:return i.queries.delete(n),i.onUnlisten(n,!1);case 2:return i.onLastRemoteStoreUnlisten(n);default:return}})}function XK(e,t){let i=et(e),n=!1;for(let r of t){let o=r.query,s=i.queries.get(o);if(s){for(let l of s.Q_)l.z_(r)&&(n=!0);s.q_=r}}n&&AC(i)}function ZK(e,t,i){let n=et(e),r=n.queries.get(t);if(r)for(let o of r.Q_)o.onError(i);n.queries.delete(t)}function AC(e){e.W_.forEach(t=>{t.next()})}var LE,YN;(YN=LE||(LE={})).j_="default",YN.Cache="cache";var wf=class{constructor(t,i,n){this.query=t,this.H_=i,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=n||{}}z_(t){if(!this.options.includeMetadataChanges){let n=[];for(let r of t.docChanges)r.type!==3&&n.push(r);t=new Qc(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.J_?this.Z_(t)&&(this.H_.next(t),i=!0):this.X_(t,this.onlineState)&&(this.ea(t),i=!0),this.Y_=t,i}onError(t){this.H_.error(t)}G_(t){this.onlineState=t;let i=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,t)&&(this.ea(this.Y_),i=!0),i}X_(t,i){if(!t.fromCache||!this.U_())return!0;let n=i!=="Offline";return(!this.options.ta||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}Z_(t){if(t.docChanges.length>0)return!0;let i=this.Y_&&this.Y_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ea(t){t=Qc.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.J_=!0,this.H_.next(t)}U_(){return this.options.source!==LE.Cache}};var VE=class{constructor(t,i){this.na=t,this.byteLength=i}ra(){return"metadata"in this.na}};var Z_=class{constructor(t){this.serializer=t}Ps(t){return Qr(this.serializer,t)}Is(t){return t.metadata.exists?KF(this.serializer,t.document,!1):vn.newNoDocument(this.Ps(t.metadata.name),this.Ts(t.metadata.readTime))}Ts(t){return cn(t)}},BE=class{constructor(t,i,n){this.ia=t,this.localStore=i,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wL(t)}sa(t){this.progress.bytesLoaded+=t.byteLength;let i=this.progress.documentsLoaded;if(t.na.namedQuery)this.queries.push(t.na.namedQuery);else if(t.na.documentMetadata){this.documents.push({metadata:t.na.documentMetadata}),t.na.documentMetadata.exists||++i;let n=ae.fromString(t.na.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else t.na.document&&(this.documents[this.documents.length-1].document=t.na.document,++i);return i!==this.progress.documentsLoaded?(this.progress.documentsLoaded=i,Object.assign({},this.progress)):null}oa(t){let i=new Map,n=new Z_(this.serializer);for(let r of t)if(r.metadata.queries){let o=n.Ps(r.metadata.name);for(let s of r.metadata.queries){let l=(i.get(s)||jt()).add(o);i.set(s,l)}}return i}complete(){return N(this,null,function*(){let t=yield BK(this.localStore,new Z_(this.serializer),this.documents,this.ia.id),i=this.oa(this.documents);for(let n of this.queries)yield jK(this.localStore,n,i.get(n.name));return this.progress.taskState="Success",{progress:this.progress,_a:this.collectionGroups,aa:t}})}};function wL(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var J_=class{constructor(t){this.key=t}},tv=class{constructor(t){this.key=t}},ev=class{constructor(t,i){this.query=t,this.ua=i,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=jt(),this.mutatedKeys=jt(),this.ha=SF(t),this.Pa=new Q_(this.ha)}get Ia(){return this.ua}Ta(t,i){let n=i?i.Ea:new X_,r=i?i.Pa:this.Pa,o=i?i.mutatedKeys:this.mutatedKeys,s=r,l=!1,d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((f,p)=>{let _=r.get(f),y=Df(this.query,p)?p:null,S=!!_&&this.mutatedKeys.has(_.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;_&&y?_.data.isEqual(y.data)?S!==A&&(n.track({type:3,doc:y}),M=!0):this.da(_,y)||(n.track({type:2,doc:y}),M=!0,(d&&this.ha(y,d)>0||u&&this.ha(y,u)<0)&&(l=!0)):!_&&y?(n.track({type:0,doc:y}),M=!0):_&&!y&&(n.track({type:1,doc:_}),M=!0,(d||u)&&(l=!0)),M&&(y?(s=s.add(y),o=A?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),n.track({type:1,doc:f})}return{Pa:s,Ea:n,Xi:l,mutatedKeys:o}}da(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,n,r){let o=this.Pa;this.Pa=t.Pa,this.mutatedKeys=t.mutatedKeys;let s=t.Ea.k_();s.sort((f,p)=>function(y,S){let A=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return A(y)-A(S)}(f.type,p.type)||this.ha(f.doc,p.doc)),this.Aa(n),r=r!=null&&r;let l=i&&!r?this.Ra():[],d=this.la.size===0&&this.current&&!r?1:0,u=d!==this.ca;return this.ca=d,s.length!==0||u?{snapshot:new Qc(this.query,t.Pa,o,s,t.mutatedKeys,d===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),Va:l}:{Va:l}}G_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new X_,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(t){return!this.ua.has(t)&&!!this.Pa.has(t)&&!this.Pa.get(t).hasLocalMutations}Aa(t){t&&(t.addedDocuments.forEach(i=>this.ua=this.ua.add(i)),t.modifiedDocuments.forEach(i=>{}),t.removedDocuments.forEach(i=>this.ua=this.ua.delete(i)),this.current=t.current)}Ra(){if(!this.current)return[];let t=this.la;this.la=jt(),this.Pa.forEach(n=>{this.ma(n.key)&&(this.la=this.la.add(n.key))});let i=[];return t.forEach(n=>{this.la.has(n)||i.push(new tv(n))}),this.la.forEach(n=>{t.has(n)||i.push(new J_(n))}),i}fa(t){this.ua=t.hs,this.la=jt();let i=this.Ta(t.documents);return this.applyChanges(i,!0)}ga(){return Qc.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}},jE=class{constructor(t,i,n){this.query=t,this.targetId=i,this.view=n}},UE=class{constructor(t){this.key=t,this.pa=!1}},zE=class{constructor(t,i,n,r,o,s){this.localStore=t,this.remoteStore=i,this.eventManager=n,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.ya={},this.wa=new to(l=>CF(l),Af),this.Sa=new Map,this.ba=new Set,this.Da=new Be(J.comparator),this.Ca=new Map,this.va=new vf,this.Fa={},this.Ma=new Map,this.xa=qc.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}};function JK(e,t,i=!0){return N(this,null,function*(){let n=mv(e),r,o=n.wa.get(t);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.ga()):r=yield xL(n,t,i,!0),r})}function tY(e,t){return N(this,null,function*(){let i=mv(e);yield xL(i,t,!0,!1)})}function xL(e,t,i,n){return N(this,null,function*(){let r=yield Gc(e.localStore,ci(t)),o=r.targetId,s=i?e.sharedClientState.addLocalQueryTarget(o):"not-current",l;return n&&(l=yield DC(e,t,o,s==="current",r.resumeToken)),e.isPrimaryClient&&i&&fv(e.remoteStore,r),l})}function DC(e,t,i,n,r){return N(this,null,function*(){e.Na=(p,_,y)=>function(A,M,K,ut){return N(this,null,function*(){let Y=M.view.Ta(K);Y.Xi&&(Y=yield $_(A.localStore,M.query,!1).then(({documents:Ue})=>M.view.Ta(Ue,Y)));let Rt=ut&&ut.targetChanges.get(M.targetId),kt=ut&&ut.targetMismatches.get(M.targetId)!=null,Kt=M.view.applyChanges(Y,A.isPrimaryClient,Rt,kt);return $E(A,M.targetId,Kt.Va),Kt.snapshot})}(e,p,_,y);let o=yield $_(e.localStore,t,!0),s=new ev(t,o.hs),l=s.Ta(o.documents),d=mf.createSynthesizedTargetChangeForCurrentChange(i,n&&e.onlineState!=="Offline",r),u=s.applyChanges(l,e.isPrimaryClient,d);$E(e,i,u.Va);let f=new jE(t,i,s);return e.wa.set(t,f),e.Sa.has(i)?e.Sa.get(i).push(t):e.Sa.set(i,[t]),u.snapshot})}function eY(e,t,i){return N(this,null,function*(){let n=et(e),r=n.wa.get(t),o=n.Sa.get(r.targetId);if(o.length>1)return n.Sa.set(r.targetId,o.filter(s=>!Af(s,t))),void n.wa.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Kc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),i&&Yc(n.remoteStore,r.targetId),Xc(n,r.targetId)}).catch(Vs))):(Xc(n,r.targetId),yield Kc(n.localStore,r.targetId,!0))})}function nY(e,t){return N(this,null,function*(){let i=et(e),n=i.wa.get(t),r=i.Sa.get(n.targetId);i.isPrimaryClient&&r.length===1&&(i.sharedClientState.removeLocalQueryTarget(n.targetId),Yc(i.remoteStore,n.targetId))})}function iY(e,t,i){return N(this,null,function*(){let n=PC(e);try{let r=yield function(s,l){let d=et(s),u=Qe.now(),f=l.reduce((y,S)=>y.add(S.key),jt()),p,_;return d.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=vi(),A=jt();return d.os.getEntries(y,f).next(M=>{S=M,S.forEach((K,ut)=>{ut.isValidDocument()||(A=A.add(K))})}).next(()=>d.localDocuments.getOverlayedDocuments(y,S)).next(M=>{p=M;let K=[];for(let ut of l){let Y=vK(ut,p.get(ut.key).overlayedDocument);Y!=null&&K.push(new wr(ut.key,Y,vF(Y.value.mapValue),rn.exists(!0)))}return d.mutationQueue.addMutationBatch(y,u,K,l)}).next(M=>{_=M;let K=M.applyToLocalDocumentSet(p,A);return d.documentOverlayCache.saveOverlays(y,M.batchId,K)})}).then(()=>({batchId:_.batchId,changes:DF(p)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(r.batchId),function(s,l,d){let u=s.Fa[s.currentUser.toKey()];u||(u=new Be(Vt)),u=u.insert(l,d),s.Fa[s.currentUser.toKey()]=u}(n,r.batchId,i),yield Bo(n,r.changes),yield rd(n.remoteStore)}catch(r){let o=sd(r,"Failed to persist write");i.reject(o)}})}function IL(e,t){return N(this,null,function*(){let i=et(e);try{let n=yield LK(i.localStore,t);t.targetChanges.forEach((r,o)=>{let s=i.Ca.get(o);s&&(_t(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.pa=!0:r.modifiedDocuments.size>0?_t(s.pa):r.removedDocuments.size>0&&(_t(s.pa),s.pa=!1))}),yield Bo(i,n,t)}catch(n){yield Vs(n)}})}function QN(e,t,i){let n=et(e);if(n.isPrimaryClient&&i===0||!n.isPrimaryClient&&i===1){let r=[];n.wa.forEach((o,s)=>{let l=s.view.G_(t);l.snapshot&&r.push(l.snapshot)}),function(s,l){let d=et(s);d.onlineState=l;let u=!1;d.queries.forEach((f,p)=>{for(let _ of p.Q_)_.G_(l)&&(u=!0)}),u&&AC(d)}(n.eventManager,t),r.length&&n.ya.u_(r),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}function rY(e,t,i){return N(this,null,function*(){let n=et(e);n.sharedClientState.updateQueryState(t,"rejected",i);let r=n.Ca.get(t),o=r&&r.key;if(o){let s=new Be(J.comparator);s=s.insert(o,vn.newNoDocument(o,yt.min()));let l=jt().add(o),d=new ff(yt.min(),new Map,new Be(Vt),s,l);yield IL(n,d),n.Da=n.Da.remove(o),n.Ca.delete(t),MC(n)}else yield Kc(n.localStore,t,!1).then(()=>Xc(n,t,i)).catch(Vs)})}function oY(e,t){return N(this,null,function*(){let i=et(e),n=t.batch.batchId;try{let r=yield FK(i.localStore,t);kC(i,n,null),RC(i,n),i.sharedClientState.updateMutationState(n,"acknowledged"),yield Bo(i,r)}catch(r){yield Vs(r)}})}function sY(e,t,i){return N(this,null,function*(){let n=et(e);try{let r=yield function(s,l){let d=et(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return d.mutationQueue.lookupMutationBatch(u,l).next(p=>(_t(p!==null),f=p.keys(),d.mutationQueue.removeMutationBatch(u,p))).next(()=>d.mutationQueue.performConsistencyCheck(u)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(u,f,l)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>d.localDocuments.getDocuments(u,f))})}(n.localStore,t);kC(n,t,i),RC(n,t),n.sharedClientState.updateMutationState(t,"rejected",i),yield Bo(n,r)}catch(r){yield Vs(r)}})}function aY(e,t){return N(this,null,function*(){let i=et(e);js(i.remoteStore)||$("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let n=yield function(s){let l=et(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.mutationQueue.getHighestUnacknowledgedBatchId(d))}(i.localStore);if(n===-1)return void t.resolve();let r=i.Ma.get(n)||[];r.push(t),i.Ma.set(n,r)}catch(n){let r=sd(n,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}})}function RC(e,t){(e.Ma.get(t)||[]).forEach(i=>{i.resolve()}),e.Ma.delete(t)}function kC(e,t,i){let n=et(e),r=n.Fa[n.currentUser.toKey()];if(r){let o=r.get(t);o&&(i?o.reject(i):o.resolve(),r=r.remove(t)),n.Fa[n.currentUser.toKey()]=r}}function Xc(e,t,i=null){e.sharedClientState.removeLocalQueryTarget(t);for(let n of e.Sa.get(t))e.wa.delete(n),i&&e.ya.La(n,i);e.Sa.delete(t),e.isPrimaryClient&&e.va.Vr(t).forEach(n=>{e.va.containsKey(n)||EL(e,n)})}function EL(e,t){e.ba.delete(t.path.canonicalString());let i=e.Da.get(t);i!==null&&(Yc(e.remoteStore,i),e.Da=e.Da.remove(t),e.Ca.delete(i),MC(e))}function $E(e,t,i){for(let n of i)n instanceof J_?(e.va.addReference(n.key,t),lY(e,n)):n instanceof tv?($("SyncEngine","Document no longer in limbo: "+n.key),e.va.removeReference(n.key,t),e.va.containsKey(n.key)||EL(e,n.key)):lt()}function lY(e,t){let i=t.key,n=i.path.canonicalString();e.Da.get(i)||e.ba.has(n)||($("SyncEngine","New document in limbo: "+i),e.ba.add(n),MC(e))}function MC(e){for(;e.ba.size>0&&e.Da.size<e.maxConcurrentLimboResolutions;){let t=e.ba.values().next().value;e.ba.delete(t);let i=new J(ae.fromString(t)),n=e.xa.next();e.Ca.set(n,new UE(i)),e.Da=e.Da.insert(i,n),fv(e.remoteStore,new Wc(ci(nd(i.path)),n,"TargetPurposeLimboResolution",Mi._e))}}function Bo(e,t,i){return N(this,null,function*(){let n=et(e),r=[],o=[],s=[];n.wa.isEmpty()||(n.wa.forEach((l,d)=>{s.push(n.Na(d,t,i).then(u=>{if((u||i)&&n.isPrimaryClient&&n.sharedClientState.updateQueryState(d.targetId,u?.fromCache?"not-current":"current"),u){r.push(u);let f=wE.Ki(d.targetId,u);o.push(f)}}))}),yield Promise.all(s),n.ya.u_(r),yield function(d,u){return N(this,null,function*(){let f=et(d);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>k.forEach(u,_=>k.forEach(_.qi,y=>f.persistence.referenceDelegate.addReference(p,_.targetId,y)).next(()=>k.forEach(_.Qi,y=>f.persistence.referenceDelegate.removeReference(p,_.targetId,y)))))}catch(p){if(!Bs(p))throw p;$("LocalStore","Failed to update sequence numbers: "+p)}for(let p of u){let _=p.targetId;if(!p.fromCache){let y=f.ns.get(_),S=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(S);f.ns=f.ns.insert(_,A)}}})}(n.localStore,o))})}function cY(e,t){return N(this,null,function*(){let i=et(e);if(!i.currentUser.isEqual(t)){$("SyncEngine","User change. New user:",t.toKey());let n=yield cL(i.localStore,t);i.currentUser=t,function(o,s){o.Ma.forEach(l=>{l.forEach(d=>{d.reject(new U(O.CANCELLED,s))})}),o.Ma.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),yield Bo(i,n.us)}})}function dY(e,t){let i=et(e),n=i.Ca.get(t);if(n&&n.pa)return jt().add(n.key);{let r=jt(),o=i.Sa.get(t);if(!o)return r;for(let s of o){let l=i.wa.get(s);r=r.unionWith(l.view.Ia)}return r}}function uY(e,t){return N(this,null,function*(){let i=et(e),n=yield $_(i.localStore,t.query,!0),r=t.view.fa(n);return i.isPrimaryClient&&$E(i,t.targetId,r.Va),r})}function hY(e,t){return N(this,null,function*(){let i=et(e);return fL(i.localStore,t).then(n=>Bo(i,n))})}function fY(e,t,i,n){return N(this,null,function*(){let r=et(e),o=yield function(l,d){let u=et(l),f=et(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",p=>f.vn(p,d).next(_=>_?u.localDocuments.getDocuments(p,_):k.resolve(null)))}(r.localStore,t);o!==null?(i==="pending"?yield rd(r.remoteStore):i==="acknowledged"||i==="rejected"?(kC(r,t,n||null),RC(r,t),function(l,d){et(et(l).mutationQueue).Mn(d)}(r.localStore,t)):lt(),yield Bo(r,o)):$("SyncEngine","Cannot apply mutation batch with id: "+t)})}function mY(e,t){return N(this,null,function*(){let i=et(e);if(mv(i),PC(i),t===!0&&i.Oa!==!0){let n=i.sharedClientState.getAllActiveQueryTargets(),r=yield XN(i,n.toArray());i.Oa=!0,yield PE(i.remoteStore,!0);for(let o of r)fv(i.remoteStore,o)}else if(t===!1&&i.Oa!==!1){let n=[],r=Promise.resolve();i.Sa.forEach((o,s)=>{i.sharedClientState.isLocalQueryTarget(s)?n.push(s):r=r.then(()=>(Xc(i,s),Kc(i.localStore,s,!0))),Yc(i.remoteStore,s)}),yield r,yield XN(i,n),function(s){let l=et(s);l.Ca.forEach((d,u)=>{Yc(l.remoteStore,u)}),l.va.mr(),l.Ca=new Map,l.Da=new Be(J.comparator)}(i),i.Oa=!1,yield PE(i.remoteStore,!1)}})}function XN(e,t,i){return N(this,null,function*(){let n=et(e),r=[],o=[];for(let s of t){let l,d=n.Sa.get(s);if(d&&d.length!==0){l=yield Gc(n.localStore,ci(d[0]));for(let u of d){let f=n.wa.get(u),p=yield uY(n,f);p.snapshot&&o.push(p.snapshot)}}else{let u=yield hL(n.localStore,s);l=yield Gc(n.localStore,u),yield DC(n,CL(u),s,!1,l.resumeToken)}r.push(l)}return n.ya.u_(o),r})}function CL(e){return EF(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function pY(e){return function(i){return et(et(i).persistence).Bi()}(et(e).localStore)}function gY(e,t,i,n){return N(this,null,function*(){let r=et(e);if(r.Oa)return void $("SyncEngine","Ignoring unexpected query state notification.");let o=r.Sa.get(t);if(o&&o.length>0)switch(i){case"current":case"not-current":{let s=yield fL(r.localStore,TF(o[0])),l=ff.createSynthesizedRemoteEventForCurrentChange(t,i==="current",On.EMPTY_BYTE_STRING);yield Bo(r,s,l);break}case"rejected":yield Kc(r.localStore,t,!0),Xc(r,t,n);break;default:lt()}})}function _Y(e,t,i){return N(this,null,function*(){let n=mv(e);if(n.Oa){for(let r of t){if(n.Sa.has(r)&&n.sharedClientState.isActiveQueryTarget(r)){$("SyncEngine","Adding an already active target "+r);continue}let o=yield hL(n.localStore,r),s=yield Gc(n.localStore,o);yield DC(n,CL(o),s.targetId,!1,s.resumeToken),fv(n.remoteStore,s)}for(let r of i)n.Sa.has(r)&&(yield Kc(n.localStore,r,!1).then(()=>{Yc(n.remoteStore,r),Xc(n,r)}).catch(Vs))}})}function mv(e){let t=et(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=IL.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=dY.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=rY.bind(null,t),t.ya.u_=XK.bind(null,t.eventManager),t.ya.La=ZK.bind(null,t.eventManager),t}function PC(e){let t=et(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=oY.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=sY.bind(null,t),t}function vY(e,t,i){let n=et(e);(function(o,s,l){return N(this,null,function*(){try{let d=yield s.getMetadata();if(yield function(y,S){let A=et(y),M=cn(S.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",K=>A.$r.getBundleMetadata(K,S.id)).then(K=>!!K&&K.createTime.compareTo(M)>=0)}(o.localStore,d))return yield s.close(),l._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(d)),Promise.resolve(new Set);l._updateProgress(wL(d));let u=new BE(d,o.localStore,s.serializer),f=yield s.Ba();for(;f;){let _=yield u.sa(f);_&&l._updateProgress(_),f=yield s.Ba()}let p=yield u.complete();return yield Bo(o,p.aa,void 0),yield function(y,S){let A=et(y);return A.persistence.runTransaction("Save bundle","readwrite",M=>A.$r.saveBundleMetadata(M,S))}(o.localStore,d),l._completeWith(p.progress),Promise.resolve(p._a)}catch(d){return tr("SyncEngine",`Loading bundle failed with ${d}`),l._failWith(d),Promise.resolve(new Set)}})})(n,t,i).then(r=>{n.sharedClientState.notifyBundleLoaded(r)})}var xf=class{constructor(){this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){this.serializer=Rf(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,i){return null}createIndexBackfillerScheduler(t,i){return null}createLocalStore(t){return lL(this.persistence,new z_,t.initialUser,this.serializer)}createPersistence(t){return new j_(U_.Hr,this.serializer)}createSharedClientState(t){return new q_}terminate(){return N(this,null,function*(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var nv=class e extends xf{constructor(t,i,n){super(),this.ka=t,this.cacheSizeBytes=i,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){yield E0(e.prototype,this,"initialize").call(this,t),yield this.ka.initialize(this,t),yield PC(this.ka.syncEngine),yield rd(this.ka.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(t){return lL(this.persistence,new z_,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,i){let n=this.persistence.referenceDelegate.garbageCollector;return new sE(n,t.asyncQueue,i)}createIndexBackfillerScheduler(t,i){let n=new EI(i,this.persistence);return new II(t.asyncQueue,n)}createPersistence(t){let i=xC(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Ji.withCacheSize(this.cacheSizeBytes):Ji.DEFAULT;return new yE(this.synchronizeTabs,i,t.clientId,n,t.asyncQueue,pL(),m_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new q_}},HE=class e extends nv{constructor(t,i){super(t,i,!1),this.ka=t,this.cacheSizeBytes=i,this.synchronizeTabs=!0}initialize(t){return N(this,null,function*(){yield E0(e.prototype,this,"initialize").call(this,t);let i=this.ka.syncEngine;this.sharedClientState instanceof nf&&(this.sharedClientState.syncEngine={Zs:fY.bind(null,i),Xs:gY.bind(null,i),eo:_Y.bind(null,i),Bi:pY.bind(null,i),Ys:hY.bind(null,i)},yield this.sharedClientState.start()),yield this.persistence.fi(n=>N(this,null,function*(){yield mY(this.ka.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(t){let i=pL();if(!nf.D(i))throw new U(O.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let n=xC(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new nf(i,t.asyncQueue,n,t.clientId,t.initialUser)}},If=class{initialize(t,i){return N(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>QN(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=cY.bind(null,this.syncEngine),yield PE(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new FE}()}createDatastore(t){let i=Rf(t.databaseInfo.databaseId),n=function(o){return new SE(o)}(t.databaseInfo);return function(o,s,l,d){return new RE(o,s,l,d)}(t.authCredentials,t.appCheckCredentials,n,i)}createRemoteStore(t){return function(n,r,o,s,l){return new ME(n,r,o,s,l)}(this.localStore,this.datastore,t.asyncQueue,i=>QN(this.syncEngine,i,0),function(){return G_.D()?new G_:new CE}())}createSyncEngine(t,i){return function(r,o,s,l,d,u,f){let p=new zE(r,o,s,l,d,u);return f&&(p.Oa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){return N(this,null,function*(){var t;yield function(n){return N(this,null,function*(){let r=et(n);$("RemoteStore","RemoteStore shutting down."),r.v_.add(5),yield id(r),r.M_.shutdown(),r.x_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()})}};function ZN(e,t=10240){let i=0;return{read(){return N(this,null,function*(){if(i<e.byteLength){let r={value:e.slice(i,i+t),done:!1};return i+=t,r}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Zc=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.qa(this.observer.next,t)}error(t){this.observer.error?this.qa(this.observer.error,t):an("Uncaught Error in snapshot listener:",t.toString())}Qa(){this.muted=!0}qa(t,i){this.muted||setTimeout(()=>{this.muted||t(i)},0)}};var WE=class{constructor(t,i){this.Ka=t,this.serializer=i,this.metadata=new _n,this.buffer=new Uint8Array,this.$a=function(){return new TextDecoder("utf-8")}(),this.Ua().then(n=>{n&&n.ra()?this.metadata.resolve(n.na.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n?.na)}`))},n=>this.metadata.reject(n))}close(){return this.Ka.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ba(){return N(this,null,function*(){return yield this.getMetadata(),this.Ua()})}Ua(){return N(this,null,function*(){let t=yield this.Wa();if(t===null)return null;let i=this.$a.decode(t),n=Number(i);isNaN(n)&&this.Ga(`length string (${i}) is not valid number`);let r=yield this.za(n);return new VE(JSON.parse(r),t.length+n)})}ja(){return this.buffer.findIndex(t=>t===123)}Wa(){return N(this,null,function*(){for(;this.ja()<0&&!(yield this.Ha()););if(this.buffer.length===0)return null;let t=this.ja();t<0&&this.Ga("Reached the end of bundle when a length string is expected.");let i=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),i})}za(t){return N(this,null,function*(){for(;this.buffer.length<t;)(yield this.Ha())&&this.Ga("Reached the end of bundle when more is expected.");let i=this.$a.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),i})}Ga(t){throw this.Ka.cancel(),new Error(`Invalid bundle format: ${t}`)}Ha(){return N(this,null,function*(){let t=yield this.Ka.read();if(!t.done){let i=new Uint8Array(this.buffer.length+t.value.length);i.set(this.buffer),i.set(t.value,this.buffer.length),this.buffer=i}return t.done})}};var qE=class{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(t){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new U(O.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let i=yield function(r,o){return N(this,null,function*(){let s=et(r),l={documents:o.map(p=>pf(s.serializer,p))},d=yield s.vo("BatchGetDocuments",s.serializer.databaseId,ae.emptyPath(),l,o.length),u=new Map;d.forEach(p=>{let _=EK(s.serializer,p);u.set(_.key.toString(),_)});let f=[];return o.forEach(p=>{let _=u.get(p.toString());_t(!!_),f.push(_)}),f})}(this.datastore,t);return i.forEach(n=>this.recordVersion(n)),i})}set(t,i){this.write(i.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,i){try{this.write(i.toMutation(t,this.preconditionForUpdate(t)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(t.toString())}delete(t){this.write(new Fs(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let t=this.readVersions;this.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,n)=>{let r=J.fromPath(n);this.mutations.push(new df(r,this.precondition(r)))}),yield function(n,r){return N(this,null,function*(){let o=et(n),s={writes:r.map(l=>gf(o.serializer,l))};yield o.So("Commit",o.serializer.databaseId,ae.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(t){let i;if(t.isFoundDocument())i=t.version;else{if(!t.isNoDocument())throw lt();i=yt.min()}let n=this.readVersions.get(t.key.toString());if(n){if(!i.isEqual(n))throw new U(O.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),i)}precondition(t){let i=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&i?i.isEqual(yt.min())?rn.exists(!1):rn.updateTime(i):rn.none()}preconditionForUpdate(t){let i=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&i){if(i.isEqual(yt.min()))throw new U(O.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return rn.updateTime(i)}return rn.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}};var GE=class{constructor(t,i,n,r,o){this.asyncQueue=t,this.datastore=i,this.options=n,this.updateFunction=r,this.deferred=o,this.Ja=n.maxAttempts,this.jo=new yf(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){this.jo.qo(()=>N(this,null,function*(){let t=new qE(this.datastore),i=this.Xa(t);i&&i.then(n=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(n)}).catch(r=>{this.eu(r)}))}).catch(n=>{this.eu(n)})}))}Xa(t){try{let i=this.updateFunction(t);return!Tf(i)&&i.catch&&i.then?i:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(i){return this.deferred.reject(i),null}}eu(t){this.Ja>0&&this.tu(t)?(this.Ja-=1,this.asyncQueue.enqueueAndForget(()=>(this.Za(),Promise.resolve()))):this.deferred.reject(t)}tu(t){if(t.name==="FirebaseError"){let i=t.code;return i==="aborted"||i==="failed-precondition"||i==="already-exists"||!jF(i)}return!1}};var KE=class{constructor(t,i,n,r){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=n,this.databaseInfo=r,this.user=gn.UNAUTHENTICATED,this.clientId=__.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,o=>N(this,null,function*(){$("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,o=>($("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new U(O.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new _n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){let n=sd(i,"Failed to shutdown persistence");t.reject(n)}})),t.promise}};function p_(e,t){return N(this,null,function*(){e.asyncQueue.verifyOperationInProgress(),$("FirestoreClient","Initializing OfflineComponentProvider");let i=e.configuration;yield t.initialize(i);let n=i.initialUser;e.setCredentialChangeListener(r=>N(this,null,function*(){n.isEqual(r)||(yield cL(t.localStore,r),n=r)})),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t})}function YE(e,t){return N(this,null,function*(){e.asyncQueue.verifyOperationInProgress();let i=yield OC(e);$("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(i,e.configuration),e.setCredentialChangeListener(n=>KN(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,r)=>KN(t.remoteStore,r)),e._onlineComponents=t})}function TL(e){return e.name==="FirebaseError"?e.code===O.FAILED_PRECONDITION||e.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}function OC(e){return N(this,null,function*(){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){$("FirestoreClient","Using user provided OfflineComponentProvider");try{yield p_(e,e._uninitializedComponentsProvider._offline)}catch(t){let i=t;if(!TL(i))throw i;tr("Error using user provided cache. Falling back to memory cache: "+i),yield p_(e,new xf)}}else $("FirestoreClient","Using default OfflineComponentProvider"),yield p_(e,new xf);return e._offlineComponents})}function pv(e){return N(this,null,function*(){return e._onlineComponents||(e._uninitializedComponentsProvider?($("FirestoreClient","Using user provided OnlineComponentProvider"),yield YE(e,e._uninitializedComponentsProvider._online)):($("FirestoreClient","Using default OnlineComponentProvider"),yield YE(e,new If))),e._onlineComponents})}function SL(e){return OC(e).then(t=>t.persistence)}function NC(e){return OC(e).then(t=>t.localStore)}function AL(e){return pv(e).then(t=>t.remoteStore)}function FC(e){return pv(e).then(t=>t.syncEngine)}function bY(e){return pv(e).then(t=>t.datastore)}function Jc(e){return N(this,null,function*(){let t=yield pv(e),i=t.eventManager;return i.onListen=JK.bind(null,t.syncEngine),i.onUnlisten=eY.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=tY.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=nY.bind(null,t.syncEngine),i})}function yY(e){return e.asyncQueue.enqueue(()=>N(this,null,function*(){let t=yield SL(e),i=yield AL(e);return t.setNetworkEnabled(!0),function(r){let o=et(r);return o.v_.delete(0),kf(o)}(i)}))}function wY(e){return e.asyncQueue.enqueue(()=>N(this,null,function*(){let t=yield SL(e),i=yield AL(e);return t.setNetworkEnabled(!1),function(r){return N(this,null,function*(){let o=et(r);o.v_.add(0),yield id(o),o.x_.set("Offline")})}(i)}))}function xY(e,t){let i=new _n;return e.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(r,o,s){return N(this,null,function*(){try{let l=yield function(u,f){let p=et(u);return p.persistence.runTransaction("read document","readonly",_=>p.localDocuments.getDocument(_,f))}(r,o);l.isFoundDocument()?s.resolve(l):l.isNoDocument()?s.resolve(null):s.reject(new U(O.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){let d=sd(l,`Failed to get document '${o} from cache`);s.reject(d)}})}(yield NC(e),t,i)})),i.promise}function DL(e,t,i={}){let n=new _n;return e.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,l,d,u){let f=new Zc({next:_=>{s.enqueueAndForget(()=>SC(o,p));let y=_.docs.has(l);!y&&_.fromCache?u.reject(new U(O.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&_.fromCache&&d&&d.source==="server"?u.reject(new U(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(_)},error:_=>u.reject(_)}),p=new wf(nd(l.path),f,{includeMetadataChanges:!0,ta:!0});return TC(o,p)}(yield Jc(e),e.asyncQueue,t,i,n)})),n.promise}function IY(e,t){let i=new _n;return e.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(r,o,s){return N(this,null,function*(){try{let l=yield $_(r,o,!0),d=new ev(o,l.hs),u=d.Ta(l.documents),f=d.applyChanges(u,!1);s.resolve(f.snapshot)}catch(l){let d=sd(l,`Failed to execute query '${o} against cache`);s.reject(d)}})}(yield NC(e),t,i)})),i.promise}function RL(e,t,i={}){let n=new _n;return e.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,l,d,u){let f=new Zc({next:_=>{s.enqueueAndForget(()=>SC(o,p)),_.fromCache&&d.source==="server"?u.reject(new U(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(_)},error:_=>u.reject(_)}),p=new wf(l,f,{includeMetadataChanges:!0,ta:!0});return TC(o,p)}(yield Jc(e),e.asyncQueue,t,i,n)})),n.promise}function EY(e,t){let i=new Zc(t);return e.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(r,o){et(r).W_.add(o),o.next()}(yield Jc(e),i)})),()=>{i.Qa(),e.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(r,o){et(r).W_.delete(o)}(yield Jc(e),i)}))}}function CY(e,t,i,n){let r=function(s,l){let d;return d=typeof s=="string"?zF().encode(s):s,function(f,p){return new WE(f,p)}(function(f,p){if(f instanceof Uint8Array)return ZN(f,p);if(f instanceof ArrayBuffer)return ZN(new Uint8Array(f),p);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),l)}(i,Rf(t));e.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){vY(yield FC(e),r,n)}))}function TY(e,t){return e.asyncQueue.enqueue(()=>N(this,null,function*(){return function(n,r){let o=et(n);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,r))}(yield NC(e),t)}))}function kL(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var JN=new Map;function LC(e,t,i){if(!i)throw new U(O.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function VC(e,t,i,n){if(t===!0&&n===!0)throw new U(O.INVALID_ARGUMENT,`${e} and ${i} cannot be used together.`)}function tF(e){if(!J.isDocumentKey(e))throw new U(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function eF(e){if(J.isDocumentKey(e))throw new U(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function gv(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{let t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":lt()}function le(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new U(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let i=gv(e);throw new U(O.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return e}function ML(e,t){if(t<=0)throw new U(O.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}var iv=class{constructor(t){var i,n;if(t.host===void 0){if(t.ssl!==void 0)throw new U(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(i=t.ssl)===null||i===void 0||i;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new U(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}VC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kL((n=t.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new U(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new U(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new U(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},qa=class{constructor(t,i,n,r){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new U(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new U(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iv(t),t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new fI;switch(n.type){case"firstParty":return new _I(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new U(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){let n=JN.get(i);n&&($("ComponentProvider","Removing Datastore"),JN.delete(i),n.terminate())}(this),Promise.resolve()}};function _v(e,t,i,n={}){var r;let o=(e=le(e,qa))._getSettings(),s=`${t}:${i}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&tr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),n.mockUserToken){let l,d;if(typeof n.mockUserToken=="string")l=n.mockUserToken,d=gn.MOCK_USER;else{l=Op(n.mockUserToken,(r=e._app)===null||r===void 0?void 0:r.options.projectId);let u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new U(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new gn(u)}e._authCredentials=new mI(new g_(l,d))}}var zn=class e{constructor(t,i,n){this.converter=i,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new e(this.firestore,t,this._query)}},Fe=class e{constructor(t,i,n){this.converter=i,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}},Xr=class e extends zn{constructor(t,i,n){super(t,i,nd(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new Fe(this.firestore,null,new J(t))}withConverter(t){return new e(this.firestore,t,this._path)}};function vv(e,t,...i){if(e=Ne(e),LC("collection","path",t),e instanceof qa){let n=ae.fromString(t,...i);return eF(n),new Xr(e,null,n)}{if(!(e instanceof Fe||e instanceof Xr))throw new U(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(ae.fromString(t,...i));return eF(n),new Xr(e.firestore,null,n)}}function BC(e,t){if(e=le(e,qa),LC("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new U(O.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zn(e,null,function(n){return new yr(ae.emptyPath(),n)}(t))}function ad(e,t,...i){if(e=Ne(e),arguments.length===1&&(t=__.newId()),LC("doc","path",t),e instanceof qa){let n=ae.fromString(t,...i);return tF(n),new Fe(e,null,new J(n))}{if(!(e instanceof Fe||e instanceof Xr))throw new U(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(ae.fromString(t,...i));return tF(n),new Fe(e.firestore,e instanceof Xr?e.converter:null,new J(n))}}function bv(e,t){return e=Ne(e),t=Ne(t),(e instanceof Fe||e instanceof Xr)&&(t instanceof Fe||t instanceof Xr)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function yv(e,t){return e=Ne(e),t=Ne(t),e instanceof zn&&t instanceof zn&&e.firestore===t.firestore&&Af(e._query,t._query)&&e.converter===t.converter}var QE=class{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new yf(this,"async_queue_retry"),this.cu=()=>{let i=m_();i&&$("AsyncQueue","Visibility state changed to "+i.visibilityState),this.jo.Ko()};let t=m_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.lu(),this.hu(t)}enterRestrictedMode(t){if(!this.iu){this.iu=!0,this.au=t||!1;let i=m_();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this.cu)}}enqueue(t){if(this.lu(),this.iu)return new Promise(()=>{});let i=new _n;return this.hu(()=>this.iu&&this.au?Promise.resolve():(t().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.ru.push(t),this.Pu()))}Pu(){return N(this,null,function*(){if(this.ru.length!==0){try{yield this.ru[0](),this.ru.shift(),this.jo.reset()}catch(t){if(!Bs(t))throw t;$("AsyncQueue","Operation failed with retryable error: "+t)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}})}hu(t){let i=this.nu.then(()=>(this._u=!0,t().catch(n=>{this.ou=n,this._u=!1;let r=function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),l}(n);throw an("INTERNAL UNHANDLED ERROR: ",r),n}).then(n=>(this._u=!1,n))));return this.nu=i,i}enqueueAfterDelay(t,i,n){this.lu(),this.uu.indexOf(t)>-1&&(i=0);let r=OE.createAndSchedule(this,t,i,n,o=>this.Iu(o));return this.su.push(r),r}lu(){this.ou&&lt()}verifyOperationInProgress(){}Tu(){return N(this,null,function*(){let t;do t=this.nu,yield t;while(t!==this.nu)})}Eu(t){for(let i of this.su)if(i.timerId===t)return!0;return!1}du(t){return this.Tu().then(()=>{this.su.sort((i,n)=>i.targetTimeMs-n.targetTimeMs);for(let i of this.su)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Tu()})}Au(t){this.uu.push(t)}Iu(t){let i=this.su.indexOf(t);this.su.splice(i,1)}};function XE(e){return function(i,n){if(typeof i!="object"||i===null)return!1;let r=i;for(let o of n)if(o in r&&typeof r[o]=="function")return!0;return!1}(e,["next","error","complete"])}var ZE=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new _n,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,i,n){this._progressObserver={next:t,error:i,complete:n}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,i){return this._taskCompletionResolver.promise.then(t,i)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}};var PL=-1,qe=class extends qa{constructor(t,i,n,r){super(t,i,n,r),this.type="firestore",this._queue=function(){return new QE}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||NL(this),this._firestoreClient.terminate()}};function OL(e,t){let i=typeof e=="object"?e:Zl(),n=typeof e=="string"?e:t||"(default)",r=Bu(i,"firestore").getImmediate({identifier:n});if(!r._initialized){let o=Pp("firestore");o&&_v(r,...o)}return r}function xn(e){return e._firestoreClient||NL(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function NL(e){var t,i,n;let r=e._freezeSettings(),o=function(l,d,u,f){return new CI(l,d,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,kL(f.experimentalLongPollingOptions),f.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,r);e._firestoreClient=new KE(e._authCredentials,e._appCheckCredentials,e._queue,o),!((i=r.localCache)===null||i===void 0)&&i._offlineComponentProvider&&(!((n=r.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function jC(e,t){LL(e=le(e,qe));let i=xn(e);if(i._uninitializedComponentsProvider)throw new U(O.FAILED_PRECONDITION,"SDK cache is already specified.");tr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=e._freezeSettings(),r=new If;return FL(i,r,new nv(r,n.cacheSizeBytes,t?.forceOwnership))}function UC(e){LL(e=le(e,qe));let t=xn(e);if(t._uninitializedComponentsProvider)throw new U(O.FAILED_PRECONDITION,"SDK cache is already specified.");tr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=e._freezeSettings(),n=new If;return FL(t,n,new HE(n,i.cacheSizeBytes))}function FL(e,t,i){let n=new _n;return e.asyncQueue.enqueue(()=>N(this,null,function*(){try{yield p_(e,i),yield YE(e,t),n.resolve()}catch(r){let o=r;if(!TL(o))throw o;tr("Error enabling indexeddb cache. Falling back to memory cache: "+o),n.reject(o)}})).then(()=>n.promise)}function zC(e){if(e._initialized&&!e._terminated)throw new U(O.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let t=new _n;return e._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(n){return N(this,null,function*(){if(!Po.D())return Promise.resolve();let r=n+"main";yield Po.delete(r)})}(xC(e._databaseId,e._persistenceKey)),t.resolve()}catch(i){t.reject(i)}})),t.promise}function $C(e){return function(i){let n=new _n;return i.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return aY(yield FC(i),n)})),n.promise}(xn(e=le(e,qe)))}function HC(e){return yY(xn(e=le(e,qe)))}function WC(e){return wY(xn(e=le(e,qe)))}function qC(e,t){let i=xn(e=le(e,qe)),n=new ZE;return CY(i,e._databaseId,t,n),n}function GC(e,t){return TY(xn(e=le(e,qe)),t).then(i=>i?new zn(e,null,i.query):null)}function LL(e){if(e._initialized||e._terminated)throw new U(O.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var eo=class e{constructor(t){this._byteString=t}static fromBase64String(t){try{return new e(On.fromBase64String(t))}catch(i){throw new U(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new e(On.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var xr=class{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new U(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var Lo=class{constructor(t){this._methodName=t}};var Ga=class{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new U(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new U(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Vt(this._lat,t._lat)||Vt(this._long,t._long)}};var SY=/^__.*__$/,JE=class{constructor(t,i,n){this.data=t,this.fieldMask=i,this.fieldTransforms=n}toMutation(t,i){return this.fieldMask!==null?new wr(t,this.data,this.fieldMask,i,this.fieldTransforms):new Ns(t,this.data,i,this.fieldTransforms)}},rv=class{constructor(t,i,n){this.data=t,this.fieldMask=i,this.fieldTransforms=n}toMutation(t,i){return new wr(t,this.data,this.fieldMask,i,this.fieldTransforms)}};function VL(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}var ov=class e{constructor(t,i,n,r,o,s){this.settings=t,this.databaseId=i,this.serializer=n,this.ignoreUndefinedProperties=r,o===void 0&&this.Ru(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(t){var i;let n=(i=this.path)===null||i===void 0?void 0:i.child(t),r=this.mu({path:n,gu:!1});return r.pu(t),r}yu(t){var i;let n=(i=this.path)===null||i===void 0?void 0:i.child(t),r=this.mu({path:n,gu:!1});return r.Ru(),r}wu(t){return this.mu({path:void 0,gu:!0})}Su(t){return sv(t,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(t){return this.fieldMask.find(i=>t.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>t.isPrefixOf(i.field))!==void 0}Ru(){if(this.path)for(let t=0;t<this.path.length;t++)this.pu(this.path.get(t))}pu(t){if(t.length===0)throw this.Su("Document fields must not be empty");if(VL(this.Vu)&&SY.test(t))throw this.Su('Document fields cannot begin and end with "__"')}},tC=class{constructor(t,i,n){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=n||Rf(t)}Cu(t,i,n,r=!1){return new ov({Vu:t,methodName:i,Du:n,path:ln.emptyPath(),gu:!1,bu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Xa(e){let t=e._freezeSettings(),i=Rf(e._databaseId);return new tC(e._databaseId,!!t.ignoreUndefinedProperties,i)}function wv(e,t,i,n,r,o={}){let s=e.Cu(o.merge||o.mergeFields?2:0,t,i,r);QC("Data must be an object, but it was:",s,n);let l=UL(n,s),d,u;if(o.merge)d=new Pi(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let _=oC(t,p,i);if(!s.contains(_))throw new U(O.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);$L(f,_)||f.push(_)}d=new Pi(f),u=s.fieldTransforms.filter(p=>d.covers(p.field))}else d=null,u=s.fieldTransforms;return new JE(new Xn(l),d,u)}var Ef=class e extends Lo{_toFieldTransform(t){if(t.Vu!==2)throw t.Vu===1?t.Su(`${this._methodName}() can only appear at the top level of your update data`):t.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof e}};function BL(e,t,i){return new ov({Vu:3,Du:t.settings.Du,methodName:e._methodName,gu:i},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var eC=class e extends Lo{_toFieldTransform(t){return new $a(t.path,new Ps)}isEqual(t){return t instanceof e}},nC=class e extends Lo{constructor(t,i){super(t),this.vu=i}_toFieldTransform(t){let i=BL(this,t,!0),n=this.vu.map(o=>Za(o,i)),r=new No(n);return new $a(t.path,r)}isEqual(t){return t instanceof e&&H0(this.vu,t.vu)}},iC=class e extends Lo{constructor(t,i){super(t),this.vu=i}_toFieldTransform(t){let i=BL(this,t,!0),n=this.vu.map(o=>Za(o,i)),r=new Fo(n);return new $a(t.path,r)}isEqual(t){return t instanceof e&&H0(this.vu,t.vu)}},rC=class e extends Lo{constructor(t,i){super(t),this.Fu=i}_toFieldTransform(t){let i=new Os(t.serializer,PF(t.serializer,this.Fu));return new $a(t.path,i)}isEqual(t){return t instanceof e&&this.Fu===t.Fu}};function KC(e,t,i,n){let r=e.Cu(1,t,i);QC("Data must be an object, but it was:",r,n);let o=[],s=Xn.empty();Qa(n,(d,u)=>{let f=XC(t,d,i);u=Ne(u);let p=r.yu(f);if(u instanceof Ef)o.push(f);else{let _=Za(u,p);_!=null&&(o.push(f),s.set(f,_))}});let l=new Pi(o);return new rv(s,l,r.fieldTransforms)}function YC(e,t,i,n,r,o){let s=e.Cu(1,t,i),l=[oC(t,n,i)],d=[r];if(o.length%2!=0)throw new U(O.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)l.push(oC(t,o[_])),d.push(o[_+1]);let u=[],f=Xn.empty();for(let _=l.length-1;_>=0;--_)if(!$L(u,l[_])){let y=l[_],S=d[_];S=Ne(S);let A=s.yu(y);if(S instanceof Ef)u.push(y);else{let M=Za(S,A);M!=null&&(u.push(y),f.set(y,M))}}let p=new Pi(u);return new rv(f,p,s.fieldTransforms)}function jL(e,t,i,n=!1){return Za(i,e.Cu(n?4:3,t))}function Za(e,t){if(zL(e=Ne(e)))return QC("Unsupported field value:",t,e),UL(e,t);if(e instanceof Lo)return function(n,r){if(!VL(r.Vu))throw r.Su(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Su(`${n._methodName}() is not currently supported inside arrays`);let o=n._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.gu&&t.Vu!==4)throw t.Su("Nested arrays are not supported");return function(n,r){let o=[],s=0;for(let l of n){let d=Za(l,r.wu(s));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),s++}return{arrayValue:{values:o}}}(e,t)}return function(n,r){if((n=Ne(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return PF(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){let o=Qe.fromDate(n);return{timestampValue:Hc(r.serializer,o)}}if(n instanceof Qe){let o=new Qe(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Hc(r.serializer,o)}}if(n instanceof Ga)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof eo)return{bytesValue:$F(r.serializer,n._byteString)};if(n instanceof Fe){let o=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(o))throw r.Su(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:bC(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Su(`Unsupported field value: ${gv(n)}`)}(e,t)}function UL(e,t){let i={};return pF(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qa(e,(n,r)=>{let o=Za(r,t.fu(n));o!=null&&(i[n]=o)}),{mapValue:{fields:i}}}function zL(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Qe||e instanceof Ga||e instanceof eo||e instanceof Fe||e instanceof Lo)}function QC(e,t,i){if(!zL(i)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(i)){let n=gv(i);throw n==="an object"?t.Su(e+" a custom object"):t.Su(e+" "+n)}}function oC(e,t,i){if((t=Ne(t))instanceof xr)return t._internalPath;if(typeof t=="string")return XC(e,t);throw sv("Field path arguments must be of type string or ",e,!1,void 0,i)}var AY=new RegExp("[~\\*/\\[\\]]");function XC(e,t,i){if(t.search(AY)>=0)throw sv(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,i);try{return new xr(...t.split("."))._internalPath}catch{throw sv(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,i)}}function sv(e,t,i,n,r){let o=n&&!n.isEmpty(),s=r!==void 0,l=`Function ${t}() called with invalid data`;i&&(l+=" (via `toFirestore()`)"),l+=". ";let d="";return(o||s)&&(d+=" (found",o&&(d+=` in field ${n}`),s&&(d+=` in document ${r}`),d+=")"),new U(O.INVALID_ARGUMENT,l+e+d)}function $L(e,t){return e.some(i=>i.isEqual(t))}var Ka=class{constructor(t,i,n,r,o){this._firestore=t,this._userDataWriter=i,this._key=n,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Fe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new sC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let i=this._document.data.field(xv("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}},sC=class extends Ka{data(){return super.data()}};function xv(e,t){return typeof t=="string"?XC(e,t):t instanceof xr?t._internalPath:t._delegate._internalPath}function HL(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new U(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Cf=class{},Ya=class extends Cf{};function no(e,t,...i){let n=[];t instanceof Cf&&n.push(t),n=n.concat(i),function(o){let s=o.filter(d=>d instanceof aC).length,l=o.filter(d=>d instanceof av).length;if(s>1||s>0&&l>0)throw new U(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(let r of n)e=r._apply(e);return e}var av=class e extends Ya{constructor(t,i,n){super(),this._field=t,this._op=i,this._value=n,this.type="where"}static _create(t,i,n){return new e(t,i,n)}_apply(t){let i=this._parse(t);return qL(t._query,i),new zn(t.firestore,t.converter,VI(t._query,i))}_parse(t){let i=Xa(t.firestore);return function(o,s,l,d,u,f,p){let _;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new U(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){iF(p,f);let y=[];for(let S of p)y.push(nF(d,o,S));_={arrayValue:{values:y}}}else _=nF(d,o,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||iF(p,f),_=jL(l,s,p,f==="in"||f==="not-in");return Jt.create(u,f,_)}(t._query,"where",i,t.firestore._databaseId,this._field,this._op,this._value)}};function ZC(e,t,i){let n=t,r=xv("where",e);return av._create(r,n,i)}var aC=class e extends Cf{constructor(t,i){super(),this.type=t,this._queryConstraints=i}static _create(t,i){return new e(t,i)}_parse(t){let i=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return i.length===1?i[0]:we.create(i,this._getOperator())}_apply(t){let i=this._parse(t);return i.getFilters().length===0?t:(function(r,o){let s=r,l=o.getFlattenedFilters();for(let d of l)qL(s,d),s=VI(s,d)}(t._query,i),new zn(t.firestore,t.converter,VI(t._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var lC=class e extends Ya{constructor(t,i){super(),this._field=t,this._direction=i,this.type="orderBy"}static _create(t,i){return new e(t,i)}_apply(t){let i=function(r,o,s){if(r.startAt!==null)throw new U(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new U(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ua(o,s)}(t._query,this._field,this._direction);return new zn(t.firestore,t.converter,function(r,o){let s=r.explicitOrderBy.concat([o]);return new yr(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,i))}};function JC(e,t="asc"){let i=t,n=xv("orderBy",e);return lC._create(n,i)}var lv=class e extends Ya{constructor(t,i,n){super(),this.type=t,this._limit=i,this._limitType=n}static _create(t,i,n){return new e(t,i,n)}_apply(t){return new zn(t.firestore,t.converter,S_(t._query,this._limit,this._limitType))}};function tT(e){return ML("limit",e),lv._create("limit",e,"F")}function eT(e){return ML("limitToLast",e),lv._create("limitToLast",e,"L")}var cv=class e extends Ya{constructor(t,i,n){super(),this.type=t,this._docOrFields=i,this._inclusive=n}static _create(t,i,n){return new e(t,i,n)}_apply(t){let i=WL(t,this.type,this._docOrFields,this._inclusive);return new zn(t.firestore,t.converter,function(r,o){return new yr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(t._query,i))}};function nT(...e){return cv._create("startAt",e,!0)}function iT(...e){return cv._create("startAfter",e,!1)}var dv=class e extends Ya{constructor(t,i,n){super(),this.type=t,this._docOrFields=i,this._inclusive=n}static _create(t,i,n){return new e(t,i,n)}_apply(t){let i=WL(t,this.type,this._docOrFields,this._inclusive);return new zn(t.firestore,t.converter,function(r,o){return new yr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(t._query,i))}};function rT(...e){return dv._create("endBefore",e,!1)}function oT(...e){return dv._create("endAt",e,!0)}function WL(e,t,i,n){if(i[0]=Ne(i[0]),i[0]instanceof Ka)return function(o,s,l,d,u){if(!d)throw new U(O.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);let f=[];for(let p of Fc(o))if(p.field.isKeyField())f.push(ja(s,d.key));else{let _=d.data.field(p.field);if(hv(_))throw new U(O.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(_===null){let y=p.field.canonicalString();throw new U(O.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}f.push(_)}return new Jr(f,u)}(e._query,e.firestore._databaseId,t,i[0]._document,n);{let r=Xa(e.firestore);return function(s,l,d,u,f,p){let _=s.explicitOrderBy;if(f.length>_.length)throw new U(O.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let S=0;S<f.length;S++){let A=f[S];if(_[S].field.isKeyField()){if(typeof A!="string")throw new U(O.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof A}`);if(!_C(s)&&A.indexOf("/")!==-1)throw new U(O.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${A}' contains a slash.`);let M=s.path.child(ae.fromString(A));if(!J.isDocumentKey(M))throw new U(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);let K=new J(M);y.push(ja(l,K))}else{let M=jL(d,u,A);y.push(M)}}return new Jr(y,p)}(e._query,e.firestore._databaseId,r,t,i,n)}}function nF(e,t,i){if(typeof(i=Ne(i))=="string"){if(i==="")throw new U(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_C(t)&&i.indexOf("/")!==-1)throw new U(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);let n=t.path.child(ae.fromString(i));if(!J.isDocumentKey(n))throw new U(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return ja(e,new J(n))}if(i instanceof Fe)return ja(e,i._key);throw new U(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gv(i)}.`)}function iF(e,t){if(!Array.isArray(e)||e.length===0)throw new U(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function qL(e,t){let i=function(r,o){for(let s of r)for(let l of s.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(i!==null)throw i===t.op?new U(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new U(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${i.toString()}' filters.`)}var td=class{convertValue(t,i="none"){switch(Ba(t)){case 0:return null;case 1:return t.booleanValue;case 2:return nn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(Rs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 10:return this.convertObject(t.mapValue,i);default:throw lt()}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){let n={};return Qa(t,(r,o)=>{n[r]=this.convertValue(o,i)}),n}convertGeoPoint(t){return new Ga(nn(t.latitude),nn(t.longitude))}convertArray(t,i){return(t.values||[]).map(n=>this.convertValue(n,i))}convertServerTimestamp(t,i){switch(i){case"previous":let n=pC(t);return n==null?null:this.convertValue(n,i);case"estimate":return this.convertTimestamp(af(t));default:return null}}convertTimestamp(t){let i=Oo(t);return new Qe(i.seconds,i.nanos)}convertDocumentKey(t,i){let n=ae.fromString(t);_t(tL(n));let r=new ks(n.get(1),n.get(3)),o=new J(n.popFirst(5));return r.isEqual(i)||an(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),o}};function Iv(e,t,i){let n;return n=e?i&&(i.merge||i.mergeFields)?e.toFirestore(t,i):e.toFirestore(t):t,n}var cC=class extends td{constructor(t){super(),this.firestore=t}convertBytes(t){return new eo(t)}convertReference(t){let i=this.convertDocumentKey(t,this.firestore._databaseId);return new Fe(this.firestore,null,i)}};var Mo=class{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},nr=class extends Ka{constructor(t,i,n,r,o,s){super(t,i,n,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let i=new As(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){let n=this._document.data.field(xv("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,i.serverTimestamps)}}},As=class extends nr{data(t={}){return super.data(t)}},Ir=class{constructor(t,i,n,r){this._firestore=t,this._userDataWriter=i,this._snapshot=r,this.metadata=new Mo(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let t=[];return this.forEach(i=>t.push(i)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach(n=>{t.call(i,new As(this._firestore,this._userDataWriter,n.key,n,new Mo(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new U(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(l=>{let d=new As(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Mo(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:d,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{let d=new As(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Mo(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),u=-1,f=-1;return l.type!==0&&(u=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),f=s.indexOf(l.doc.key)),{type:DY(l.type),doc:d,oldIndex:u,newIndex:f}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}};function DY(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function Ev(e,t){return e instanceof nr&&t instanceof nr?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(e._document===null?t._document===null:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Ir&&t instanceof Ir&&e._firestore===t._firestore&&yv(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function sT(e){e=le(e,Fe);let t=le(e.firestore,qe);return DL(xn(t),e._key).then(i=>pT(t,e,i))}var Vo=class extends td{constructor(t){super(),this.firestore=t}convertBytes(t){return new eo(t)}convertReference(t){let i=this.convertDocumentKey(t,this.firestore._databaseId);return new Fe(this.firestore,null,i)}};function aT(e){e=le(e,Fe);let t=le(e.firestore,qe),i=xn(t),n=new Vo(t);return xY(i,e._key).then(r=>new nr(t,n,e._key,r,new Mo(r!==null&&r.hasLocalMutations,!0),e.converter))}function lT(e){e=le(e,Fe);let t=le(e.firestore,qe);return DL(xn(t),e._key,{source:"server"}).then(i=>pT(t,e,i))}function cT(e){e=le(e,zn);let t=le(e.firestore,qe),i=xn(t),n=new Vo(t);return HL(e._query),RL(i,e._query).then(r=>new Ir(t,n,e,r))}function dT(e){e=le(e,zn);let t=le(e.firestore,qe),i=xn(t),n=new Vo(t);return IY(i,e._query).then(r=>new Ir(t,n,e,r))}function uT(e){e=le(e,zn);let t=le(e.firestore,qe),i=xn(t),n=new Vo(t);return RL(i,e._query,{source:"server"}).then(r=>new Ir(t,n,e,r))}function Cv(e,t,i){e=le(e,Fe);let n=le(e.firestore,qe),r=Iv(e.converter,t,i);return ld(n,[wv(Xa(n),"setDoc",e._key,r,e.converter!==null,i).toMutation(e._key,rn.none())])}function Tv(e,t,i,...n){e=le(e,Fe);let r=le(e.firestore,qe),o=Xa(r),s;return s=typeof(t=Ne(t))=="string"||t instanceof xr?YC(o,"updateDoc",e._key,t,i,n):KC(o,"updateDoc",e._key,t),ld(r,[s.toMutation(e._key,rn.exists(!0))])}function hT(e){return ld(le(e.firestore,qe),[new Fs(e._key,rn.none())])}function fT(e,t){let i=le(e.firestore,qe),n=ad(e),r=Iv(e.converter,t);return ld(i,[wv(Xa(e.firestore),"addDoc",n._key,r,e.converter!==null,{}).toMutation(n._key,rn.exists(!1))]).then(()=>n)}function Sv(e,...t){var i,n,r;e=Ne(e);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||XE(t[s])||(o=t[s],s++);let l={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(XE(t[s])){let p=t[s];t[s]=(i=p.next)===null||i===void 0?void 0:i.bind(p),t[s+1]=(n=p.error)===null||n===void 0?void 0:n.bind(p),t[s+2]=(r=p.complete)===null||r===void 0?void 0:r.bind(p)}let d,u,f;if(e instanceof Fe)u=le(e.firestore,qe),f=nd(e._key.path),d={next:p=>{t[s]&&t[s](pT(u,e,p))},error:t[s+1],complete:t[s+2]};else{let p=le(e,zn);u=le(p.firestore,qe),f=p._query;let _=new Vo(u);d={next:y=>{t[s]&&t[s](new Ir(u,_,p,y))},error:t[s+1],complete:t[s+2]},HL(e._query)}return function(_,y,S,A){let M=new Zc(A),K=new wf(y,M,S);return _.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return TC(yield Jc(_),K)})),()=>{M.Qa(),_.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return SC(yield Jc(_),K)}))}}(xn(u),f,l,d)}function mT(e,t){return EY(xn(e=le(e,qe)),XE(t)?t:{next:t})}function ld(e,t){return function(n,r){let o=new _n;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return iY(yield FC(n),r,o)})),o.promise}(xn(e),t)}function pT(e,t,i){let n=i.docs.get(t._key),r=new Vo(e);return new nr(e,r,t._key,n,new Mo(i.hasPendingWrites,i.fromCache),t.converter)}var RY={maxAttempts:5};var uv=class{constructor(t,i){this._firestore=t,this._commitHandler=i,this._mutations=[],this._committed=!1,this._dataReader=Xa(t)}set(t,i,n){this._verifyNotCommitted();let r=Ts(t,this._firestore),o=Iv(r.converter,i,n),s=wv(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,n);return this._mutations.push(s.toMutation(r._key,rn.none())),this}update(t,i,n,...r){this._verifyNotCommitted();let o=Ts(t,this._firestore),s;return s=typeof(i=Ne(i))=="string"||i instanceof xr?YC(this._dataReader,"WriteBatch.update",o._key,i,n,r):KC(this._dataReader,"WriteBatch.update",o._key,i),this._mutations.push(s.toMutation(o._key,rn.exists(!0))),this}delete(t){this._verifyNotCommitted();let i=Ts(t,this._firestore);return this._mutations=this._mutations.concat(new Fs(i._key,rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new U(O.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ts(e,t){if((e=Ne(e)).firestore!==t)throw new U(O.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var dC=class extends class{constructor(i,n){this._firestore=i,this._transaction=n,this._dataReader=Xa(i)}get(i){let n=Ts(i,this._firestore),r=new cC(this._firestore);return this._transaction.lookup([n._key]).then(o=>{if(!o||o.length!==1)return lt();let s=o[0];if(s.isFoundDocument())return new Ka(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new Ka(this._firestore,r,n._key,null,n.converter);throw lt()})}set(i,n,r){let o=Ts(i,this._firestore),s=Iv(o.converter,n,r),l=wv(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,r);return this._transaction.set(o._key,l),this}update(i,n,r,...o){let s=Ts(i,this._firestore),l;return l=typeof(n=Ne(n))=="string"||n instanceof xr?YC(this._dataReader,"Transaction.update",s._key,n,r,o):KC(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,l),this}delete(i){let n=Ts(i,this._firestore);return this._transaction.delete(n._key),this}}{constructor(t,i){super(t,i),this._firestore=t}get(t){let i=Ts(t,this._firestore),n=new Vo(this._firestore);return super.get(t).then(r=>new nr(this._firestore,n,i._key,r._document,new Mo(!1,!1),i.converter))}};function gT(e,t,i){e=le(e,qe);let n=Object.assign(Object.assign({},RY),i);return function(o){if(o.maxAttempts<1)throw new U(O.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(o,s,l){let d=new _n;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let u=yield bY(o);new GE(o.asyncQueue,u,l,s,d).Ya()})),d.promise}(xn(e),r=>t(new dC(e,r)),n)}function _T(){return new Ef("deleteField")}function vT(){return new eC("serverTimestamp")}function bT(...e){return new nC("arrayUnion",e)}function yT(...e){return new iC("arrayRemove",e)}function wT(e){return new rC("increment",e)}(function(t,i=!0){(function(r){ed=r})(Lp),ya(new Co("firestore",(n,{instanceIdentifier:r,options:o})=>{let s=n.getProvider("app").getImmediate(),l=new qe(new pI(n.getProvider("auth-internal")),new bI(n.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new U(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ks(u.options.projectId,f)}(s,r),s);return o=Object.assign({useFetchStreams:i},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),Rn(rN,"4.6.0",t),Rn(rN,"4.6.0","esm2017")})();var kY="@firebase/firestore-compat",MY="0.3.29";function ST(e,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new U("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function GL(){if(typeof Uint8Array>"u")throw new U("unimplemented","Uint8Arrays are not available in this environment.")}function KL(){if(!gF())throw new U("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Av=class e{constructor(t){this._delegate=t}static fromBase64String(t){return KL(),new e(eo.fromBase64String(t))}static fromUint8Array(t){return GL(),new e(eo.fromUint8Array(t))}toBase64(){return KL(),this._delegate.toBase64()}toUint8Array(){return GL(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function xT(e){return PY(e,["next","error","complete"])}function PY(e,t){if(typeof e!="object"||e===null)return!1;let i=e;for(let n of t)if(n in i&&typeof i[n]=="function")return!0;return!1}var IT=class{enableIndexedDbPersistence(t,i){return jC(t._delegate,{forceOwnership:i})}enableMultiTabIndexedDbPersistence(t){return UC(t._delegate)}clearIndexedDbPersistence(t){return zC(t._delegate)}},Dv=class{constructor(t,i,n){this._delegate=i,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},t instanceof ks||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){let i=this._delegate._getSettings();!t.merge&&i.host!==t.host&&tr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t=Object.assign(Object.assign({},i),t),delete t.merge),this._delegate._setSettings(t)}useEmulator(t,i,n={}){_v(this._delegate,t,i,n)}enableNetwork(){return HC(this._delegate)}disableNetwork(){return WC(this._delegate)}enablePersistence(t){let i=!1,n=!1;return t&&(i=!!t.synchronizeTabs,n=!!t.experimentalForceOwningTab,VC("synchronizeTabs",i,"experimentalForceOwningTab",n)),i?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return $C(this._delegate)}onSnapshotsInSync(t){return mT(this._delegate,t)}get app(){if(!this._appCompat)throw new U("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new ud(this,vv(this._delegate,t))}catch(i){throw di(i,"collection()","Firestore.collection()")}}doc(t){try{return new io(this,ad(this._delegate,t))}catch(i){throw di(i,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new nl(this,BC(this._delegate,t))}catch(i){throw di(i,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return gT(this._delegate,i=>t(new Rv(this,i)))}batch(){return xn(this._delegate),new kv(new uv(this._delegate,t=>ld(this._delegate,t)))}loadBundle(t){return qC(this._delegate,t)}namedQuery(t){return GC(this._delegate,t).then(i=>i?new nl(this,i):null)}},cd=class extends td{constructor(t){super(),this.firestore=t}convertBytes(t){return new Av(new eo(t))}convertReference(t){let i=this.convertDocumentKey(t,this.firestore._databaseId);return io.forKey(i,this.firestore,null)}};function OY(e){uC(e)}var Rv=class{constructor(t,i){this._firestore=t,this._delegate=i,this._userDataWriter=new cd(t)}get(t){let i=Ja(t);return this._delegate.get(i).then(n=>new tl(this._firestore,new nr(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,i.converter)))}set(t,i,n){let r=Ja(t);return n?(ST("Transaction.set",n),this._delegate.set(r,i,n)):this._delegate.set(r,i),this}update(t,i,n,...r){let o=Ja(t);return arguments.length===2?this._delegate.update(o,i):this._delegate.update(o,i,n,...r),this}delete(t){let i=Ja(t);return this._delegate.delete(i),this}},kv=class{constructor(t){this._delegate=t}set(t,i,n){let r=Ja(t);return n?(ST("WriteBatch.set",n),this._delegate.set(r,i,n)):this._delegate.set(r,i),this}update(t,i,n,...r){let o=Ja(t);return arguments.length===2?this._delegate.update(o,i):this._delegate.update(o,i,n,...r),this}delete(t){let i=Ja(t);return this._delegate.delete(i),this}commit(){return this._delegate.commit()}},dd=class e{constructor(t,i,n){this._firestore=t,this._userDataWriter=i,this._delegate=n}fromFirestore(t,i){let n=new As(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new el(this._firestore,n),i??{})}toFirestore(t,i){return i?this._delegate.toFirestore(t,i):this._delegate.toFirestore(t)}static getInstance(t,i){let n=e.INSTANCES,r=n.get(t);r||(r=new WeakMap,n.set(t,r));let o=r.get(i);return o||(o=new e(t,new cd(t),i),r.set(i,o)),o}};dd.INSTANCES=new WeakMap;var io=class e{constructor(t,i){this.firestore=t,this._delegate=i,this._userDataWriter=new cd(t)}static forPath(t,i,n){if(t.length%2!==0)throw new U("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new e(i,new Fe(i._delegate,n,new J(t)))}static forKey(t,i,n){return new e(i,new Fe(i._delegate,n,t))}get id(){return this._delegate.id}get parent(){return new ud(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new ud(this.firestore,vv(this._delegate,t))}catch(i){throw di(i,"collection()","DocumentReference.collection()")}}isEqual(t){return t=Ne(t),t instanceof Fe?bv(this._delegate,t):!1}set(t,i){i=ST("DocumentReference.set",i);try{return i?Cv(this._delegate,t,i):Cv(this._delegate,t)}catch(n){throw di(n,"setDoc()","DocumentReference.set()")}}update(t,i,...n){try{return arguments.length===1?Tv(this._delegate,t):Tv(this._delegate,t,i,...n)}catch(r){throw di(r,"updateDoc()","DocumentReference.update()")}}delete(){return hT(this._delegate)}onSnapshot(...t){let i=YL(t),n=QL(t,r=>new tl(this.firestore,new nr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return Sv(this._delegate,i,n)}get(t){let i;return t?.source==="cache"?i=aT(this._delegate):t?.source==="server"?i=lT(this._delegate):i=sT(this._delegate),i.then(n=>new tl(this.firestore,new nr(this.firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,this._delegate.converter)))}withConverter(t){return new e(this.firestore,t?this._delegate.withConverter(dd.getInstance(this.firestore,t)):this._delegate.withConverter(null))}};function di(e,t,i){return e.message=e.message.replace(t,i),e}function YL(e){for(let t of e)if(typeof t=="object"&&!xT(t))return t;return{}}function QL(e,t){var i,n;let r;return xT(e[0])?r=e[0]:xT(e[1])?r=e[1]:typeof e[0]=="function"?r={next:e[0],error:e[1],complete:e[2]}:r={next:e[1],error:e[2],complete:e[3]},{next:o=>{r.next&&r.next(t(o))},error:(i=r.error)===null||i===void 0?void 0:i.bind(r),complete:(n=r.complete)===null||n===void 0?void 0:n.bind(r)}}var tl=class{constructor(t,i){this._firestore=t,this._delegate=i}get ref(){return new io(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,i){return this._delegate.get(t,i)}isEqual(t){return Ev(this._delegate,t._delegate)}},el=class extends tl{data(t){let i=this._delegate.data(t);return this._delegate._converter||rF(i!==void 0,"Document in a QueryDocumentSnapshot should exist"),i}},nl=class e{constructor(t,i){this.firestore=t,this._delegate=i,this._userDataWriter=new cd(t)}where(t,i,n){try{return new e(this.firestore,no(this._delegate,ZC(t,i,n)))}catch(r){throw di(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,i){try{return new e(this.firestore,no(this._delegate,JC(t,i)))}catch(n){throw di(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new e(this.firestore,no(this._delegate,tT(t)))}catch(i){throw di(i,"limit()","Query.limit()")}}limitToLast(t){try{return new e(this.firestore,no(this._delegate,eT(t)))}catch(i){throw di(i,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new e(this.firestore,no(this._delegate,nT(...t)))}catch(i){throw di(i,"startAt()","Query.startAt()")}}startAfter(...t){try{return new e(this.firestore,no(this._delegate,iT(...t)))}catch(i){throw di(i,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new e(this.firestore,no(this._delegate,rT(...t)))}catch(i){throw di(i,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new e(this.firestore,no(this._delegate,oT(...t)))}catch(i){throw di(i,"endAt()","Query.endAt()")}}isEqual(t){return yv(this._delegate,t._delegate)}get(t){let i;return t?.source==="cache"?i=dT(this._delegate):t?.source==="server"?i=uT(this._delegate):i=cT(this._delegate),i.then(n=>new Mf(this.firestore,new Ir(this.firestore._delegate,this._userDataWriter,this._delegate,n._snapshot)))}onSnapshot(...t){let i=YL(t),n=QL(t,r=>new Mf(this.firestore,new Ir(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return Sv(this._delegate,i,n)}withConverter(t){return new e(this.firestore,t?this._delegate.withConverter(dd.getInstance(this.firestore,t)):this._delegate.withConverter(null))}},ET=class{constructor(t,i){this._firestore=t,this._delegate=i}get type(){return this._delegate.type}get doc(){return new el(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Mf=class{constructor(t,i){this._firestore=t,this._delegate=i}get query(){return new nl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new el(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(i=>new ET(this._firestore,i))}forEach(t,i){this._delegate.forEach(n=>{t.call(i,new el(this._firestore,n))})}isEqual(t){return Ev(this._delegate,t._delegate)}},ud=class e extends nl{constructor(t,i){super(t,i),this.firestore=t,this._delegate=i}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let t=this._delegate.parent;return t?new io(this.firestore,t):null}doc(t){try{return t===void 0?new io(this.firestore,ad(this._delegate)):new io(this.firestore,ad(this._delegate,t))}catch(i){throw di(i,"doc()","CollectionReference.doc()")}}add(t){return fT(this._delegate,t).then(i=>new io(this.firestore,i))}isEqual(t){return bv(this._delegate,t._delegate)}withConverter(t){return new e(this.firestore,t?this._delegate.withConverter(dd.getInstance(this.firestore,t)):this._delegate.withConverter(null))}};function Ja(e){return le(e,Fe)}var CT=class e{constructor(...t){this._delegate=new xr(...t)}static documentId(){return new e(ln.keyField().canonicalString())}isEqual(t){return t=Ne(t),t instanceof xr?this._delegate._internalPath.isEqual(t._internalPath):!1}};var TT=class e{constructor(t){this._delegate=t}static serverTimestamp(){let t=vT();return t._methodName="FieldValue.serverTimestamp",new e(t)}static delete(){let t=_T();return t._methodName="FieldValue.delete",new e(t)}static arrayUnion(...t){let i=bT(...t);return i._methodName="FieldValue.arrayUnion",new e(i)}static arrayRemove(...t){let i=yT(...t);return i._methodName="FieldValue.arrayRemove",new e(i)}static increment(t){let i=wT(t);return i._methodName="FieldValue.increment",new e(i)}isEqual(t){return this._delegate.isEqual(t._delegate)}};var NY={Firestore:Dv,GeoPoint:Ga,Timestamp:Qe,Blob:Av,Transaction:Rv,WriteBatch:kv,DocumentReference:io,DocumentSnapshot:tl,Query:nl,QueryDocumentSnapshot:el,QuerySnapshot:Mf,CollectionReference:ud,FieldPath:CT,FieldValue:TT,setLogLevel:OY,CACHE_SIZE_UNLIMITED:PL};function FY(e,t){e.INTERNAL.registerComponent(new Co("firestore-compat",i=>{let n=i.getProvider("app-compat").getImmediate(),r=i.getProvider("firestore").getImmediate();return t(n,r)},"PUBLIC").setServiceProps(Object.assign({},NY)))}function LY(e){FY(e,(t,i)=>new Dv(t,i,new IT)),e.registerVersion(kY,MY)}LY(gi);function VY(e,t=pp){return new Wn(i=>{let n;return t!=null?t.schedule(()=>{n=e.onSnapshot({includeMetadataChanges:!0},i)}):n=e.onSnapshot({includeMetadataChanges:!0},i),()=>{n?.()}})}function XL(e,t){return VY(e,t)}function BY(e,t){return XL(e,t).pipe(qn(void 0),Tu(),dt(i=>{let[n,r]=i;return r.exists?n?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function RT(e,t){return XL(e,t).pipe(dt(i=>({payload:i,type:"query"})))}var Mv=class{ref;afs;constructor(t,i){this.ref=t,this.afs=i}set(t,i){return this.ref.set(t,i)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,i){let n=this.ref.collection(t),{ref:r,query:o}=tV(n,i);return new Ov(r,o,this.afs)}snapshotChanges(){return BY(this.ref,this.afs.schedulers.outsideAngular).pipe(si)}valueChanges(t={}){return this.snapshotChanges().pipe(dt(({payload:i})=>t.idField?xe(G({},i.data()),{[t.idField]:i.id}):i.data()))}get(t){return Re(this.ref.get(t)).pipe(si)}};function Pv(e,t){return RT(e,t).pipe(qn(void 0),Tu(),dt(i=>{let[n,r]=i,o=r.payload.docChanges(),s=o.map(l=>({type:l.type,payload:l}));return n&&JSON.stringify(n.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,d)=>{let u=o.find(p=>p.doc.ref.isEqual(l.ref)),f=n?.payload.docs.find(p=>p.ref.isEqual(l.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(l.metadata)||!u&&f&&JSON.stringify(f.metadata)===JSON.stringify(l.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),s}))}function ZL(e,t,i){return Pv(e,i).pipe(Nl((n,r)=>jY(n,r.map(o=>o.payload),t),[]),ua(),dt(n=>n.map(r=>({type:r.type,payload:r}))))}function jY(e,t,i){return t.forEach(n=>{i.indexOf(n.type)>-1&&(e=UY(e,n))}),e}function AT(e,t,i,...n){let r=e.slice();return r.splice(t,i,...n),r}function UY(e,t){switch(t.type){case"added":if(!(e[t.newIndex]&&e[t.newIndex].doc.ref.isEqual(t.doc.ref)))return AT(e,t.newIndex,0,t);break;case"modified":if(e[t.oldIndex]==null||e[t.oldIndex].doc.ref.isEqual(t.doc.ref))if(t.oldIndex!==t.newIndex){let i=e.slice();return i.splice(t.oldIndex,1),i.splice(t.newIndex,0,t),i}else return AT(e,t.newIndex,1,t);break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return AT(e,t.oldIndex,1);break}return e}function JL(e){return(!e||e.length===0)&&(e=["added","removed","modified"]),e}var Ov=class{ref;query;afs;constructor(t,i,n){this.ref=t,this.query=i,this.afs=n}stateChanges(t){let i=Pv(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(i=i.pipe(dt(n=>n.filter(r=>t.indexOf(r.type)>-1)))),i.pipe(qn(void 0),Tu(),me(([n,r])=>r.length>0||!n),dt(([,n])=>n),si)}auditTrail(t){return this.stateChanges(t).pipe(Nl((i,n)=>[...i,...n],[]))}snapshotChanges(t){let i=JL(t);return ZL(this.query,i,this.afs.schedulers.outsideAngular).pipe(si)}valueChanges(t={}){return RT(this.query,this.afs.schedulers.outsideAngular).pipe(dt(i=>i.payload.docs.map(n=>t.idField?xe(G({},n.data()),{[t.idField]:n.id}):n.data())),si)}get(t){return Re(this.query.get(t)).pipe(si)}add(t){return this.ref.add(t)}doc(t){return new Mv(this.ref.doc(t),this.afs)}},DT=class{query;afs;constructor(t,i){this.query=t,this.afs=i}stateChanges(t){return!t||t.length===0?Pv(this.query,this.afs.schedulers.outsideAngular).pipe(si):Pv(this.query,this.afs.schedulers.outsideAngular).pipe(dt(i=>i.filter(n=>t.indexOf(n.type)>-1)),me(i=>i.length>0),si)}auditTrail(t){return this.stateChanges(t).pipe(Nl((i,n)=>[...i,...n],[]))}snapshotChanges(t){let i=JL(t);return ZL(this.query,i,this.afs.schedulers.outsideAngular).pipe(si)}valueChanges(t={}){return RT(this.query,this.afs.schedulers.outsideAngular).pipe(dt(n=>n.payload.docs.map(r=>t.idField?G({[t.idField]:r.id},r.data()):r.data())),si)}get(t){return Re(this.query.get(t)).pipe(si)}},zY=new H("angularfire2.enableFirestorePersistence"),$Y=new H("angularfire2.firestore.persistenceSettings"),HY=new H("angularfire2.firestore.settings"),WY=new H("angularfire2.firestore.use-emulator");function tV(e,t=i=>i){return{query:t(e),ref:e}}var ir=(()=>{class e{schedulers;firestore;persistenceEnabled$;constructor(i,n,r,o,s,l,d,u,f,p,_,y,S,A,M,K,ut){this.schedulers=d;let Y=wh(i,l,n),Rt=f;p&&vx(Y,l,_,S,A,M,y,K),[this.firestore,this.persistenceEnabled$]=Rg(`${Y.name}.firestore`,"AngularFirestore",Y.name,()=>{let kt=l.runOutsideAngular(()=>Y.firestore());if(o&&kt.settings(o),Rt&&kt.useEmulator(...Rt),r&&!Eo(s)){let Kt=()=>{try{return Re(kt.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(Ue){return typeof console<"u"&&console.warn(Ue),tt(!1)}};return[kt,l.runOutsideAngular(Kt)]}else return[kt,tt(!1)]},[o,Rt,r])}collection(i,n){let r;typeof i=="string"?r=this.firestore.collection(i):r=i;let{ref:o,query:s}=tV(r,n),l=this.schedulers.ngZone.run(()=>o);return new Ov(l,s,this)}collectionGroup(i,n){let r=n||(s=>s),o=this.firestore.collectionGroup(i);return new DT(r(o),this)}doc(i){let n;typeof i=="string"?n=this.firestore.doc(i):n=i;let r=this.schedulers.ngZone.run(()=>n);return new Mv(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(n){return new(n||e)(T(_c),T(vc,8),T(zY,8),T(HY,8),T(ri),T(Q),T($r),T($Y,8),T(WY,8),T(xh,8),T(hx,8),T(fx,8),T(mx,8),T(px,8),T(gx,8),T(_x,8),T(Ri,8))};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})();var fd=(()=>{let t=class t{constructor(n){this.afs=n}getCategories(){return this.afs.collection("categories").valueChanges().pipe(dt(n=>n.map(r=>r.name)))}};t.\u0275fac=function(r){return new(r||t)(T(ir))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var PT;try{PT=typeof Intl<"u"&&Intl.v8BreakIterator}catch{PT=!1}var te=(()=>{let t=class t{constructor(n){this._platformId=n,this.isBrowser=this._platformId?_k(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||PT)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};t.\u0275fac=function(r){return new(r||t)(T(ri))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var md,eV=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function OT(){if(md)return md;if(typeof document!="object"||!document)return md=new Set(eV),md;let e=document.createElement("input");return md=new Set(eV.filter(t=>(e.setAttribute("type",t),e.type===t))),md}var Pf;function qY(){if(Pf==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Pf=!0}))}finally{Pf=Pf||!1}return Pf}function rr(e){return qY()?e:!!e.capture}var il;function nV(){if(il==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return il=!1,il;if("scrollBehavior"in document.documentElement.style)il=!0;else{let e=Element.prototype.scrollTo;e?il=!/\{\s*\[native code\]\s*\}/.test(e.toString()):il=!1}}return il}var MT;function GY(){if(MT==null){let e=typeof document<"u"?document.head:null;MT=!!(e&&(e.createShadowRoot||e.attachShadow))}return MT}function iV(e){if(GY()){let t=e.getRootNode?e.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Er(e){return e.composedPath?e.composedPath()[0]:e.target}function Of(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Ni(e,...t){return t.length?t.some(i=>e[i]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}function ro(e){return e!=null&&`${e}`!="false"}function pd(e,t=0){return NT(e)?Number(e):t}function NT(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}function gd(e){return Array.isArray(e)?e:[e]}function dn(e){return e==null?"":typeof e=="string"?e:`${e}px`}function or(e){return e instanceof gt?e.nativeElement:e}var KY=(()=>{let t=class t{create(n){return typeof MutationObserver>"u"?null:new MutationObserver(n)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Nv=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({providers:[KY]});let e=t;return e})();var rV=new Set,rl,YY=(()=>{let t=class t{constructor(n,r){this._platform=n,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):XY}matchMedia(n){return(this._platform.WEBKIT||this._platform.BLINK)&&QY(n,this._nonce),this._matchMedia(n)}};t.\u0275fac=function(r){return new(r||t)(T(te),T(Ru,8))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function QY(e,t){if(!rV.has(e))try{rl||(rl=document.createElement("style"),t&&rl.setAttribute("nonce",t),rl.setAttribute("type","text/css"),document.head.appendChild(rl)),rl.sheet&&(rl.sheet.insertRule(`@media ${e} {body{ }}`,0),rV.add(e))}catch(i){console.error(i)}}function XY(e){return{matches:e==="all"||e==="",media:e,addListener:()=>{},removeListener:()=>{}}}var Fv=(()=>{let t=class t{constructor(n,r){this._mediaMatcher=n,this._zone=r,this._queries=new Map,this._destroySubject=new at}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(n){return oV(gd(n)).some(o=>this._registerQuery(o).mql.matches)}observe(n){let o=oV(gd(n)).map(l=>this._registerQuery(l).observable),s=Or(o);return s=gp(s.pipe($e(1)),s.pipe(bp(1),vp(0))),s.pipe(dt(l=>{let d={matches:!1,breakpoints:{}};return l.forEach(({matches:u,query:f})=>{d.matches=d.matches||u,d.breakpoints[f]=u}),d}))}_registerQuery(n){if(this._queries.has(n))return this._queries.get(n);let r=this._mediaMatcher.matchMedia(n),s={observable:new Wn(l=>{let d=u=>this._zone.run(()=>l.next(u));return r.addListener(d),()=>{r.removeListener(d)}}).pipe(qn(r),dt(({matches:l})=>({query:n,matches:l})),Lt(this._destroySubject)),mql:r};return this._queries.set(n,s),s}};t.\u0275fac=function(r){return new(r||t)(T(YY),T(Q))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function oV(e){return e.map(t=>t.split(",")).reduce((t,i)=>t.concat(i)).map(t=>t.trim())}var sV={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};var dV=" ";function jT(e,t,i){let n=jv(e,t);i=i.trim(),!n.some(r=>r.trim()===i)&&(n.push(i),e.setAttribute(t,n.join(dV)))}function Hv(e,t,i){let n=jv(e,t);i=i.trim();let r=n.filter(o=>o!==i);r.length?e.setAttribute(t,r.join(dV)):e.removeAttribute(t)}function jv(e,t){return e.getAttribute(t)?.match(/\S+/g)??[]}var uV="cdk-describedby-message",Lv="cdk-describedby-host",VT=0,Wv=(()=>{let t=class t{constructor(n,r){this._platform=r,this._messageRegistry=new Map,this._messagesContainer=null,this._id=`${VT++}`,this._document=n,this._id=W(Bl)+"-"+VT++}describe(n,r,o){if(!this._canBeDescribed(n,r))return;let s=FT(r,o);typeof r!="string"?(aV(r,this._id),this._messageRegistry.set(s,{messageElement:r,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(r,o),this._isElementDescribedByMessage(n,s)||this._addMessageReference(n,s)}removeDescription(n,r,o){if(!r||!this._isElementNode(n))return;let s=FT(r,o);if(this._isElementDescribedByMessage(n,s)&&this._removeMessageReference(n,s),typeof r=="string"){let l=this._messageRegistry.get(s);l&&l.referenceCount===0&&this._deleteMessageElement(s)}this._messagesContainer?.childNodes.length===0&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){let n=this._document.querySelectorAll(`[${Lv}="${this._id}"]`);for(let r=0;r<n.length;r++)this._removeCdkDescribedByReferenceIds(n[r]),n[r].removeAttribute(Lv);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(n,r){let o=this._document.createElement("div");aV(o,this._id),o.textContent=n,r&&o.setAttribute("role",r),this._createMessagesContainer(),this._messagesContainer.appendChild(o),this._messageRegistry.set(FT(n,r),{messageElement:o,referenceCount:0})}_deleteMessageElement(n){this._messageRegistry.get(n)?.messageElement?.remove(),this._messageRegistry.delete(n)}_createMessagesContainer(){if(this._messagesContainer)return;let n="cdk-describedby-message-container",r=this._document.querySelectorAll(`.${n}[platform="server"]`);for(let s=0;s<r.length;s++)r[s].remove();let o=this._document.createElement("div");o.style.visibility="hidden",o.classList.add(n),o.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&o.setAttribute("platform","server"),this._document.body.appendChild(o),this._messagesContainer=o}_removeCdkDescribedByReferenceIds(n){let r=jv(n,"aria-describedby").filter(o=>o.indexOf(uV)!=0);n.setAttribute("aria-describedby",r.join(" "))}_addMessageReference(n,r){let o=this._messageRegistry.get(r);jT(n,"aria-describedby",o.messageElement.id),n.setAttribute(Lv,this._id),o.referenceCount++}_removeMessageReference(n,r){let o=this._messageRegistry.get(r);o.referenceCount--,Hv(n,"aria-describedby",o.messageElement.id),n.removeAttribute(Lv)}_isElementDescribedByMessage(n,r){let o=jv(n,"aria-describedby"),s=this._messageRegistry.get(r),l=s&&s.messageElement.id;return!!l&&o.indexOf(l)!=-1}_canBeDescribed(n,r){if(!this._isElementNode(n))return!1;if(r&&typeof r=="object")return!0;let o=r==null?"":`${r}`.trim(),s=n.getAttribute("aria-label");return o?!s||s.trim()!==o:!1}_isElementNode(n){return n.nodeType===this._document.ELEMENT_NODE}};t.\u0275fac=function(r){return new(r||t)(T(xt),T(te))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function FT(e,t){return typeof e=="string"?`${t||""}/${e}`:e}function aV(e,t){e.id||(e.id=`${uV}-${t}-${VT++}`)}var Uv=class{constructor(t,i){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new at,this._typeaheadSubscription=un.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=n=>n.disabled,this._pressedLetters=[],this.tabOut=new at,this.change=new at,t instanceof Du?this._itemChangesSubscription=t.changes.subscribe(n=>this._itemsChanged(n.toArray())):O0(t)&&(this._effectRef=lk(()=>this._itemsChanged(t()),{injector:i}))}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Me(i=>this._pressedLetters.push(i)),vp(t),me(()=>this._pressedLetters.length>0),dt(()=>this._pressedLetters.join(""))).subscribe(i=>{let n=this._getItemsArray();for(let r=1;r<n.length+1;r++){let o=(this._activeItemIndex+r)%n.length,s=n[o];if(!this._skipPredicateFn(s)&&s.getLabel().toUpperCase().trim().indexOf(i)===0){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,i=10){return this._pageUpAndDown={enabled:t,delta:i},this}setActiveItem(t){let i=this._activeItem;this.updateActiveItem(t),this._activeItem!==i&&this.change.next(this._activeItemIndex)}onKeydown(t){let i=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!t[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(i){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(o<s?o:s-1,-1);break}else return;default:(r||Ni(t,"shiftKey"))&&(t.key&&t.key.length===1?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(i>=65&&i<=90||i>=48&&i<=57)&&this._letterKeyStream.next(String.fromCharCode(i)));return}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){let i=this._getItemsArray(),n=typeof t=="number"?t:i.indexOf(t),r=i[n];this._activeItem=r??null,this._activeItemIndex=n}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){let i=this._getItemsArray();for(let n=1;n<=i.length;n++){let r=(this._activeItemIndex+t*n+i.length)%i.length,o=i[r];if(!this._skipPredicateFn(o)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,i){let n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(t+=i,!n[t])return;this.setActiveItem(t)}}_getItemsArray(){return O0(this._items)?this._items():this._items instanceof Du?this._items.toArray():this._items}_itemsChanged(t){if(this._activeItem){let i=t.indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}}},zv=class extends Uv{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}},$v=class extends Uv{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}};function Nf(e){return e.buttons===0||e.detail===0}function Ff(e){let t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var h7=new H("cdk-input-modality-detector-options"),f7={ignoreKeys:[18,17,224,91,16]},hV=650,_d=rr({passive:!0,capture:!0}),m7=(()=>{let t=class t{get mostRecentModality(){return this._modality.value}constructor(n,r,o,s){this._platform=n,this._mostRecentTarget=null,this._modality=new Je(null),this._lastTouchMs=0,this._onKeydown=l=>{this._options?.ignoreKeys?.some(d=>d===l.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Er(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<hV||(this._modality.next(Nf(l)?"keyboard":"mouse"),this._mostRecentTarget=Er(l))},this._onTouchstart=l=>{if(Ff(l)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Er(l)},this._options=G(G({},f7),s),this.modalityDetected=this._modality.pipe(bp(1)),this.modalityChanged=this.modalityDetected.pipe(ua()),n.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,_d),o.addEventListener("mousedown",this._onMousedown,_d),o.addEventListener("touchstart",this._onTouchstart,_d)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,_d),document.removeEventListener("mousedown",this._onMousedown,_d),document.removeEventListener("touchstart",this._onTouchstart,_d))}};t.\u0275fac=function(r){return new(r||t)(T(te),T(Q),T(xt),T(h7,8))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),p7=new H("liveAnnouncerElement",{providedIn:"root",factory:g7});function g7(){return null}var _7=new H("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),v7=0,qv=(()=>{let t=class t{constructor(n,r,o,s){this._ngZone=r,this._defaultOptions=s,this._document=o,this._liveElement=n||this._createLiveElement()}announce(n,...r){let o=this._defaultOptions,s,l;return r.length===1&&typeof r[0]=="number"?l=r[0]:[s,l]=r,this.clear(),clearTimeout(this._previousTimeout),s||(s=o&&o.politeness?o.politeness:"polite"),l==null&&o&&(l=o.duration),this._liveElement.setAttribute("aria-live",s),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(d=>this._currentResolve=d)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=n,typeof l=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),l)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let n="cdk-live-announcer-element",r=this._document.getElementsByClassName(n),o=this._document.createElement("div");for(let s=0;s<r.length;s++)r[s].remove();return o.classList.add(n),o.classList.add("cdk-visually-hidden"),o.setAttribute("aria-atomic","true"),o.setAttribute("aria-live","polite"),o.id=`cdk-live-announcer-${v7++}`,this._document.body.appendChild(o),o}_exposeAnnouncerToModals(n){let r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<r.length;o++){let s=r[o],l=s.getAttribute("aria-owns");l?l.indexOf(n)===-1&&s.setAttribute("aria-owns",l+" "+n):s.setAttribute("aria-owns",n)}}};t.\u0275fac=function(r){return new(r||t)(T(p7,8),T(Q),T(xt),T(_7,8))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Bv=function(e){return e[e.IMMEDIATE=0]="IMMEDIATE",e[e.EVENTUAL=1]="EVENTUAL",e}(Bv||{}),b7=new H("cdk-focus-monitor-default-options"),Vv=rr({passive:!0,capture:!0}),jo=(()=>{let t=class t{constructor(n,r,o,s,l){this._ngZone=n,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new at,this._rootNodeFocusAndBlurListener=d=>{let u=Er(d);for(let f=u;f;f=f.parentElement)d.type==="focus"?this._onFocus(d,f):this._onBlur(d,f)},this._document=s,this._detectionMode=l?.detectionMode||Bv.IMMEDIATE}monitor(n,r=!1){let o=or(n);if(!this._platform.isBrowser||o.nodeType!==1)return tt();let s=iV(o)||this._getDocument(),l=this._elementInfo.get(o);if(l)return r&&(l.checkChildren=!0),l.subject;let d={checkChildren:r,subject:new at,rootNode:s};return this._elementInfo.set(o,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(n){let r=or(n),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(n,r,o){let s=or(n),l=this._getDocument().activeElement;s===l?this._getClosestElementsInfo(s).forEach(([d,u])=>this._originChanged(d,r,u)):(this._setOrigin(r),typeof s.focus=="function"&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((n,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(n){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(n)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:n&&this._isLastInteractionFromInputLabel(n)?"mouse":"program"}_shouldBeAttributedToTouch(n){return this._detectionMode===Bv.EVENTUAL||!!n?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(n,r){n.classList.toggle("cdk-focused",!!r),n.classList.toggle("cdk-touch-focused",r==="touch"),n.classList.toggle("cdk-keyboard-focused",r==="keyboard"),n.classList.toggle("cdk-mouse-focused",r==="mouse"),n.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(n,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=n,this._originFromTouchInteraction=n==="touch"&&r,this._detectionMode===Bv.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?hV:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(n,r){let o=this._elementInfo.get(r),s=Er(n);!o||!o.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),o)}_onBlur(n,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&n.relatedTarget instanceof Node&&r.contains(n.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(n,r){n.subject.observers.length&&this._ngZone.run(()=>n.subject.next(r))}_registerGlobalListeners(n){if(!this._platform.isBrowser)return;let r=n.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Vv),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Vv)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Lt(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(n){let r=n.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Vv),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Vv),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(n,r,o){this._setClasses(n,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(n){let r=[];return this._elementInfo.forEach((o,s)=>{(s===n||o.checkChildren&&s.contains(n))&&r.push([s,o])}),r}_isLastInteractionFromInputLabel(n){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===n||n.nodeName!=="INPUT"&&n.nodeName!=="TEXTAREA"||n.disabled)return!1;let s=n.labels;if(s){for(let l=0;l<s.length;l++)if(s[l].contains(r))return!0}return!1}};t.\u0275fac=function(r){return new(r||t)(T(Q),T(te),T(m7),T(xt,8),T(b7,8))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var ol=function(e){return e[e.NONE=0]="NONE",e[e.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",e[e.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",e}(ol||{}),lV="cdk-high-contrast-black-on-white",cV="cdk-high-contrast-white-on-black",LT="cdk-high-contrast-active",UT=(()=>{let t=class t{constructor(n,r){this._platform=n,this._document=r,this._breakpointSubscription=W(Fv).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return ol.NONE;let n=this._document.createElement("div");n.style.backgroundColor="rgb(1,2,3)",n.style.position="absolute",this._document.body.appendChild(n);let r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(n):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(n.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return ol.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return ol.BLACK_ON_WHITE}return ol.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let n=this._document.body.classList;n.remove(LT,lV,cV),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===ol.BLACK_ON_WHITE?n.add(LT,lV):r===ol.WHITE_ON_BLACK&&n.add(LT,cV)}}};t.\u0275fac=function(r){return new(r||t)(T(te),T(xt))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),fV=(()=>{let t=class t{constructor(n){n._applyBodyHighContrastModeCssClasses()}};t.\u0275fac=function(r){return new(r||t)(T(UT))},t.\u0275mod=st({type:t}),t.\u0275inj=ot({imports:[Nv]});let e=t;return e})();var y7=new H("cdk-dir-doc",{providedIn:"root",factory:w7});function w7(){return W(xt)}var x7=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function I7(e){let t=e?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?x7.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var Fi=(()=>{let t=class t{constructor(n){if(this.value="ltr",this.change=new qt,n){let r=n.body?n.body.dir:null,o=n.documentElement?n.documentElement.dir:null;this.value=I7(r||o||"ltr")}}ngOnDestroy(){this.change.complete()}};t.\u0275fac=function(r){return new(r||t)(T(y7,8))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Us=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({});let e=t;return e})();var E7=["text"],C7=[[["mat-icon"]],"*"],T7=["mat-icon","*"];function S7(e,t){if(e&1&&ht(0,"mat-pseudo-checkbox",1),e&2){let i=wt();pt("disabled",i.disabled)("state",i.selected?"checked":"unchecked")}}function A7(e,t){if(e&1&&ht(0,"mat-pseudo-checkbox",3),e&2){let i=wt();pt("disabled",i.disabled)}}function D7(e,t){if(e&1&&(D(0,"span",4),Z(1),R()),e&2){let i=wt();j(),An("(",i.group.label,")")}}var xV=(()=>{let t=class t{};t.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",t.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",t.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",t.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)";let e=t;return e})(),IV=(()=>{let t=class t{};t.COMPLEX="375ms",t.ENTERING="225ms",t.EXITING="195ms";let e=t;return e})();function R7(){return!0}var k7=new H("mat-sanity-checks",{providedIn:"root",factory:R7}),Gt=(()=>{let t=class t{constructor(n,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,n._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(n){return Of()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[n]}};t.\u0275fac=function(r){return new(r||t)(T(UT),T(k7,8),T(xt))},t.\u0275mod=st({type:t}),t.\u0275inj=ot({imports:[Us,Us]});let e=t;return e})();var Ed=class{constructor(t,i,n,r,o){this._defaultMatcher=t,this.ngControl=i,this._parentFormGroup=n,this._parentForm=r,this._stateChanges=o,this.errorState=!1}updateErrorState(){let t=this.errorState,i=this._parentFormGroup||this._parentForm,n=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,o=n?.isErrorState(r,i)??!1;o!==t&&(this.errorState=o,this._stateChanges.next())}};var Kv=(()=>{let t=class t{isErrorState(n,r){return!!(n&&n.invalid&&(n.touched||r&&r.submitted))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var sr=function(e){return e[e.FADING_IN=0]="FADING_IN",e[e.VISIBLE=1]="VISIBLE",e[e.FADING_OUT=2]="FADING_OUT",e[e.HIDDEN=3]="HIDDEN",e}(sr||{}),HT=class{constructor(t,i,n,r=!1){this._renderer=t,this.element=i,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=sr.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},mV=rr({passive:!0,capture:!0}),WT=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let i=Er(t);i&&this._events.get(t.type)?.forEach((n,r)=>{(r===i||r.contains(i))&&n.forEach(o=>o.handleEvent(t))})}}addHandler(t,i,n,r){let o=this._events.get(i);if(o){let s=o.get(n);s?s.add(r):o.set(n,new Set([r]))}else this._events.set(i,new Map([[n,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(i,this._delegateEventHandler,mV)})}removeHandler(t,i,n){let r=this._events.get(t);if(!r)return;let o=r.get(i);o&&(o.delete(n),o.size===0&&r.delete(i),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,mV)))}},pV={enterDuration:225,exitDuration:150},M7=800,gV=rr({passive:!0,capture:!0}),_V=["mousedown","touchstart"],vV=["mouseup","mouseleave","touchend","touchcancel"],Lf=class Lf{constructor(t,i,n,r){this._target=t,this._ngZone=i,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=or(n))}fadeInRipple(t,i,n={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=G(G({},pV),n.animation);n.centered&&(t=r.left+r.width/2,i=r.top+r.height/2);let s=n.radius||P7(t,i,r),l=t-r.left,d=i-r.top,u=o.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=`${l-s}px`,f.style.top=`${d-s}px`,f.style.height=`${s*2}px`,f.style.width=`${s*2}px`,n.color!=null&&(f.style.backgroundColor=n.color),f.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(f);let p=window.getComputedStyle(f),_=p.transitionProperty,y=p.transitionDuration,S=_==="none"||y==="0s"||y==="0s, 0s"||r.width===0&&r.height===0,A=new HT(this,f,n,S);f.style.transform="scale3d(1, 1, 1)",A.state=sr.FADING_IN,n.persistent||(this._mostRecentTransientRipple=A);let M=null;return!S&&(u||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let K=()=>this._finishRippleTransition(A),ut=()=>this._destroyRipple(A);f.addEventListener("transitionend",K),f.addEventListener("transitioncancel",ut),M={onTransitionEnd:K,onTransitionCancel:ut}}),this._activeRipples.set(A,M),(S||!u)&&this._finishRippleTransition(A),A}fadeOutRipple(t){if(t.state===sr.FADING_OUT||t.state===sr.HIDDEN)return;let i=t.element,n=G(G({},pV),t.config.animation);i.style.transitionDuration=`${n.exitDuration}ms`,i.style.opacity="0",t.state=sr.FADING_OUT,(t._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let i=or(t);!this._platform.isBrowser||!i||i===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=i,_V.forEach(n=>{Lf._eventManager.addHandler(this._ngZone,n,i,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{vV.forEach(i=>{this._triggerElement.addEventListener(i,this,gV)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===sr.FADING_IN?this._startFadeOutTransition(t):t.state===sr.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let i=t===this._mostRecentTransientRipple,{persistent:n}=t.config;t.state=sr.VISIBLE,!n&&(!i||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let i=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=sr.HIDDEN,i!==null&&(t.element.removeEventListener("transitionend",i.onTransitionEnd),t.element.removeEventListener("transitioncancel",i.onTransitionCancel)),t.element.remove()}_onMousedown(t){let i=Nf(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+M7;!this._target.rippleDisabled&&!i&&!n&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Ff(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let i=t.changedTouches;if(i)for(let n=0;n<i.length;n++)this.fadeInRipple(i[n].clientX,i[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let i=t.state===sr.VISIBLE||t.config.terminateOnPointerUp&&t.state===sr.FADING_IN;!t.config.persistent&&i&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(_V.forEach(i=>Lf._eventManager.removeHandler(i,t,this)),this._pointerUpEventsRegistered&&vV.forEach(i=>t.removeEventListener(i,this,gV)))}};Lf._eventManager=new WT;var qT=Lf;function P7(e,t,i){let n=Math.max(Math.abs(e-i.left),Math.abs(e-i.right)),r=Math.max(Math.abs(t-i.top),Math.abs(t-i.bottom));return Math.sqrt(n*n+r*r)}var EV=new H("mat-ripple-global-options"),Yv=(()=>{let t=class t{get disabled(){return this._disabled}set disabled(n){n&&this.fadeOutAllNonPersistent(),this._disabled=n,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(n){this._trigger=n,this._setupTriggerEventsIfEnabled()}constructor(n,r,o,s,l){this._elementRef=n,this._animationMode=l,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new qT(this,r,n,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:G(G(G({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(n,r=0,o){return typeof n=="number"?this._rippleRenderer.fadeInRipple(n,r,G(G({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,G(G({},this.rippleConfig),n))}};t.\u0275fac=function(r){return new(r||t)(x(gt),x(Q),x(te),x(EV,8),x(oi,8))},t.\u0275dir=X({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,o){r&2&&Bt("mat-ripple-unbounded",o.unbounded)},inputs:{color:[F.None,"matRippleColor","color"],unbounded:[F.None,"matRippleUnbounded","unbounded"],centered:[F.None,"matRippleCentered","centered"],radius:[F.None,"matRippleRadius","radius"],animation:[F.None,"matRippleAnimation","animation"],disabled:[F.None,"matRippleDisabled","disabled"],trigger:[F.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let e=t;return e})(),Vf=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({imports:[Gt,Gt]});let e=t;return e})(),O7=(()=>{let t=class t{constructor(n){this._animationMode=n,this.state="unchecked",this.disabled=!1,this.appearance="full"}};t.\u0275fac=function(r){return new(r||t)(x(oi,8))},t.\u0275cmp=ft({type:t,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(r,o){r&2&&Bt("mat-pseudo-checkbox-indeterminate",o.state==="indeterminate")("mat-pseudo-checkbox-checked",o.state==="checked")("mat-pseudo-checkbox-disabled",o.disabled)("mat-pseudo-checkbox-minimal",o.appearance==="minimal")("mat-pseudo-checkbox-full",o.appearance==="full")("_mat-animation-noopable",o._animationMode==="NoopAnimations")},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},standalone:!0,features:[zt],decls:0,vars:0,template:function(r,o){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color);border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color);border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0});let e=t;return e})(),N7=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({imports:[Gt]});let e=t;return e})(),KT=new H("MAT_OPTION_PARENT_COMPONENT");var YT=new H("MatOptgroup");var F7=0,GT=class{constructor(t,i=!1){this.source=t,this.isUserInput=i}},zs=(()=>{let t=class t{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(n){this._disabled=n}get disableRipple(){return!!(this._parent&&this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}constructor(n,r,o,s){this._element=n,this._changeDetectorRef=r,this._parent=o,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id=`mat-option-${F7++}`,this.onSelectionChange=new qt,this._stateChanges=new at}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(n=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),n&&this._emitSelectionChangeEvent())}deselect(n=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),n&&this._emitSelectionChangeEvent())}focus(n,r){let o=this._getHostElement();typeof o.focus=="function"&&o.focus(r)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(n){(n.keyCode===13||n.keyCode===32)&&!Ni(n)&&(this._selectViaInteraction(),n.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let n=this.viewValue;n!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=n)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(n=!1){this.onSelectionChange.emit(new GT(this,n))}};t.\u0275fac=function(r){return new(r||t)(x(gt),x(Oe),x(KT,8),x(YT,8))},t.\u0275cmp=ft({type:t,selectors:[["mat-option"]],viewQuery:function(r,o){if(r&1&&be(E7,7),r&2){let s;It(s=Et())&&(o._text=s.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(r,o){r&1&&Ct("click",function(){return o._selectViaInteraction()})("keydown",function(l){return o._handleKeydown(l)}),r&2&&($l("id",o.id),Zt("aria-selected",o.selected)("aria-disabled",o.disabled.toString()),Bt("mdc-list-item--selected",o.selected)("mat-mdc-option-multiple",o.multiple)("mat-mdc-option-active",o.active)("mdc-list-item--disabled",o.disabled))},inputs:{value:"value",id:"id",disabled:[F.HasDecoratorInputTransform,"disabled","disabled",Tt]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],standalone:!0,features:[he,zt],ngContentSelectors:T7,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(r,o){r&1&&(Te(C7),vt(0,S7,1,2,"mat-pseudo-checkbox",1),Mt(1),D(2,"span",2,0),Mt(4,1),R(),vt(5,A7,1,1,"mat-pseudo-checkbox",3)(6,D7,2,1,"span",4),ht(7,"div",5)),r&2&&(Nt(0,o.multiple?0:-1),j(5),Nt(5,!o.multiple&&o.selected&&!o.hideSingleSelectionIndicator?5:-1),j(),Nt(6,o.group&&o.group._inert?6:-1),j(),pt("matRippleTrigger",o._getHostElement())("matRippleDisabled",o.disabled||o.disableRipple))},dependencies:[O7,Yv],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color);font-family:var(--mat-option-label-text-font);line-height:var(--mat-option-label-text-line-height);font-size:var(--mat-option-label-text-size);letter-spacing:var(--mat-option-label-text-tracking);font-weight:var(--mat-option-label-text-weight);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color)}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color)}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0});let e=t;return e})();function CV(e,t,i){if(i.length){let n=t.toArray(),r=i.toArray(),o=0;for(let s=0;s<e+1;s++)n[s].group&&n[s].group===r[o]&&o++;return o}return 0}function TV(e,t,i,n){return e<i?e:e+t>i+n?Math.max(0,e-n+t):i}var QT=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({imports:[Vf,Gt,N7]});let e=t;return e})(),bV={capture:!0},yV=["focus","click","mouseenter","touchstart"],zT="mat-ripple-loader-uninitialized",$T="mat-ripple-loader-class-name",wV="mat-ripple-loader-centered",Gv="mat-ripple-loader-disabled",SV=(()=>{let t=class t{constructor(){this._document=W(xt,{optional:!0}),this._animationMode=W(oi,{optional:!0}),this._globalRippleOptions=W(EV,{optional:!0}),this._platform=W(te),this._ngZone=W(Q),this._hosts=new Map,this._onInteraction=n=>{if(!(n.target instanceof HTMLElement))return;let o=n.target.closest(`[${zT}]`);o&&this._createRipple(o)},this._ngZone.runOutsideAngular(()=>{for(let n of yV)this._document?.addEventListener(n,this._onInteraction,bV)})}ngOnDestroy(){let n=this._hosts.keys();for(let r of n)this.destroyRipple(r);for(let r of yV)this._document?.removeEventListener(r,this._onInteraction,bV)}configureRipple(n,r){n.setAttribute(zT,""),(r.className||!n.hasAttribute($T))&&n.setAttribute($T,r.className||""),r.centered&&n.setAttribute(wV,""),r.disabled&&n.setAttribute(Gv,"")}getRipple(n){return this._hosts.get(n)||this._createRipple(n)}setDisabled(n,r){let o=this._hosts.get(n);if(o){o.disabled=r;return}r?n.setAttribute(Gv,""):n.removeAttribute(Gv)}_createRipple(n){if(!this._document)return;let r=this._hosts.get(n);if(r)return r;n.querySelector(".mat-ripple")?.remove();let o=this._document.createElement("span");o.classList.add("mat-ripple",n.getAttribute($T)),n.append(o);let s=new Yv(new gt(o),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return s._isInitialized=!0,s.trigger=n,s.centered=n.hasAttribute(wV),s.disabled=n.hasAttribute(Gv),this.attachRipple(n,s),s}attachRipple(n,r){n.removeAttribute(zT),this._hosts.set(n,r)}destroyRipple(n){let r=this._hosts.get(n);r&&(r.ngOnDestroy(),this._hosts.delete(n))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var L7=["mat-button",""],V7=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],B7=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var j7=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}";var U7=["mat-icon-button",""],z7=["*"];var $7=new H("MAT_BUTTON_CONFIG");var H7=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],AV=(()=>{let t=class t{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(n){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,n)}get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=n,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(n){this._disabled=n,this._updateRippleDisabled()}constructor(n,r,o,s){this._elementRef=n,this._platform=r,this._ngZone=o,this._animationMode=s,this._focusMonitor=W(jo),this._rippleLoader=W(SV),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let l=W($7,{optional:!0}),d=n.nativeElement,u=d.classList;this.disabledInteractive=l?.disabledInteractive??!1,this._rippleLoader?.configureRipple(d,{className:"mat-mdc-button-ripple"});for(let{attribute:f,mdcClasses:p}of H7)d.hasAttribute(f)&&u.add(...p)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(n="program",r){n?this._focusMonitor.focusVia(this._elementRef.nativeElement,n,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};t.\u0275fac=function(r){zl()},t.\u0275dir=X({type:t,inputs:{color:"color",disableRipple:[F.HasDecoratorInputTransform,"disableRipple","disableRipple",Tt],disabled:[F.HasDecoratorInputTransform,"disabled","disabled",Tt],ariaDisabled:[F.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",Tt],disabledInteractive:[F.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",Tt]},features:[he]});let e=t;return e})();var ar=(()=>{let t=class t extends AV{constructor(n,r,o,s){super(n,r,o,s)}};t.\u0275fac=function(r){return new(r||t)(x(gt),x(te),x(Q),x(oi,8))},t.\u0275cmp=ft({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,o){r&2&&(Zt("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled()),pa(o.color?"mat-"+o.color:""),Bt("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[oe,zt],attrs:L7,ngContentSelectors:B7,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){r&1&&(Te(V7),ht(0,"span",0),Mt(1),D(2,"span",1),Mt(3,1),R(),Mt(4,2),ht(5,"span",2)(6,"span",3)),r&2&&Bt("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let e=t;return e})();var Xv=(()=>{let t=class t extends AV{constructor(n,r,o,s){super(n,r,o,s),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}};t.\u0275fac=function(r){return new(r||t)(x(gt),x(te),x(Q),x(oi,8))},t.\u0275cmp=ft({type:t,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(r,o){r&2&&(Zt("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled()),pa(o.color?"mat-"+o.color:""),Bt("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[oe,zt],attrs:U7,ngContentSelectors:z7,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){r&1&&(Te(),ht(0,"span",0),Mt(1),ht(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{color:var(--mdc-icon-button-icon-color)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color)}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color)}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity)}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity)}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity)}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',j7],encapsulation:2,changeDetection:0});let e=t;return e})();var Cd=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({imports:[Gt,Vf,Gt]});let e=t;return e})();var jf=class{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},$s=class extends jf{constructor(t,i,n,r,o){super(),this.component=t,this.viewContainerRef=i,this.injector=n,this.componentFactoryResolver=r,this.projectableNodes=o}},Uo=class extends jf{constructor(t,i,n,r){super(),this.templateRef=t,this.viewContainerRef=i,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,i=this.context){return this.context=i,super.attach(t)}detach(){return this.context=void 0,super.detach()}},XT=class extends jf{constructor(t){super(),this.element=t instanceof gt?t.nativeElement:t}},Td=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof $s)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof Uo)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof XT)return this._attachedPortal=t,this.attachDomPortal(t)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Uf=class extends Td{constructor(t,i,n,r,o){super(),this.outletElement=t,this._componentFactoryResolver=i,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=s=>{this._document;let l=s.element;l.parentNode;let d=this._document.createComment("dom-portal");l.parentNode.insertBefore(d,l),this.outletElement.appendChild(l),this._attachedPortal=s,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(l,d)})},this._document=o}attachComponentPortal(t){let n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(n,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=n.create(t.injector||this._defaultInjector||fn.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let i=t.viewContainerRef,n=i.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=i.indexOf(n);r!==-1&&i.remove(r)}),this._attachedPortal=t,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var ZT=(()=>{let t=class t extends Td{constructor(n,r,o){super(),this._componentFactoryResolver=n,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new qt,this.attachDomPortal=s=>{this._document;let l=s.element;l.parentNode;let d=this._document.createComment("dom-portal");s.setAttachedHost(this),l.parentNode.insertBefore(d,l),this._getRootNode().appendChild(l),this._attachedPortal=s,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(l,d)})},this._document=o}get portal(){return this._attachedPortal}set portal(n){this.hasAttached()&&!n&&!this._isInitialized||(this.hasAttached()&&super.detach(),n&&super.attach(n),this._attachedPortal=n||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(n){n.setAttachedHost(this);let r=n.viewContainerRef!=null?n.viewContainerRef:this._viewContainerRef,s=(n.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(n.component),l=r.createComponent(s,r.length,n.injector||r.injector,n.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(l.hostView.rootNodes[0]),super.setDisposeFn(()=>l.destroy()),this._attachedPortal=n,this._attachedRef=l,this.attached.emit(l),l}attachTemplatePortal(n){n.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=n,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let n=this._viewContainerRef.element.nativeElement;return n.nodeType===n.ELEMENT_NODE?n:n.parentNode}};t.\u0275fac=function(r){return new(r||t)(x(Mu),x(Vn),x(xt))},t.\u0275dir=X({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[F.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[oe]});let e=t;return e})();var Zv=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({});let e=t;return e})();var Jv=class{};function eb(e){return e&&typeof e.connect=="function"&&!(e instanceof Eu)}var Sd=function(e){return e[e.REPLACED=0]="REPLACED",e[e.INSERTED=1]="INSERTED",e[e.MOVED=2]="MOVED",e[e.REMOVED=3]="REMOVED",e}(Sd||{}),zf=new H("_ViewRepeater"),Ad=class{applyChanges(t,i,n,r,o){t.forEachOperation((s,l,d)=>{let u,f;if(s.previousIndex==null){let p=n(s,l,d);u=i.createEmbeddedView(p.templateRef,p.context,p.index),f=Sd.INSERTED}else d==null?(i.remove(l),f=Sd.REMOVED):(u=i.get(l),i.move(u,d),f=Sd.MOVED);o&&o({context:u?.context,operation:f,record:s})})}detach(){}};var tb=class{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(t=!1,i,n=!0,r){this._multiple=t,this._emitChanges=n,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new at,i&&i.length&&(t?i.forEach(o=>this._markSelected(o)):this._markSelected(i[0]),this._selectedToEmit.length=0)}select(...t){this._verifyValueAssignment(t),t.forEach(n=>this._markSelected(n));let i=this._hasQueuedChanges();return this._emitChangeEvent(),i}deselect(...t){this._verifyValueAssignment(t),t.forEach(n=>this._unmarkSelected(n));let i=this._hasQueuedChanges();return this._emitChangeEvent(),i}setSelection(...t){this._verifyValueAssignment(t);let i=this.selected,n=new Set(t);t.forEach(o=>this._markSelected(o)),i.filter(o=>!n.has(this._getConcreteValue(o,n))).forEach(o=>this._unmarkSelected(o));let r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();let i=this._hasQueuedChanges();return t&&this._emitChangeEvent(),i}isSelected(t){return this._selection.has(this._getConcreteValue(t))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){t=this._getConcreteValue(t),this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){t=this._getConcreteValue(t),this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){t.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(t,i){if(this.compareWith){i=i??this._selection;for(let n of i)if(this.compareWith(t,n))return n;return t}else return t}};var W7=20,$f=(()=>{let t=class t{constructor(n,r,o){this._ngZone=n,this._platform=r,this._scrolled=new at,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(n){this.scrollContainers.has(n)||this.scrollContainers.set(n,n.elementScrolled().subscribe(()=>this._scrolled.next(n)))}deregister(n){let r=this.scrollContainers.get(n);r&&(r.unsubscribe(),this.scrollContainers.delete(n))}scrolled(n=W7){return this._platform.isBrowser?new Wn(r=>{this._globalSubscription||this._addGlobalListener();let o=n>0?this._scrolled.pipe(A0(n)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):tt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((n,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(n,r){let o=this.getAncestorScrollContainers(n);return this.scrolled(r).pipe(me(s=>!s||o.indexOf(s)>-1))}getAncestorScrollContainers(n){let r=[];return this.scrollContainers.forEach((o,s)=>{this._scrollableContainsElement(s,n)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(n,r){let o=or(r),s=n.getElementRef().nativeElement;do if(o==s)return!0;while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let n=this._getWindow();return S0(n.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};t.\u0275fac=function(r){return new(r||t)(T(Q),T(te),T(xt,8))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var q7=20,Ws=(()=>{let t=class t{constructor(n,r,o){this._platform=n,this._change=new at,this._changeListener=s=>{this._change.next(s)},this._document=o,r.runOutsideAngular(()=>{if(n.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let n=this._getWindow();n.removeEventListener("resize",this._changeListener),n.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let n={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),n}getViewportRect(){let n=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:n.top,left:n.left,bottom:n.top+o,right:n.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let n=this._document,r=this._getWindow(),o=n.documentElement,s=o.getBoundingClientRect(),l=-s.top||n.body.scrollTop||r.scrollY||o.scrollTop||0,d=-s.left||n.body.scrollLeft||r.scrollX||o.scrollLeft||0;return{top:l,left:d}}change(n=q7){return n>0?this._change.pipe(A0(n)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let n=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:n.innerWidth,height:n.innerHeight}:{width:0,height:0}}};t.\u0275fac=function(r){return new(r||t)(T(te),T(Q),T(xt,8))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Hs=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({});let e=t;return e})(),Hf=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({imports:[Us,Hs,Us,Hs]});let e=t;return e})();var DV=nV(),tS=class{constructor(t,i){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=i}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=dn(-this._previousScrollPosition.left),t.style.top=dn(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,i=this._document.body,n=t.style,r=i.style,o=n.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),DV&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),DV&&(n.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let i=this._document.body,n=this._viewportRuler.getViewportSize();return i.scrollHeight>n.height||i.scrollWidth>n.width}};var eS=class{constructor(t,i,n,r){this._scrollDispatcher=t,this._ngZone=i,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(me(i=>!i||!this._overlayRef.overlayElement.contains(i.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let i=this._viewportRuler.getViewportScrollPosition().top;Math.abs(i-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},nb=class{enable(){}disable(){}attach(){}};function nS(e,t){return t.some(i=>{let n=e.bottom<i.top,r=e.top>i.bottom,o=e.right<i.left,s=e.left>i.right;return n||r||o||s})}function RV(e,t){return t.some(i=>{let n=e.top<i.top,r=e.bottom>i.bottom,o=e.left<i.left,s=e.right>i.right;return n||r||o||s})}var iS=class{constructor(t,i,n,r){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let i=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();nS(i,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},G7=(()=>{let t=class t{constructor(n,r,o,s){this._scrollDispatcher=n,this._viewportRuler=r,this._ngZone=o,this.noop=()=>new nb,this.close=l=>new eS(this._scrollDispatcher,this._ngZone,this._viewportRuler,l),this.block=()=>new tS(this._viewportRuler,this._document),this.reposition=l=>new iS(this._scrollDispatcher,this._viewportRuler,this._ngZone,l),this._document=s}};t.\u0275fac=function(r){return new(r||t)(T($f),T(Ws),T(Q),T(xt))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),qs=class{constructor(t){if(this.scrollStrategy=new nb,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){let i=Object.keys(t);for(let n of i)t[n]!==void 0&&(this[n]=t[n])}}};var rS=class{constructor(t,i){this.connectionPair=t,this.scrollableViewProperties=i}};var NV=(()=>{let t=class t{constructor(n){this._attachedOverlays=[],this._document=n}ngOnDestroy(){this.detach()}add(n){this.remove(n),this._attachedOverlays.push(n)}remove(n){let r=this._attachedOverlays.indexOf(n);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};t.\u0275fac=function(r){return new(r||t)(T(xt))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),K7=(()=>{let t=class t extends NV{constructor(n,r){super(n),this._ngZone=r,this._keydownListener=o=>{let s=this._attachedOverlays;for(let l=s.length-1;l>-1;l--)if(s[l]._keydownEvents.observers.length>0){let d=s[l]._keydownEvents;this._ngZone?this._ngZone.run(()=>d.next(o)):d.next(o);break}}}add(n){super.add(n),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};t.\u0275fac=function(r){return new(r||t)(T(xt),T(Q,8))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Y7=(()=>{let t=class t extends NV{constructor(n,r,o){super(n),this._platform=r,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Er(s)},this._clickListener=s=>{let l=Er(s),d=s.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:l;this._pointerDownEventTarget=null;let u=this._attachedOverlays.slice();for(let f=u.length-1;f>-1;f--){let p=u[f];if(p._outsidePointerEvents.observers.length<1||!p.hasAttached())continue;if(p.overlayElement.contains(l)||p.overlayElement.contains(d))break;let _=p._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>_.next(s)):_.next(s)}}}add(n){if(super.add(n),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let n=this._document.body;n.removeEventListener("pointerdown",this._pointerDownListener,!0),n.removeEventListener("click",this._clickListener,!0),n.removeEventListener("auxclick",this._clickListener,!0),n.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(n.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(n){n.addEventListener("pointerdown",this._pointerDownListener,!0),n.addEventListener("click",this._clickListener,!0),n.addEventListener("auxclick",this._clickListener,!0),n.addEventListener("contextmenu",this._clickListener,!0)}};t.\u0275fac=function(r){return new(r||t)(T(xt),T(te),T(Q,8))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),FV=(()=>{let t=class t{constructor(n,r){this._platform=r,this._document=n}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let n="cdk-overlay-container";if(this._platform.isBrowser||Of()){let o=this._document.querySelectorAll(`.${n}[platform="server"], .${n}[platform="test"]`);for(let s=0;s<o.length;s++)o[s].remove()}let r=this._document.createElement("div");r.classList.add(n),Of()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};t.\u0275fac=function(r){return new(r||t)(T(xt),T(te))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),oS=class{constructor(t,i,n,r,o,s,l,d,u,f=!1){this._portalOutlet=t,this._host=i,this._pane=n,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=l,this._location=d,this._outsideClickDispatcher=u,this._animationsDisabled=f,this._backdropElement=null,this._backdropClick=new at,this._attachments=new at,this._detachments=new at,this._locationChanges=un.EMPTY,this._backdropClickHandler=p=>this._backdropClick.next(p),this._backdropTransitionendHandler=p=>{this._disposeBackdrop(p.target)},this._keydownEvents=new at,this._outsidePointerEvents=new at,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let i=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe($e(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof i?.onDestroy=="function"&&i.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),i}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=G(G({},this._config),t),this._updateElementSize()}setDirection(t){this._config=xe(G({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=dn(this._config.width),t.height=dn(this._config.height),t.minWidth=dn(this._config.minWidth),t.minHeight=dn(this._config.minHeight),t.maxWidth=dn(this._config.maxWidth),t.maxHeight=dn(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(t){if(this._animationsDisabled){this._disposeBackdrop(t);return}t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,i,n){let r=gd(i||[]).filter(o=>!!o);r.length&&(n?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let t=this._ngZone.onStable.pipe(Lt(wn(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},kV="cdk-overlay-connected-position-bounding-box",Q7=/([A-Za-z%]+)$/,sS=class{get positions(){return this._preferredPositions}constructor(t,i,n,r,o){this._viewportRuler=i,this._document=n,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new at,this._resizeSubscription=un.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(kV),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,i=this._overlayRect,n=this._viewportRect,r=this._containerRect,o=[],s;for(let l of this._preferredPositions){let d=this._getOriginPoint(t,r,l),u=this._getOverlayPoint(d,i,l),f=this._getOverlayFit(u,i,n,l);if(f.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(l,d);return}if(this._canFitWithFlexibleDimensions(f,u,n)){o.push({position:l,origin:d,overlayRect:i,boundingBoxRect:this._calculateBoundingBoxRect(d,l)});continue}(!s||s.overlayFit.visibleArea<f.visibleArea)&&(s={overlayFit:f,overlayPoint:u,originPoint:d,position:l,overlayRect:i})}if(o.length){let l=null,d=-1;for(let u of o){let f=u.boundingBoxRect.width*u.boundingBoxRect.height*(u.position.weight||1);f>d&&(d=f,l=u)}this._isPushed=!1,this._applyPosition(l.position,l.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ll(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(kV),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let i=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,i)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,i,n){let r;if(n.originX=="center")r=t.left+t.width/2;else{let s=this._isRtl()?t.right:t.left,l=this._isRtl()?t.left:t.right;r=n.originX=="start"?s:l}i.left<0&&(r-=i.left);let o;return n.originY=="center"?o=t.top+t.height/2:o=n.originY=="top"?t.top:t.bottom,i.top<0&&(o-=i.top),{x:r,y:o}}_getOverlayPoint(t,i,n){let r;n.overlayX=="center"?r=-i.width/2:n.overlayX==="start"?r=this._isRtl()?-i.width:0:r=this._isRtl()?0:-i.width;let o;return n.overlayY=="center"?o=-i.height/2:o=n.overlayY=="top"?0:-i.height,{x:t.x+r,y:t.y+o}}_getOverlayFit(t,i,n,r){let o=PV(i),{x:s,y:l}=t,d=this._getOffset(r,"x"),u=this._getOffset(r,"y");d&&(s+=d),u&&(l+=u);let f=0-s,p=s+o.width-n.width,_=0-l,y=l+o.height-n.height,S=this._subtractOverflows(o.width,f,p),A=this._subtractOverflows(o.height,_,y),M=S*A;return{visibleArea:M,isCompletelyWithinViewport:o.width*o.height===M,fitsInViewportVertically:A===o.height,fitsInViewportHorizontally:S==o.width}}_canFitWithFlexibleDimensions(t,i,n){if(this._hasFlexibleDimensions){let r=n.bottom-i.y,o=n.right-i.x,s=MV(this._overlayRef.getConfig().minHeight),l=MV(this._overlayRef.getConfig().minWidth),d=t.fitsInViewportVertically||s!=null&&s<=r,u=t.fitsInViewportHorizontally||l!=null&&l<=o;return d&&u}return!1}_pushOverlayOnScreen(t,i,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let r=PV(i),o=this._viewportRect,s=Math.max(t.x+r.width-o.width,0),l=Math.max(t.y+r.height-o.height,0),d=Math.max(o.top-n.top-t.y,0),u=Math.max(o.left-n.left-t.x,0),f=0,p=0;return r.width<=o.width?f=u||-s:f=t.x<this._viewportMargin?o.left-n.left-t.x:0,r.height<=o.height?p=d||-l:p=t.y<this._viewportMargin?o.top-n.top-t.y:0,this._previousPushAmount={x:f,y:p},{x:t.x+f,y:t.y+p}}_applyPosition(t,i){if(this._setTransformOrigin(t),this._setOverlayElementStyles(i,t),this._setBoundingBoxStyles(i,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let n=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!X7(this._lastScrollVisibility,n)){let r=new rS(t,n);this._positionChanges.next(r)}this._lastScrollVisibility=n}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let i=this._boundingBox.querySelectorAll(this._transformOriginSelector),n,r=t.overlayY;t.overlayX==="center"?n="center":this._isRtl()?n=t.overlayX==="start"?"right":"left":n=t.overlayX==="start"?"left":"right";for(let o=0;o<i.length;o++)i[o].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,i){let n=this._viewportRect,r=this._isRtl(),o,s,l;if(i.overlayY==="top")s=t.y,o=n.height-s+this._viewportMargin;else if(i.overlayY==="bottom")l=n.height-t.y+this._viewportMargin*2,o=n.height-l+this._viewportMargin;else{let y=Math.min(n.bottom-t.y+n.top,t.y),S=this._lastBoundingBoxSize.height;o=y*2,s=t.y-y,o>S&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-S/2)}let d=i.overlayX==="start"&&!r||i.overlayX==="end"&&r,u=i.overlayX==="end"&&!r||i.overlayX==="start"&&r,f,p,_;if(u)_=n.width-t.x+this._viewportMargin*2,f=t.x-this._viewportMargin;else if(d)p=t.x,f=n.right-t.x;else{let y=Math.min(n.right-t.x+n.left,t.x),S=this._lastBoundingBoxSize.width;f=y*2,p=t.x-y,f>S&&!this._isInitialRender&&!this._growAfterOpen&&(p=t.x-S/2)}return{top:s,left:p,bottom:l,right:_,width:f,height:o}}_setBoundingBoxStyles(t,i){let n=this._calculateBoundingBoxRect(t,i);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=dn(n.height),r.top=dn(n.top),r.bottom=dn(n.bottom),r.width=dn(n.width),r.left=dn(n.left),r.right=dn(n.right),i.overlayX==="center"?r.alignItems="center":r.alignItems=i.overlayX==="end"?"flex-end":"flex-start",i.overlayY==="center"?r.justifyContent="center":r.justifyContent=i.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=dn(o)),s&&(r.maxWidth=dn(s))}this._lastBoundingBoxSize=n,ll(this._boundingBox.style,r)}_resetBoundingBoxStyles(){ll(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ll(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,i){let n={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){let f=this._viewportRuler.getViewportScrollPosition();ll(n,this._getExactOverlayY(i,t,f)),ll(n,this._getExactOverlayX(i,t,f))}else n.position="static";let l="",d=this._getOffset(i,"x"),u=this._getOffset(i,"y");d&&(l+=`translateX(${d}px) `),u&&(l+=`translateY(${u}px)`),n.transform=l.trim(),s.maxHeight&&(r?n.maxHeight=dn(s.maxHeight):o&&(n.maxHeight="")),s.maxWidth&&(r?n.maxWidth=dn(s.maxWidth):o&&(n.maxWidth="")),ll(this._pane.style,n)}_getExactOverlayY(t,i,n){let r={top:"",bottom:""},o=this._getOverlayPoint(i,this._overlayRect,t);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),t.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;r.bottom=`${s-(o.y+this._overlayRect.height)}px`}else r.top=dn(o.y);return r}_getExactOverlayX(t,i,n){let r={left:"",right:""},o=this._getOverlayPoint(i,this._overlayRect,t);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n));let s;if(this._isRtl()?s=t.overlayX==="end"?"left":"right":s=t.overlayX==="end"?"right":"left",s==="right"){let l=this._document.documentElement.clientWidth;r.right=`${l-(o.x+this._overlayRect.width)}px`}else r.left=dn(o.x);return r}_getScrollVisibility(){let t=this._getOriginRect(),i=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:RV(t,n),isOriginOutsideView:nS(t,n),isOverlayClipped:RV(i,n),isOverlayOutsideView:nS(i,n)}}_subtractOverflows(t,...i){return i.reduce((n,r)=>n-Math.max(r,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,i=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+i-this._viewportMargin,width:t-2*this._viewportMargin,height:i-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,i){return i==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&gd(t).forEach(i=>{i!==""&&this._appliedPanelClasses.indexOf(i)===-1&&(this._appliedPanelClasses.push(i),this._pane.classList.add(i))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof gt)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let i=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+i,height:n,width:i}}};function ll(e,t){for(let i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function MV(e){if(typeof e!="number"&&e!=null){let[t,i]=e.split(Q7);return!i||i==="px"?parseFloat(t):null}return e||null}function PV(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}function X7(e,t){return e===t?!0:e.isOriginClipped===t.isOriginClipped&&e.isOriginOutsideView===t.isOriginOutsideView&&e.isOverlayClipped===t.isOverlayClipped&&e.isOverlayOutsideView===t.isOverlayOutsideView}var OV="cdk-global-overlay-wrapper",aS=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){let i=t.getConfig();this._overlayRef=t,this._width&&!i.width&&t.updateSize({width:this._width}),this._height&&!i.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(OV),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:l}=n,d=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),u=(o==="100%"||o==="100vh")&&(!l||l==="100%"||l==="100vh"),f=this._xPosition,p=this._xOffset,_=this._overlayRef.getConfig().direction==="rtl",y="",S="",A="";d?A="flex-start":f==="center"?(A="center",_?S=p:y=p):_?f==="left"||f==="end"?(A="flex-end",y=p):(f==="right"||f==="start")&&(A="flex-start",S=p):f==="left"||f==="start"?(A="flex-start",y=p):(f==="right"||f==="end")&&(A="flex-end",S=p),t.position=this._cssPosition,t.marginLeft=d?"0":y,t.marginTop=u?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=d?"0":S,i.justifyContent=A,i.alignItems=u?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement,n=i.style;i.classList.remove(OV),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},Z7=(()=>{let t=class t{constructor(n,r,o,s){this._viewportRuler=n,this._document=r,this._platform=o,this._overlayContainer=s}global(){return new aS}flexibleConnectedTo(n){return new sS(n,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};t.\u0275fac=function(r){return new(r||t)(T(Ws),T(xt),T(te),T(FV))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),J7=0,In=(()=>{let t=class t{constructor(n,r,o,s,l,d,u,f,p,_,y,S){this.scrollStrategies=n,this._overlayContainer=r,this._componentFactoryResolver=o,this._positionBuilder=s,this._keyboardDispatcher=l,this._injector=d,this._ngZone=u,this._document=f,this._directionality=p,this._location=_,this._outsideClickDispatcher=y,this._animationsModuleType=S}create(n){let r=this._createHostElement(),o=this._createPaneElement(r),s=this._createPortalOutlet(o),l=new qs(n);return l.direction=l.direction||this._directionality.value,new oS(s,r,o,l,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(n){let r=this._document.createElement("div");return r.id=`cdk-overlay-${J7++}`,r.classList.add("cdk-overlay-pane"),n.appendChild(r),r}_createHostElement(){let n=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(n),n}_createPortalOutlet(n){return this._appRef||(this._appRef=this._injector.get(ds)),new Uf(n,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};t.\u0275fac=function(r){return new(r||t)(T(G7),T(FV),T(Mu),T(Z7),T(K7),T(fn),T(Q),T(xt),T(Fi),T(va),T(Y7),T(oi,8))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),tQ=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],LV=new H("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let e=W(In);return()=>e.scrollStrategies.reposition()}}),ib=(()=>{let t=class t{constructor(n){this.elementRef=n}};t.\u0275fac=function(r){return new(r||t)(x(gt))},t.\u0275dir=X({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0});let e=t;return e})(),lS=(()=>{let t=class t{get offsetX(){return this._offsetX}set offsetX(n){this._offsetX=n,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(n){this._offsetY=n,this._position&&this._updatePositionStrategy(this._position)}get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(n){this._disposeOnNavigation=n}constructor(n,r,o,s,l){this._overlay=n,this._dir=l,this._backdropSubscription=un.EMPTY,this._attachSubscription=un.EMPTY,this._detachSubscription=un.EMPTY,this._positionSubscription=un.EMPTY,this._disposeOnNavigation=!1,this._ngZone=W(Q),this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.hasBackdrop=!1,this.lockPosition=!1,this.flexibleDimensions=!1,this.growAfterOpen=!1,this.push=!1,this.backdropClick=new qt,this.positionChange=new qt,this.attach=new qt,this.detach=new qt,this.overlayKeydown=new qt,this.overlayOutsideClick=new qt,this._templatePortal=new Uo(r,o),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(n){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),n.origin&&this.open&&this._position.apply()),n.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=tQ);let n=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=n.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=n.detachments().subscribe(()=>this.detach.emit()),n.keydownEvents().subscribe(r=>{this.overlayKeydown.next(r),r.keyCode===27&&!this.disableClose&&!Ni(r)&&(r.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(r=>{this.overlayOutsideClick.next(r)})}_buildConfig(){let n=this._position=this.positionStrategy||this._createPositionStrategy(),r=new qs({direction:this._dir,positionStrategy:n,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(r.width=this.width),(this.height||this.height===0)&&(r.height=this.height),(this.minWidth||this.minWidth===0)&&(r.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(r.minHeight=this.minHeight),this.backdropClass&&(r.backdropClass=this.backdropClass),this.panelClass&&(r.panelClass=this.panelClass),r}_updatePositionStrategy(n){let r=this.positions.map(o=>({originX:o.originX,originY:o.originY,overlayX:o.overlayX,overlayY:o.overlayY,offsetX:o.offsetX||this.offsetX,offsetY:o.offsetY||this.offsetY,panelClass:o.panelClass||void 0}));return n.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(r).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let n=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(n),n}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof ib?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(n=>{this.backdropClick.emit(n)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(R1(()=>this.positionChange.observers.length>0)).subscribe(n=>{this._ngZone.run(()=>this.positionChange.emit(n)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}};t.\u0275fac=function(r){return new(r||t)(x(In),x(Sn),x(Vn),x(LV),x(Fi,8))},t.\u0275dir=X({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[F.None,"cdkConnectedOverlayOrigin","origin"],positions:[F.None,"cdkConnectedOverlayPositions","positions"],positionStrategy:[F.None,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[F.None,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[F.None,"cdkConnectedOverlayOffsetY","offsetY"],width:[F.None,"cdkConnectedOverlayWidth","width"],height:[F.None,"cdkConnectedOverlayHeight","height"],minWidth:[F.None,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[F.None,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[F.None,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[F.None,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[F.None,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[F.None,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[F.None,"cdkConnectedOverlayOpen","open"],disableClose:[F.None,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[F.None,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[F.HasDecoratorInputTransform,"cdkConnectedOverlayHasBackdrop","hasBackdrop",Tt],lockPosition:[F.HasDecoratorInputTransform,"cdkConnectedOverlayLockPosition","lockPosition",Tt],flexibleDimensions:[F.HasDecoratorInputTransform,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",Tt],growAfterOpen:[F.HasDecoratorInputTransform,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",Tt],push:[F.HasDecoratorInputTransform,"cdkConnectedOverlayPush","push",Tt],disposeOnNavigation:[F.HasDecoratorInputTransform,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",Tt]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[he,hn]});let e=t;return e})();function eQ(e){return()=>e.scrollStrategies.reposition()}var nQ={provide:LV,deps:[In],useFactory:eQ},Gs=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({providers:[In,nQ],imports:[Us,Zv,Hf,Hf]});let e=t;return e})();function iQ(e,t){if(e&1){let i=Pe();D(0,"div",1)(1,"button",2),Ct("click",function(){ne(i);let r=wt();return ie(r.action())}),Z(2),R()()}if(e&2){let i=wt();j(2),An(" ",i.data.action," ")}}var rQ=["label"];function oQ(e,t){}var sQ=Math.pow(2,31)-1,qf=class{constructor(t,i){this._overlayRef=i,this._afterDismissed=new at,this._afterOpened=new at,this._onAction=new at,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,sQ))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},VV=new H("MatSnackBarData"),Dd=class{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}},aQ=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=X({type:t,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"],standalone:!0});let e=t;return e})(),lQ=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=X({type:t,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"],standalone:!0});let e=t;return e})(),cQ=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=X({type:t,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"],standalone:!0});let e=t;return e})(),BV=(()=>{let t=class t{constructor(n,r){this.snackBarRef=n,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}};t.\u0275fac=function(r){return new(r||t)(x(qf),x(VV))},t.\u0275cmp=ft({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],standalone:!0,features:[zt],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(r,o){r&1&&(D(0,"div",0),Z(1),R(),vt(2,iQ,3,1,"div",1)),r&2&&(j(),An(" ",o.data.message,`
`),j(),Nt(2,o.hasAction?2:-1))},dependencies:[ar,aQ,lQ,cQ],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0});let e=t;return e})(),dQ={snackBarState:Bn("state",[Ye("void, hidden",Yt({transform:"scale(0.8)",opacity:0})),Ye("visible",Yt({transform:"scale(1)",opacity:1})),We("* => visible",tn("150ms cubic-bezier(0, 0, 0.2, 1)")),We("* => void, * => hidden",tn("75ms cubic-bezier(0.4, 0.0, 1, 1)",Yt({opacity:0})))])},uQ=0,hQ=(()=>{let t=class t extends Td{constructor(n,r,o,s,l){super(),this._ngZone=n,this._elementRef=r,this._changeDetectorRef=o,this._platform=s,this.snackBarConfig=l,this._document=W(xt),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new at,this._onExit=new at,this._onEnter=new at,this._animationState="void",this._liveElementId=`mat-snack-bar-container-live-${uQ++}`,this.attachDomPortal=d=>{this._assertNotAttached();let u=this._portalOutlet.attachDomPortal(d);return this._afterPortalAttached(),u},l.politeness==="assertive"&&!l.announcementMessage?this._live="assertive":l.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(n){this._assertNotAttached();let r=this._portalOutlet.attachComponentPortal(n);return this._afterPortalAttached(),r}attachTemplatePortal(n){this._assertNotAttached();let r=this._portalOutlet.attachTemplatePortal(n);return this._afterPortalAttached(),r}onAnimationEnd(n){let{fromState:r,toState:o}=n;if((o==="void"&&r!=="void"||o==="hidden")&&this._completeExit(),o==="visible"){let s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let n=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(l=>n.classList.add(l)):n.classList.add(r)),this._exposeToModals();let o=this._label.nativeElement,s="mdc-snackbar__label";o.classList.toggle(s,!o.querySelector(`.${s}`))}_exposeToModals(){let n=this._liveElementId,r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<r.length;o++){let s=r[o],l=s.getAttribute("aria-owns");this._trackedModals.add(s),l?l.indexOf(n)===-1&&s.setAttribute("aria-owns",l+" "+n):s.setAttribute("aria-owns",n)}}_clearFromModals(){this._trackedModals.forEach(n=>{let r=n.getAttribute("aria-owns");if(r){let o=r.replace(this._liveElementId,"").trim();o.length>0?n.setAttribute("aria-owns",o):n.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{let n=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(n&&r){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&n.contains(document.activeElement)&&(o=document.activeElement),n.removeAttribute("aria-hidden"),r.appendChild(n),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}};t.\u0275fac=function(r){return new(r||t)(x(Q),x(gt),x(Oe),x(te),x(Dd))},t.\u0275cmp=ft({type:t,selectors:[["mat-snack-bar-container"]],viewQuery:function(r,o){if(r&1&&(be(ZT,7),be(rQ,7)),r&2){let s;It(s=Et())&&(o._portalOutlet=s.first),It(s=Et())&&(o._label=s.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(r,o){r&1&&Z1("@state.done",function(l){return o.onAnimationEnd(l)}),r&2&&X1("@state",o._animationState)},standalone:!0,features:[oe,zt],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(r,o){r&1&&(D(0,"div",1)(1,"div",2,0)(3,"div",3),vt(4,oQ,0,0,"ng-template",4),R(),ht(5,"div"),R()()),r&2&&(j(5),Zt("aria-live",o._live)("role",o._role)("id",o._liveElementId))},dependencies:[ZT],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape)}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size);font-family:var(--mdc-snackbar-supporting-text-font);font-weight:var(--mdc-snackbar-supporting-text-weight);line-height:var(--mdc-snackbar-supporting-text-line-height)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color);--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[dQ.snackBarState]}});let e=t;return e})();function fQ(){return new Dd}var mQ=new H("mat-snack-bar-default-options",{providedIn:"root",factory:fQ}),zo=(()=>{let t=class t{get _openedSnackBarRef(){let n=this._parentSnackBar;return n?n._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(n){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=n:this._snackBarRefAtThisLevel=n}constructor(n,r,o,s,l,d){this._overlay=n,this._live=r,this._injector=o,this._breakpointObserver=s,this._parentSnackBar=l,this._defaultConfig=d,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=BV,this.snackBarContainerComponent=hQ,this.handsetCssClass="mat-mdc-snack-bar-handset"}openFromComponent(n,r){return this._attach(n,r)}openFromTemplate(n,r){return this._attach(n,r)}open(n,r="",o){let s=G(G({},this._defaultConfig),o);return s.data={message:n,action:r},s.announcementMessage===n&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(n,r){let o=r&&r.viewContainerRef&&r.viewContainerRef.injector,s=fn.create({parent:o||this._injector,providers:[{provide:Dd,useValue:r}]}),l=new $s(this.snackBarContainerComponent,r.viewContainerRef,s),d=n.attach(l);return d.instance.snackBarConfig=r,d.instance}_attach(n,r){let o=G(G(G({},new Dd),this._defaultConfig),r),s=this._createOverlay(o),l=this._attachSnackBarContainer(s,o),d=new qf(l,s);if(n instanceof Sn){let u=new Uo(n,null,{$implicit:o.data,snackBarRef:d});d.instance=l.attachTemplatePortal(u)}else{let u=this._createInjector(o,d),f=new $s(n,void 0,u),p=l.attachComponentPortal(f);d.instance=p.instance}return this._breakpointObserver.observe(sV.HandsetPortrait).pipe(Lt(s.detachments())).subscribe(u=>{s.overlayElement.classList.toggle(this.handsetCssClass,u.matches)}),o.announcementMessage&&l._onAnnounce.subscribe(()=>{this._live.announce(o.announcementMessage,o.politeness)}),this._animateSnackBar(d,o),this._openedSnackBarRef=d,this._openedSnackBarRef}_animateSnackBar(n,r){n.afterDismissed().subscribe(()=>{this._openedSnackBarRef==n&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{n.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):n.containerInstance.enter(),r.duration&&r.duration>0&&n.afterOpened().subscribe(()=>n._dismissAfter(r.duration))}_createOverlay(n){let r=new qs;r.direction=n.direction;let o=this._overlay.position().global(),s=n.direction==="rtl",l=n.horizontalPosition==="left"||n.horizontalPosition==="start"&&!s||n.horizontalPosition==="end"&&s,d=!l&&n.horizontalPosition!=="center";return l?o.left("0"):d?o.right("0"):o.centerHorizontally(),n.verticalPosition==="top"?o.top("0"):o.bottom("0"),r.positionStrategy=o,this._overlay.create(r)}_createInjector(n,r){let o=n&&n.viewContainerRef&&n.viewContainerRef.injector;return fn.create({parent:o||this._injector,providers:[{provide:qf,useValue:r},{provide:VV,useValue:n.data}]})}};t.\u0275fac=function(r){return new(r||t)(T(In),T(qv),T(fn),T(Fv),T(t,12),T(mQ))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var jV=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({providers:[zo],imports:[Gs,Zv,Cd,Gt,BV,Gt]});let e=t;return e})();var Ks=(()=>{let t=class t{constructor(n,r){this.afs=n,this.sb=r}addProduct(n){this.afs.collection("products").add(n).then(r=>{this.afs.collection("products").doc(r.id).update({ID:r.id}),this.sb.open(`Added a new product ID : ${r.id}`,"hide",{duration:5e3})})}getProducts(){return this.afs.collection("products").valueChanges()}getProductById(n){return this.afs.collection("products").doc(n).get()}updateProduct(n,r){return this.afs.collection("products").doc(n).update(r).then(()=>{this.sb.open("Product updated successfully","Hide")}).catch(o=>{this.sb.open(`Error deleting document: , ${o}`,"Hide")})}deleteProduct(n){this.afs.collection("products").doc(n).delete().then(()=>{this.sb.open("Product deleted successfully","Hide")}).catch(r=>{this.sb.open(`Error deleting document: , ${r}`,"Hide")})}};t.\u0275fac=function(r){return new(r||t)(T(ir),T(zo))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var dS=class{constructor(t){this._box=t,this._destroyed=new at,this._resizeSubject=new at,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(i=>this._resizeSubject.next(i)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new Wn(i=>{let n=this._resizeSubject.subscribe(i);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),n.unsubscribe(),this._elementObservables.delete(t)}}).pipe(me(i=>i.some(n=>n.target===t)),Fl({bufferSize:1,refCount:!0}),Lt(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},UV=(()=>{let t=class t{constructor(){this._observers=new Map,this._ngZone=W(Q),typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,n]of this._observers)n.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(n,r){let o=r?.box||"content-box";return this._observers.has(o)||this._observers.set(o,new dS(o)),this._observers.get(o).observe(n)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var pQ=["notch"],gQ=["matFormFieldNotchedOutline",""],_Q=["*"],vQ=["textField"],bQ=["iconPrefixContainer"],yQ=["textPrefixContainer"],wQ=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],xQ=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function IQ(e,t){e&1&&ht(0,"span",17)}function EQ(e,t){if(e&1&&(D(0,"label",16),Mt(1,1),vt(2,IQ,1,0,"span",17),R()),e&2){let i=wt(2);pt("floating",i._shouldLabelFloat())("monitorResize",i._hasOutline())("id",i._labelId),Zt("for",i._control.id),j(2),Nt(2,!i.hideRequiredMarker&&i._control.required?2:-1)}}function CQ(e,t){if(e&1&&vt(0,EQ,3,5,"label",16),e&2){let i=wt();Nt(0,i._hasFloatingLabel()?0:-1)}}function TQ(e,t){e&1&&ht(0,"div",5)}function SQ(e,t){}function AQ(e,t){if(e&1&&vt(0,SQ,0,0,"ng-template",11),e&2){wt(2);let i=Gi(1);pt("ngTemplateOutlet",i)}}function DQ(e,t){if(e&1&&(D(0,"div",7),vt(1,AQ,1,1,null,11),R()),e&2){let i=wt();pt("matFormFieldNotchedOutlineOpen",i._shouldLabelFloat()),j(),Nt(1,i._forceDisplayInfixLabel()?-1:1)}}function RQ(e,t){e&1&&(D(0,"div",8,2),Mt(2,2),R())}function kQ(e,t){e&1&&(D(0,"div",9,3),Mt(2,3),R())}function MQ(e,t){}function PQ(e,t){if(e&1&&vt(0,MQ,0,0,"ng-template",11),e&2){wt();let i=Gi(1);pt("ngTemplateOutlet",i)}}function OQ(e,t){e&1&&(D(0,"div",12),Mt(1,4),R())}function NQ(e,t){e&1&&(D(0,"div",13),Mt(1,5),R())}function FQ(e,t){e&1&&ht(0,"div",14)}function LQ(e,t){if(e&1&&(D(0,"div",18),Mt(1,6),R()),e&2){let i=wt();pt("@transitionMessages",i._subscriptAnimationState)}}function VQ(e,t){if(e&1&&(D(0,"mat-hint",20),Z(1),R()),e&2){let i=wt(2);pt("id",i._hintLabelId),j(),Ke(i.hintLabel)}}function BQ(e,t){if(e&1&&(D(0,"div",19),vt(1,VQ,2,2,"mat-hint",20),Mt(2,7),ht(3,"div",21),Mt(4,8),R()),e&2){let i=wt();pt("@transitionMessages",i._subscriptAnimationState),j(),Nt(1,i.hintLabel?1:-1)}}var oo=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=X({type:t,selectors:[["mat-label"]],standalone:!0});let e=t;return e})();var jQ=new H("MatError");var UQ=0,zV=(()=>{let t=class t{constructor(){this.align="start",this.id=`mat-mdc-hint-${UQ++}`}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=X({type:t,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(r,o){r&2&&($l("id",o.id),Zt("align",null),Bt("mat-mdc-form-field-hint-end",o.align==="end"))},inputs:{align:"align",id:"id"},standalone:!0});let e=t;return e})(),zQ=new H("MatPrefix");var $Q=new H("MatSuffix");var QV=new H("FloatingLabelParent"),$V=(()=>{let t=class t{get floating(){return this._floating}set floating(n){this._floating=n,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(n){this._monitorResize=n,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(n){this._elementRef=n,this._floating=!1,this._monitorResize=!1,this._resizeObserver=W(UV),this._ngZone=W(Q),this._parent=W(QV),this._resizeSubscription=new un}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return HQ(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}};t.\u0275fac=function(r){return new(r||t)(x(gt))},t.\u0275dir=X({type:t,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(r,o){r&2&&Bt("mdc-floating-label--float-above",o.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"},standalone:!0});let e=t;return e})();function HQ(e){let t=e;if(t.offsetParent!==null)return t.scrollWidth;let i=t.cloneNode(!0);i.style.setProperty("position","absolute"),i.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(i);let n=i.scrollWidth;return i.remove(),n}var HV="mdc-line-ripple--active",sb="mdc-line-ripple--deactivating",WV=(()=>{let t=class t{constructor(n,r){this._elementRef=n,this._handleTransitionEnd=o=>{let s=this._elementRef.nativeElement.classList,l=s.contains(sb);o.propertyName==="opacity"&&l&&s.remove(HV,sb)},r.runOutsideAngular(()=>{n.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){let n=this._elementRef.nativeElement.classList;n.remove(sb),n.add(HV)}deactivate(){this._elementRef.nativeElement.classList.add(sb)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}};t.\u0275fac=function(r){return new(r||t)(x(gt),x(Q))},t.\u0275dir=X({type:t,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"],standalone:!0});let e=t;return e})(),qV=(()=>{let t=class t{constructor(n,r){this._elementRef=n,this._ngZone=r,this.open=!1}ngAfterViewInit(){let n=this._elementRef.nativeElement.querySelector(".mdc-floating-label");n?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(n.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>n.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(n){!this.open||!n?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${n}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}};t.\u0275fac=function(r){return new(r||t)(x(gt),x(Q))},t.\u0275cmp=ft({type:t,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(r,o){if(r&1&&be(pQ,5),r&2){let s;It(s=Et())&&(o._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(r,o){r&2&&Bt("mdc-notched-outline--notched",o.open)},inputs:{open:[F.None,"matFormFieldNotchedOutlineOpen","open"]},standalone:!0,features:[zt],attrs:gQ,ngContentSelectors:_Q,decls:5,vars:0,consts:[["notch",""],[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(r,o){r&1&&(Te(),ht(0,"div",1),D(1,"div",2,0),Mt(3),R(),ht(4,"div",3))},encapsulation:2,changeDetection:0});let e=t;return e})(),WQ={transitionMessages:Bn("transitionMessages",[Ye("enter",Yt({opacity:1,transform:"translateY(0%)"})),We("void => enter",[Yt({opacity:0,transform:"translateY(-5px)"}),tn("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Gf=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=X({type:t});let e=t;return e})();var Kf=new H("MatFormField"),qQ=new H("MAT_FORM_FIELD_DEFAULT_OPTIONS"),GV=0,KV="fill",GQ="auto",YV="fixed",KQ="translateY(-50%)",so=(()=>{let t=class t{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(n){this._hideRequiredMarker=ro(n)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||GQ}set floatLabel(n){n!==this._floatLabel&&(this._floatLabel=n,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(n){let r=this._appearance,o=n||this._defaults?.appearance||KV;this._appearance=o,this._appearance==="outline"&&this._appearance!==r&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||YV}set subscriptSizing(n){this._subscriptSizing=n||this._defaults?.subscriptSizing||YV}get hintLabel(){return this._hintLabel}set hintLabel(n){this._hintLabel=n,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(n){this._explicitFormFieldControl=n}constructor(n,r,o,s,l,d,u,f){this._elementRef=n,this._changeDetectorRef=r,this._ngZone=o,this._dir=s,this._platform=l,this._defaults=d,this._animationMode=u,this._hideRequiredMarker=!1,this.color="primary",this._appearance=KV,this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId=`mat-mdc-form-field-label-${GV++}`,this._hintLabelId=`mat-mdc-hint-${GV++}`,this._subscriptAnimationState="",this._destroyed=new at,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,d&&(d.appearance&&(this.appearance=d.appearance),this._hideRequiredMarker=!!d?.hideRequiredMarker,d.color&&(this.color=d.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){let n=this._control;n.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${n.controlType}`),n.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),n.ngControl&&n.ngControl.valueChanges&&n.ngControl.valueChanges.pipe(Lt(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(n=>!n._isText),this._hasTextPrefix=!!this._prefixChildren.find(n=>n._isText),this._hasIconSuffix=!!this._suffixChildren.find(n=>!n._isText),this._hasTextSuffix=!!this._suffixChildren.find(n=>n._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),wn(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Lt(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(Lt(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(n){let r=this._control?this._control.ngControl:null;return r&&r[n]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let n=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&n.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let r=this._hintChildren?this._hintChildren.find(s=>s.align==="start"):null,o=this._hintChildren?this._hintChildren.find(s=>s.align==="end"):null;r?n.push(r.id):this._hintLabel&&n.push(this._hintLabelId),o&&n.push(o.id)}else this._errorChildren&&n.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(n)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;let n=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){n.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdateOnStable=!0;return}let r=this._iconPrefixContainer?.nativeElement,o=this._textPrefixContainer?.nativeElement,s=r?.getBoundingClientRect().width??0,l=o?.getBoundingClientRect().width??0,d=this._dir.value==="rtl"?"-1":"1",u=`${s+l}px`,p=`calc(${d} * (${u} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;n.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${KQ} translateX(${p})
    )`}_isAttachedToDom(){let n=this._elementRef.nativeElement;if(n.getRootNode){let r=n.getRootNode();return r&&r!==n}return document.documentElement.contains(n)}};t.\u0275fac=function(r){return new(r||t)(x(gt),x(Oe),x(Q),x(Fi),x(te),x(qQ,8),x(oi,8),x(xt))},t.\u0275cmp=ft({type:t,selectors:[["mat-form-field"]],contentQueries:function(r,o,s){if(r&1&&(Ie(s,oo,5),Ie(s,oo,7),Ie(s,Gf,5),Ie(s,zQ,5),Ie(s,$Q,5),Ie(s,jQ,5),Ie(s,zV,5)),r&2){let l;It(l=Et())&&(o._labelChildNonStatic=l.first),It(l=Et())&&(o._labelChildStatic=l.first),It(l=Et())&&(o._formFieldControl=l.first),It(l=Et())&&(o._prefixChildren=l),It(l=Et())&&(o._suffixChildren=l),It(l=Et())&&(o._errorChildren=l),It(l=Et())&&(o._hintChildren=l)}},viewQuery:function(r,o){if(r&1&&(be(vQ,5),be(bQ,5),be(yQ,5),be($V,5),be(qV,5),be(WV,5)),r&2){let s;It(s=Et())&&(o._textField=s.first),It(s=Et())&&(o._iconPrefixContainer=s.first),It(s=Et())&&(o._textPrefixContainer=s.first),It(s=Et())&&(o._floatingLabel=s.first),It(s=Et())&&(o._notchedOutline=s.first),It(s=Et())&&(o._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(r,o){r&2&&Bt("mat-mdc-form-field-label-always-float",o._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",o._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",o._hasIconSuffix)("mat-form-field-invalid",o._control.errorState)("mat-form-field-disabled",o._control.disabled)("mat-form-field-autofilled",o._control.autofilled)("mat-form-field-no-animations",o._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",o.appearance=="fill")("mat-form-field-appearance-outline",o.appearance=="outline")("mat-form-field-hide-placeholder",o._hasFloatingLabel()&&!o._shouldLabelFloat())("mat-focused",o._control.focused)("mat-primary",o.color!=="accent"&&o.color!=="warn")("mat-accent",o.color==="accent")("mat-warn",o.color==="warn")("ng-untouched",o._shouldForward("untouched"))("ng-touched",o._shouldForward("touched"))("ng-pristine",o._shouldForward("pristine"))("ng-dirty",o._shouldForward("dirty"))("ng-valid",o._shouldForward("valid"))("ng-invalid",o._shouldForward("invalid"))("ng-pending",o._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],standalone:!0,features:[pe([{provide:Kf,useExisting:t},{provide:QV,useExisting:t}]),zt],ngContentSelectors:xQ,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(r,o){if(r&1){let s=Pe();Te(wQ),vt(0,CQ,1,1,"ng-template",null,0,tk),D(2,"div",4,1),Ct("click",function(d){return ne(s),ie(o._control.onContainerClick(d))}),vt(4,TQ,1,0,"div",5),D(5,"div",6),vt(6,DQ,2,2,"div",7)(7,RQ,3,0,"div",8)(8,kQ,3,0,"div",9),D(9,"div",10),vt(10,PQ,1,1,null,11),Mt(11),R(),vt(12,OQ,2,0,"div",12)(13,NQ,2,0,"div",13),R(),vt(14,FQ,1,0,"div",14),R(),D(15,"div",15),vt(16,LQ,2,1)(17,BQ,5,2),R()}if(r&2){let s;j(2),Bt("mdc-text-field--filled",!o._hasOutline())("mdc-text-field--outlined",o._hasOutline())("mdc-text-field--no-label",!o._hasFloatingLabel())("mdc-text-field--disabled",o._control.disabled)("mdc-text-field--invalid",o._control.errorState),j(2),Nt(4,!o._hasOutline()&&!o._control.disabled?4:-1),j(2),Nt(6,o._hasOutline()?6:-1),j(),Nt(7,o._hasIconPrefix?7:-1),j(),Nt(8,o._hasTextPrefix?8:-1),j(2),Nt(10,!o._hasOutline()||o._forceDisplayInfixLabel()?10:-1),j(2),Nt(12,o._hasTextSuffix?12:-1),j(),Nt(13,o._hasIconSuffix?13:-1),j(),Nt(14,o._hasOutline()?-1:14),j(),Bt("mat-mdc-form-field-subscript-dynamic-size",o.subscriptSizing==="dynamic"),j(),Nt(16,(s=o._getDisplayedMessages())==="error"?16:s==="hint"?17:-1)}},dependencies:[$V,qV,pk,WV,zV],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 96px/0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px*2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-hover-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-hover-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-hover-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-hover-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(.75*var(--mdc-outlined-text-field-label-text-size))}.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mdc-outlined-text-field-label-text-size)}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height);padding-top:var(--mat-form-field-filled-with-label-container-padding-top);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding);padding-bottom:var(--mat-form-field-container-vertical-padding)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color)}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font);line-height:var(--mat-form-field-subscript-text-line-height);font-size:var(--mat-form-field-subscript-text-size);letter-spacing:var(--mat-form-field-subscript-text-tracking);font-weight:var(--mat-form-field-subscript-text-weight)}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color)}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity)}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color)}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color)}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color)}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color)}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color)}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color)}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[WQ.transitionMessages]},changeDetection:0});let e=t;return e})(),cl=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({imports:[Gt,Ki,Nv,Gt]});let e=t;return e})();var XV=rr({passive:!0}),ZV=(()=>{let t=class t{constructor(n,r){this._platform=n,this._ngZone=r,this._monitoredElements=new Map}monitor(n){if(!this._platform.isBrowser)return Pr;let r=or(n),o=this._monitoredElements.get(r);if(o)return o.subject;let s=new at,l="cdk-text-field-autofilled",d=u=>{u.animationName==="cdk-text-field-autofill-start"&&!r.classList.contains(l)?(r.classList.add(l),this._ngZone.run(()=>s.next({target:u.target,isAutofilled:!0}))):u.animationName==="cdk-text-field-autofill-end"&&r.classList.contains(l)&&(r.classList.remove(l),this._ngZone.run(()=>s.next({target:u.target,isAutofilled:!1})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",d,XV),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:s,unlisten:()=>{r.removeEventListener("animationstart",d,XV)}}),s}stopMonitoring(n){let r=or(n),o=this._monitoredElements.get(r);o&&(o.unlisten(),o.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((n,r)=>this.stopMonitoring(r))}};t.\u0275fac=function(r){return new(r||t)(T(te),T(Q))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var JV=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({});let e=t;return e})();var QQ=new H("MAT_INPUT_VALUE_ACCESSOR"),XQ=["button","checkbox","file","hidden","image","radio","range","reset","submit"],ZQ=0,Ys=(()=>{let t=class t{get disabled(){return this._disabled}set disabled(n){this._disabled=ro(n),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(n){this._id=n||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(dc.required)??!1}set required(n){this._required=ro(n)}get type(){return this._type}set type(n){this._type=n||"text",this._validateType(),!this._isTextarea&&OT().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(n){this._errorStateTracker.matcher=n}get value(){return this._inputValueAccessor.value}set value(n){n!==this.value&&(this._inputValueAccessor.value=n,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(n){this._readonly=ro(n)}get errorState(){return this._errorStateTracker.errorState}set errorState(n){this._errorStateTracker.errorState=n}constructor(n,r,o,s,l,d,u,f,p,_){this._elementRef=n,this._platform=r,this.ngControl=o,this._autofillMonitor=f,this._formField=_,this._uid=`mat-input-${ZQ++}`,this.focused=!1,this.stateChanges=new at,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(A=>OT().has(A)),this._iOSKeyupListener=A=>{let M=A.target;!M.value&&M.selectionStart===0&&M.selectionEnd===0&&(M.setSelectionRange(1,1),M.setSelectionRange(0,0))};let y=this._elementRef.nativeElement,S=y.nodeName.toLowerCase();this._inputValueAccessor=u||y,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&p.runOutsideAngular(()=>{n.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new Ed(d,o,l,s,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=S==="select",this._isTextarea=S==="textarea",this._isInFormField=!!_,this._isNativeSelect&&(this.controlType=y.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(n=>{this.autofilled=n.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(n){this._elementRef.nativeElement.focus(n)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(n){n!==this.focused&&(this.focused=n,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){let n=this._elementRef.nativeElement.value;this._previousNativeValue!==n&&(this._previousNativeValue=n,this.stateChanges.next())}_dirtyCheckPlaceholder(){let n=this._getPlaceholder();if(n!==this._previousPlaceholder){let r=this._elementRef.nativeElement;this._previousPlaceholder=n,n?r.setAttribute("placeholder",n):r.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){XQ.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let n=this._elementRef.nativeElement.validity;return n&&n.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let n=this._elementRef.nativeElement,r=n.options[0];return this.focused||n.multiple||!this.empty||!!(n.selectedIndex>-1&&r&&r.label)}else return this.focused||!this.empty}setDescribedByIds(n){n.length?this._elementRef.nativeElement.setAttribute("aria-describedby",n.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let n=this._elementRef.nativeElement;return this._isNativeSelect&&(n.multiple||n.size>1)}};t.\u0275fac=function(r){return new(r||t)(x(gt),x(te),x(So,10),x(vh,8),x(Ao,8),x(Kv),x(QQ,10),x(ZV),x(Q),x(Kf,8))},t.\u0275dir=X({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(r,o){r&1&&Ct("focus",function(){return o._focusChanged(!0)})("blur",function(){return o._focusChanged(!1)})("input",function(){return o._onInput()}),r&2&&($l("id",o.id)("disabled",o.disabled)("required",o.required),Zt("name",o.name||null)("readonly",o.readonly&&!o._isNativeSelect||null)("aria-invalid",o.empty&&o.required?null:o.errorState)("aria-required",o.required)("id",o.id),Bt("mat-input-server",o._isServer)("mat-mdc-form-field-textarea-control",o._isInFormField&&o._isTextarea)("mat-mdc-form-field-input-control",o._isInFormField)("mdc-text-field__input",o._isInFormField)("mat-mdc-native-select-inline",o._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[F.None,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],standalone:!0,features:[pe([{provide:Gf,useExisting:t}]),hn]});let e=t;return e})(),t2=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({imports:[Gt,cl,cl,JV,Gt]});let e=t;return e})();var JQ=["trigger"],tX=["panel"],eX=[[["mat-select-trigger"]],"*"],nX=["mat-select-trigger","*"];function iX(e,t){if(e&1&&(D(0,"span",4),Z(1),R()),e&2){let i=wt();j(),Ke(i.placeholder)}}function rX(e,t){e&1&&Mt(0)}function oX(e,t){if(e&1&&(D(0,"span",11),Z(1),R()),e&2){let i=wt(2);j(),Ke(i.triggerValue)}}function sX(e,t){if(e&1&&(D(0,"span",10),vt(1,rX,1,0)(2,oX,2,1),R()),e&2){let i=wt();j(),Nt(1,i.customTrigger?1:2)}}function aX(e,t){if(e&1){let i=Pe();D(0,"div",12,1),Ct("@transformPanel.done",function(r){ne(i);let o=wt();return ie(o._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){ne(i);let o=wt();return ie(o._handleKeydown(r))}),Mt(2,1),R()}if(e&2){let i=wt();G1("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",i._getPanelTheme(),""),pt("ngClass",i.panelClass)("@transformPanel","showing"),Zt("id",i.id+"-panel")("aria-multiselectable",i.multiple)("aria-label",i.ariaLabel||null)("aria-labelledby",i._getPanelAriaLabelledby())}}var lX={transformPanelWrap:Bn("transformPanelWrap",[We("* => void",jp("@transformPanel",[Bp()],{optional:!0}))]),transformPanel:Bn("transformPanel",[Ye("void",Yt({opacity:0,transform:"scale(1, 0.8)"})),We("void => showing",tn("120ms cubic-bezier(0, 0, 0.2, 1)",Yt({opacity:1,transform:"scale(1, 1)"}))),We("* => void",tn("100ms linear",Yt({opacity:0})))])};var e2=0,n2=new H("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let e=W(In);return()=>e.scrollStrategies.reposition()}});function cX(e){return()=>e.scrollStrategies.reposition()}var dX=new H("MAT_SELECT_CONFIG"),uX={provide:n2,deps:[In],useFactory:cX},hX=new H("MatSelectTrigger"),uS=class{constructor(t,i){this.source=t,this.value=i}},Rd=(()=>{let t=class t{_scrollOptionIntoView(n){let r=this.options.toArray()[n];if(r){let o=this.panel.nativeElement,s=CV(n,this.options,this.optionGroups),l=r._getHostElement();n===0&&s===1?o.scrollTop=0:o.scrollTop=TV(l.offsetTop,l.offsetHeight,o.scrollTop,o.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(n){return new uS(this,n)}get focused(){return this._focused||this._panelOpen}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(n){this._hideSingleSelectionIndicator=n,this._syncParentProperties()}get placeholder(){return this._placeholder}set placeholder(n){this._placeholder=n,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(dc.required)??!1}set required(n){this._required=n,this.stateChanges.next()}get multiple(){return this._multiple}set multiple(n){this._selectionModel,this._multiple=n}get compareWith(){return this._compareWith}set compareWith(n){this._compareWith=n,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(n){this._assignValue(n)&&this._onChange(n)}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(n){this._errorStateTracker.matcher=n}get id(){return this._id}set id(n){this._id=n||this._uid,this.stateChanges.next()}get errorState(){return this._errorStateTracker.errorState}set errorState(n){this._errorStateTracker.errorState=n}constructor(n,r,o,s,l,d,u,f,p,_,y,S,A,M){this._viewportRuler=n,this._changeDetectorRef=r,this._elementRef=l,this._dir=d,this._parentFormField=p,this.ngControl=_,this._liveAnnouncer=A,this._defaultOptions=M,this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._panelOpen=!1,this._compareWith=(K,ut)=>K===ut,this._uid=`mat-select-${e2++}`,this._triggerAriaLabelledBy=null,this._destroy=new at,this.stateChanges=new at,this._onChange=()=>{},this._onTouched=()=>{},this._valueId=`mat-select-value-${e2++}`,this._panelDoneAnimatingStream=new at,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1,this._multiple=!1,this.disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto",this._initialized=new at,this.optionSelectionChanges=Cu(()=>{let K=this.options;return K?K.changes.pipe(qn(K),ke(()=>wn(...K.map(ut=>ut.onSelectionChange)))):this._initialized.pipe(ke(()=>this.optionSelectionChanges))}),this.openedChange=new qt,this._openedStream=this.openedChange.pipe(me(K=>K),dt(()=>{})),this._closedStream=this.openedChange.pipe(me(K=>!K),dt(()=>{})),this.selectionChange=new qt,this.valueChange=new qt,this._trackedModal=null,this._skipPredicate=K=>this.panelOpen?!1:K.disabled,this.ngControl&&(this.ngControl.valueAccessor=this),M?.typeaheadDebounceInterval!=null&&(this.typeaheadDebounceInterval=M.typeaheadDebounceInterval),this._errorStateTracker=new Ed(s,_,f,u,this.stateChanges),this._scrollStrategyFactory=S,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(y)||0,this.id=this.id}ngOnInit(){this._selectionModel=new tb(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(ua(),Lt(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen)),this._viewportRuler.change().pipe(Lt(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(Lt(this._destroy)).subscribe(n=>{n.added.forEach(r=>r.select()),n.removed.forEach(r=>r.deselect())}),this.options.changes.pipe(qn(null),Lt(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){let n=this._getTriggerAriaLabelledby(),r=this.ngControl;if(n!==this._triggerAriaLabelledBy){let o=this._elementRef.nativeElement;this._triggerAriaLabelledBy=n,n?o.setAttribute("aria-labelledby",n):o.removeAttribute("aria-labelledby")}r&&(this._previousControl!==r.control&&(this._previousControl!==void 0&&r.disabled!==null&&r.disabled!==this.disabled&&(this.disabled=r.disabled),this._previousControl=r.control),this.updateErrorState())}ngOnChanges(n){(n.disabled||n.userAriaDescribedBy)&&this.stateChanges.next(),n.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_applyModalPanelOwnership(){let n=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!n)return;let r=`${this.id}-panel`;this._trackedModal&&Hv(this._trackedModal,"aria-owns",r),jT(n,"aria-owns",r),this._trackedModal=n}_clearFromModal(){if(!this._trackedModal)return;let n=`${this.id}-panel`;Hv(this._trackedModal,"aria-owns",n),this._trackedModal=null}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next())}writeValue(n){this._assignValue(n)}registerOnChange(n){this._onChange=n}registerOnTouched(n){this._onTouched=n}setDisabledState(n){this.disabled=n,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){let n=this._selectionModel.selected.map(r=>r.viewValue);return this._isRtl()&&n.reverse(),n.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return this._dir?this._dir.value==="rtl":!1}_handleKeydown(n){this.disabled||(this.panelOpen?this._handleOpenKeydown(n):this._handleClosedKeydown(n))}_handleClosedKeydown(n){let r=n.keyCode,o=r===40||r===38||r===37||r===39,s=r===13||r===32,l=this._keyManager;if(!l.isTyping()&&s&&!Ni(n)||(this.multiple||n.altKey)&&o)n.preventDefault(),this.open();else if(!this.multiple){let d=this.selected;l.onKeydown(n);let u=this.selected;u&&d!==u&&this._liveAnnouncer.announce(u.viewValue,1e4)}}_handleOpenKeydown(n){let r=this._keyManager,o=n.keyCode,s=o===40||o===38,l=r.isTyping();if(s&&n.altKey)n.preventDefault(),this.close();else if(!l&&(o===13||o===32)&&r.activeItem&&!Ni(n))n.preventDefault(),r.activeItem._selectViaInteraction();else if(!l&&this._multiple&&o===65&&n.ctrlKey){n.preventDefault();let d=this.options.some(u=>!u.disabled&&!u.selected);this.options.forEach(u=>{u.disabled||(d?u.select():u.deselect())})}else{let d=r.activeItemIndex;r.onKeydown(n),this._multiple&&s&&n.shiftKey&&r.activeItem&&r.activeItemIndex!==d&&r.activeItem._selectViaInteraction()}}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe($e(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(n){if(this.options.forEach(r=>r.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&n)Array.isArray(n),n.forEach(r=>this._selectOptionByValue(r)),this._sortValues();else{let r=this._selectOptionByValue(n);r?this._keyManager.updateActiveItem(r):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(n){let r=this.options.find(o=>{if(this._selectionModel.isSelected(o))return!1;try{return o.value!=null&&this._compareWith(o.value,n)}catch{return!1}});return r&&this._selectionModel.select(r),r}_assignValue(n){return n!==this._value||this._multiple&&Array.isArray(n)?(this.options&&this._setSelectionByValue(n),this._value=n,!0):!1}_getOverlayWidth(n){return this.panelWidth==="auto"?(n instanceof ib?n.elementRef:n||this._elementRef).nativeElement.getBoundingClientRect().width:this.panelWidth===null?"":this.panelWidth}_syncParentProperties(){if(this.options)for(let n of this.options)n._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new zv(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){let n=wn(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Lt(n)).subscribe(r=>{this._onSelect(r.source,r.isUserInput),r.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),wn(...this.options.map(r=>r._stateChanges)).pipe(Lt(n)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(n,r){let o=this._selectionModel.isSelected(n);n.value==null&&!this._multiple?(n.deselect(),this._selectionModel.clear(),this.value!=null&&this._propagateChanges(n.value)):(o!==n.selected&&(n.selected?this._selectionModel.select(n):this._selectionModel.deselect(n)),r&&this._keyManager.setActiveItem(n),this.multiple&&(this._sortValues(),r&&this.focus())),o!==this._selectionModel.isSelected(n)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){let n=this.options.toArray();this._selectionModel.sort((r,o)=>this.sortComparator?this.sortComparator(r,o,n):n.indexOf(r)-n.indexOf(o)),this.stateChanges.next()}}_propagateChanges(n){let r;this.multiple?r=this.selected.map(o=>o.value):r=this.selected?this.selected.value:n,this._value=r,this.valueChange.emit(r),this._onChange(r),this.selectionChange.emit(this._getChangeEvent(r)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let n=-1;for(let r=0;r<this.options.length;r++)if(!this.options.get(r).disabled){n=r;break}this._keyManager.setActiveItem(n)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(n){this._elementRef.nativeElement.focus(n)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;let n=this._parentFormField?.getLabelId(),r=n?n+" ":"";return this.ariaLabelledby?r+this.ariaLabelledby:n}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let n=this._parentFormField?.getLabelId(),r=(n?n+" ":"")+this._valueId;return this.ariaLabelledby&&(r+=" "+this.ariaLabelledby),r}_panelDoneAnimating(n){this.openedChange.emit(n)}setDescribedByIds(n){n.length?this._elementRef.nativeElement.setAttribute("aria-describedby",n.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}};t.\u0275fac=function(r){return new(r||t)(x(Ws),x(Oe),x(Q),x(Kv),x(gt),x(Fi,8),x(vh,8),x(Ao,8),x(Kf,8),x(So,10),wo("tabindex"),x(n2),x(qv),x(dX,8))},t.\u0275cmp=ft({type:t,selectors:[["mat-select"]],contentQueries:function(r,o,s){if(r&1&&(Ie(s,hX,5),Ie(s,zs,5),Ie(s,YT,5)),r&2){let l;It(l=Et())&&(o.customTrigger=l.first),It(l=Et())&&(o.options=l),It(l=Et())&&(o.optionGroups=l)}},viewQuery:function(r,o){if(r&1&&(be(JQ,5),be(tX,5),be(lS,5)),r&2){let s;It(s=Et())&&(o.trigger=s.first),It(s=Et())&&(o.panel=s.first),It(s=Et())&&(o._overlayDir=s.first)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(r,o){r&1&&Ct("keydown",function(l){return o._handleKeydown(l)})("focus",function(){return o._onFocus()})("blur",function(){return o._onBlur()}),r&2&&(Zt("id",o.id)("tabindex",o.disabled?-1:o.tabIndex)("aria-controls",o.panelOpen?o.id+"-panel":null)("aria-expanded",o.panelOpen)("aria-label",o.ariaLabel||null)("aria-required",o.required.toString())("aria-disabled",o.disabled.toString())("aria-invalid",o.errorState)("aria-activedescendant",o._getAriaActiveDescendant()),Bt("mat-mdc-select-disabled",o.disabled)("mat-mdc-select-invalid",o.errorState)("mat-mdc-select-required",o.required)("mat-mdc-select-empty",o.empty)("mat-mdc-select-multiple",o.multiple))},inputs:{userAriaDescribedBy:[F.None,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[F.HasDecoratorInputTransform,"disabled","disabled",Tt],disableRipple:[F.HasDecoratorInputTransform,"disableRipple","disableRipple",Tt],tabIndex:[F.HasDecoratorInputTransform,"tabIndex","tabIndex",n=>n==null?0:Io(n)],hideSingleSelectionIndicator:[F.HasDecoratorInputTransform,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Tt],placeholder:"placeholder",required:[F.HasDecoratorInputTransform,"required","required",Tt],multiple:[F.HasDecoratorInputTransform,"multiple","multiple",Tt],disableOptionCentering:[F.HasDecoratorInputTransform,"disableOptionCentering","disableOptionCentering",Tt],compareWith:"compareWith",value:"value",ariaLabel:[F.None,"aria-label","ariaLabel"],ariaLabelledby:[F.None,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[F.HasDecoratorInputTransform,"typeaheadDebounceInterval","typeaheadDebounceInterval",Io],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],standalone:!0,features:[pe([{provide:Gf,useExisting:t},{provide:KT,useExisting:t}]),he,hn,zt],ngContentSelectors:nX,decls:11,vars:8,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"backdropClick","attach","detach","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(r,o){if(r&1){let s=Pe();Te(eX),D(0,"div",2,0),Ct("click",function(){return ne(s),ie(o.open())}),D(3,"div",3),vt(4,iX,2,1,"span",4)(5,sX,3,1),R(),D(6,"div",5)(7,"div",6),yo(),D(8,"svg",7),ht(9,"path",8),R()()()(),vt(10,aX,3,9,"ng-template",9),Ct("backdropClick",function(){return ne(s),ie(o.close())})("attach",function(){return ne(s),ie(o._onAttached())})("detach",function(){return ne(s),ie(o.close())})}if(r&2){let s=Gi(1);j(3),Zt("id",o._valueId),j(),Nt(4,o.empty?4:5),j(6),pt("cdkConnectedOverlayPanelClass",o._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",o._scrollStrategy)("cdkConnectedOverlayOrigin",o._preferredOverlayOrigin||s)("cdkConnectedOverlayOpen",o.panelOpen)("cdkConnectedOverlayPositions",o._positions)("cdkConnectedOverlayWidth",o._overlayWidth)}},dependencies:[ib,lS,ql],styles:['.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color);font-family:var(--mat-select-trigger-text-font);line-height:var(--mat-select-trigger-text-line-height);font-size:var(--mat-select-trigger-text-size);font-weight:var(--mat-select-trigger-text-weight);letter-spacing:var(--mat-select-trigger-text-tracking)}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow)}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color)}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color)}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color)}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color)}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color)}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color)}.cdk-high-contrast-active div.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}div.mat-mdc-select-panel .mat-mdc-option{--mdc-list-list-item-container-color: var(--mat-select-panel-background-color)}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform)}'],encapsulation:2,data:{animation:[lX.transformPanel]},changeDetection:0});let e=t;return e})();var cb=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({providers:[uX],imports:[Ki,Gs,QT,Gt,Hs,cl,QT,Gt]});let e=t;return e})();var fX=["*"];var mX=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],pX=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],gX=new H("MAT_CARD_CONFIG"),kd=(()=>{let t=class t{constructor(n){this.appearance=n?.appearance||"raised"}};t.\u0275fac=function(r){return new(r||t)(x(gX,8))},t.\u0275cmp=ft({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(r,o){r&2&&Bt("mat-mdc-card-outlined",o.appearance==="outlined")("mdc-card--outlined",o.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],standalone:!0,features:[zt],ngContentSelectors:fX,decls:1,vars:0,template:function(r,o){r&1&&(Te(),Mt(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0});let e=t;return e})(),Md=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=X({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"],standalone:!0});let e=t;return e})();var Pd=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=X({type:t,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"],standalone:!0});let e=t;return e})();var Od=(()=>{let t=class t{constructor(){this.align="start"}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=X({type:t,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-mdc-card-actions","mdc-card__actions"],hostVars:2,hostBindings:function(r,o){r&2&&Bt("mat-mdc-card-actions-align-end",o.align==="end")},inputs:{align:"align"},exportAs:["matCardActions"],standalone:!0});let e=t;return e})(),Nd=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=ft({type:t,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],standalone:!0,features:[zt],ngContentSelectors:pX,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(r,o){r&1&&(Te(mX),Mt(0),D(1,"div",0),Mt(2,1),R(),Mt(3,2))},encapsulation:2,changeDetection:0});let e=t;return e})();var Fd=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=X({type:t,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-mdc-card-image","mdc-card__media"],standalone:!0});let e=t;return e})();var r2=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({imports:[Gt,Ki,Gt]});let e=t;return e})();function _X(e,t){if(e&1&&(D(0,"mat-option",14),Z(1),R()),e&2){let i=t.$implicit;pt("value",i),j(),Ke(i)}}var o2=(()=>{let t=class t{constructor(n,r,o,s){this._cService=n,this._pService=r,this.router=o,this.formBuilder=s,this.form=this.formBuilder.group({name:new _i(""),price:new _i(0),category:new _i(""),imgURL:new _i("")}),this.categories$=this._cService.getCategories()}onSubmit(){let n=this.form.value;this._pService.addProduct(n),this.router.navigate(["admin/products"])}};t.\u0275fac=function(r){return new(r||t)(x(fd),x(Ks),x(Gn),x(Eg))},t.\u0275cmp=ft({type:t,selectors:[["app-product-form"]],decls:40,vars:7,consts:[[1,"container"],[1,"row"],[1,"col-6"],[1,"example-card"],["mat-card-image","",3,"src"],["mat-button","","color","primary"],[3,"ngSubmit","formGroup"],["appearance","outline"],["formControlName","name","matInput",""],["formControlName","price","matInput",""],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["formControlName","imgURL","matInput",""],["type","submit","mat-button","","color","primary"],[3,"value"]],template:function(r,o){r&1&&(D(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-header")(5,"mat-card-title"),Z(6),R()(),ht(7,"img",4),D(8,"mat-card-content")(9,"mat-card-title"),Z(10),R()(),D(11,"mat-card-actions")(12,"button",5),Z(13,"Buy"),R()()()(),D(14,"div",2),ht(15,"br")(16,"br")(17,"br")(18,"br"),D(19,"form",6),Ct("ngSubmit",function(){return o.onSubmit()}),D(20,"mat-form-field",7)(21,"mat-label"),Z(22,"Product Name"),R(),ht(23,"input",8),R(),D(24,"mat-form-field",7)(25,"mat-label"),Z(26,"Product Price"),R(),ht(27,"input",9),R(),D(28,"mat-form-field",7)(29,"mat-label"),Z(30,"Product Category"),R(),D(31,"mat-select",10),vt(32,_X,2,2,"mat-option",11),xo(33,"async"),R()(),D(34,"mat-form-field",7)(35,"mat-label"),Z(36,"Product image URL"),R(),ht(37,"input",12),R(),D(38,"button",13),Z(39,"Add"),R()()()()()),r&2&&(j(6),Ke(o.form.value.name),j(),pt("src",o.form.value.imgURL,cs),j(3),Ke(o.form.value.price),j(9),pt("formGroup",o.form),j(13),pt("ngForOf",Hl(33,5,o.categories$)))},dependencies:[Gl,so,oo,Ys,Ig,fc,vg,bg,Ao,bh,Rd,zs,ar,kd,Od,Pd,Nd,Fd,Md,Kl],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:600px}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.example-card[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{height:465px;width:400px}"]});let e=t;return e})();function vX(e,t){if(e&1&&(D(0,"mat-option",14),Z(1),R()),e&2){let i=t.$implicit;pt("value",i),j(),Ke(i)}}var s2=(()=>{let t=class t{constructor(n,r,o,s,l){this._cService=n,this._pService=r,this.formBuilder=o,this.route=s,this.router=l,this.param=this.route.snapshot.params,this.pID=this.param.ID,this.getData=this._pService.getProductById(this.pID).subscribe(d=>{if(d.exists){let u=d.data();this.form&&this.form.patchValue({name:u.name,price:u.price,category:u.category,imgURL:u.imgURL})}else console.log("No document found")}),this.form=this.formBuilder.group({name:new _i,price:new _i,category:new _i,imgURL:new _i}),this.categories$=this._cService.getCategories()}onSubmit(){this._pService.updateProduct(this.pID,this.form.value).then(()=>this.router.navigate(["admin/products/"]),n=>{console.error("Error updating product:",n)})}};t.\u0275fac=function(r){return new(r||t)(x(fd),x(Ks),x(Eg),x(To),x(Gn))},t.\u0275cmp=ft({type:t,selectors:[["app-product-form-update"]],decls:40,vars:7,consts:[[1,"container"],[1,"row"],[1,"col-6"],[1,"example-card"],["mat-card-image","",3,"src"],["mat-button","","color","primary"],[3,"ngSubmit","formGroup"],["appearance","outline"],["formControlName","name","matInput",""],["formControlName","price","matInput",""],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["formControlName","imgURL","matInput",""],["type","submit","mat-button","","color","primary"],[3,"value"]],template:function(r,o){r&1&&(D(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-header")(5,"mat-card-title"),Z(6),R()(),ht(7,"img",4),D(8,"mat-card-content")(9,"mat-card-title"),Z(10),R()(),D(11,"mat-card-actions")(12,"button",5),Z(13,"Buy"),R()()()(),D(14,"div",2),ht(15,"br")(16,"br")(17,"br")(18,"br"),D(19,"form",6),Ct("ngSubmit",function(){return o.onSubmit()}),D(20,"mat-form-field",7)(21,"mat-label"),Z(22,"Product Name"),R(),ht(23,"input",8),R(),D(24,"mat-form-field",7)(25,"mat-label"),Z(26,"Product Price"),R(),ht(27,"input",9),R(),D(28,"mat-form-field",7)(29,"mat-label"),Z(30,"Product Category"),R(),D(31,"mat-select",10),vt(32,vX,2,2,"mat-option",11),xo(33,"async"),R()(),D(34,"mat-form-field",7)(35,"mat-label"),Z(36,"Product image URL"),R(),ht(37,"input",12),R(),D(38,"button",13),Z(39,"Update"),R()()()()()),r&2&&(j(6),Ke(o.form.value.name),j(),pt("src",o.form.value.imgURL,cs),j(3),Ke(o.form.value.price),j(9),pt("formGroup",o.form),j(13),pt("ngForOf",Hl(33,5,o.categories$)))},dependencies:[Gl,so,oo,Ys,Ig,fc,vg,bg,Ao,bh,Rd,zs,ar,kd,Od,Pd,Nd,Fd,Md,Kl],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:600px}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:20px}.example-card[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{height:465px;width:400px}"]});let e=t;return e})();var bX=["tooltip"],c2=20;var d2=new H("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let e=W(In);return()=>e.scrollStrategies.reposition({scrollThrottle:c2})}});function yX(e){return()=>e.scrollStrategies.reposition({scrollThrottle:c2})}var wX={provide:d2,deps:[In],useFactory:yX};function xX(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}var IX=new H("mat-tooltip-default-options",{providedIn:"root",factory:xX});var a2="tooltip-panel",l2=rr({passive:!0}),EX=8,CX=8,TX=24,SX=200,u2=(()=>{let t=class t{get position(){return this._position}set position(n){n!==this._position&&(this._position=n,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(n){this._positionAtOrigin=ro(n),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(n){this._disabled=ro(n),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(n){this._showDelay=pd(n)}get hideDelay(){return this._hideDelay}set hideDelay(n){this._hideDelay=pd(n),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(n){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=n!=null?String(n).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(n){this._tooltipClass=n,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(n,r,o,s,l,d,u,f,p,_,y,S){this._overlay=n,this._elementRef=r,this._scrollDispatcher=o,this._viewContainerRef=s,this._ngZone=l,this._platform=d,this._ariaDescriber=u,this._focusMonitor=f,this._dir=_,this._defaultOptions=y,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._tooltipComponent=AX,this._viewportMargin=8,this._cssClassPrefix="mat-mdc",this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new at,this._scrollStrategy=p,this._document=S,y&&(this._showDelay=y.showDelay,this._hideDelay=y.hideDelay,y.position&&(this.position=y.position),y.positionAtOrigin&&(this.positionAtOrigin=y.positionAtOrigin),y.touchGestures&&(this.touchGestures=y.touchGestures)),_.change.pipe(Lt(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)}),this._viewportMargin=EX}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Lt(this._destroyed)).subscribe(n=>{n?n==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let n=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([r,o])=>{n.removeEventListener(r,o,l2)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(n,this.message,"tooltip"),this._focusMonitor.stopMonitoring(n)}show(n=this.showDelay,r){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let o=this._createOverlay(r);this._detach(),this._portal=this._portal||new $s(this._tooltipComponent,this._viewContainerRef);let s=this._tooltipInstance=o.attach(this._portal).instance;s._triggerElement=this._elementRef.nativeElement,s._mouseLeaveHideDelay=this._hideDelay,s.afterHidden().pipe(Lt(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),s.show(n)}hide(n=this.hideDelay){let r=this._tooltipInstance;r&&(r.isVisible()?r.hide(n):(r._cancelPendingAnimations(),this._detach()))}toggle(n){this._isTooltipVisible()?this.hide():this.show(void 0,n)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(n){if(this._overlayRef){let s=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!n)&&s._origin instanceof gt)return this._overlayRef;this._detach()}let r=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),o=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin?n||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(r);return o.positionChanges.pipe(Lt(this._destroyed)).subscribe(s=>{this._updateCurrentPositionClass(s.connectionPair),this._tooltipInstance&&s.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:o,panelClass:`${this._cssClassPrefix}-${a2}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Lt(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Lt(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(Lt(this._destroyed)).subscribe(s=>{this._isTooltipVisible()&&s.keyCode===27&&!Ni(s)&&(s.preventDefault(),s.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(n){let r=n.getConfig().positionStrategy,o=this._getOrigin(),s=this._getOverlayPosition();r.withPositions([this._addOffset(G(G({},o.main),s.main)),this._addOffset(G(G({},o.fallback),s.fallback))])}_addOffset(n){let r=CX,o=!this._dir||this._dir.value=="ltr";return n.originY==="top"?n.offsetY=-r:n.originY==="bottom"?n.offsetY=r:n.originX==="start"?n.offsetX=o?-r:r:n.originX==="end"&&(n.offsetX=o?r:-r),n}_getOrigin(){let n=!this._dir||this._dir.value=="ltr",r=this.position,o;r=="above"||r=="below"?o={originX:"center",originY:r=="above"?"top":"bottom"}:r=="before"||r=="left"&&n||r=="right"&&!n?o={originX:"start",originY:"center"}:(r=="after"||r=="right"&&n||r=="left"&&!n)&&(o={originX:"end",originY:"center"});let{x:s,y:l}=this._invertPosition(o.originX,o.originY);return{main:o,fallback:{originX:s,originY:l}}}_getOverlayPosition(){let n=!this._dir||this._dir.value=="ltr",r=this.position,o;r=="above"?o={overlayX:"center",overlayY:"bottom"}:r=="below"?o={overlayX:"center",overlayY:"top"}:r=="before"||r=="left"&&n||r=="right"&&!n?o={overlayX:"end",overlayY:"center"}:(r=="after"||r=="right"&&n||r=="left"&&!n)&&(o={overlayX:"start",overlayY:"center"});let{x:s,y:l}=this._invertPosition(o.overlayX,o.overlayY);return{main:o,fallback:{overlayX:s,overlayY:l}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe($e(1),Lt(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(n){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=n,this._tooltipInstance._markForCheck())}_invertPosition(n,r){return this.position==="above"||this.position==="below"?r==="top"?r="bottom":r==="bottom"&&(r="top"):n==="end"?n="start":n==="start"&&(n="end"),{x:n,y:r}}_updateCurrentPositionClass(n){let{overlayY:r,originX:o,originY:s}=n,l;if(r==="center"?this._dir&&this._dir.value==="rtl"?l=o==="end"?"left":"right":l=o==="start"?"left":"right":l=r==="bottom"&&s==="top"?"above":"below",l!==this._currentPosition){let d=this._overlayRef;if(d){let u=`${this._cssClassPrefix}-${a2}-`;d.removePanelClass(u+this._currentPosition),d.addPanelClass(u+l)}this._currentPosition=l}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",n=>{this._setupPointerExitEventsIfNeeded();let r;n.x!==void 0&&n.y!==void 0&&(r=n),this.show(void 0,r)}]):this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",n=>{let r=n.targetTouches?.[0],o=r?{x:r.clientX,y:r.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout);let s=500;this._touchstartTimeout=setTimeout(()=>this.show(void 0,o),this._defaultOptions.touchLongPressShowDelay??s)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let n=[];if(this._platformSupportsMouseEvents())n.push(["mouseleave",r=>{let o=r.relatedTarget;(!o||!this._overlayRef?.overlayElement.contains(o))&&this.hide()}],["wheel",r=>this._wheelListener(r)]);else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let r=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};n.push(["touchend",r],["touchcancel",r])}this._addListeners(n),this._passiveListeners.push(...n)}_addListeners(n){n.forEach(([r,o])=>{this._elementRef.nativeElement.addEventListener(r,o,l2)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(n){if(this._isTooltipVisible()){let r=this._document.elementFromPoint(n.clientX,n.clientY),o=this._elementRef.nativeElement;r!==o&&!o.contains(r)&&this.hide()}}_disableNativeGesturesIfNecessary(){let n=this.touchGestures;if(n!=="off"){let r=this._elementRef.nativeElement,o=r.style;(n==="on"||r.nodeName!=="INPUT"&&r.nodeName!=="TEXTAREA")&&(o.userSelect=o.msUserSelect=o.webkitUserSelect=o.MozUserSelect="none"),(n==="on"||!r.draggable)&&(o.webkitUserDrag="none"),o.touchAction="none",o.webkitTapHighlightColor="transparent"}}};t.\u0275fac=function(r){return new(r||t)(x(In),x(gt),x($f),x(Vn),x(Q),x(te),x(Wv),x(jo),x(d2),x(Fi),x(IX,8),x(xt))},t.\u0275dir=X({type:t,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(r,o){r&2&&Bt("mat-mdc-tooltip-disabled",o.disabled)},inputs:{position:[F.None,"matTooltipPosition","position"],positionAtOrigin:[F.None,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[F.None,"matTooltipDisabled","disabled"],showDelay:[F.None,"matTooltipShowDelay","showDelay"],hideDelay:[F.None,"matTooltipHideDelay","hideDelay"],touchGestures:[F.None,"matTooltipTouchGestures","touchGestures"],message:[F.None,"matTooltip","message"],tooltipClass:[F.None,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"],standalone:!0});let e=t;return e})(),AX=(()=>{let t=class t{constructor(n,r,o){this._changeDetectorRef=n,this._elementRef=r,this._isMultiline=!1,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new at,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide",this._animationsDisabled=o==="NoopAnimations"}show(n){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},n)}hide(n){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},n)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:n}){(!n||!this._triggerElement.contains(n))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let n=this._elementRef.nativeElement.getBoundingClientRect();return n.height>TX&&n.width>=SX}_handleAnimationEnd({animationName:n}){(n===this._showAnimation||n===this._hideAnimation)&&this._finalizeAnimation(n===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(n){n?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(n){let r=this._tooltip.nativeElement,o=this._showAnimation,s=this._hideAnimation;if(r.classList.remove(n?s:o),r.classList.add(n?o:s),this._isVisible=n,n&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let l=getComputedStyle(r);(l.getPropertyValue("animation-duration")==="0s"||l.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}n&&this._onShow(),this._animationsDisabled&&(r.classList.add("_mat-animation-noopable"),this._finalizeAnimation(n))}};t.\u0275fac=function(r){return new(r||t)(x(Oe),x(gt),x(oi,8))},t.\u0275cmp=ft({type:t,selectors:[["mat-tooltip-component"]],viewQuery:function(r,o){if(r&1&&be(bX,7),r&2){let s;It(s=Et())&&(o._tooltip=s.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(r,o){r&1&&Ct("mouseleave",function(l){return o._handleMouseLeave(l)}),r&2&&Ou("zoom",o.isVisible()?1:null)},standalone:!0,features:[zt],decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mdc-tooltip--shown","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mdc-tooltip__surface","mdc-tooltip__surface-animation"]],template:function(r,o){if(r&1){let s=Pe();D(0,"div",1,0),Ct("animationend",function(d){return ne(s),ie(o._handleAnimationEnd(d))}),D(2,"div",2),Z(3),R()()}r&2&&(Bt("mdc-tooltip--multiline",o._isMultiline),pt("ngClass",o.tooltipClass),j(3),Ke(o.message))},dependencies:[ql],styles:['.mdc-tooltip__surface{word-break:break-all;word-break:var(--mdc-tooltip-word-break, normal);overflow-wrap:anywhere}.mdc-tooltip--showing-transition .mdc-tooltip__surface-animation{transition:opacity 150ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-tooltip--hide-transition .mdc-tooltip__surface-animation{transition:opacity 75ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-tooltip{position:fixed;display:none;z-index:9}.mdc-tooltip-wrapper--rich{position:relative}.mdc-tooltip--shown,.mdc-tooltip--showing,.mdc-tooltip--hide{display:inline-flex}.mdc-tooltip--shown.mdc-tooltip--rich,.mdc-tooltip--showing.mdc-tooltip--rich,.mdc-tooltip--hide.mdc-tooltip--rich{display:inline-block;left:-320px;position:absolute}.mdc-tooltip__surface{line-height:16px;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center}.mdc-tooltip__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-tooltip__surface::before{border-color:CanvasText}}.mdc-tooltip--rich .mdc-tooltip__surface{align-items:flex-start;display:flex;flex-direction:column;min-height:24px;min-width:40px;max-width:320px;position:relative}.mdc-tooltip--multiline .mdc-tooltip__surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mdc-tooltip__surface,.mdc-tooltip--multiline .mdc-tooltip__surface[dir=rtl]{text-align:right}.mdc-tooltip__surface .mdc-tooltip__title{margin:0 8px}.mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(200px - 2*8px);margin:8px;text-align:left}[dir=rtl] .mdc-tooltip__surface .mdc-tooltip__content,.mdc-tooltip__surface .mdc-tooltip__content[dir=rtl]{text-align:right}.mdc-tooltip--rich .mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(320px - 2*8px);align-self:stretch}.mdc-tooltip__surface .mdc-tooltip__content-link{text-decoration:none}.mdc-tooltip--rich-actions,.mdc-tooltip__content,.mdc-tooltip__title{z-index:1}.mdc-tooltip__surface-animation{opacity:0;transform:scale(0.8);will-change:transform,opacity}.mdc-tooltip--shown .mdc-tooltip__surface-animation{transform:scale(1);opacity:1}.mdc-tooltip--hide .mdc-tooltip__surface-animation{transform:scale(1)}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{position:absolute;height:24px;width:24px;transform:rotate(35deg) skewY(20deg) scaleX(0.9396926208)}.mdc-tooltip__caret-surface-top .mdc-elevation-overlay,.mdc-tooltip__caret-surface-bottom .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-tooltip__caret-surface-bottom{box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);outline:1px solid rgba(0,0,0,0);z-index:-1}@media screen and (forced-colors: active){.mdc-tooltip__caret-surface-bottom{outline-color:CanvasText}}.mat-mdc-tooltip .mdc-tooltip__surface{background-color:var(--mdc-plain-tooltip-container-color)}.mat-mdc-tooltip .mdc-tooltip__surface{border-radius:var(--mdc-plain-tooltip-container-shape)}.mat-mdc-tooltip .mdc-tooltip__caret-surface-top,.mat-mdc-tooltip .mdc-tooltip__caret-surface-bottom{border-radius:var(--mdc-plain-tooltip-container-shape)}.mat-mdc-tooltip .mdc-tooltip__surface{color:var(--mdc-plain-tooltip-supporting-text-color)}.mat-mdc-tooltip .mdc-tooltip__surface{font-family:var(--mdc-plain-tooltip-supporting-text-font);line-height:var(--mdc-plain-tooltip-supporting-text-line-height);font-size:var(--mdc-plain-tooltip-supporting-text-size);font-weight:var(--mdc-plain-tooltip-supporting-text-weight);letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking)}.mat-mdc-tooltip{position:relative;transform:scale(0)}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0});let e=t;return e})();var h2=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({providers:[wX],imports:[fV,Ki,Gs,Gt,Gt,Hs]});let e=t;return e})();function DX(e,t){if(e&1&&(D(0,"mat-option",16),Z(1),R()),e&2){let i=t.$implicit;pt("value",i),j(),An(" ",i," ")}}function RX(e,t){if(e&1){let i=Pe();D(0,"mat-form-field",13)(1,"mat-select",15),Ct("selectionChange",function(r){ne(i);let o=wt(2);return ie(o._changePageSize(r.value))}),Y1(2,DX,2,2,"mat-option",16,K1),R()()}if(e&2){let i=wt(2);pt("appearance",i._formFieldAppearance)("color",i.color),j(),pt("value",i.pageSize)("disabled",i.disabled)("aria-labelledby",i._pageSizeLabelId)("panelClass",i.selectConfig.panelClass||"")("disableOptionCentering",i.selectConfig.disableOptionCentering),j(),Q1(i._displayedPageSizeOptions)}}function kX(e,t){if(e&1&&(D(0,"div",14),Z(1),R()),e&2){let i=wt(2);j(),Ke(i.pageSize)}}function MX(e,t){if(e&1&&(D(0,"div",2)(1,"div",12),Z(2),R(),vt(3,RX,4,7,"mat-form-field",13)(4,kX,2,1,"div",14),R()),e&2){let i=wt();j(),Zt("id",i._pageSizeLabelId),j(),An(" ",i._intl.itemsPerPageLabel," "),j(),Nt(3,i._displayedPageSizeOptions.length>1?3:-1),j(),Nt(4,i._displayedPageSizeOptions.length<=1?4:-1)}}function PX(e,t){if(e&1){let i=Pe();D(0,"button",17),Ct("click",function(){ne(i);let r=wt();return ie(r.firstPage())}),yo(),D(1,"svg",7),ht(2,"path",18),R()()}if(e&2){let i=wt();pt("matTooltip",i._intl.firstPageLabel)("matTooltipDisabled",i._previousButtonsDisabled())("matTooltipPosition","above")("disabled",i._previousButtonsDisabled()),Zt("aria-label",i._intl.firstPageLabel)}}function OX(e,t){if(e&1){let i=Pe();D(0,"button",19),Ct("click",function(){ne(i);let r=wt();return ie(r.lastPage())}),yo(),D(1,"svg",7),ht(2,"path",20),R()()}if(e&2){let i=wt();pt("matTooltip",i._intl.lastPageLabel)("matTooltipDisabled",i._nextButtonsDisabled())("matTooltipPosition","above")("disabled",i._nextButtonsDisabled()),Zt("aria-label",i._intl.lastPageLabel)}}var db=(()=>{let t=class t{constructor(){this.changes=new at,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(n,r,o)=>{if(o==0||r==0)return`0 of ${o}`;o=Math.max(o,0);let s=n*r,l=s<o?Math.min(s+r,o):s+r;return`${s+1} \u2013 ${l} of ${o}`}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function NX(e){return e||new db}var FX={provide:db,deps:[[new He,new fa,db]],useFactory:NX},LX=50;var VX=new H("MAT_PAGINATOR_DEFAULT_OPTIONS"),BX=0,$o=(()=>{let t=class t{get pageIndex(){return this._pageIndex}set pageIndex(n){this._pageIndex=Math.max(n||0,0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(n){this._length=n||0,this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(n){this._pageSize=Math.max(n||0,0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(n){this._pageSizeOptions=(n||[]).map(r=>Io(r,0)),this._updateDisplayedPageSizeOptions()}constructor(n,r,o){if(this._intl=n,this._changeDetectorRef=r,this._pageSizeLabelId=`mat-paginator-page-size-label-${BX++}`,this._isInitialized=!1,this._initializedStream=new fp(1),this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this.hidePageSize=!1,this.showFirstLastButtons=!1,this.selectConfig={},this.disabled=!1,this.page=new qt,this.initialized=this._initializedStream,this._intlChanges=n.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),o){let{pageSize:s,pageSizeOptions:l,hidePageSize:d,showFirstLastButtons:u}=o;s!=null&&(this._pageSize=s),l!=null&&(this._pageSizeOptions=l),d!=null&&(this.hidePageSize=d),u!=null&&(this.showFirstLastButtons=u)}this._formFieldAppearance=o?.formFieldAppearance||"outline"}ngOnInit(){this._isInitialized=!0,this._updateDisplayedPageSizeOptions(),this._initializedStream.next()}ngOnDestroy(){this._initializedStream.complete(),this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;let n=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(n)}previousPage(){if(!this.hasPreviousPage())return;let n=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(n)}firstPage(){if(!this.hasPreviousPage())return;let n=this.pageIndex;this.pageIndex=0,this._emitPageEvent(n)}lastPage(){if(!this.hasNextPage())return;let n=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(n)}hasPreviousPage(){return this.pageIndex>=1&&this.pageSize!=0}hasNextPage(){let n=this.getNumberOfPages()-1;return this.pageIndex<n&&this.pageSize!=0}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(n){let r=this.pageIndex*this.pageSize,o=this.pageIndex;this.pageIndex=Math.floor(r/n)||0,this.pageSize=n,this._emitPageEvent(o)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._isInitialized&&(this.pageSize||(this._pageSize=this.pageSizeOptions.length!=0?this.pageSizeOptions[0]:LX),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),this._displayedPageSizeOptions.indexOf(this.pageSize)===-1&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((n,r)=>n-r),this._changeDetectorRef.markForCheck())}_emitPageEvent(n){this.page.emit({previousPageIndex:n,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}};t.\u0275fac=function(r){return new(r||t)(x(db),x(Oe),x(VX,8))},t.\u0275cmp=ft({type:t,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{color:"color",pageIndex:[F.HasDecoratorInputTransform,"pageIndex","pageIndex",Io],length:[F.HasDecoratorInputTransform,"length","length",Io],pageSize:[F.HasDecoratorInputTransform,"pageSize","pageSize",Io],pageSizeOptions:"pageSizeOptions",hidePageSize:[F.HasDecoratorInputTransform,"hidePageSize","hidePageSize",Tt],showFirstLastButtons:[F.HasDecoratorInputTransform,"showFirstLastButtons","showFirstLastButtons",Tt],selectConfig:"selectConfig",disabled:[F.HasDecoratorInputTransform,"disabled","disabled",Tt]},outputs:{page:"page"},exportAs:["matPaginator"],standalone:!0,features:[he,zt],decls:14,vars:14,consts:[[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-previous",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-next",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],[1,"mat-mdc-paginator-page-size-label"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],[1,"mat-mdc-paginator-page-size-value"],["hideSingleSelectionIndicator","",3,"selectionChange","value","disabled","aria-labelledby","panelClass","disableOptionCentering"],[3,"value"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(r,o){r&1&&(D(0,"div",0)(1,"div",1),vt(2,MX,5,4,"div",2),D(3,"div",3)(4,"div",4),Z(5),R(),vt(6,PX,3,5,"button",5),D(7,"button",6),Ct("click",function(){return o.previousPage()}),yo(),D(8,"svg",7),ht(9,"path",8),R()(),P1(),D(10,"button",9),Ct("click",function(){return o.nextPage()}),yo(),D(11,"svg",7),ht(12,"path",10),R()(),vt(13,OX,3,5,"button",11),R()()()),r&2&&(j(2),Nt(2,o.hidePageSize?-1:2),j(3),An(" ",o._intl.getRangeLabel(o.pageIndex,o.pageSize,o.length)," "),j(),Nt(6,o.showFirstLastButtons?6:-1),j(),pt("matTooltip",o._intl.previousPageLabel)("matTooltipDisabled",o._previousButtonsDisabled())("matTooltipPosition","above")("disabled",o._previousButtonsDisabled()),Zt("aria-label",o._intl.previousPageLabel),j(3),pt("matTooltip",o._intl.nextPageLabel)("matTooltipDisabled",o._nextButtonsDisabled())("matTooltipPosition","above")("disabled",o._nextButtonsDisabled()),Zt("aria-label",o._intl.nextPageLabel),j(3),Nt(13,o.showFirstLastButtons?13:-1))},dependencies:[so,Rd,zs,Xv,u2],styles:[".mat-mdc-paginator{display:block;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-paginator-container-text-color);background-color:var(--mat-paginator-container-background-color);font-family:var(--mat-paginator-container-text-font);line-height:var(--mat-paginator-container-text-line-height);font-size:var(--mat-paginator-container-text-size);font-weight:var(--mat-paginator-container-text-weight);letter-spacing:var(--mat-paginator-container-text-tracking);--mat-form-field-container-height:var(--mat-paginator-form-field-container-height);--mat-form-field-container-vertical-padding:var(--mat-paginator-form-field-container-vertical-padding)}.mat-mdc-paginator .mat-mdc-select-value{font-size:var(--mat-paginator-select-trigger-text-size)}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap;width:100%;min-height:var(--mat-paginator-container-size)}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px;fill:var(--mat-paginator-enabled-icon-color)}.mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon{fill:var(--mat-paginator-disabled-icon-color)}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon,.cdk-high-contrast-active .mat-mdc-paginator-icon{fill:currentColor;fill:CanvasText}.cdk-high-contrast-active .mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let e=t;return e})(),f2=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({providers:[FX],imports:[Cd,cb,h2,$o]});let e=t;return e})();var UX=[[["caption"]],[["colgroup"],["col"]],"*"],zX=["caption","colgroup, col","*"];function $X(e,t){e&1&&Mt(0,2)}function HX(e,t){e&1&&(D(0,"thead",0),pi(1,1),R(),D(2,"tbody",0),pi(3,2)(4,3),R(),D(5,"tfoot",0),pi(6,4),R())}function WX(e,t){e&1&&pi(0,1)(1,2)(2,3)(3,4)}var Cr=new H("CDK_TABLE");var gb=(()=>{let t=class t{constructor(n){this.template=n}};t.\u0275fac=function(r){return new(r||t)(x(Sn))},t.\u0275dir=X({type:t,selectors:[["","cdkCellDef",""]],standalone:!0});let e=t;return e})(),_b=(()=>{let t=class t{constructor(n){this.template=n}};t.\u0275fac=function(r){return new(r||t)(x(Sn))},t.\u0275dir=X({type:t,selectors:[["","cdkHeaderCellDef",""]],standalone:!0});let e=t;return e})(),_2=(()=>{let t=class t{constructor(n){this.template=n}};t.\u0275fac=function(r){return new(r||t)(x(Sn))},t.\u0275dir=X({type:t,selectors:[["","cdkFooterCellDef",""]],standalone:!0});let e=t;return e})(),Ld=(()=>{let t=class t{get name(){return this._name}set name(n){this._setNameInput(n)}get sticky(){return this._sticky}set sticky(n){n!==this._sticky&&(this._sticky=n,this._hasStickyChanged=!0)}get stickyEnd(){return this._stickyEnd}set stickyEnd(n){n!==this._stickyEnd&&(this._stickyEnd=n,this._hasStickyChanged=!0)}constructor(n){this._table=n,this._hasStickyChanged=!1,this._sticky=!1,this._stickyEnd=!1}hasStickyChanged(){let n=this._hasStickyChanged;return this.resetStickyChanged(),n}resetStickyChanged(){this._hasStickyChanged=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(n){n&&(this._name=n,this.cssClassFriendlyName=n.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}};t.\u0275fac=function(r){return new(r||t)(x(Cr,8))},t.\u0275dir=X({type:t,selectors:[["","cdkColumnDef",""]],contentQueries:function(r,o,s){if(r&1&&(Ie(s,gb,5),Ie(s,_b,5),Ie(s,_2,5)),r&2){let l;It(l=Et())&&(o.cell=l.first),It(l=Et())&&(o.headerCell=l.first),It(l=Et())&&(o.footerCell=l.first)}},inputs:{name:[F.None,"cdkColumnDef","name"],sticky:[F.HasDecoratorInputTransform,"sticky","sticky",Tt],stickyEnd:[F.HasDecoratorInputTransform,"stickyEnd","stickyEnd",Tt]},standalone:!0,features:[pe([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:t}]),he]});let e=t;return e})(),hb=class{constructor(t,i){i.nativeElement.classList.add(...t._columnCssClassName)}},v2=(()=>{let t=class t extends hb{constructor(n,r){super(n,r)}};t.\u0275fac=function(r){return new(r||t)(x(Ld),x(gt))},t.\u0275dir=X({type:t,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],standalone:!0,features:[oe]});let e=t;return e})();var b2=(()=>{let t=class t extends hb{constructor(n,r){super(n,r);let o=n._table?._getCellRole();o&&r.nativeElement.setAttribute("role",o)}};t.\u0275fac=function(r){return new(r||t)(x(Ld),x(gt))},t.\u0275dir=X({type:t,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],standalone:!0,features:[oe]});let e=t;return e})(),fb=class{constructor(){this.tasks=[],this.endTasks=[]}},mb=new H("_COALESCED_STYLE_SCHEDULER"),mS=(()=>{let t=class t{constructor(n){this._ngZone=n,this._currentSchedule=null,this._destroyed=new at}schedule(n){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(n)}scheduleEnd(n){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(n)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new fb,this._getScheduleObservable().pipe(Lt(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){let n=this._currentSchedule;this._currentSchedule=new fb;for(let r of n.tasks)r();for(let r of n.endTasks)r()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?Re(Promise.resolve(void 0)):this._ngZone.onStable.pipe($e(1))}};t.\u0275fac=function(r){return new(r||t)(T(Q))},t.\u0275prov=q({token:t,factory:t.\u0275fac});let e=t;return e})();var pS=(()=>{let t=class t{constructor(n,r){this.template=n,this._differs=r}ngOnChanges(n){if(!this._columnsDiffer){let r=n.columns&&n.columns.currentValue||[];this._columnsDiffer=this._differs.find(r).create(),this._columnsDiffer.diff(r)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(n){return this instanceof Yf?n.headerCell.template:this instanceof gS?n.footerCell.template:n.cell.template}};t.\u0275fac=function(r){return new(r||t)(x(Sn),x(ga))},t.\u0275dir=X({type:t,features:[hn]});let e=t;return e})(),Yf=(()=>{let t=class t extends pS{get sticky(){return this._sticky}set sticky(n){n!==this._sticky&&(this._sticky=n,this._hasStickyChanged=!0)}constructor(n,r,o){super(n,r),this._table=o,this._hasStickyChanged=!1,this._sticky=!1}ngOnChanges(n){super.ngOnChanges(n)}hasStickyChanged(){let n=this._hasStickyChanged;return this.resetStickyChanged(),n}resetStickyChanged(){this._hasStickyChanged=!1}};t.\u0275fac=function(r){return new(r||t)(x(Sn),x(ga),x(Cr,8))},t.\u0275dir=X({type:t,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:[F.None,"cdkHeaderRowDef","columns"],sticky:[F.HasDecoratorInputTransform,"cdkHeaderRowDefSticky","sticky",Tt]},standalone:!0,features:[he,oe,hn]});let e=t;return e})(),gS=(()=>{let t=class t extends pS{get sticky(){return this._sticky}set sticky(n){n!==this._sticky&&(this._sticky=n,this._hasStickyChanged=!0)}constructor(n,r,o){super(n,r),this._table=o,this._hasStickyChanged=!1,this._sticky=!1}ngOnChanges(n){super.ngOnChanges(n)}hasStickyChanged(){let n=this._hasStickyChanged;return this.resetStickyChanged(),n}resetStickyChanged(){this._hasStickyChanged=!1}};t.\u0275fac=function(r){return new(r||t)(x(Sn),x(ga),x(Cr,8))},t.\u0275dir=X({type:t,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:[F.None,"cdkFooterRowDef","columns"],sticky:[F.HasDecoratorInputTransform,"cdkFooterRowDefSticky","sticky",Tt]},standalone:!0,features:[he,oe,hn]});let e=t;return e})(),vb=(()=>{let t=class t extends pS{constructor(n,r,o){super(n,r),this._table=o}};t.\u0275fac=function(r){return new(r||t)(x(Sn),x(ga),x(Cr,8))},t.\u0275dir=X({type:t,selectors:[["","cdkRowDef",""]],inputs:{columns:[F.None,"cdkRowDefColumns","columns"],when:[F.None,"cdkRowDefWhen","when"]},standalone:!0,features:[oe]});let e=t;return e})(),dl=(()=>{let t=class t{constructor(n){this._viewContainer=n,t.mostRecentCellOutlet=this}ngOnDestroy(){t.mostRecentCellOutlet===this&&(t.mostRecentCellOutlet=null)}};t.mostRecentCellOutlet=null,t.\u0275fac=function(r){return new(r||t)(x(Vn))},t.\u0275dir=X({type:t,selectors:[["","cdkCellOutlet",""]],standalone:!0});let e=t;return e})(),_S=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=ft({type:t,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],standalone:!0,features:[zt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(r,o){r&1&&pi(0,0)},dependencies:[dl],encapsulation:2});let e=t;return e})();var vS=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=ft({type:t,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],standalone:!0,features:[zt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(r,o){r&1&&pi(0,0)},dependencies:[dl],encapsulation:2});let e=t;return e})(),bb=(()=>{let t=class t{constructor(n){this.templateRef=n,this._contentClassName="cdk-no-data-row"}};t.\u0275fac=function(r){return new(r||t)(x(Sn))},t.\u0275dir=X({type:t,selectors:[["ng-template","cdkNoDataRow",""]],standalone:!0});let e=t;return e})(),p2=["top","bottom","left","right"],fS=class{constructor(t,i,n,r,o=!0,s=!0,l){this._isNativeHtmlTable=t,this._stickCellCss=i,this.direction=n,this._coalescedStyleScheduler=r,this._isBrowser=o,this._needsPositionStickyOnElement=s,this._positionListener=l,this._cachedCellWidths=[],this._borderCellCss={top:`${i}-border-elem-top`,bottom:`${i}-border-elem-bottom`,left:`${i}-border-elem-left`,right:`${i}-border-elem-right`}}clearStickyPositioning(t,i){let n=[];for(let r of t)if(r.nodeType===r.ELEMENT_NODE){n.push(r);for(let o=0;o<r.children.length;o++)n.push(r.children[o])}this._coalescedStyleScheduler.schedule(()=>{for(let r of n)this._removeStickyStyle(r,i)})}updateStickyColumns(t,i,n,r=!0){if(!t.length||!this._isBrowser||!(i.some(o=>o)||n.some(o=>o))){this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]}));return}this._coalescedStyleScheduler.schedule(()=>{let o=t[0],s=o.children.length,l=this._getCellWidths(o,r),d=this._getStickyStartColumnPositions(l,i),u=this._getStickyEndColumnPositions(l,n),f=i.lastIndexOf(!0),p=n.indexOf(!0),_=this.direction==="rtl",y=_?"right":"left",S=_?"left":"right";for(let A of t)for(let M=0;M<s;M++){let K=A.children[M];i[M]&&this._addStickyStyle(K,y,d[M],M===f),n[M]&&this._addStickyStyle(K,S,u[M],M===p)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:f===-1?[]:l.slice(0,f+1).map((A,M)=>i[M]?A:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:p===-1?[]:l.slice(p).map((A,M)=>n[M+p]?A:null).reverse()}))})}stickRows(t,i,n){this._isBrowser&&this._coalescedStyleScheduler.schedule(()=>{let r=n==="bottom"?t.slice().reverse():t,o=n==="bottom"?i.slice().reverse():i,s=[],l=[],d=[];for(let f=0,p=0;f<r.length;f++){if(!o[f])continue;s[f]=p;let _=r[f];d[f]=this._isNativeHtmlTable?Array.from(_.children):[_];let y=_.getBoundingClientRect().height;p+=y,l[f]=y}let u=o.lastIndexOf(!0);for(let f=0;f<r.length;f++){if(!o[f])continue;let p=s[f],_=f===u;for(let y of d[f])this._addStickyStyle(y,n,p,_)}n==="top"?this._positionListener?.stickyHeaderRowsUpdated({sizes:l,offsets:s,elements:d}):this._positionListener?.stickyFooterRowsUpdated({sizes:l,offsets:s,elements:d})})}updateStickyFooterContainer(t,i){this._isNativeHtmlTable&&this._coalescedStyleScheduler.schedule(()=>{let n=t.querySelector("tfoot");n&&(i.some(r=>!r)?this._removeStickyStyle(n,["bottom"]):this._addStickyStyle(n,"bottom",0,!1))})}_removeStickyStyle(t,i){for(let r of i)t.style[r]="",t.classList.remove(this._borderCellCss[r]);p2.some(r=>i.indexOf(r)===-1&&t.style[r])?t.style.zIndex=this._getCalculatedZIndex(t):(t.style.zIndex="",this._needsPositionStickyOnElement&&(t.style.position=""),t.classList.remove(this._stickCellCss))}_addStickyStyle(t,i,n,r){t.classList.add(this._stickCellCss),r&&t.classList.add(this._borderCellCss[i]),t.style[i]=`${n}px`,t.style.zIndex=this._getCalculatedZIndex(t),this._needsPositionStickyOnElement&&(t.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(t){let i={top:100,bottom:10,left:1,right:1},n=0;for(let r of p2)t.style[r]&&(n+=i[r]);return n?`${n}`:""}_getCellWidths(t,i=!0){if(!i&&this._cachedCellWidths.length)return this._cachedCellWidths;let n=[],r=t.children;for(let o=0;o<r.length;o++){let s=r[o];n.push(s.getBoundingClientRect().width)}return this._cachedCellWidths=n,n}_getStickyStartColumnPositions(t,i){let n=[],r=0;for(let o=0;o<t.length;o++)i[o]&&(n[o]=r,r+=t[o]);return n}_getStickyEndColumnPositions(t,i){let n=[],r=0;for(let o=t.length;o>0;o--)i[o]&&(n[o]=r,r+=t[o]);return n}};var pb=new H("CDK_SPL");var bS=(()=>{let t=class t{constructor(n,r){this.viewContainer=n,this.elementRef=r;let o=W(Cr);o._rowOutlet=this,o._outletAssigned()}};t.\u0275fac=function(r){return new(r||t)(x(Vn),x(gt))},t.\u0275dir=X({type:t,selectors:[["","rowOutlet",""]],standalone:!0});let e=t;return e})(),yS=(()=>{let t=class t{constructor(n,r){this.viewContainer=n,this.elementRef=r;let o=W(Cr);o._headerRowOutlet=this,o._outletAssigned()}};t.\u0275fac=function(r){return new(r||t)(x(Vn),x(gt))},t.\u0275dir=X({type:t,selectors:[["","headerRowOutlet",""]],standalone:!0});let e=t;return e})(),wS=(()=>{let t=class t{constructor(n,r){this.viewContainer=n,this.elementRef=r;let o=W(Cr);o._footerRowOutlet=this,o._outletAssigned()}};t.\u0275fac=function(r){return new(r||t)(x(Vn),x(gt))},t.\u0275dir=X({type:t,selectors:[["","footerRowOutlet",""]],standalone:!0});let e=t;return e})(),xS=(()=>{let t=class t{constructor(n,r){this.viewContainer=n,this.elementRef=r;let o=W(Cr);o._noDataRowOutlet=this,o._outletAssigned()}};t.\u0275fac=function(r){return new(r||t)(x(Vn),x(gt))},t.\u0275dir=X({type:t,selectors:[["","noDataRowOutlet",""]],standalone:!0});let e=t;return e})();var IS=(()=>{let t=class t{_getCellRole(){if(this._cellRoleInternal===void 0){let n=this._elementRef.nativeElement.getAttribute("role"),r=n==="grid"||n==="treegrid"?"gridcell":"cell";this._cellRoleInternal=this._isNativeHtmlTable&&r==="cell"?null:r}return this._cellRoleInternal}get trackBy(){return this._trackByFn}set trackBy(n){this._trackByFn=n}get dataSource(){return this._dataSource}set dataSource(n){this._dataSource!==n&&this._switchDataSource(n)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(n){this._multiTemplateDataRows=n,this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(n){this._fixedLayout=n,this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}constructor(n,r,o,s,l,d,u,f,p,_,y,S){this._differs=n,this._changeDetectorRef=r,this._elementRef=o,this._dir=l,this._platform=u,this._viewRepeater=f,this._coalescedStyleScheduler=p,this._viewportRuler=_,this._stickyPositioningListener=y,this._ngZone=S,this._onDestroy=new at,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._hasAllOutlets=!1,this._hasInitialized=!1,this._cellRoleInternal=void 0,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new qt,this.viewChange=new Je({start:0,end:Number.MAX_VALUE}),s||o.nativeElement.setAttribute("role","table"),this._document=d,this._isServer=!u.isBrowser,this._isNativeHtmlTable=o.nativeElement.nodeName==="TABLE"}ngOnInit(){this._setupStickyStyler(),this._dataDiffer=this._differs.find([]).create((n,r)=>this.trackBy?this.trackBy(r.dataIndex,r.data):r),this._viewportRuler.change().pipe(Lt(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentInit(){this._hasInitialized=!0}ngAfterContentChecked(){this._canRender()&&this._render()}ngOnDestroy(){[this._rowOutlet?.viewContainer,this._headerRowOutlet?.viewContainer,this._footerRowOutlet?.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(n=>{n?.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),eb(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();let n=this._dataDiffer.diff(this._renderRows);if(!n){this._updateNoDataRow(),this.contentChanged.next();return}let r=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(n,r,(o,s,l)=>this._getEmbeddedViewArgs(o.item,l),o=>o.item.data,o=>{o.operation===Sd.INSERTED&&o.context&&this._renderCellTemplateForItem(o.record.item.rowDef,o.context)}),this._updateRowIndexContext(),n.forEachIdentityChange(o=>{let s=r.get(o.currentIndex);s.context.$implicit=o.item.data}),this._updateNoDataRow(),this._ngZone&&Q.isInAngularZone()?this._ngZone.onStable.pipe($e(1),Lt(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(n){this._customColumnDefs.add(n)}removeColumnDef(n){this._customColumnDefs.delete(n)}addRowDef(n){this._customRowDefs.add(n)}removeRowDef(n){this._customRowDefs.delete(n)}addHeaderRowDef(n){this._customHeaderRowDefs.add(n),this._headerRowDefChanged=!0}removeHeaderRowDef(n){this._customHeaderRowDefs.delete(n),this._headerRowDefChanged=!0}addFooterRowDef(n){this._customFooterRowDefs.add(n),this._footerRowDefChanged=!0}removeFooterRowDef(n){this._customFooterRowDefs.delete(n),this._footerRowDefChanged=!0}setNoDataRow(n){this._customNoDataRow=n}updateStickyHeaderRowStyles(){let n=this._getRenderedRows(this._headerRowOutlet);if(this._isNativeHtmlTable){let o=g2(this._headerRowOutlet,"thead");o&&(o.style.display=n.length?"":"none")}let r=this._headerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(n,["top"]),this._stickyStyler.stickRows(n,r,"top"),this._headerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyFooterRowStyles(){let n=this._getRenderedRows(this._footerRowOutlet);if(this._isNativeHtmlTable){let o=g2(this._footerRowOutlet,"tfoot");o&&(o.style.display=n.length?"":"none")}let r=this._footerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(n,["bottom"]),this._stickyStyler.stickRows(n,r,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,r),this._footerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyColumnStyles(){let n=this._getRenderedRows(this._headerRowOutlet),r=this._getRenderedRows(this._rowOutlet),o=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...n,...r,...o],["left","right"]),this._stickyColumnStylesNeedReset=!1),n.forEach((s,l)=>{this._addStickyColumnStyles([s],this._headerRowDefs[l])}),this._rowDefs.forEach(s=>{let l=[];for(let d=0;d<r.length;d++)this._renderRows[d].rowDef===s&&l.push(r[d]);this._addStickyColumnStyles(l,s)}),o.forEach((s,l)=>{this._addStickyColumnStyles([s],this._footerRowDefs[l])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_outletAssigned(){!this._hasAllOutlets&&this._rowOutlet&&this._headerRowOutlet&&this._footerRowOutlet&&this._noDataRowOutlet&&(this._hasAllOutlets=!0,this._canRender()&&this._render())}_canRender(){return this._hasAllOutlets&&this._hasInitialized}_render(){this._cacheRowDefs(),this._cacheColumnDefs(),!this._headerRowDefs.length&&!this._footerRowDefs.length&&this._rowDefs.length;let r=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||r,this._forceRecalculateCellWidths=r,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}_getAllRenderRows(){let n=[],r=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let o=0;o<this._data.length;o++){let s=this._data[o],l=this._getRenderRowsForData(s,o,r.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let d=0;d<l.length;d++){let u=l[d],f=this._cachedRenderRowsMap.get(u.data);f.has(u.rowDef)?f.get(u.rowDef).push(u):f.set(u.rowDef,[u]),n.push(u)}}return n}_getRenderRowsForData(n,r,o){return this._getRowDefs(n,r).map(l=>{let d=o&&o.has(l)?o.get(l):[];if(d.length){let u=d.shift();return u.dataIndex=r,u}else return{data:n,rowDef:l,dataIndex:r}})}_cacheColumnDefs(){this._columnDefsByName.clear(),ub(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(r=>{this._columnDefsByName.has(r.name),this._columnDefsByName.set(r.name,r)})}_cacheRowDefs(){this._headerRowDefs=ub(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=ub(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=ub(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);let n=this._rowDefs.filter(r=>!r.when);!this.multiTemplateDataRows&&n.length>1,this._defaultRowDef=n[0]}_renderUpdatedColumns(){let n=(l,d)=>l||!!d.getColumnsDiff(),r=this._rowDefs.reduce(n,!1);r&&this._forceRenderDataRows();let o=this._headerRowDefs.reduce(n,!1);o&&this._forceRenderHeaderRows();let s=this._footerRowDefs.reduce(n,!1);return s&&this._forceRenderFooterRows(),r||o||s}_switchDataSource(n){this._data=[],eb(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),n||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet&&this._rowOutlet.viewContainer.clear()),this._dataSource=n}_observeRenderChanges(){if(!this.dataSource)return;let n;eb(this.dataSource)?n=this.dataSource.connect(this):Ol(this.dataSource)?n=this.dataSource:Array.isArray(this.dataSource)&&(n=tt(this.dataSource)),this._renderChangeSubscription=n.pipe(Lt(this._onDestroy)).subscribe(r=>{this._data=r||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((n,r)=>this._renderRow(this._headerRowOutlet,n,r)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((n,r)=>this._renderRow(this._footerRowOutlet,n,r)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(n,r){let o=Array.from(r.columns||[]).map(d=>{let u=this._columnDefsByName.get(d);return u}),s=o.map(d=>d.sticky),l=o.map(d=>d.stickyEnd);this._stickyStyler.updateStickyColumns(n,s,l,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(n){let r=[];for(let o=0;o<n.viewContainer.length;o++){let s=n.viewContainer.get(o);r.push(s.rootNodes[0])}return r}_getRowDefs(n,r){if(this._rowDefs.length==1)return[this._rowDefs[0]];let o=[];if(this.multiTemplateDataRows)o=this._rowDefs.filter(s=>!s.when||s.when(r,n));else{let s=this._rowDefs.find(l=>l.when&&l.when(r,n))||this._defaultRowDef;s&&o.push(s)}return o.length,o}_getEmbeddedViewArgs(n,r){let o=n.rowDef,s={$implicit:n.data};return{templateRef:o.template,context:s,index:r}}_renderRow(n,r,o,s={}){let l=n.viewContainer.createEmbeddedView(r.template,s,o);return this._renderCellTemplateForItem(r,s),l}_renderCellTemplateForItem(n,r){for(let o of this._getCellTemplates(n))dl.mostRecentCellOutlet&&dl.mostRecentCellOutlet._viewContainer.createEmbeddedView(o,r);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){let n=this._rowOutlet.viewContainer;for(let r=0,o=n.length;r<o;r++){let l=n.get(r).context;l.count=o,l.first=r===0,l.last=r===o-1,l.even=r%2===0,l.odd=!l.even,this.multiTemplateDataRows?(l.dataIndex=this._renderRows[r].dataIndex,l.renderIndex=r):l.index=this._renderRows[r].dataIndex}}_getCellTemplates(n){return!n||!n.columns?[]:Array.from(n.columns,r=>{let o=this._columnDefsByName.get(r);return n.extractCellTemplate(o)})}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){let n=(r,o)=>r||o.hasStickyChanged();this._headerRowDefs.reduce(n,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(n,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(n,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){let n=this._dir?this._dir.value:"ltr";this._stickyStyler=new fS(this._isNativeHtmlTable,this.stickyCssClass,n,this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:tt()).pipe(Lt(this._onDestroy)).subscribe(r=>{this._stickyStyler.direction=r,this.updateStickyColumnStyles()})}_getOwnDefs(n){return n.filter(r=>!r._table||r._table===this)}_updateNoDataRow(){let n=this._customNoDataRow||this._noDataRow;if(!n)return;let r=this._rowOutlet.viewContainer.length===0;if(r===this._isShowingNoDataRow)return;let o=this._noDataRowOutlet.viewContainer;if(r){let s=o.createEmbeddedView(n.templateRef),l=s.rootNodes[0];s.rootNodes.length===1&&l?.nodeType===this._document.ELEMENT_NODE&&(l.setAttribute("role","row"),l.classList.add(n._contentClassName))}else o.clear();this._isShowingNoDataRow=r,this._changeDetectorRef.markForCheck()}};t.\u0275fac=function(r){return new(r||t)(x(ga),x(Oe),x(gt),wo("role"),x(Fi,8),x(xt),x(te),x(zf),x(mb),x(Ws),x(pb,12),x(Q,8))},t.\u0275cmp=ft({type:t,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(r,o,s){if(r&1&&(Ie(s,bb,5),Ie(s,Ld,5),Ie(s,vb,5),Ie(s,Yf,5),Ie(s,gS,5)),r&2){let l;It(l=Et())&&(o._noDataRow=l.first),It(l=Et())&&(o._contentColumnDefs=l),It(l=Et())&&(o._contentRowDefs=l),It(l=Et())&&(o._contentHeaderRowDefs=l),It(l=Et())&&(o._contentFooterRowDefs=l)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(r,o){r&2&&Bt("cdk-table-fixed-layout",o.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:[F.HasDecoratorInputTransform,"multiTemplateDataRows","multiTemplateDataRows",Tt],fixedLayout:[F.HasDecoratorInputTransform,"fixedLayout","fixedLayout",Tt]},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],standalone:!0,features:[pe([{provide:Cr,useExisting:t},{provide:zf,useClass:Ad},{provide:mb,useClass:mS},{provide:pb,useValue:null}]),he,zt],ngContentSelectors:zX,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(r,o){r&1&&(Te(UX),Mt(0),Mt(1,1),vt(2,$X,1,0)(3,HX,7,0)(4,WX,4,0)),r&2&&(j(2),Nt(2,o._isServer?2:-1),j(),Nt(3,o._isNativeHtmlTable?3:4))},dependencies:[yS,bS,xS,wS],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2});let e=t;return e})();function ub(e,t){return e.concat(Array.from(t))}function g2(e,t){let i=t.toUpperCase(),n=e.viewContainer.element.nativeElement;for(;n;){let r=n.nodeType===1?n.nodeName:null;if(r===i)return n;if(r==="TABLE")break;n=n.parentNode}return null}var y2=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({imports:[Hf]});let e=t;return e})();var qX=[[["caption"]],[["colgroup"],["col"]],"*"],GX=["caption","colgroup, col","*"];function KX(e,t){e&1&&Mt(0,2)}function YX(e,t){e&1&&(D(0,"thead",0),pi(1,1),R(),D(2,"tbody",2),pi(3,3)(4,4),R(),D(5,"tfoot",0),pi(6,5),R())}function QX(e,t){e&1&&pi(0,1)(1,3)(2,4)(3,5)}var yb=(()=>{let t=class t extends IS{constructor(){super(...arguments),this.stickyCssClass="mat-mdc-table-sticky",this.needsPositionStickyOnElement=!1}};t.\u0275fac=(()=>{let n;return function(o){return(n||(n=Tn(t)))(o||t)}})(),t.\u0275cmp=ft({type:t,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-mdc-table","mdc-data-table__table"],hostVars:2,hostBindings:function(r,o){r&2&&Bt("mdc-table-fixed-layout",o.fixedLayout)},exportAs:["matTable"],standalone:!0,features:[pe([{provide:IS,useExisting:t},{provide:Cr,useExisting:t},{provide:mb,useClass:mS},{provide:zf,useClass:Ad},{provide:pb,useValue:null}]),oe,zt],ngContentSelectors:GX,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["role","rowgroup",1,"mdc-data-table__content"],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(r,o){r&1&&(Te(qX),Mt(0),Mt(1,1),vt(2,KX,1,0)(3,YX,7,0)(4,QX,4,0)),r&2&&(j(2),Nt(2,o._isServer?2:-1),j(),Nt(3,o._isNativeHtmlTable?3:4))},dependencies:[yS,bS,xS,wS],styles:[".mat-mdc-table-sticky{position:sticky !important}.mdc-data-table{-webkit-overflow-scrolling:touch;display:inline-flex;flex-direction:column;box-sizing:border-box;position:relative}.mdc-data-table__table-container{-webkit-overflow-scrolling:touch;overflow-x:auto;width:100%}.mdc-data-table__table{min-width:100%;border:0;white-space:nowrap;border-spacing:0;table-layout:fixed}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell,.mdc-data-table__cell[dir=rtl]{text-align:right}.mdc-data-table__cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__cell--numeric,.mdc-data-table__cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__header-cell{box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mdc-data-table__header-cell,.mdc-data-table__header-cell[dir=rtl]{text-align:right}.mdc-data-table__header-cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__header-cell--numeric,.mdc-data-table__header-cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__header-cell-wrapper{align-items:center;display:inline-flex;vertical-align:middle}.mdc-data-table__cell,.mdc-data-table__header-cell{padding:0 16px 0 16px}.mdc-data-table__header-cell--checkbox,.mdc-data-table__cell--checkbox{padding-left:4px;padding-right:0}[dir=rtl] .mdc-data-table__header-cell--checkbox,[dir=rtl] .mdc-data-table__cell--checkbox,.mdc-data-table__header-cell--checkbox[dir=rtl],.mdc-data-table__cell--checkbox[dir=rtl]{padding-left:0;padding-right:4px}mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}.mat-mdc-table{table-layout:auto;white-space:normal;background-color:var(--mat-table-background-color)}.mat-mdc-header-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-header-container-height, 56px);color:var(--mat-table-header-headline-color, rgba(0, 0, 0, 0.87));font-family:var(--mat-table-header-headline-font, Roboto, sans-serif);line-height:var(--mat-table-header-headline-line-height);font-size:var(--mat-table-header-headline-size, 14px);font-weight:var(--mat-table-header-headline-weight, 500)}.mat-mdc-row{height:var(--mat-table-row-item-container-height, 52px);color:var(--mat-table-row-item-label-text-color, rgba(0, 0, 0, 0.87))}.mat-mdc-row,.mdc-data-table__content{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-table-row-item-label-text-font, Roboto, sans-serif);line-height:var(--mat-table-row-item-label-text-line-height);font-size:var(--mat-table-row-item-label-text-size, 14px);font-weight:var(--mat-table-row-item-label-text-weight)}.mat-mdc-footer-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-footer-container-height, 52px);color:var(--mat-table-row-item-label-text-color, rgba(0, 0, 0, 0.87));font-family:var(--mat-table-footer-supporting-text-font, Roboto, sans-serif);line-height:var(--mat-table-footer-supporting-text-line-height);font-size:var(--mat-table-footer-supporting-text-size, 14px);font-weight:var(--mat-table-footer-supporting-text-weight);letter-spacing:var(--mat-table-footer-supporting-text-tracking)}.mat-mdc-header-cell{border-bottom-color:var(--mat-table-row-item-outline-color, rgba(0, 0, 0, 0.12));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-header-headline-tracking);font-weight:inherit;line-height:inherit}.mat-mdc-cell{border-bottom-color:var(--mat-table-row-item-outline-color, rgba(0, 0, 0, 0.12));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-row-item-label-text-tracking);line-height:inherit}.mdc-data-table__row:last-child .mat-mdc-cell{border-bottom:none}.mat-mdc-footer-cell{letter-spacing:var(--mat-table-row-item-label-text-tracking)}mat-row.mat-mdc-row,mat-header-row.mat-mdc-header-row,mat-footer-row.mat-mdc-footer-row{border-bottom:none}.mat-mdc-table tbody,.mat-mdc-table tfoot,.mat-mdc-table thead,.mat-mdc-cell,.mat-mdc-footer-cell,.mat-mdc-header-row,.mat-mdc-row,.mat-mdc-footer-row,.mat-mdc-table .mat-mdc-header-cell{background:inherit}.mat-mdc-table mat-header-row.mat-mdc-header-row,.mat-mdc-table mat-row.mat-mdc-row,.mat-mdc-table mat-footer-row.mat-mdc-footer-cell{height:unset}mat-header-cell.mat-mdc-header-cell,mat-cell.mat-mdc-cell,mat-footer-cell.mat-mdc-footer-cell{align-self:stretch}"],encapsulation:2});let e=t;return e})(),wb=(()=>{let t=class t extends gb{};t.\u0275fac=(()=>{let n;return function(o){return(n||(n=Tn(t)))(o||t)}})(),t.\u0275dir=X({type:t,selectors:[["","matCellDef",""]],standalone:!0,features:[pe([{provide:gb,useExisting:t}]),oe]});let e=t;return e})(),xb=(()=>{let t=class t extends _b{};t.\u0275fac=(()=>{let n;return function(o){return(n||(n=Tn(t)))(o||t)}})(),t.\u0275dir=X({type:t,selectors:[["","matHeaderCellDef",""]],standalone:!0,features:[pe([{provide:_b,useExisting:t}]),oe]});let e=t;return e})();var Ib=(()=>{let t=class t extends Ld{get name(){return this._name}set name(n){this._setNameInput(n)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}};t.\u0275fac=(()=>{let n;return function(o){return(n||(n=Tn(t)))(o||t)}})(),t.\u0275dir=X({type:t,selectors:[["","matColumnDef",""]],inputs:{name:[F.None,"matColumnDef","name"]},standalone:!0,features:[pe([{provide:Ld,useExisting:t},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:t}]),oe]});let e=t;return e})(),w2=(()=>{let t=class t extends v2{};t.\u0275fac=(()=>{let n;return function(o){return(n||(n=Tn(t)))(o||t)}})(),t.\u0275dir=X({type:t,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-mdc-header-cell","mdc-data-table__header-cell"],standalone:!0,features:[oe]});let e=t;return e})();var x2=(()=>{let t=class t extends b2{};t.\u0275fac=(()=>{let n;return function(o){return(n||(n=Tn(t)))(o||t)}})(),t.\u0275dir=X({type:t,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:[1,"mat-mdc-cell","mdc-data-table__cell"],standalone:!0,features:[oe]});let e=t;return e})();var Eb=(()=>{let t=class t extends Yf{};t.\u0275fac=(()=>{let n;return function(o){return(n||(n=Tn(t)))(o||t)}})(),t.\u0275dir=X({type:t,selectors:[["","matHeaderRowDef",""]],inputs:{columns:[F.None,"matHeaderRowDef","columns"],sticky:[F.HasDecoratorInputTransform,"matHeaderRowDefSticky","sticky",Tt]},standalone:!0,features:[pe([{provide:Yf,useExisting:t}]),he,oe]});let e=t;return e})();var Cb=(()=>{let t=class t extends vb{};t.\u0275fac=(()=>{let n;return function(o){return(n||(n=Tn(t)))(o||t)}})(),t.\u0275dir=X({type:t,selectors:[["","matRowDef",""]],inputs:{columns:[F.None,"matRowDefColumns","columns"],when:[F.None,"matRowDefWhen","when"]},standalone:!0,features:[pe([{provide:vb,useExisting:t}]),oe]});let e=t;return e})(),Tb=(()=>{let t=class t extends _S{};t.\u0275fac=(()=>{let n;return function(o){return(n||(n=Tn(t)))(o||t)}})(),t.\u0275cmp=ft({type:t,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-mdc-header-row","mdc-data-table__header-row"],exportAs:["matHeaderRow"],standalone:!0,features:[pe([{provide:_S,useExisting:t}]),oe,zt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(r,o){r&1&&pi(0,0)},dependencies:[dl],encapsulation:2});let e=t;return e})();var Sb=(()=>{let t=class t extends vS{};t.\u0275fac=(()=>{let n;return function(o){return(n||(n=Tn(t)))(o||t)}})(),t.\u0275cmp=ft({type:t,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-mdc-row","mdc-data-table__row"],exportAs:["matRow"],standalone:!0,features:[pe([{provide:vS,useExisting:t}]),oe,zt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(r,o){r&1&&pi(0,0)},dependencies:[dl],encapsulation:2});let e=t;return e})(),Ab=(()=>{let t=class t extends bb{constructor(){super(...arguments),this._contentClassName="mat-mdc-no-data-row"}};t.\u0275fac=(()=>{let n;return function(o){return(n||(n=Tn(t)))(o||t)}})(),t.\u0275dir=X({type:t,selectors:[["ng-template","matNoDataRow",""]],standalone:!0,features:[pe([{provide:bb,useExisting:t}]),oe]});let e=t;return e})();var I2=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({imports:[Gt,y2,Gt]});let e=t;return e})(),XX=9007199254740991,ao=class extends Jv{get data(){return this._data.value}set data(t){t=Array.isArray(t)?t:[],this._data.next(t),this._renderChangesSubscription||this._filterData(t)}get filter(){return this._filter.value}set filter(t){this._filter.next(t),this._renderChangesSubscription||this._filterData(this.data)}get sort(){return this._sort}set sort(t){this._sort=t,this._updateChangeSubscription()}get paginator(){return this._paginator}set paginator(t){this._paginator=t,this._updateChangeSubscription()}constructor(t=[]){super(),this._renderData=new Je([]),this._filter=new Je(""),this._internalPageChanges=new at,this._renderChangesSubscription=null,this.sortingDataAccessor=(i,n)=>{let r=i[n];if(NT(r)){let o=Number(r);return o<XX?o:r}return r},this.sortData=(i,n)=>{let r=n.active,o=n.direction;return!r||o==""?i:i.sort((s,l)=>{let d=this.sortingDataAccessor(s,r),u=this.sortingDataAccessor(l,r),f=typeof d,p=typeof u;f!==p&&(f==="number"&&(d+=""),p==="number"&&(u+=""));let _=0;return d!=null&&u!=null?d>u?_=1:d<u&&(_=-1):d!=null?_=1:u!=null&&(_=-1),_*(o=="asc"?1:-1)})},this.filterPredicate=(i,n)=>{let r=Object.keys(i).reduce((s,l)=>s+i[l]+"\u25EC","").toLowerCase(),o=n.trim().toLowerCase();return r.indexOf(o)!=-1},this._data=new Je(t),this._updateChangeSubscription()}_updateChangeSubscription(){let t=this._sort?wn(this._sort.sortChange,this._sort.initialized):tt(null),i=this._paginator?wn(this._paginator.page,this._internalPageChanges,this._paginator.initialized):tt(null),n=this._data,r=Or([n,this._filter]).pipe(dt(([l])=>this._filterData(l))),o=Or([r,t]).pipe(dt(([l])=>this._orderData(l))),s=Or([o,i]).pipe(dt(([l])=>this._pageData(l)));this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=s.subscribe(l=>this._renderData.next(l))}_filterData(t){return this.filteredData=this.filter==null||this.filter===""?t:t.filter(i=>this.filterPredicate(i,this.filter)),this.paginator&&this._updatePaginator(this.filteredData.length),this.filteredData}_orderData(t){return this.sort?this.sortData(t.slice(),this.sort):t}_pageData(t){if(!this.paginator)return t;let i=this.paginator.pageIndex*this.paginator.pageSize;return t.slice(i,i+this.paginator.pageSize)}_updatePaginator(t){Promise.resolve().then(()=>{let i=this.paginator;if(i&&(i.length=t,i.pageIndex>0)){let n=Math.ceil(i.length/i.pageSize)-1||0,r=Math.min(i.pageIndex,n);r!==i.pageIndex&&(i.pageIndex=r,this._internalPageChanges.next())}})}connect(){return this._renderChangesSubscription||this._updateChangeSubscription(),this._renderData}disconnect(){this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=null}};var F2=I1(ES());var ZX=["mat-sort-header",""],JX=["*"];function tZ(e,t){if(e&1){let i=Pe();D(0,"div",2),Ct("@arrowPosition.start",function(){ne(i);let r=wt();return ie(r._disableViewStateAnimation=!0)})("@arrowPosition.done",function(){ne(i);let r=wt();return ie(r._disableViewStateAnimation=!1)}),ht(1,"div",3),D(2,"div",4),ht(3,"div",5)(4,"div",6)(5,"div",7),R()()}if(e&2){let i=wt();pt("@arrowOpacity",i._getArrowViewState())("@arrowPosition",i._getArrowViewState())("@allowChildren",i._getArrowDirectionState()),j(2),pt("@indicator",i._getArrowDirectionState()),j(),pt("@leftPointer",i._getArrowDirectionState()),j(),pt("@rightPointer",i._getArrowDirectionState())}}var C2=new H("MAT_SORT_DEFAULT_OPTIONS"),Ho=(()=>{let t=class t{get direction(){return this._direction}set direction(n){this._direction=n}constructor(n){this._defaultOptions=n,this._initializedStream=new fp(1),this.sortables=new Map,this._stateChanges=new at,this.start="asc",this._direction="",this.disabled=!1,this.sortChange=new qt,this.initialized=this._initializedStream}register(n){this.sortables.set(n.id,n)}deregister(n){this.sortables.delete(n.id)}sort(n){this.active!=n.id?(this.active=n.id,this.direction=n.start?n.start:this.start):this.direction=this.getNextSortDirection(n),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(n){if(!n)return"";let r=n?.disableClear??this.disableClear??!!this._defaultOptions?.disableClear,o=eZ(n.start||this.start,r),s=o.indexOf(this.direction)+1;return s>=o.length&&(s=0),o[s]}ngOnInit(){this._initializedStream.next()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete(),this._initializedStream.complete()}};t.\u0275fac=function(r){return new(r||t)(x(C2,8))},t.\u0275dir=X({type:t,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{active:[F.None,"matSortActive","active"],start:[F.None,"matSortStart","start"],direction:[F.None,"matSortDirection","direction"],disableClear:[F.HasDecoratorInputTransform,"matSortDisableClear","disableClear",Tt],disabled:[F.HasDecoratorInputTransform,"matSortDisabled","disabled",Tt]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],standalone:!0,features:[he,hn]});let e=t;return e})();function eZ(e,t){let i=["asc","desc"];return e=="desc"&&i.reverse(),t||i.push(""),i}var Qs=IV.ENTERING+" "+xV.STANDARD_CURVE,Bd={indicator:Bn("indicator",[Ye("active-asc, asc",Yt({transform:"translateY(0px)"})),Ye("active-desc, desc",Yt({transform:"translateY(10px)"})),We("active-asc <=> active-desc",tn(Qs))]),leftPointer:Bn("leftPointer",[Ye("active-asc, asc",Yt({transform:"rotate(-45deg)"})),Ye("active-desc, desc",Yt({transform:"rotate(45deg)"})),We("active-asc <=> active-desc",tn(Qs))]),rightPointer:Bn("rightPointer",[Ye("active-asc, asc",Yt({transform:"rotate(45deg)"})),Ye("active-desc, desc",Yt({transform:"rotate(-45deg)"})),We("active-asc <=> active-desc",tn(Qs))]),arrowOpacity:Bn("arrowOpacity",[Ye("desc-to-active, asc-to-active, active",Yt({opacity:1})),Ye("desc-to-hint, asc-to-hint, hint",Yt({opacity:.54})),Ye("hint-to-desc, active-to-desc, desc, hint-to-asc, active-to-asc, asc, void",Yt({opacity:0})),We("* => asc, * => desc, * => active, * => hint, * => void",tn("0ms")),We("* <=> *",tn(Qs))]),arrowPosition:Bn("arrowPosition",[We("* => desc-to-hint, * => desc-to-active",tn(Qs,Uu([Yt({transform:"translateY(-25%)"}),Yt({transform:"translateY(0)"})]))),We("* => hint-to-desc, * => active-to-desc",tn(Qs,Uu([Yt({transform:"translateY(0)"}),Yt({transform:"translateY(25%)"})]))),We("* => asc-to-hint, * => asc-to-active",tn(Qs,Uu([Yt({transform:"translateY(25%)"}),Yt({transform:"translateY(0)"})]))),We("* => hint-to-asc, * => active-to-asc",tn(Qs,Uu([Yt({transform:"translateY(0)"}),Yt({transform:"translateY(-25%)"})]))),Ye("desc-to-hint, asc-to-hint, hint, desc-to-active, asc-to-active, active",Yt({transform:"translateY(0)"})),Ye("hint-to-desc, active-to-desc, desc",Yt({transform:"translateY(-25%)"})),Ye("hint-to-asc, active-to-asc, asc",Yt({transform:"translateY(25%)"}))]),allowChildren:Bn("allowChildren",[We("* <=> *",[jp("@*",Bp(),{optional:!0})])])},Db=(()=>{let t=class t{constructor(){this.changes=new at}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function nZ(e){return e||new Db}var iZ={provide:Db,deps:[[new He,new fa,Db]],useFactory:nZ},T2=(()=>{let t=class t{get sortActionDescription(){return this._sortActionDescription}set sortActionDescription(n){this._updateSortActionDescription(n)}constructor(n,r,o,s,l,d,u,f){this._intl=n,this._changeDetectorRef=r,this._sort=o,this._columnDef=s,this._focusMonitor=l,this._elementRef=d,this._ariaDescriber=u,this._showIndicatorHint=!1,this._viewState={},this._arrowDirection="",this._disableViewStateAnimation=!1,this.arrowPosition="after",this.disabled=!1,this._sortActionDescription="Sort",f?.arrowPosition&&(this.arrowPosition=f?.arrowPosition),this._handleStateChanges()}ngOnInit(){!this.id&&this._columnDef&&(this.id=this._columnDef.name),this._updateArrowDirection(),this._setAnimationTransitionState({toState:this._isSorted()?"active":this._arrowDirection}),this._sort.register(this),this._sortButton=this._elementRef.nativeElement.querySelector(".mat-sort-header-container"),this._updateSortActionDescription(this._sortActionDescription)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(n=>{let r=!!n;r!==this._showIndicatorHint&&(this._setIndicatorHintVisible(r),this._changeDetectorRef.markForCheck())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._sort.deregister(this),this._rerenderSubscription.unsubscribe(),this._sortButton&&this._ariaDescriber?.removeDescription(this._sortButton,this._sortActionDescription)}_setIndicatorHintVisible(n){this._isDisabled()&&n||(this._showIndicatorHint=n,this._isSorted()||(this._updateArrowDirection(),this._showIndicatorHint?this._setAnimationTransitionState({fromState:this._arrowDirection,toState:"hint"}):this._setAnimationTransitionState({fromState:"hint",toState:this._arrowDirection})))}_setAnimationTransitionState(n){this._viewState=n||{},this._disableViewStateAnimation&&(this._viewState={toState:n.toState})}_toggleOnInteraction(){this._sort.sort(this),(this._viewState.toState==="hint"||this._viewState.toState==="active")&&(this._disableViewStateAnimation=!0)}_handleClick(){this._isDisabled()||this._sort.sort(this)}_handleKeydown(n){!this._isDisabled()&&(n.keyCode===32||n.keyCode===13)&&(n.preventDefault(),this._toggleOnInteraction())}_isSorted(){return this._sort.active==this.id&&(this._sort.direction==="asc"||this._sort.direction==="desc")}_getArrowDirectionState(){return`${this._isSorted()?"active-":""}${this._arrowDirection}`}_getArrowViewState(){let n=this._viewState.fromState;return(n?`${n}-to-`:"")+this._viewState.toState}_updateArrowDirection(){this._arrowDirection=this._isSorted()?this._sort.direction:this.start||this._sort.start}_isDisabled(){return this._sort.disabled||this.disabled}_getAriaSortAttribute(){return this._isSorted()?this._sort.direction=="asc"?"ascending":"descending":"none"}_renderArrow(){return!this._isDisabled()||this._isSorted()}_updateSortActionDescription(n){this._sortButton&&(this._ariaDescriber?.removeDescription(this._sortButton,this._sortActionDescription),this._ariaDescriber?.describe(this._sortButton,n)),this._sortActionDescription=n}_handleStateChanges(){this._rerenderSubscription=wn(this._sort.sortChange,this._sort._stateChanges,this._intl.changes).subscribe(()=>{this._isSorted()&&(this._updateArrowDirection(),(this._viewState.toState==="hint"||this._viewState.toState==="active")&&(this._disableViewStateAnimation=!0),this._setAnimationTransitionState({fromState:this._arrowDirection,toState:"active"}),this._showIndicatorHint=!1),!this._isSorted()&&this._viewState&&this._viewState.toState==="active"&&(this._disableViewStateAnimation=!1,this._setAnimationTransitionState({fromState:"active",toState:this._arrowDirection})),this._changeDetectorRef.markForCheck()})}};t.\u0275fac=function(r){return new(r||t)(x(Db),x(Oe),x(Ho,8),x("MAT_SORT_HEADER_COLUMN_DEF",8),x(jo),x(gt),x(Wv,8),x(C2,8))},t.\u0275cmp=ft({type:t,selectors:[["","mat-sort-header",""]],hostAttrs:[1,"mat-sort-header"],hostVars:3,hostBindings:function(r,o){r&1&&Ct("click",function(){return o._handleClick()})("keydown",function(l){return o._handleKeydown(l)})("mouseenter",function(){return o._setIndicatorHintVisible(!0)})("mouseleave",function(){return o._setIndicatorHintVisible(!1)}),r&2&&(Zt("aria-sort",o._getAriaSortAttribute()),Bt("mat-sort-header-disabled",o._isDisabled()))},inputs:{id:[F.None,"mat-sort-header","id"],arrowPosition:"arrowPosition",start:"start",disabled:[F.HasDecoratorInputTransform,"disabled","disabled",Tt],sortActionDescription:"sortActionDescription",disableClear:[F.HasDecoratorInputTransform,"disableClear","disableClear",Tt]},exportAs:["matSortHeader"],standalone:!0,features:[he,zt],attrs:ZX,ngContentSelectors:JX,decls:4,vars:7,consts:[[1,"mat-sort-header-container","mat-focus-indicator"],[1,"mat-sort-header-content"],[1,"mat-sort-header-arrow"],[1,"mat-sort-header-stem"],[1,"mat-sort-header-indicator"],[1,"mat-sort-header-pointer-left"],[1,"mat-sort-header-pointer-right"],[1,"mat-sort-header-pointer-middle"]],template:function(r,o){r&1&&(Te(),D(0,"div",0)(1,"div",1),Mt(2),R(),vt(3,tZ,6,6,"div",2),R()),r&2&&(Bt("mat-sort-header-sorted",o._isSorted())("mat-sort-header-position-before",o.arrowPosition==="before"),Zt("tabindex",o._isDisabled()?null:0)("role",o._isDisabled()?null:"button"),j(3),Nt(3,o._renderArrow()?3:-1))},styles:[".mat-sort-header-container{display:flex;cursor:pointer;align-items:center;letter-spacing:normal;outline:0}[mat-sort-header].cdk-keyboard-focused .mat-sort-header-container,[mat-sort-header].cdk-program-focused .mat-sort-header-container{border-bottom:solid 1px currentColor}.mat-sort-header-disabled .mat-sort-header-container{cursor:default}.mat-sort-header-container::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-sort-header-content{text-align:center;display:flex;align-items:center}.mat-sort-header-position-before{flex-direction:row-reverse}.mat-sort-header-arrow{height:12px;width:12px;min-width:12px;position:relative;display:flex;color:var(--mat-sort-arrow-color);opacity:0}.mat-sort-header-arrow,[dir=rtl] .mat-sort-header-position-before .mat-sort-header-arrow{margin:0 0 0 6px}.mat-sort-header-position-before .mat-sort-header-arrow,[dir=rtl] .mat-sort-header-arrow{margin:0 6px 0 0}.mat-sort-header-stem{background:currentColor;height:10px;width:2px;margin:auto;display:flex;align-items:center}.cdk-high-contrast-active .mat-sort-header-stem{width:0;border-left:solid 2px}.mat-sort-header-indicator{width:100%;height:2px;display:flex;align-items:center;position:absolute;top:0;left:0}.mat-sort-header-pointer-middle{margin:auto;height:2px;width:2px;background:currentColor;transform:rotate(45deg)}.cdk-high-contrast-active .mat-sort-header-pointer-middle{width:0;height:0;border-top:solid 2px;border-left:solid 2px}.mat-sort-header-pointer-left,.mat-sort-header-pointer-right{background:currentColor;width:6px;height:2px;position:absolute;top:0}.cdk-high-contrast-active .mat-sort-header-pointer-left,.cdk-high-contrast-active .mat-sort-header-pointer-right{width:0;height:0;border-left:solid 6px;border-top:solid 2px}.mat-sort-header-pointer-left{transform-origin:right;left:0}.mat-sort-header-pointer-right{transform-origin:left;right:0}"],encapsulation:2,data:{animation:[Bd.indicator,Bd.leftPointer,Bd.rightPointer,Bd.arrowOpacity,Bd.arrowPosition,Bd.allowChildren]},changeDetection:0});let e=t;return e})(),S2=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({providers:[iZ],imports:[Gt]});let e=t;return e})();var rZ=["*"],Rb;function oZ(){if(Rb===void 0&&(Rb=null,typeof window<"u")){let e=window;e.trustedTypes!==void 0&&(Rb=e.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return Rb}function Xf(e){return oZ()?.createHTML(e)||e}function D2(e){return Error(`Unable to find icon with the name "${e}"`)}function sZ(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}function R2(e){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${e}".`)}function k2(e){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${e}".`)}var Wo=class{constructor(t,i,n){this.url=t,this.svgText=i,this.options=n}},aZ=(()=>{let t=class t{constructor(n,r,o,s){this._httpClient=n,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=o}addSvgIcon(n,r,o){return this.addSvgIconInNamespace("",n,r,o)}addSvgIconLiteral(n,r,o){return this.addSvgIconLiteralInNamespace("",n,r,o)}addSvgIconInNamespace(n,r,o,s){return this._addSvgIconConfig(n,r,new Wo(o,null,s))}addSvgIconResolver(n){return this._resolvers.push(n),this}addSvgIconLiteralInNamespace(n,r,o,s){let l=this._sanitizer.sanitize(Si.HTML,o);if(!l)throw k2(o);let d=Xf(l);return this._addSvgIconConfig(n,r,new Wo("",d,s))}addSvgIconSet(n,r){return this.addSvgIconSetInNamespace("",n,r)}addSvgIconSetLiteral(n,r){return this.addSvgIconSetLiteralInNamespace("",n,r)}addSvgIconSetInNamespace(n,r,o){return this._addSvgIconSetConfig(n,new Wo(r,null,o))}addSvgIconSetLiteralInNamespace(n,r,o){let s=this._sanitizer.sanitize(Si.HTML,r);if(!s)throw k2(r);let l=Xf(s);return this._addSvgIconSetConfig(n,new Wo("",l,o))}registerFontClassAlias(n,r=n){return this._fontCssClassesByAlias.set(n,r),this}classNameForFontAlias(n){return this._fontCssClassesByAlias.get(n)||n}setDefaultFontSetClass(...n){return this._defaultFontSetClass=n,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(n){let r=this._sanitizer.sanitize(Si.RESOURCE_URL,n);if(!r)throw R2(n);let o=this._cachedIconsByUrl.get(r);return o?tt(kb(o)):this._loadSvgIconFromConfig(new Wo(n,null)).pipe(Me(s=>this._cachedIconsByUrl.set(r,s)),dt(s=>kb(s)))}getNamedSvgIcon(n,r=""){let o=M2(r,n),s=this._svgIconConfigs.get(o);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,n),s)return this._svgIconConfigs.set(o,s),this._getSvgFromConfig(s);let l=this._iconSetConfigs.get(r);return l?this._getSvgFromIconSetConfigs(n,l):da(D2(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(n){return n.svgText?tt(kb(this._svgElementFromConfig(n))):this._loadSvgIconFromConfig(n).pipe(dt(r=>kb(r)))}_getSvgFromIconSetConfigs(n,r){let o=this._extractIconWithNameFromAnySet(n,r);if(o)return tt(o);let s=r.filter(l=>!l.svgText).map(l=>this._loadSvgIconSetFromConfig(l).pipe(ss(d=>{let f=`Loading icon set URL: ${this._sanitizer.sanitize(Si.RESOURCE_URL,l.url)} failed: ${d.message}`;return this._errorHandler.handleError(new Error(f)),tt(null)})));return _p(s).pipe(dt(()=>{let l=this._extractIconWithNameFromAnySet(n,r);if(!l)throw D2(n);return l}))}_extractIconWithNameFromAnySet(n,r){for(let o=r.length-1;o>=0;o--){let s=r[o];if(s.svgText&&s.svgText.toString().indexOf(n)>-1){let l=this._svgElementFromConfig(s),d=this._extractSvgIconFromSet(l,n,s.options);if(d)return d}}return null}_loadSvgIconFromConfig(n){return this._fetchIcon(n).pipe(Me(r=>n.svgText=r),dt(()=>this._svgElementFromConfig(n)))}_loadSvgIconSetFromConfig(n){return n.svgText?tt(null):this._fetchIcon(n).pipe(Me(r=>n.svgText=r))}_extractSvgIconFromSet(n,r,o){let s=n.querySelector(`[id="${r}"]`);if(!s)return null;let l=s.cloneNode(!0);if(l.removeAttribute("id"),l.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(l,o);if(l.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(l),o);let d=this._svgElementFromString(Xf("<svg></svg>"));return d.appendChild(l),this._setSvgAttributes(d,o)}_svgElementFromString(n){let r=this._document.createElement("DIV");r.innerHTML=n;let o=r.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(n){let r=this._svgElementFromString(Xf("<svg></svg>")),o=n.attributes;for(let s=0;s<o.length;s++){let{name:l,value:d}=o[s];l!=="id"&&r.setAttribute(l,d)}for(let s=0;s<n.childNodes.length;s++)n.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(n.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(n,r){return n.setAttribute("fit",""),n.setAttribute("height","100%"),n.setAttribute("width","100%"),n.setAttribute("preserveAspectRatio","xMidYMid meet"),n.setAttribute("focusable","false"),r&&r.viewBox&&n.setAttribute("viewBox",r.viewBox),n}_fetchIcon(n){let{url:r,options:o}=n,s=o?.withCredentials??!1;if(!this._httpClient)throw sZ();if(r==null)throw Error(`Cannot fetch icon from URL "${r}".`);let l=this._sanitizer.sanitize(Si.RESOURCE_URL,r);if(!l)throw R2(r);let d=this._inProgressUrlFetches.get(l);if(d)return d;let u=this._httpClient.get(l,{responseType:"text",withCredentials:s}).pipe(dt(f=>Xf(f)),ha(()=>this._inProgressUrlFetches.delete(l)),D1());return this._inProgressUrlFetches.set(l,u),u}_addSvgIconConfig(n,r,o){return this._svgIconConfigs.set(M2(n,r),o),this}_addSvgIconSetConfig(n,r){let o=this._iconSetConfigs.get(n);return o?o.push(r):this._iconSetConfigs.set(n,[r]),this}_svgElementFromConfig(n){if(!n.svgElement){let r=this._svgElementFromString(n.svgText);this._setSvgAttributes(r,n.options),n.svgElement=r}return n.svgElement}_getIconConfigFromResolvers(n,r){for(let o=0;o<this._resolvers.length;o++){let s=this._resolvers[o](r,n);if(s)return lZ(s)?new Wo(s.url,null,s.options):new Wo(s,null)}}};t.\u0275fac=function(r){return new(r||t)(T(Hk,8),T(sw),T(xt,8),T(ma))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function kb(e){return e.cloneNode(!0)}function M2(e,t){return e+":"+t}function lZ(e){return!!(e.url&&e.options)}var cZ=new H("MAT_ICON_DEFAULT_OPTIONS"),dZ=new H("mat-icon-location",{providedIn:"root",factory:uZ});function uZ(){let e=W(xt),t=e?e.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}var P2=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],hZ=P2.map(e=>`[${e}]`).join(", "),fZ=/^url\(['"]?#(.*?)['"]?\)$/,Mb=(()=>{let t=class t{get color(){return this._color||this._defaultColor}set color(n){this._color=n}get svgIcon(){return this._svgIcon}set svgIcon(n){n!==this._svgIcon&&(n?this._updateSvgIcon(n):this._svgIcon&&this._clearSvgElement(),this._svgIcon=n)}get fontSet(){return this._fontSet}set fontSet(n){let r=this._cleanupFontValue(n);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(n){let r=this._cleanupFontValue(n);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(n,r,o,s,l,d){this._elementRef=n,this._iconRegistry=r,this._location=s,this._errorHandler=l,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=un.EMPTY,d&&(d.color&&(this.color=this._defaultColor=d.color),d.fontSet&&(this.fontSet=d.fontSet)),o||n.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(n){if(!n)return["",""];let r=n.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${n}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let n=this._elementsWithExternalReferences;if(n&&n.size){let r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(n){this._clearSvgElement();let r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(n),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(n)}_clearSvgElement(){let n=this._elementRef.nativeElement,r=n.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){let o=n.childNodes[r];(o.nodeType!==1||o.nodeName.toLowerCase()==="svg")&&o.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let n=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(o=>o.length>0);this._previousFontSetClass.forEach(o=>n.classList.remove(o)),r.forEach(o=>n.classList.add(o)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&n.classList.remove(this._previousFontIconClass),this.fontIcon&&n.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(n){return typeof n=="string"?n.trim().split(" ")[0]:n}_prependPathToReferences(n){let r=this._elementsWithExternalReferences;r&&r.forEach((o,s)=>{o.forEach(l=>{s.setAttribute(l.name,`url('${n}#${l.value}')`)})})}_cacheChildrenWithExternalReferences(n){let r=n.querySelectorAll(hZ),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)P2.forEach(l=>{let d=r[s],u=d.getAttribute(l),f=u?u.match(fZ):null;if(f){let p=o.get(d);p||(p=[],o.set(d,p)),p.push({name:l,value:f[1]})}})}_updateSvgIcon(n){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),n){let[r,o]=this._splitIconName(n);r&&(this._svgNamespace=r),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,r).pipe($e(1)).subscribe(s=>this._setSvgElement(s),s=>{let l=`Error retrieving icon ${r}:${o}! ${s.message}`;this._errorHandler.handleError(new Error(l))})}}};t.\u0275fac=function(r){return new(r||t)(x(gt),x(aZ),wo("aria-hidden"),x(dZ),x(ma),x(cZ,8))},t.\u0275cmp=ft({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,o){r&2&&(Zt("data-mat-icon-type",o._usingFontIcon()?"font":"svg")("data-mat-icon-name",o._svgName||o.fontIcon)("data-mat-icon-namespace",o._svgNamespace||o.fontSet)("fontIcon",o._usingFontIcon()?o.fontIcon:null),pa(o.color?"mat-"+o.color:""),Bt("mat-icon-inline",o.inline)("mat-icon-no-color",o.color!=="primary"&&o.color!=="accent"&&o.color!=="warn"))},inputs:{color:"color",inline:[F.HasDecoratorInputTransform,"inline","inline",Tt],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[he,zt],ngContentSelectors:rZ,decls:1,vars:0,template:function(r,o){r&1&&(Te(),Mt(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0});let e=t;return e})(),O2=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({imports:[Gt,Gt]});let e=t;return e})();var mZ=()=>[5,10,25,100],pZ=e=>["/admin/products/",e];function gZ(e,t){e&1&&ht(0,"th",18)}function _Z(e,t){if(e&1&&(D(0,"td",19),ht(1,"img",20),R()),e&2){let i=t.$implicit;j(),pt("src",i.imgURL,cs)}}function vZ(e,t){e&1&&(D(0,"th",21),Z(1," Name "),R())}function bZ(e,t){if(e&1&&(D(0,"td",19)(1,"strong"),Z(2),R()()),e&2){let i=t.$implicit;j(2),An(" ",i.name," ")}}function yZ(e,t){e&1&&(D(0,"th",21),Z(1," Category "),R())}function wZ(e,t){if(e&1&&(D(0,"td",19),Z(1),R()),e&2){let i=t.$implicit;j(),An(" ",i.category," ")}}function xZ(e,t){e&1&&(D(0,"th",21),Z(1," Price "),R())}function IZ(e,t){if(e&1&&(D(0,"td",19),Z(1),xo(2,"currency"),R()),e&2){let i=t.$implicit;j(),An(" ",Ep(2,1,i.price,"EGP")," ")}}function EZ(e,t){e&1&&ht(0,"th",18)}function CZ(e,t){if(e&1){let i=Pe();D(0,"td",19)(1,"button",22)(2,"mat-icon"),Z(3,"edit"),R()(),D(4,"button",23),Ct("click",function(){let r=ne(i).$implicit,o=wt();return ie(o.onDelete(r.ID))}),D(5,"mat-icon"),Z(6,"delete"),R()()()}if(e&2){let i=t.$implicit;j(),pt("routerLink",J1(1,pZ,i.ID))}}function TZ(e,t){e&1&&ht(0,"tr",24)}function SZ(e,t){e&1&&ht(0,"tr",25)}function AZ(e,t){if(e&1&&(D(0,"tr",26)(1,"td",27),Z(2),R()()),e&2){wt();let i=Gi(9);j(2),An('No data matching the filter "',i.value,'"')}}var L2=(()=>{let t=class t{constructor(n,r){this._pService=r,this.displayedColumns=["image","name","category","price","action"]}ngAfterViewInit(){this._pService.getProducts().subscribe(n=>{this.apiResponse=n,this.dataSource=new ao(n),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}onDelete(n){this._pService.deleteProduct(n)}applyFilter(n){let o=n.target.value.trim().toLowerCase(),s=F2.default.filter(this.apiResponse,l=>l.name.toLowerCase().includes(o));this.dataSource=new ao(s),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.paginator&&(this.dataSource.paginator.firstPage(),this.dataSource.sort=this.sort)}};t.\u0275fac=function(r){return new(r||t)(x(Gn),x(Ks))},t.\u0275cmp=ft({type:t,selectors:[["app-products"]],viewQuery:function(r,o){if(r&1&&(be($o,5),be(Ho,5)),r&2){let s;It(s=Et())&&(o.paginator=s.first),It(s=Et())&&(o.sort=s.first)}},decls:31,vars:5,consts:[["input",""],[1,"container"],[1,"row"],["mat-stroked-button","","color","primary","routerLink","/admin/products/new"],["matInput","","placeholder","Ex. Mia",3,"keyup"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","category"],["matColumnDef","price"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],[3,"src"],["mat-header-cell","","mat-sort-header",""],["mat-button","","color","primary",3,"routerLink"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(r,o){if(r&1){let s=Pe();D(0,"div",1)(1,"div",2)(2,"button",3),Z(3,"new product"),R()(),ht(4,"br"),D(5,"mat-form-field")(6,"mat-label"),Z(7,"Filter"),R(),D(8,"input",4,0),Ct("keyup",function(d){return ne(s),ie(o.applyFilter(d))}),R()(),D(10,"div",2)(11,"table",5),Fr(12,6),vt(13,gZ,1,0,"th",7)(14,_Z,2,1,"td",8),Lr(),Fr(15,9),vt(16,vZ,2,0,"th",10)(17,bZ,3,1,"td",8),Lr(),Fr(18,11),vt(19,yZ,2,0,"th",10)(20,wZ,2,1,"td",8),Lr(),Fr(21,12),vt(22,xZ,2,0,"th",10)(23,IZ,3,4,"td",8),Lr(),Fr(24,13),vt(25,EZ,1,0,"th",7)(26,CZ,7,3,"td",8),Lr(),vt(27,TZ,1,0,"tr",14)(28,SZ,1,0,"tr",15)(29,AZ,3,1,"tr",16),R(),ht(30,"mat-paginator",17),R()()}r&2&&(j(11),pt("dataSource",o.dataSource),j(16),pt("matHeaderRowDef",o.displayedColumns),j(),pt("matRowDefColumns",o.displayedColumns),j(2),pt("pageSizeOptions",Ip(4,mZ)))},dependencies:[ug,so,oo,Ys,ar,Mb,yb,xb,Eb,Ib,wb,Cb,w2,x2,Tb,Sb,Ab,Ho,T2,$o,kp],styles:["table[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px;height:90px;border-radius:50%}table[_ngcontent-%COMP%]{width:100%}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}.container[_ngcontent-%COMP%]{margin-top:20px}"]});let e=t;return e})();var V2=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=ft({type:t,selectors:[["app-orders"]],decls:2,vars:0,template:function(r,o){r&1&&(D(0,"p"),Z(1,"orders works!"),R())}});let e=t;return e})();var B2="auth",Zf=class{constructor(t){return t}},ul=class{constructor(){return Ca(B2)}};var CS=new H("angularfire2.auth-instances");function AJ(e,t){let i=pc(B2,e,t);return i&&new Zf(i)}function DJ(e){return(t,i)=>{let n=t.runOutsideAngular(()=>e(i));return new Zf(n)}}var RJ={provide:ul,deps:[[new He,CS]]},kJ={provide:Zf,useFactory:AJ,deps:[[new He,CS],vs]},MJ=(()=>{class e{constructor(){Rn("angularfire",Xi.full,"auth")}static \u0275fac=function(n){return new(n||e)};static \u0275mod=st({type:e});static \u0275inj=ot({providers:[kJ,RJ]})}return e})();function j2(e,...t){return{ngModule:MJ,providers:[{provide:CS,useFactory:DJ(e),multi:!0,deps:[Q,fn,$r,bs,[new He,Ri],...t]}]}}var U2=gc(ju,!0);var Pb=(()=>{let t=class t{constructor(n,r,o){this.afAuth=n,this.sb=r,this.router=o}AuthLogin(n){return this.afAuth.signInWithPopup(n).then(r=>{this.sb.open("You have been successfully logged in!","Hide",{duration:5e3}),this.router.navigate(["/"])}).catch(r=>{console.log(r)})}GoogleAuth(){return this.AuthLogin(new W0)}logOut(){this.afAuth.signOut()}};t.\u0275fac=function(r){return new(r||t)(T(xh),T(zo),T(Gn))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var z2=(()=>{let t=class t{constructor(){this.authService=W(Pb)}login(){this.authService.GoogleAuth()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=ft({type:t,selectors:[["app-login"]],decls:2,vars:0,consts:[["type","button",1,"login-with-google-btn",3,"click"]],template:function(r,o){r&1&&(D(0,"button",0),Ct("click",function(){return o.login()}),Z(1,` Sign in with Google
`),R())},styles:[".login-with-google-btn[_ngcontent-%COMP%]{transition:background-color .3s,box-shadow .3s;padding:12px 16px 12px 42px;border:none;border-radius:3px;box-shadow:0 -1px #0000000a,0 1px 1px #00000040;color:#757575;font-size:14px;font-weight:500;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNMTcuNiA5LjJsLS4xLTEuOEg5djMuNGg0LjhDMTMuNiAxMiAxMyAxMyAxMiAxMy42djIuMmgzYTguOCA4LjggMCAwIDAgMi42LTYuNnoiIGZpbGw9IiM0Mjg1RjQiIGZpbGwtcnVsZT0ibm9uemVybyIvPjxwYXRoIGQ9Ik05IDE4YzIuNCAwIDQuNS0uOCA2LTIuMmwtMy0yLjJhNS40IDUuNCAwIDAgMS04LTIuOUgxVjEzYTkgOSAwIDAgMCA4IDV6IiBmaWxsPSIjMzRBODUzIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48cGF0aCBkPSJNNCAxMC43YTUuNCA1LjQgMCAwIDEgMC0zLjRWNUgxYTkgOSAwIDAgMCAwIDhsMy0yLjN6IiBmaWxsPSIjRkJCQzA1IiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48cGF0aCBkPSJNOSAzLjZjMS4zIDAgMi41LjQgMy40IDEuM0wxNSAyLjNBOSA5IDAgMCAwIDEgNWwzIDIuNGE1LjQgNS40IDAgMCAxIDUtMy43eiIgZmlsbD0iI0VBNDMzNSIgZmlsbC1ydWxlPSJub256ZXJvIi8+PHBhdGggZD0iTTAgMGgxOHYxOEgweiIvPjwvZz48L3N2Zz4=);background-color:#fff;background-repeat:no-repeat;background-position:12px 11px}.login-with-google-btn[_ngcontent-%COMP%]:hover{box-shadow:0 -1px #0000000a,0 2px 4px #00000040}.login-with-google-btn[_ngcontent-%COMP%]:active{background-color:#eee}.login-with-google-btn[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 -1px #0000000a,0 2px 4px #00000040,0 0 0 3px #c8dafc}.login-with-google-btn[_ngcontent-%COMP%]:disabled{filter:grayscale(100%);background-color:#ebebeb;box-shadow:0 -1px #0000000a,0 1px 1px #00000040;cursor:not-allowed}body[_ngcontent-%COMP%]{text-align:center;padding-top:2rem}"]});let e=t;return e})();var Ob=(()=>{let t=class t{constructor(n,r){this.firestore=n,this.sb=r,this.currentUser=null,this.username=null,this.email=null,this.userImgURL=null,this.userID=new Je(""),ju().onAuthStateChanged(o=>{this.currentUser=o,o?(this.username=o.displayName,this.email=o.email,this.userImgURL=o.photoURL,this.userID.next(o.uid),this.getUserId()):r.open("No User Logged in","Hide",{duration:500})})}getUserId(){return this.userID}};t.\u0275fac=function(r){return new(r||t)(T(ir),T(zo))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Nb=(()=>{let t=class t{constructor(n,r,o){this.afs=n,this.uService=r,this.sb=o,this.isAdmin=!1,this.uService.getUserId().subscribe(s=>{s!=""&&this.afs.collection("users").doc(s).get().subscribe(l=>{if(l.exists){let d=l.data();this.isAdmin=d.isAdmin}else o.open("User not logged in","hide",{duration:1e3})})})}ngOnInit(){}};t.\u0275fac=function(r){return new(r||t)(T(ir),T(Ob),T(zo))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var jd=(()=>{let t=class t{constructor(n){this.isAdminService=n}canActivate(){return this.isAdminService.isAdmin}};t.\u0275fac=function(r){return new(r||t)(T(Nb))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var $2=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=ft({type:t,selectors:[["app-myorders"]],decls:2,vars:0,template:function(r,o){r&1&&(D(0,"p"),Z(1,"myorders works!"),R())}});let e=t;return e})();var H2=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=ft({type:t,selectors:[["app-mycart"]],decls:2,vars:0,template:function(r,o){r&1&&(D(0,"p"),Z(1,"mycart works!"),R())}});let e=t;return e})();var TS=I1(ES());var Fb=(()=>{let t=class t{constructor(n){this.afs=n,this.numberOfItemsInTheCart=0,this.cartID=null,this.getOrCreateCart()}ngOnInit(){}createCart(){return N(this,null,function*(){let n=yield this.afs.collection("shoppingCarts").add({ID:"",items:0});n.update({ID:n.id}),this.cartID=n.id})}getOrCreateCart(){this.cartID&&console.log(this.cartID)}addToCart(n){}};t.\u0275fac=function(r){return new(r||t)(T(ir))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var W2=(()=>{let t=class t{constructor(n){this.firestore=n}getItems(n){return this.firestore.collection("Product",r=>r.where("category","==",n))}};t.\u0275fac=function(r){return new(r||t)(T(ir))},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var LJ=()=>[8,16,32,100];function VJ(e,t){if(e&1){let i=Pe();D(0,"li",5),Ct("click",function(){let r=ne(i).$implicit,o=wt();return ie(o.getItemByCategory(r))}),D(1,"button",6),Z(2),R()()}if(e&2){let i=t.$implicit;j(2),Ke(i)}}function BJ(e,t){e&1&&ht(0,"th")}function jJ(e,t){if(e&1){let i=Pe();D(0,"td")(1,"mat-card",20)(2,"mat-card-header")(3,"mat-card-title"),Z(4),R()(),ht(5,"img",21),D(6,"mat-card-content")(7,"mat-card-title"),Z(8),xo(9,"currency"),R()(),D(10,"mat-card-actions")(11,"button",22),Ct("click",function(){let r=ne(i).$implicit,o=wt();return ie(o.addToCart(r))}),Z(12,"Buy"),R()()()()}if(e&2){let i=t.$implicit;j(4),Ke(i.name),j(),pt("src",i.imgURL,cs),j(3),Ke(Ep(9,3,i.price,"EGP"))}}function UJ(e,t){e&1&&ht(0,"tr",23)}function zJ(e,t){e&1&&ht(0,"tr",24)}function $J(e,t){if(e&1&&(D(0,"tr",25)(1,"td",26),Z(2),R()()),e&2){wt();let i=Gi(17);j(2),An('No data matching the filter "',i.value,'"')}}var q2=(()=>{let t=class t{constructor(n,r,o,s){this.cartService=n,this.productService=r,this.categoryService=o,this.categoryFilterService=s,this.displayedColumns=["card"],r.getProducts().subscribe(l=>{this.dataSource=new ao(l),this.apiResponse=l,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}),this.categories$=o.getCategories()}applyFilter(n){let o=n.target.value.trim().toLowerCase(),s=TS.filter(this.apiResponse,l=>l.name.toLowerCase().includes(o));this.dataSource=new ao(s),this.dataSource.paginator=this.paginator,this.dataSource.paginator&&this.dataSource.paginator.firstPage()}getItemByCategory(n){return N(this,null,function*(){let r=TS.filter(this.apiResponse,o=>o.category.toLowerCase()==n.toLowerCase());n!==""?this.dataSource=new ao(r):this.dataSource=new ao(this.apiResponse),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}addToCart(n){this.cartService.addToCart(n),console.log(n)}};t.\u0275fac=function(r){return new(r||t)(x(Fb),x(Ks),x(fd),x(W2))},t.\u0275cmp=ft({type:t,selectors:[["app-home"]],viewQuery:function(r,o){if(r&1&&(be($o,5),be(Ho,5)),r&2){let s;It(s=Et())&&(o.paginator=s.first),It(s=Et())&&(o.sort=s.first)}},decls:29,vars:8,consts:[["input",""],[1,"row",2,"display","flex","justify-content","space-around","margin-top","20px"],[1,"col-2"],[1,"card"],[1,"list-group"],[1,"list-group-item",3,"click"],["mat-button",""],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[1,"col-9"],[1,"row"],["appearance","outline"],["matInput","","placeholder","Ex. Spices",3,"keyup"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","card"],[4,"matHeaderCellDef"],[4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],[1,"example-card"],["mat-card-image","",3,"src"],["mat-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(r,o){if(r&1){let s=Pe();D(0,"div",1)(1,"div",2)(2,"h3"),Z(3,"Categories"),R(),ht(4,"div",3),D(5,"ul",4)(6,"li",5),Ct("click",function(){return ne(s),ie(o.getItemByCategory(""))}),D(7,"button",6),Z(8,"All Categories"),R()(),vt(9,VJ,3,1,"li",7),xo(10,"async"),R()(),D(11,"div",8)(12,"div",9)(13,"mat-form-field",10)(14,"mat-label"),Z(15,"Filter"),R(),D(16,"input",11,0),Ct("keyup",function(d){return ne(s),ie(o.applyFilter(d))}),R()()(),D(18,"div",9)(19,"div")(20,"table",12)(21,"tbody"),Fr(22,13),vt(23,BJ,1,0,"th",14)(24,jJ,13,6,"td",15),Lr(),R(),vt(25,UJ,1,0,"tr",16)(26,zJ,1,0,"tr",17)(27,$J,3,1,"tr",18),R(),ht(28,"mat-paginator",19),R()()()()}r&2&&(j(9),pt("ngForOf",Hl(10,5,o.categories$)),j(11),pt("dataSource",o.dataSource),j(5),pt("matHeaderRowDef",o.displayedColumns),j(),pt("matRowDefColumns",o.displayedColumns),j(2),pt("pageSizeOptions",Ip(7,LJ)))},dependencies:[Gl,so,oo,Ys,ar,yb,xb,Eb,Ib,wb,Cb,Tb,Sb,Ab,Ho,$o,kd,Od,Pd,Nd,Fd,Md,Kl,kp],styles:[".example-card[_ngcontent-%COMP%]{max-width:338px;margin:10px}.example-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:338px;height:270px}.example-card-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.ng-star-inserted[_ngcontent-%COMP%]{display:ruby-base-container;justify-content:space-around;align-items:center}.container[_ngcontent-%COMP%]{width:95%}"]});let e=t;return e})();var HJ=[{path:"",component:q2},{path:"my/orders",component:$2},{path:"my/cart",component:H2},{path:"login",component:z2},{path:"admin/orders",component:V2,canActivate:[jd],canDeactivate:["login"]},{path:"admin/products",component:L2},{path:"admin/products/new",component:o2,canActivate:[jd]},{path:"admin/products/:ID",component:s2,canActivate:[jd]}],G2=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({imports:[Gw.forRoot(HJ),Gw]});let e=t;return e})();var WJ=["*",[["mat-toolbar-row"]]],qJ=["*","mat-toolbar-row"],SS=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=X({type:t,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0});let e=t;return e})(),K2=(()=>{let t=class t{constructor(n,r,o){this._elementRef=n,this._platform=r,this._document=o}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}};t.\u0275fac=function(r){return new(r||t)(x(gt),x(te),x(xt))},t.\u0275cmp=ft({type:t,selectors:[["mat-toolbar"]],contentQueries:function(r,o,s){if(r&1&&Ie(s,SS,5),r&2){let l;It(l=Et())&&(o._toolbarRows=l)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(r,o){r&2&&(pa(o.color?"mat-"+o.color:""),Bt("mat-toolbar-multiple-rows",o._toolbarRows.length>0)("mat-toolbar-single-row",o._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[zt],ngContentSelectors:qJ,decls:2,vars:0,template:function(r,o){r&1&&(Te(WJ),Mt(0),Mt(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color);--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color)}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0});let e=t;return e})();var Y2=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({imports:[Gt,Gt]});let e=t;return e})();var KJ=["mat-menu-item",""],YJ=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],QJ=["mat-icon, [matMenuItemIcon]","*"];function XJ(e,t){e&1&&(yo(),D(0,"svg",2),ht(1,"polygon",3),R())}var ZJ=["*"];function JJ(e,t){if(e&1){let i=Pe();D(0,"div",0),Ct("keydown",function(r){ne(i);let o=wt();return ie(o._handleKeydown(r))})("click",function(){ne(i);let r=wt();return ie(r.closed.emit("click"))})("@transformMenu.start",function(r){ne(i);let o=wt();return ie(o._onAnimationStart(r))})("@transformMenu.done",function(r){ne(i);let o=wt();return ie(o._onAnimationDone(r))}),D(1,"div",1),Mt(2),R()()}if(e&2){let i=wt();pt("id",i.panelId)("ngClass",i._classList)("@transformMenu",i._panelAnimationState),Zt("aria-label",i.ariaLabel||null)("aria-labelledby",i.ariaLabelledby||null)("aria-describedby",i.ariaDescribedby||null)}}var AS=new H("MAT_MENU_PANEL"),Jf=(()=>{let t=class t{constructor(n,r,o,s,l){this._elementRef=n,this._document=r,this._focusMonitor=o,this._parentMenu=s,this._changeDetectorRef=l,this.role="menuitem",this.disabled=!1,this.disableRipple=!1,this._hovered=new at,this._focused=new at,this._highlighted=!1,this._triggersSubmenu=!1,s?.addItem?.(this)}focus(n,r){this._focusMonitor&&n?this._focusMonitor.focusVia(this._getHostElement(),n,r):this._getHostElement().focus(r),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(n){this.disabled&&(n.preventDefault(),n.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){let n=this._elementRef.nativeElement.cloneNode(!0),r=n.querySelectorAll("mat-icon, .material-icons");for(let o=0;o<r.length;o++)r[o].remove();return n.textContent?.trim()||""}_setHighlighted(n){this._highlighted=n,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(n){this._triggersSubmenu=n,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}};t.\u0275fac=function(r){return new(r||t)(x(gt),x(xt),x(jo),x(AS,8),x(Oe))},t.\u0275cmp=ft({type:t,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator"],hostVars:8,hostBindings:function(r,o){r&1&&Ct("click",function(l){return o._checkDisabled(l)})("mouseenter",function(){return o._handleMouseEnter()}),r&2&&(Zt("role",o.role)("tabindex",o._getTabIndex())("aria-disabled",o.disabled)("disabled",o.disabled||null),Bt("mat-mdc-menu-item-highlighted",o._highlighted)("mat-mdc-menu-item-submenu-trigger",o._triggersSubmenu))},inputs:{role:"role",disabled:[F.HasDecoratorInputTransform,"disabled","disabled",Tt],disableRipple:[F.HasDecoratorInputTransform,"disableRipple","disableRipple",Tt]},exportAs:["matMenuItem"],standalone:!0,features:[he,zt],attrs:KJ,ngContentSelectors:QJ,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(r,o){r&1&&(Te(YJ),Mt(0),D(1,"span",0),Mt(2,1),R(),ht(3,"div",1),vt(4,XJ,2,0,":svg:svg",2)),r&2&&(j(3),pt("matRippleDisabled",o.disableRipple||o.disabled)("matRippleTrigger",o._getHostElement()),j(),Nt(4,o._triggersSubmenu?4:-1))},dependencies:[Yv],encapsulation:2,changeDetection:0});let e=t;return e})();var ttt=new H("MatMenuContent");var Lb={transformMenu:Bn("transformMenu",[Ye("void",Yt({opacity:0,transform:"scale(0.8)"})),We("void => enter",tn("120ms cubic-bezier(0, 0, 0.2, 1)",Yt({opacity:1,transform:"scale(1)"}))),We("* => void",tn("100ms 25ms linear",Yt({opacity:0})))]),fadeInItems:Bn("fadeInItems",[Ye("showing",Yt({opacity:1})),We("void => *",[Yt({opacity:0}),tn("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Mft=Lb.fadeInItems,Pft=Lb.transformMenu,ett=0,ntt=new H("mat-menu-default-options",{providedIn:"root",factory:itt});function itt(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}var Ud=(()=>{let t=class t{get xPosition(){return this._xPosition}set xPosition(n){this._xPosition=n,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(n){this._yPosition=n,this.setPositionClasses()}set panelClass(n){let r=this._previousPanelClass;r&&r.length&&r.split(" ").forEach(o=>{this._classList[o]=!1}),this._previousPanelClass=n,n&&n.length&&(n.split(" ").forEach(o=>{this._classList[o]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(n){this.panelClass=n}constructor(n,r,o,s){this._elementRef=n,this._ngZone=r,this._changeDetectorRef=s,this._elevationPrefix="mat-elevation-z",this._baseElevation=8,this._directDescendantItems=new Du,this._classList={},this._panelAnimationState="void",this._animationDone=new at,this.closed=new qt,this.close=this.closed,this.panelId=`mat-menu-panel-${ett++}`,this.overlayPanelClass=o.overlayPanelClass||"",this._xPosition=o.xPosition,this._yPosition=o.yPosition,this.backdropClass=o.backdropClass,this.overlapTrigger=o.overlapTrigger,this.hasBackdrop=o.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new $v(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(qn(this._directDescendantItems),ke(n=>wn(...n.map(r=>r._focused)))).subscribe(n=>this._keyManager.updateActiveItem(n)),this._directDescendantItems.changes.subscribe(n=>{let r=this._keyManager;if(this._panelAnimationState==="enter"&&r.activeItem?._hasFocus()){let o=n.toArray(),s=Math.max(0,Math.min(o.length-1,r.activeItemIndex||0));o[s]&&!o[s].disabled?r.setActiveItem(s):r.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusSubscription?.unsubscribe()}_hovered(){return this._directDescendantItems.changes.pipe(qn(this._directDescendantItems),ke(r=>wn(...r.map(o=>o._hovered))))}addItem(n){}removeItem(n){}_handleKeydown(n){let r=n.keyCode,o=this._keyManager;switch(r){case 27:Ni(n)||(n.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&this.direction==="ltr"&&this.closed.emit("keydown");break;case 39:this.parentMenu&&this.direction==="rtl"&&this.closed.emit("keydown");break;default:(r===38||r===40)&&o.setFocusOrigin("keyboard"),o.onKeydown(n);return}n.stopPropagation()}focusFirstItem(n="program"){this._firstItemFocusSubscription?.unsubscribe(),this._firstItemFocusSubscription=this._ngZone.onStable.pipe($e(1)).subscribe(()=>{let r=null;if(this._directDescendantItems.length&&(r=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!r||!r.contains(document.activeElement)){let o=this._keyManager;o.setFocusOrigin(n).setFirstItemActive(),!o.activeItem&&r&&r.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(n){let r=Math.min(this._baseElevation+n,24),o=`${this._elevationPrefix}${r}`,s=Object.keys(this._classList).find(l=>l.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[o]=!0,this._previousElevation=o)}setPositionClasses(n=this.xPosition,r=this.yPosition){let o=this._classList;o["mat-menu-before"]=n==="before",o["mat-menu-after"]=n==="after",o["mat-menu-above"]=r==="above",o["mat-menu-below"]=r==="below",this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(n){this._animationDone.next(n),this._isAnimating=!1}_onAnimationStart(n){this._isAnimating=!0,n.toState==="enter"&&this._keyManager.activeItemIndex===0&&(n.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(qn(this._allItems)).subscribe(n=>{this._directDescendantItems.reset(n.filter(r=>r._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}};t.\u0275fac=function(r){return new(r||t)(x(gt),x(Q),x(ntt),x(Oe))},t.\u0275cmp=ft({type:t,selectors:[["mat-menu"]],contentQueries:function(r,o,s){if(r&1&&(Ie(s,ttt,5),Ie(s,Jf,5),Ie(s,Jf,4)),r&2){let l;It(l=Et())&&(o.lazyContent=l.first),It(l=Et())&&(o._allItems=l),It(l=Et())&&(o.items=l)}},viewQuery:function(r,o){if(r&1&&be(Sn,5),r&2){let s;It(s=Et())&&(o.templateRef=s.first)}},hostVars:3,hostBindings:function(r,o){r&2&&Zt("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[F.None,"aria-label","ariaLabel"],ariaLabelledby:[F.None,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[F.None,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[F.HasDecoratorInputTransform,"overlapTrigger","overlapTrigger",Tt],hasBackdrop:[F.HasDecoratorInputTransform,"hasBackdrop","hasBackdrop",n=>n==null?null:Tt(n)],panelClass:[F.None,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],standalone:!0,features:[pe([{provide:AS,useExisting:t}]),he,zt],ngContentSelectors:ZJ,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mat-mdc-elevation-specific",3,"keydown","click","id","ngClass"],[1,"mat-mdc-menu-content"]],template:function(r,o){r&1&&(Te(),vt(0,JJ,3,6,"ng-template"))},dependencies:[ql],styles:['mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;list-style-type:none}.mat-mdc-menu-content:focus{outline:none}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font);line-height:var(--mat-menu-item-label-text-line-height);font-size:var(--mat-menu-item-label-text-size);letter-spacing:var(--mat-menu-item-label-text-tracking);font-weight:var(--mat-menu-item-label-text-weight)}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;box-sizing:border-box;outline:0;border-radius:var(--mat-menu-container-shape);background-color:var(--mat-menu-container-color);will-change:transform,opacity}.mat-mdc-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-divider{color:var(--mat-menu-divider-color);margin-bottom:var(--mat-menu-divider-bottom-spacing);margin-top:var(--mat-menu-divider-top-spacing)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:var(--mat-menu-item-leading-spacing);padding-right:var(--mat-menu-item-trailing-spacing);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;align-items:center;min-height:48px}.mat-mdc-menu-item:focus{outline:none}[dir=rtl] .mat-mdc-menu-item,.mat-mdc-menu-item[dir=rtl]{padding-left:var(--mat-menu-item-trailing-spacing);padding-right:var(--mat-menu-item-leading-spacing)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing);padding-right:var(--mat-menu-item-with-icon-trailing-spacing)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]),.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon])[dir=rtl]{padding-left:var(--mat-menu-item-with-icon-trailing-spacing);padding-right:var(--mat-menu-item-with-icon-leading-spacing)}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color)}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color)}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing);height:var(--mat-menu-item-icon-size);width:var(--mat-menu-item-icon-size)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color)}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color)}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1)}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[Lb.transformMenu,Lb.fadeInItems]},changeDetection:0});let e=t;return e})(),X2=new H("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let e=W(In);return()=>e.scrollStrategies.reposition()}});function rtt(e){return()=>e.scrollStrategies.reposition()}var ott={provide:X2,deps:[In],useFactory:rtt},Q2=rr({passive:!0});var Z2=(()=>{let t=class t{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(n){this.menu=n}get menu(){return this._menu}set menu(n){n!==this._menu&&(this._menu=n,this._menuCloseSubscription.unsubscribe(),n&&(this._parentMaterialMenu,this._menuCloseSubscription=n.close.subscribe(r=>{this._destroyMenu(r),(r==="click"||r==="tab")&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(r)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(n,r,o,s,l,d,u,f,p){this._overlay=n,this._element=r,this._viewContainerRef=o,this._menuItemInstance=d,this._dir=u,this._focusMonitor=f,this._ngZone=p,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=un.EMPTY,this._hoverSubscription=un.EMPTY,this._menuCloseSubscription=un.EMPTY,this._changeDetectorRef=W(Oe),this._handleTouchStart=_=>{Ff(_)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new qt,this.onMenuOpen=this.menuOpened,this.menuClosed=new qt,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=l instanceof Ud?l:void 0,r.nativeElement.addEventListener("touchstart",this._handleTouchStart,Q2)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,Q2),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){let n=this.menu;if(this._menuOpen||!n)return;let r=this._createOverlay(n),o=r.getConfig(),s=o.positionStrategy;this._setPosition(n,s),o.hasBackdrop=n.hasBackdrop==null?!this.triggersSubmenu():n.hasBackdrop,r.attach(this._getPortal(n)),n.lazyContent&&n.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(n),n instanceof Ud&&(n._startAnimation(),n._directDescendantItems.changes.pipe(Lt(n.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(n,r){this._focusMonitor&&n?this._focusMonitor.focusVia(this._element,n,r):this._element.nativeElement.focus(r)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(n){if(!this._overlayRef||!this.menuOpen)return;let r=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&(n==="keydown"||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,r instanceof Ud?(r._resetAnimation(),r.lazyContent?r._animationDone.pipe(me(o=>o.toState==="void"),$e(1),Lt(r.lazyContent._attached)).subscribe({next:()=>r.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),r?.lazyContent?.detach())}_initMenu(n){n.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,n.direction=this.dir,this._setMenuElevation(n),n.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(n){if(n.setElevation){let r=0,o=n.parentMenu;for(;o;)r++,o=o.parentMenu;n.setElevation(r)}}_setIsMenuOpen(n){n!==this._menuOpen&&(this._menuOpen=n,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(n),this._changeDetectorRef.markForCheck())}_createOverlay(n){if(!this._overlayRef){let r=this._getOverlayConfig(n);this._subscribeToPositions(n,r.positionStrategy),this._overlayRef=this._overlay.create(r),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(n){return new qs({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:n.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:n.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(n,r){n.setPositionClasses&&r.positionChanges.subscribe(o=>{let s=o.connectionPair.overlayX==="start"?"after":"before",l=o.connectionPair.overlayY==="top"?"below":"above";this._ngZone?this._ngZone.run(()=>n.setPositionClasses(s,l)):n.setPositionClasses(s,l)})}_setPosition(n,r){let[o,s]=n.xPosition==="before"?["end","start"]:["start","end"],[l,d]=n.yPosition==="above"?["bottom","top"]:["top","bottom"],[u,f]=[l,d],[p,_]=[o,s],y=0;if(this.triggersSubmenu()){if(_=o=n.xPosition==="before"?"start":"end",s=p=o==="end"?"start":"end",this._parentMaterialMenu){if(this._parentInnerPadding==null){let S=this._parentMaterialMenu.items.first;this._parentInnerPadding=S?S._getHostElement().offsetTop:0}y=l==="bottom"?this._parentInnerPadding:-this._parentInnerPadding}}else n.overlapTrigger||(u=l==="top"?"bottom":"top",f=d==="top"?"bottom":"top");r.withPositions([{originX:o,originY:u,overlayX:p,overlayY:l,offsetY:y},{originX:s,originY:u,overlayX:_,overlayY:l,offsetY:y},{originX:o,originY:f,overlayX:p,overlayY:d,offsetY:-y},{originX:s,originY:f,overlayX:_,overlayY:d,offsetY:-y}])}_menuClosingActions(){let n=this._overlayRef.backdropClick(),r=this._overlayRef.detachments(),o=this._parentMaterialMenu?this._parentMaterialMenu.closed:tt(),s=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(me(l=>l!==this._menuItemInstance),me(()=>this._menuOpen)):tt();return wn(n,o,s,r)}_handleMousedown(n){Nf(n)||(this._openedBy=n.button===0?"mouse":void 0,this.triggersSubmenu()&&n.preventDefault())}_handleKeydown(n){let r=n.keyCode;(r===13||r===32)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(r===39&&this.dir==="ltr"||r===37&&this.dir==="rtl")&&(this._openedBy="keyboard",this.openMenu())}_handleClick(n){this.triggersSubmenu()?(n.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(me(n=>n===this._menuItemInstance&&!n.disabled),R0(0,mp)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Ud&&this.menu._isAnimating?this.menu._animationDone.pipe($e(1),R0(0,mp),Lt(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(n){return(!this._portal||this._portal.templateRef!==n.templateRef)&&(this._portal=new Uo(n.templateRef,this._viewContainerRef)),this._portal}};t.\u0275fac=function(r){return new(r||t)(x(In),x(gt),x(Vn),x(X2),x(AS,8),x(Jf,10),x(Fi,8),x(jo),x(Q))},t.\u0275dir=X({type:t,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(r,o){r&1&&Ct("click",function(l){return o._handleClick(l)})("mousedown",function(l){return o._handleMousedown(l)})("keydown",function(l){return o._handleKeydown(l)}),r&2&&Zt("aria-haspopup",o.menu?"menu":null)("aria-expanded",o.menuOpen)("aria-controls",o.menuOpen?o.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[F.None,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[F.None,"matMenuTriggerFor","menu"],menuData:[F.None,"matMenuTriggerData","menuData"],restoreFocus:[F.None,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],standalone:!0});let e=t;return e})(),J2=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t}),t.\u0275inj=ot({providers:[ott],imports:[Ki,Vf,Gt,Gs,Hs,Gt]});let e=t;return e})();function att(e,t){if(e&1&&(D(0,"span"),Z(1),R()),e&2){let i=wt();j(),Ke(i.uService.username)}}function ltt(e,t){e&1&&(D(0,"button",9),Z(1,"Log in"),R())}function ctt(e,t){if(e&1&&(D(0,"button",12),Z(1,"Admin"),R(),D(2,"mat-menu",null,1)(4,"button",13),Z(5,"Products"),R(),D(6,"button",14),Z(7,"Orders"),R()()),e&2){let i=Gi(3);pt("matMenuTriggerFor",i)}}function dtt(e,t){if(e&1){let i=Pe();D(0,"button",10),Z(1,"My Orders"),R(),vt(2,ctt,8,1),D(3,"button",11),Ct("click",function(){ne(i);let r=wt();return ie(r.onLogOut())}),Z(4,"Log Out"),R()}if(e&2){let i=wt();j(2),Nt(2,i.iAService.isAdmin?2:-1)}}var tB=(()=>{let t=class t{constructor(){this.uService=W(Ob),this.authService=W(Pb),this.agService=W(jd),this.iAService=W(Nb),this.cartService=W(Fb)}onLogOut(){this.authService.logOut()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=ft({type:t,selectors:[["navbar"]],decls:18,vars:4,consts:[["menu","matMenu"],["admin","matMenu"],["color","primary"],["mat-button","","routerLink","/"],[1,"example-spacer"],["mat-menu-item","","routerLink","my/cart"],[1,"itemsCart"],[1,"itemNumber"],["mat-icon-button","",1,"example-icon",3,"matMenuTriggerFor"],["mat-menu-item","","routerLink","/login"],["mat-menu-item","","routerLink","my/orders"],["mat-menu-item","","routerLink","/",3,"click"],["mat-menu-item","",3,"matMenuTriggerFor"],["mat-menu-item","","routerLink","admin/products"],["mat-menu-item","","routerLink","admin/orders"]],template:function(r,o){if(r&1&&(D(0,"mat-toolbar",2)(1,"mat-toolbar-row")(2,"button",3),Z(3,"Mabu Store"),R(),ht(4,"span",4),D(5,"span")(6,"button",5)(7,"mat-icon",6),Z(8,"shopping_cart"),R(),ht(9,"span",7),R()(),vt(10,att,2,1,"span"),D(11,"button",8)(12,"mat-icon"),Z(13,"menu"),R()(),D(14,"mat-menu",null,0),vt(16,ltt,2,0,"button",9)(17,dtt,5,1),R()()()),r&2){let s=Gi(15);j(10),Nt(10,o.uService.currentUser?10:-1),j(),pt("matMenuTriggerFor",s),j(5),Nt(16,o.uService.currentUser==null?16:-1),j(),Nt(17,o.uService.currentUser?17:-1)}},dependencies:[ug,ar,Xv,K2,SS,Mb,Ud,Jf,Z2],styles:[".example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.itemsCart[_ngcontent-%COMP%], .mat-mdc-menu-item[_ngcontent-%COMP%]   .mat-icon-no-color[_ngcontent-%COMP%], .mat-mdc-menu-item[_ngcontent-%COMP%]   .mat-mdc-menu-submenu-icon[_ngcontent-%COMP%]{color:#fff}.itemNumber[_ngcontent-%COMP%]{background-color:#fff;border-radius:50px;width:50px;color:#000}"]});let e=t;return e})();var eB=(()=>{let t=class t{constructor(){this.title="Mabu Store"}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=ft({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(r,o){r&1&&ht(0,"navbar")(1,"router-outlet")},dependencies:[jw,tB],styles:[".container[_ngcontent-%COMP%]{margin-top:10px}"]});let e=t;return e})();var tm=class{constructor(t){return t}},nB="firestore",DS=class{constructor(){return Ca(nB)}};var RS=new H("angularfire2.firestore-instances");function htt(e,t){let i=pc(nB,e,t);return i&&new tm(i)}function ftt(e){return(t,i)=>{let n=t.runOutsideAngular(()=>e(i));return new tm(n)}}var mtt={provide:DS,deps:[[new He,RS]]},ptt={provide:tm,useFactory:htt,deps:[[new He,RS],vs]},gtt=(()=>{class e{constructor(){Rn("angularfire",Xi.full,"fst")}static \u0275fac=function(n){return new(n||e)};static \u0275mod=st({type:e});static \u0275inj=ot({providers:[ptt,mtt]})}return e})();function iB(e,...t){return{ngModule:gtt,providers:[{provide:RS,useFactory:ftt(e),multi:!0,deps:[Q,fn,$r,bs,[new He,ul],[new He,Ri],...t]}]}}var rB=gc(OL,!0);var oB="@firebase/database",sB="1.0.4";var AA="";function _tt(e){AA=e}var VS=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,i){i==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Dn(i))}get(t){let i=this.domStorage_.getItem(this.prefixedName_(t));return i==null?null:Fp(i)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var BS=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,i){i==null?delete this.cache_[t]:this.cache_[t]=i}get(t){return Br(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var VB=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new VS(t)}}catch{}return new BS},fl=VB("localStorage"),jS=VB("sessionStorage");var Wd=new Xl("@firebase/database"),vtt=function(){let e=1;return function(){return e++}}(),BB=function(e){let t=Rk(e),i=new Ak;i.update(t);let n=i.digest();return Mp.encodeByteArray(n)},fm=function(...e){let t="";for(let i=0;i<e.length;i++){let n=e[i];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?t+=fm.apply(null,n):typeof n=="object"?t+=Dn(n):t+=n,t+=" "}return t},ml=null,aB=!0,btt=function(e,t){it(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Wd.logLevel=Yi.VERBOSE,ml=Wd.log.bind(Wd),t&&jS.set("logging_enabled",!0)):typeof e=="function"?ml=e:(ml=null,jS.remove("logging_enabled"))},Zn=function(...e){if(aB===!0&&(aB=!1,ml===null&&jS.get("logging_enabled")===!0&&btt(!0)),ml){let t=fm.apply(null,e);ml(t)}},mm=function(e){return function(...t){Zn(e,...t)}},US=function(...e){let t="FIREBASE INTERNAL ERROR: "+fm(...e);Wd.error(t)},Go=function(...e){let t=`FIREBASE FATAL ERROR: ${fm(...e)}`;throw Wd.error(t),new Error(t)},Li=function(...e){let t="FIREBASE WARNING: "+fm(...e);Wd.warn(t)},ytt=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Li("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},jB=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},wtt=function(e){if(Vr()||document.readyState==="complete")e();else{let t=!1,i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},Gd="[MIN_NAME]",pl="[MAX_NAME]",tu=function(e,t){if(e===t)return 0;if(e===Gd||t===pl)return-1;if(t===Gd||e===pl)return 1;{let i=lB(e),n=lB(t);return i!==null?n!==null?i-n===0?e.length-t.length:i-n:-1:n!==null?1:e<t?-1:1}},xtt=function(e,t){return e===t?0:e<t?-1:1},em=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Dn(t))},DA=function(e){if(typeof e!="object"||e===null)return Dn(e);let t=[];for(let n in e)t.push(n);t.sort();let i="{";for(let n=0;n<t.length;n++)n!==0&&(i+=","),i+=Dn(t[n]),i+=":",i+=DA(e[t[n]]);return i+="}",i},UB=function(e,t){let i=e.length;if(i<=t)return[e];let n=[];for(let r=0;r<i;r+=t)r+t>i?n.push(e.substring(r,i)):n.push(e.substring(r,r+t));return n};function dr(e,t){for(let i in e)e.hasOwnProperty(i)&&t(i,e[i])}var zB=function(e){it(!jB(e),"Invalid JSON number");let t=11,i=52,n=(1<<t-1)-1,r,o,s,l,d;e===0?(o=0,s=0,r=1/e===-1/0?1:0):(r=e<0,e=Math.abs(e),e>=Math.pow(2,1-n)?(l=Math.min(Math.floor(Math.log(e)/Math.LN2),n),o=l+n,s=Math.round(e*Math.pow(2,i-l)-Math.pow(2,i))):(o=0,s=Math.round(e/Math.pow(2,1-n-i))));let u=[];for(d=i;d;d-=1)u.push(s%2?1:0),s=Math.floor(s/2);for(d=t;d;d-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(r?1:0),u.reverse();let f=u.join(""),p="";for(d=0;d<64;d+=8){let _=parseInt(f.substr(d,8),2).toString(16);_.length===1&&(_="0"+_),p=p+_}return p.toLowerCase()},Itt=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Ett=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var Ctt=new RegExp("^-?(0*)\\d{1,10}$"),Ttt=-2147483648,Stt=2147483647,lB=function(e){if(Ctt.test(e)){let t=Number(e);if(t>=Ttt&&t<=Stt)return t}return null},pm=function(e){try{e()}catch(t){setTimeout(()=>{let i=t.stack||"";throw Li("Exception was thrown by user callback.",i),t},Math.floor(0))}},Att=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},sm=function(e,t){let i=setTimeout(e,t);return typeof i=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(i):typeof i=="object"&&i.unref&&i.unref(),i};var zS=class{constructor(t,i){this.appName_=t,this.appCheckProvider=i,this.appCheck=i?.getImmediate({optional:!0}),this.appCheck||i?.get().then(n=>this.appCheck=n)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((i,n)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(i,n):i(null)},0)})}addTokenChangeListener(t){var i;(i=this.appCheckProvider)===null||i===void 0||i.get().then(n=>n.addTokenListener(t))}notifyForInvalidToken(){Li(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var $S=class{constructor(t,i,n){this.appName_=t,this.firebaseOptions_=i,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(i=>i&&i.code==="auth/token-not-initialized"?(Zn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,n)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(i,n):i(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(i=>i.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(i=>i.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Li(t)}},am=(()=>{class e{constructor(i){this.accessToken=i}getToken(i){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(i){i(this.accessToken)}removeTokenChangeListener(i){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),Bb="5",$B="v",HB="s",WB="r",qB="f",GB=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,KB="ls",YB="p",HS="ac",QB="websocket",XB="long_polling";var jb=class{constructor(t,i,n,r,o=!1,s="",l=!1,d=!1){this.secure=i,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=d,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=fl.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&fl.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${i}`}};function Dtt(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function ZB(e,t,i){it(typeof t=="string","typeof type must == string"),it(typeof i=="object","typeof params must == object");let n;if(t===QB)n=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===XB)n=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);Dtt(e)&&(i.ns=e.namespace);let r=[];return dr(i,(o,s)=>{r.push(o+"="+s)}),n+r.join("&")}var WS=class{constructor(){this.counters_={}}incrementCounter(t,i=1){Br(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=i}get(){return wk(this.counters_)}};var kS={},MS={};function RA(e){let t=e.toString();return kS[t]||(kS[t]=new WS),kS[t]}function Rtt(e,t){let i=e.toString();return MS[i]||(MS[i]=t()),MS[i]}var qS=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,i){this.closeAfterResponse=t,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,i){for(this.pendingResponses[t]=i;this.pendingResponses[this.currentResponseNum];){let n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<n.length;++r)n[r]&&pm(()=>{this.onMessage_(n[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var cB="start",ktt="close",Mtt="pLPCommand",Ptt="pRTLPCB",JB="id",tj="pw",ej="ser",Ott="cb",Ntt="seg",Ftt="ts",Ltt="d",Vtt="dframe",nj=1870,ij=30,Btt=nj-ij,jtt=25e3,Utt=3e4,GS=class e{constructor(t,i,n,r,o,s,l){this.connId=t,this.repoInfo=i,this.applicationId=n,this.appCheckToken=r,this.authToken=o,this.transportSessionId=s,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=mm(t),this.stats_=RA(i),this.urlFn=d=>(this.appCheckToken&&(d[HS]=this.appCheckToken),ZB(i,XB,d))}open(t,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new qS(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Utt)),wtt(()=>{if(this.isClosed_)return;this.scriptTagHolder=new KS((...o)=>{let[s,l,d,u,f]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===cB)this.id=l,this.password=d;else if(s===ktt)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,l]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,l)},()=>{this.onClosed_()},this.urlFn);let n={};n[cB]="t",n[ej]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[Ott]=this.scriptTagHolder.uniqueCallbackIdentifier),n[$B]=Bb,this.transportSessionId&&(n[HB]=this.transportSessionId),this.lastSessionId&&(n[KB]=this.lastSessionId),this.applicationId&&(n[YB]=this.applicationId),this.appCheckToken&&(n[HS]=this.appCheckToken),typeof location<"u"&&location.hostname&&GB.test(location.hostname)&&(n[WB]=qB);let r=this.urlFn(n);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return Vr()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Itt()&&!Ett()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let i=Dn(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let n=yk(i),r=UB(n,Btt);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(t,i){if(Vr())return;this.myDisconnFrame=document.createElement("iframe");let n={};n[Vtt]="t",n[JB]=t,n[tj]=i,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let i=Dn(t).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}},KS=class e{constructor(t,i,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Vr())this.commandCB=t,this.onMessageCB=i;else{this.uniqueCallbackIdentifier=vtt(),window[Mtt+this.uniqueCallbackIdentifier]=t,window[Ptt+this.uniqueCallbackIdentifier]=i,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(l){Zn("frame writing exception"),l.stack&&Zn(l.stack),Zn(l)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Zn("No IE domain setting required")}catch{let n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,i){for(this.myID=t,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[JB]=this.myID,t[tj]=this.myPW,t[ej]=this.currentSerial;let i=this.urlFn(t),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ij+n.length<=nj;){let s=this.pendingSegs.shift();n=n+"&"+Ntt+r+"="+s.seg+"&"+Ftt+r+"="+s.ts+"&"+Ltt+r+"="+s.d,r++}return i=i+n,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(t,i,n){this.pendingSegs.push({seg:t,ts:i,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(t,i){this.outstandingRequests.add(i);let n=()=>{this.outstandingRequests.delete(i),this.newRequest_()},r=setTimeout(n,Math.floor(jtt)),o=()=>{clearTimeout(r),n()};this.addTag(t,o)}addTag(t,i){Vr()?this.doNodeLongPoll(t,i):setTimeout(()=>{try{if(!this.sendNewPolls)return;let n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=t,n.onload=n.onreadystatechange=function(){let r=n.readyState;(!r||r==="loaded"||r==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),i())},n.onerror=()=>{Zn("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}};var ztt=16384,$tt=45e3,Ub=null;typeof MozWebSocket<"u"?Ub=MozWebSocket:typeof WebSocket<"u"&&(Ub=WebSocket);var nm=(()=>{class e{constructor(i,n,r,o,s,l,d){this.connId=i,this.applicationId=r,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=mm(this.connId),this.stats_=RA(n),this.connURL=e.connectionURL_(n,l,d,o,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(i,n,r,o,s){let l={};return l[$B]=Bb,!Vr()&&typeof location<"u"&&location.hostname&&GB.test(location.hostname)&&(l[WB]=qB),n&&(l[HB]=n),r&&(l[KB]=r),o&&(l[HS]=o),s&&(l[YB]=s),ZB(i,QB,l)}open(i,n){this.onDisconnect=n,this.onMessage=i,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fl.set("previous_websocket_failure",!0);try{let r;if(Vr()){let o=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${Bb}/${AA}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,l=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;l&&(r.proxy={origin:l})}this.mySock=new Ub(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let o=r.message||r.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let i=!1;if(typeof navigator<"u"&&navigator.userAgent){let n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(i=!0)}return!i&&Ub!==null&&!e.forceDisallow_}static previouslyFailed(){return fl.isInMemoryStorage||fl.get("previous_websocket_failure")===!0}markConnectionHealthy(){fl.remove("previous_websocket_failure")}appendFrame_(i){if(this.frames.push(i),this.frames.length===this.totalFrames){let n=this.frames.join("");this.frames=null;let r=Fp(n);this.onMessage(r)}}handleNewFrameCount_(i){this.totalFrames=i,this.frames=[]}extractFrameCount_(i){if(it(this.frames===null,"We already have a frame buffer"),i.length<=6){let n=Number(i);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),i}handleIncomingFrame(i){if(this.mySock===null)return;let n=i.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{let r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(i){this.resetKeepAlive();let n=Dn(i);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=UB(n,ztt);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor($tt))}sendString_(i){try{this.mySock.send(i)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),Htt=(()=>{class e{constructor(i){this.initTransports_(i)}static get ALL_TRANSPORTS(){return[GS,nm]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(i){let n=nm&&nm.isAvailable(),r=n&&!nm.previouslyFailed();if(i.webSocketOnly&&(n||Li("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[nm];else{let o=this.transports_=[];for(let s of e.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),Wtt=6e4,qtt=5e3,Gtt=10*1024,Ktt=100*1024,PS="t",dB="d",Ytt="s",uB="r",Qtt="e",hB="o",fB="a",mB="n",pB="p",Xtt="h",YS=class{constructor(t,i,n,r,o,s,l,d,u,f){this.id=t,this.repoInfo_=i,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=s,this.onReady_=l,this.onDisconnect_=d,this.onKill_=u,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=mm("c:"+this.id+":"),this.transportManager_=new Htt(i),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let i=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,n)},Math.floor(0));let r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=sm(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Ktt?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Gtt?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return i=>{t===this.conn_?this.onConnectionLost_(i):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return i=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(i):t===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(t){let i={t:"d",d:t};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(PS in t){let i=t[PS];i===fB?this.upgradeIfSecondaryHealthy_():i===uB?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===hB&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let i=em("t",t),n=em("d",t);if(i==="c")this.onSecondaryControl_(n);else if(i==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:pB,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:fB,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:mB,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let i=em("t",t),n=em("d",t);i==="c"?this.onControl_(n):i==="d"&&this.onDataMessage_(n)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let i=em(PS,t);if(dB in t){let n=t[dB];if(i===Xtt){let r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(i===mB){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===Ytt?this.onConnectionShutdown_(n):i===uB?this.onReset_(n):i===Qtt?US("Server Error: "+n):i===hB?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):US("Unknown control packet command: "+i)}}onHandshake_(t){let i=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),Bb!==n&&Li("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let i=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,n),sm(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Wtt))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,i){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):sm(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(qtt))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:pB,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var zb=class{put(t,i,n,r){}merge(t,i,n,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,i,n){}onDisconnectMerge(t,i,n){}onDisconnectCancel(t,i){}reportStats(t){}};var $b=class{constructor(t){this.allowedEvents_=t,this.listeners_={},it(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...i){if(Array.isArray(this.listeners_[t])){let n=[...this.listeners_[t]];for(let r=0;r<n.length;r++)n[r].callback.apply(n[r].context,i)}}on(t,i,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:i,context:n});let r=this.getInitialEvent(t);r&&i.apply(n,r)}off(t,i,n){this.validateEventType_(t);let r=this.listeners_[t]||[];for(let o=0;o<r.length;o++)if(r[o].callback===i&&(!n||n===r[o].context)){r.splice(o,1);return}}validateEventType_(t){it(this.allowedEvents_.find(i=>i===t),"Unknown event: "+t)}};var Hb=class e extends $b{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!U0()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new e}getInitialEvent(t){return it(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var gB=32,_B=768,Ae=class{constructor(t,i){if(i===void 0){this.pieces_=t.split("/");let n=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=i}toString(){let t="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(t+="/"+this.pieces_[i]);return t||"/"}};function Ee(){return new Ae("")}function ce(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Zs(e){return e.pieces_.length-e.pieceNum_}function je(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Ae(e.pieces_,t)}function rj(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Ztt(e){let t="";for(let i=e.pieceNum_;i<e.pieces_.length;i++)e.pieces_[i]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[i])));return t||"/"}function oj(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function sj(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let i=e.pieceNum_;i<e.pieces_.length-1;i++)t.push(e.pieces_[i]);return new Ae(t,0)}function Fn(e,t){let i=[];for(let n=e.pieceNum_;n<e.pieces_.length;n++)i.push(e.pieces_[n]);if(t instanceof Ae)for(let n=t.pieceNum_;n<t.pieces_.length;n++)i.push(t.pieces_[n]);else{let n=t.split("/");for(let r=0;r<n.length;r++)n[r].length>0&&i.push(n[r])}return new Ae(i,0)}function re(e){return e.pieceNum_>=e.pieces_.length}function lr(e,t){let i=ce(e),n=ce(t);if(i===null)return t;if(i===n)return lr(je(e),je(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function aj(e,t){if(Zs(e)!==Zs(t))return!1;for(let i=e.pieceNum_,n=t.pieceNum_;i<=e.pieces_.length;i++,n++)if(e.pieces_[i]!==t.pieces_[n])return!1;return!0}function Sr(e,t){let i=e.pieceNum_,n=t.pieceNum_;if(Zs(e)>Zs(t))return!1;for(;i<e.pieces_.length;){if(e.pieces_[i]!==t.pieces_[n])return!1;++i,++n}return!0}var QS=class{constructor(t,i){this.errorPrefix_=i,this.parts_=oj(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Vu(this.parts_[n]);lj(this)}};function Jtt(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Vu(t),lj(e)}function tet(e){let t=e.parts_.pop();e.byteLength_-=Vu(t),e.parts_.length>0&&(e.byteLength_-=1)}function lj(e){if(e.byteLength_>_B)throw new Error(e.errorPrefix_+"has a key path longer than "+_B+" bytes ("+e.byteLength_+").");if(e.parts_.length>gB)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+gB+") or object contains a cycle "+hl(e))}function hl(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var XS=class e extends $b{constructor(){super(["visible"]);let t,i;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{let n=!document[t];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}static getInstance(){return new e}getInitialEvent(t){return it(t==="visible","Unknown event type: "+t),[this.visible_]}};var im=1e3,eet=60*5*1e3,vB=30*1e3,net=1.3,iet=3e4,ret="server_kill",bB=3,kA=(()=>{class e extends zb{constructor(i,n,r,o,s,l,d,u){if(super(),this.repoInfo_=i,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=l,this.appCheckTokenProvider_=d,this.authOverride_=u,this.id=e.nextPersistentConnectionId_++,this.log_=mm("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=im,this.maxReconnectDelay_=eet,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!Vr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");XS.getInstance().on("visible",this.onVisible_,this),i.host.indexOf("fblocal")===-1&&Hb.getInstance().on("online",this.onOnline_,this)}sendRequest(i,n,r){let o=++this.requestNumber_,s={r:o,a:i,b:n};this.log_(Dn(s)),it(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[o]=r)}get(i){this.initConnection_();let n=new Ql,o={action:"g",request:{p:i._path.toString(),q:i._queryObject},onComplete:l=>{let d=l.d;l.s==="ok"?n.resolve(d):n.reject(d)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(i,n,r,o){this.initConnection_();let s=i._queryIdentifier,l=i._path.toString();this.log_("Listen called for "+l+" "+s),this.listens.has(l)||this.listens.set(l,new Map),it(i._queryParams.isDefault()||!i._queryParams.loadsAllData(),"listen() called for non-default but complete query"),it(!this.listens.get(l).has(s),"listen() called twice for same path/queryId.");let d={onComplete:o,hashFn:n,query:i,tag:r};this.listens.get(l).set(s,d),this.connected_&&this.sendListen_(d)}sendGet_(i){let n=this.outstandingGets_[i];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[i],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(i){let n=i.query,r=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+r+" for "+o);let s={p:r},l="q";i.tag&&(s.q=n._queryObject,s.t=i.tag),s.h=i.hashFn(),this.sendRequest(l,s,d=>{let u=d.d,f=d.s;e.warnOnListenWarnings_(u,n),(this.listens.get(r)&&this.listens.get(r).get(o))===i&&(this.log_("listen response",d),f!=="ok"&&this.removeListen_(r,o),i.onComplete&&i.onComplete(f,u))})}static warnOnListenWarnings_(i,n){if(i&&typeof i=="object"&&Br(i,"w")){let r=ba(i,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Li(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(i){this.authToken_=i,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(i)}reduceReconnectDelayIfAdminCredential_(i){(i&&i.length===40||Tk(i))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=vB)}refreshAppCheckToken(i){this.appCheckToken_=i,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let i=this.authToken_,n=Ck(i)?"auth":"gauth",r={cred:i};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,o=>{let s=o.s,l=o.d||"error";this.authToken_===i&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},i=>{let n=i.s,r=i.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(i,n){let r=i._path.toString(),o=i._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),it(i._queryParams.isDefault()||!i._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,i._queryObject,n)}sendUnlisten_(i,n,r,o){this.log_("Unlisten on "+i+" for "+n);let s={p:i},l="n";o&&(s.q=r,s.t=o),this.sendRequest(l,s)}onDisconnectPut(i,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",i,n,r):this.onDisconnectRequestQueue_.push({pathString:i,action:"o",data:n,onComplete:r})}onDisconnectMerge(i,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",i,n,r):this.onDisconnectRequestQueue_.push({pathString:i,action:"om",data:n,onComplete:r})}onDisconnectCancel(i,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",i,null,n):this.onDisconnectRequestQueue_.push({pathString:i,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(i,n,r,o){let s={p:n,d:r};this.log_("onDisconnect "+i,s),this.sendRequest(i,s,l=>{o&&setTimeout(()=>{o(l.s,l.d)},Math.floor(0))})}put(i,n,r,o){this.putInternal("p",i,n,r,o)}merge(i,n,r,o){this.putInternal("m",i,n,r,o)}putInternal(i,n,r,o,s){this.initConnection_();let l={p:n,d:r};s!==void 0&&(l.h=s),this.outstandingPuts_.push({action:i,request:l,onComplete:o}),this.outstandingPutCount_++;let d=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(d):this.log_("Buffering put: "+n)}sendPut_(i){let n=this.outstandingPuts_[i].action,r=this.outstandingPuts_[i].request,o=this.outstandingPuts_[i].onComplete;this.outstandingPuts_[i].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[i],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(i){if(this.connected_){let n={c:i};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){let s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(i){if("r"in i){this.log_("from server: "+Dn(i));let n=i.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(i.b))}else{if("error"in i)throw"A server-side error has occurred: "+i.error;"a"in i&&this.onDataPush_(i.a,i.b)}}onDataPush_(i,n){this.log_("handleServerMessage",i,n),i==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):i==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):i==="c"?this.onListenRevoked_(n.p,n.q):i==="ac"?this.onAuthRevoked_(n.s,n.d):i==="apc"?this.onAppCheckRevoked_(n.s,n.d):i==="sd"?this.onSecurityDebugPacket_(n):US("Unrecognized action received from server: "+Dn(i)+`
Are you using the latest client?`)}onReady_(i,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(i),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(i){it(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(i))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(i){i&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=im,this.realtime_||this.scheduleConnect_(0)),this.visible_=i}onOnline_(i){i?(this.log_("Browser went online."),this.reconnectDelay_=im,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>iet&&(this.reconnectDelay_=im),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let i=new Date().getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-i);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*net)}this.onConnectStatus_(!1)}establishConnection_(){return N(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let i=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,l=!1,d=null,u=function(){d?d.close():(l=!0,r())},f=function(_){it(d,"sendRequest call when we're not connected not allowed."),d.sendRequest(_)};this.realtime_={close:u,sendRequest:f};let p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[_,y]=yield Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);l?Zn("getToken() completed but was canceled"):(Zn("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=y&&y.token,d=new YS(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,i,n,r,S=>{Li(S+" ("+this.repoInfo_.toString()+")"),this.interrupt(ret)},s))}catch(_){this.log_("Failed to get token: "+_),l||(this.repoInfo_.nodeAdmin&&Li(_),u())}}})}interrupt(i){Zn("Interrupting connection for reason: "+i),this.interruptReasons_[i]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(i){Zn("Resuming connection for reason: "+i),delete this.interruptReasons_[i],$0(this.interruptReasons_)&&(this.reconnectDelay_=im,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(i){let n=i-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let i=0;i<this.outstandingPuts_.length;i++){let n=this.outstandingPuts_[i];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[i],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(i,n){let r;n?r=n.map(s=>DA(s)).join("$"):r="default";let o=this.removeListen_(i,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(i,n){let r=new Ae(i).toString(),o;if(this.listens.has(r)){let s=this.listens.get(r);o=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(i,n){Zn("Auth token revoked: "+i+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(i==="invalid_token"||i==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=bB&&(this.reconnectDelay_=vB,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(i,n){Zn("App check token revoked: "+i+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(i==="invalid_token"||i==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=bB&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(i){this.securityDebugCallback_?this.securityDebugCallback_(i):"msg"in i&&console.log("FIREBASE: "+i.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let i of this.listens.values())for(let n of i.values())this.sendListen_(n);for(let i=0;i<this.outstandingPuts_.length;i++)this.outstandingPuts_[i]&&this.sendPut_(i);for(;this.onDisconnectRequestQueue_.length;){let i=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(i.action,i.pathString,i.data,i.onComplete)}for(let i=0;i<this.outstandingGets_.length;i++)this.outstandingGets_[i]&&this.sendGet_(i)}sendConnectStats_(){let i={},n="js";Vr()&&(this.repoInfo_.nodeAdmin?n="admin_node":n="node"),i["sdk."+n+"."+AA.replace(/\./g,"-")]=1,U0()?i["framework.cordova"]=1:xk()&&(i["framework.reactnative"]=1),this.reportStats(i)}shouldReconnect_(){let i=Hb.getInstance().currentlyOnline();return $0(this.interruptReasons_)&&i}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),de=class e{constructor(t,i){this.name=t,this.node=i}static Wrap(t,i){return new e(t,i)}};var Kd=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,i){let n=new de(Gd,t),r=new de(Gd,i);return this.compare(n,r)!==0}minPost(){return de.MIN}};var Vb,Wb=class extends Kd{static get __EMPTY_NODE(){return Vb}static set __EMPTY_NODE(t){Vb=t}compare(t,i){return tu(t.name,i.name)}isDefinedOn(t){throw Yl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,i){return!1}minPost(){return de.MIN}maxPost(){return new de(pl,Vb)}makePost(t,i){return it(typeof t=="string","KeyIndex indexValue must always be a string."),new de(t,Vb)}toString(){return".key"}},qd=new Wb;var $d=class{constructor(t,i,n,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(t=t,s=i?n(t.key,i):1,r&&(s*=-1),s<0)this.isReverse_?t=t.left:t=t.right;else if(s===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(t.key,t.value):i={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Tr=(()=>{class e{constructor(i,n,r,o,s){this.key=i,this.value=n,this.color=r??e.RED,this.left=o??cr.EMPTY_NODE,this.right=s??cr.EMPTY_NODE}copy(i,n,r,o,s){return new e(i??this.key,n??this.value,r??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(i){return this.left.inorderTraversal(i)||!!i(this.key,this.value)||this.right.inorderTraversal(i)}reverseTraversal(i){return this.right.reverseTraversal(i)||i(this.key,this.value)||this.left.reverseTraversal(i)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(i,n,r){let o=this,s=r(i,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(i,n,r),null):s===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(i,n,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return cr.EMPTY_NODE;let i=this;return!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.removeMin_(),null),i.fixUp_()}remove(i,n){let r,o;if(r=this,n(i,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(i,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(i,r.key)===0){if(r.right.isEmpty())return cr.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(i,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let i=this;return i.right.isRed_()&&!i.left.isRed_()&&(i=i.rotateLeft_()),i.left.isRed_()&&i.left.left.isRed_()&&(i=i.rotateRight_()),i.left.isRed_()&&i.right.isRed_()&&(i=i.colorFlip_()),i}moveRedLeft_(){let i=this.colorFlip_();return i.right.left.isRed_()&&(i=i.copy(null,null,null,null,i.right.rotateRight_()),i=i.rotateLeft_(),i=i.colorFlip_()),i}moveRedRight_(){let i=this.colorFlip_();return i.left.left.isRed_()&&(i=i.rotateRight_(),i=i.colorFlip_()),i}rotateLeft_(){let i=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,i,null)}rotateRight_(){let i=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,i)}colorFlip_(){let i=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,i,n)}checkMaxDepth_(){let i=this.check_();return Math.pow(2,i)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let i=this.left.check_();if(i!==this.right.check_())throw new Error("Black depths differ");return i+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),ZS=class{copy(t,i,n,r,o){return this}insert(t,i,n){return new Tr(t,i,null)}remove(t,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},cr=class e{constructor(t,i=e.EMPTY_NODE){this.comparator_=t,this.root_=i}insert(t,i){return new e(this.comparator_,this.root_.insert(t,i,this.comparator_).copy(null,null,Tr.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Tr.BLACK,null,null))}get(t){let i,n=this.root_;for(;!n.isEmpty();){if(i=this.comparator_(t,n.key),i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}getPredecessorKey(t){let i,n=this.root_,r=null;for(;!n.isEmpty();)if(i=this.comparator_(t,n.key),i===0){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else i<0?n=n.left:i>0&&(r=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new $d(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,i){return new $d(this.root_,t,this.comparator_,!1,i)}getReverseIteratorFrom(t,i){return new $d(this.root_,t,this.comparator_,!0,i)}getReverseIterator(t){return new $d(this.root_,null,this.comparator_,!0,t)}};cr.EMPTY_NODE=new ZS;function oet(e,t){return tu(e.name,t.name)}function MA(e,t){return tu(e,t)}var JS;function set(e){JS=e}var cj=function(e){return typeof e=="number"?"number:"+zB(e):"string:"+e},dj=function(e){if(e.isLeafNode()){let t=e.val();it(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Br(t,".sv"),"Priority must be a string or number.")}else it(e===JS||e.isEmpty(),"priority of unexpected type.");it(e===JS||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var yB,Yd=(()=>{class e{constructor(i,n=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=i,this.priorityNode_=n,this.lazyHash_=null,it(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),dj(this.priorityNode_)}static set __childrenNodeConstructor(i){yB=i}static get __childrenNodeConstructor(){return yB}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(i){return new e(this.value_,i)}getImmediateChild(i){return i===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(i){return re(i)?this:ce(i)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(i,n){return null}updateImmediateChild(i,n){return i===".priority"?this.updatePriority(n):n.isEmpty()&&i!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(i,n).updatePriority(this.priorityNode_)}updateChild(i,n){let r=ce(i);return r===null?n:n.isEmpty()&&r!==".priority"?this:(it(r!==".priority"||Zs(i)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(je(i),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(i,n){return!1}val(i){return i&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let i="";this.priorityNode_.isEmpty()||(i+="priority:"+cj(this.priorityNode_.val())+":");let n=typeof this.value_;i+=n+":",n==="number"?i+=zB(this.value_):i+=this.value_,this.lazyHash_=BB(i)}return this.lazyHash_}getValue(){return this.value_}compareTo(i){return i===e.__childrenNodeConstructor.EMPTY_NODE?1:i instanceof e.__childrenNodeConstructor?-1:(it(i.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(i))}compareToLeafNode_(i){let n=typeof i.value_,r=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(n),s=e.VALUE_TYPE_ORDER.indexOf(r);return it(o>=0,"Unknown leaf type: "+n),it(s>=0,"Unknown leaf type: "+r),o===s?r==="object"?0:this.value_<i.value_?-1:this.value_===i.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(i){if(i===this)return!0;if(i.isLeafNode()){let n=i;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),uj,hj;function aet(e){uj=e}function cet(e){hj=e}var tA=class extends Kd{compare(t,i){let n=t.node.getPriority(),r=i.node.getPriority(),o=n.compareTo(r);return o===0?tu(t.name,i.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,i){return!t.getPriority().equals(i.getPriority())}minPost(){return de.MIN}maxPost(){return new de(pl,new Yd("[PRIORITY-POST]",hj))}makePost(t,i){let n=uj(t);return new de(i,new Yd("[PRIORITY-POST]",n))}toString(){return".priority"}},ti=new tA;var det=Math.log(2),eA=class{constructor(t){let i=o=>parseInt(Math.log(o)/det,10),n=o=>parseInt(Array(o+1).join("1"),2);this.count=i(t+1),this.current_=this.count-1;let r=n(this.count);this.bits_=t+1&r}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},qb=function(e,t,i,n){e.sort(t);let r=function(d,u){let f=u-d,p,_;if(f===0)return null;if(f===1)return p=e[d],_=i?i(p):p,new Tr(_,p.node,Tr.BLACK,null,null);{let y=parseInt(f/2,10)+d,S=r(d,y),A=r(y+1,u);return p=e[y],_=i?i(p):p,new Tr(_,p.node,Tr.BLACK,S,A)}},o=function(d){let u=null,f=null,p=e.length,_=function(S,A){let M=p-S,K=p;p-=S;let ut=r(M+1,K),Y=e[M],Rt=i?i(Y):Y;y(new Tr(Rt,Y.node,A,null,ut))},y=function(S){u?(u.left=S,u=S):(f=S,u=S)};for(let S=0;S<d.count;++S){let A=d.nextBitIsOne(),M=Math.pow(2,d.count-(S+1));A?_(M,Tr.BLACK):(_(M,Tr.BLACK),_(M,Tr.RED))}return f},s=new eA(e.length),l=o(s);return new cr(n||t,l)};var OS,zd={},Qd=class e{constructor(t,i){this.indexes_=t,this.indexSet_=i}static get Default(){return it(zd&&ti,"ChildrenNode.ts has not been loaded"),OS=OS||new e({".priority":zd},{".priority":ti}),OS}get(t){let i=ba(this.indexes_,t);if(!i)throw new Error("No index defined for "+t);return i instanceof cr?i:null}hasIndex(t){return Br(this.indexSet_,t.toString())}addIndex(t,i){it(t!==qd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let n=[],r=!1,o=i.getIterator(de.Wrap),s=o.getNext();for(;s;)r=r||t.isDefinedOn(s.node),n.push(s),s=o.getNext();let l;r?l=qb(n,t.getCompare()):l=zd;let d=t.toString(),u=Object.assign({},this.indexSet_);u[d]=t;let f=Object.assign({},this.indexes_);return f[d]=l,new e(f,u)}addToIndexes(t,i){let n=Lu(this.indexes_,(r,o)=>{let s=ba(this.indexSet_,o);if(it(s,"Missing index implementation for "+o),r===zd)if(s.isDefinedOn(t.node)){let l=[],d=i.getIterator(de.Wrap),u=d.getNext();for(;u;)u.name!==t.name&&l.push(u),u=d.getNext();return l.push(t),qb(l,s.getCompare())}else return zd;else{let l=i.get(t.name),d=r;return l&&(d=d.remove(new de(t.name,l))),d.insert(t,t.node)}});return new e(n,this.indexSet_)}removeFromIndexes(t,i){let n=Lu(this.indexes_,r=>{if(r===zd)return r;{let o=i.get(t.name);return o?r.remove(new de(t.name,o)):r}});return new e(n,this.indexSet_)}};var rm,Xe=(()=>{class e{constructor(i,n,r){this.children_=i,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&dj(this.priorityNode_),this.children_.isEmpty()&&it(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return rm||(rm=new e(new cr(MA),null,Qd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||rm}updatePriority(i){return this.children_.isEmpty()?this:new e(this.children_,i,this.indexMap_)}getImmediateChild(i){if(i===".priority")return this.getPriority();{let n=this.children_.get(i);return n===null?rm:n}}getChild(i){let n=ce(i);return n===null?this:this.getImmediateChild(n).getChild(je(i))}hasChild(i){return this.children_.get(i)!==null}updateImmediateChild(i,n){if(it(n,"We should always be passing snapshot nodes"),i===".priority")return this.updatePriority(n);{let r=new de(i,n),o,s;n.isEmpty()?(o=this.children_.remove(i),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(i,n),s=this.indexMap_.addToIndexes(r,this.children_));let l=o.isEmpty()?rm:this.priorityNode_;return new e(o,l,s)}}updateChild(i,n){let r=ce(i);if(r===null)return n;{it(ce(i)!==".priority"||Zs(i)===1,".priority must be the last token in a path");let o=this.getImmediateChild(r).updateChild(je(i),n);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(i){if(this.isEmpty())return null;let n={},r=0,o=0,s=!0;if(this.forEachChild(ti,(l,d)=>{n[l]=d.val(i),r++,s&&e.INTEGER_REGEXP_.test(l)?o=Math.max(o,Number(l)):s=!1}),!i&&s&&o<2*r){let l=[];for(let d in n)l[d]=n[d];return l}else return i&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let i="";this.getPriority().isEmpty()||(i+="priority:"+cj(this.getPriority().val())+":"),this.forEachChild(ti,(n,r)=>{let o=r.hash();o!==""&&(i+=":"+n+":"+o)}),this.lazyHash_=i===""?"":BB(i)}return this.lazyHash_}getPredecessorChildName(i,n,r){let o=this.resolveIndex_(r);if(o){let s=o.getPredecessorKey(new de(i,n));return s?s.name:null}else return this.children_.getPredecessorKey(i)}getFirstChildName(i){let n=this.resolveIndex_(i);if(n){let r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(i){let n=this.getFirstChildName(i);return n?new de(n,this.children_.get(n)):null}getLastChildName(i){let n=this.resolveIndex_(i);if(n){let r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(i){let n=this.getLastChildName(i);return n?new de(n,this.children_.get(n)):null}forEachChild(i,n){let r=this.resolveIndex_(i);return r?r.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(i){return this.getIteratorFrom(i.minPost(),i)}getIteratorFrom(i,n){let r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(i,o=>o);{let o=this.children_.getIteratorFrom(i.name,de.Wrap),s=o.peek();for(;s!=null&&n.compare(s,i)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(i){return this.getReverseIteratorFrom(i.maxPost(),i)}getReverseIteratorFrom(i,n){let r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(i,o=>o);{let o=this.children_.getReverseIteratorFrom(i.name,de.Wrap),s=o.peek();for(;s!=null&&n.compare(s,i)>0;)o.getNext(),s=o.peek();return o}}compareTo(i){return this.isEmpty()?i.isEmpty()?0:-1:i.isLeafNode()||i.isEmpty()?1:i===gm?-1:0}withIndex(i){if(i===qd||this.indexMap_.hasIndex(i))return this;{let n=this.indexMap_.addIndex(i,this.children_);return new e(this.children_,this.priorityNode_,n)}}isIndexed(i){return i===qd||this.indexMap_.hasIndex(i)}equals(i){if(i===this)return!0;if(i.isLeafNode())return!1;{let n=i;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){let r=this.getIterator(ti),o=n.getIterator(ti),s=r.getNext(),l=o.getNext();for(;s&&l;){if(s.name!==l.name||!s.node.equals(l.node))return!1;s=r.getNext(),l=o.getNext()}return s===null&&l===null}else return!1;else return!1}}resolveIndex_(i){return i===qd?null:this.indexMap_.get(i.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),nA=class extends Xe{constructor(){super(new cr(MA),Xe.EMPTY_NODE,Qd.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Xe.EMPTY_NODE}isEmpty(){return!1}},gm=new nA;Object.defineProperties(de,{MIN:{value:new de(Gd,Xe.EMPTY_NODE)},MAX:{value:new de(pl,gm)}});Wb.__EMPTY_NODE=Xe.EMPTY_NODE;Yd.__childrenNodeConstructor=Xe;set(gm);cet(gm);var uet=!0;function Jn(e,t=null){if(e===null)return Xe.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),it(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let i=e;return new Yd(i,Jn(t))}if(!(e instanceof Array)&&uet){let i=[],n=!1;if(dr(e,(s,l)=>{if(s.substring(0,1)!=="."){let d=Jn(l);d.isEmpty()||(n=n||!d.getPriority().isEmpty(),i.push(new de(s,d)))}}),i.length===0)return Xe.EMPTY_NODE;let o=qb(i,oet,s=>s.name,MA);if(n){let s=qb(i,ti.getCompare());return new Xe(o,Jn(t),new Qd({".priority":s},{".priority":ti}))}else return new Xe(o,Jn(t),Qd.Default)}else{let i=Xe.EMPTY_NODE;return dr(e,(n,r)=>{if(Br(e,n)&&n.substring(0,1)!=="."){let o=Jn(r);(o.isLeafNode()||!o.isEmpty())&&(i=i.updateImmediateChild(n,o))}}),i.updatePriority(Jn(t))}}aet(Jn);var iA=class extends Kd{constructor(t){super(),this.indexPath_=t,it(!re(t)&&ce(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,i){let n=this.extractChild(t.node),r=this.extractChild(i.node),o=n.compareTo(r);return o===0?tu(t.name,i.name):o}makePost(t,i){let n=Jn(t),r=Xe.EMPTY_NODE.updateChild(this.indexPath_,n);return new de(i,r)}maxPost(){let t=Xe.EMPTY_NODE.updateChild(this.indexPath_,gm);return new de(pl,t)}toString(){return oj(this.indexPath_,0).join("/")}};var rA=class extends Kd{compare(t,i){let n=t.node.compareTo(i.node);return n===0?tu(t.name,i.name):n}isDefinedOn(t){return!0}indexedValueChanged(t,i){return!t.equals(i)}minPost(){return de.MIN}maxPost(){return de.MAX}makePost(t,i){let n=Jn(t);return new de(i,n)}toString(){return".value"}},het=new rA;function fet(e){return{type:"value",snapshotNode:e}}function met(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function pet(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function wB(e,t,i){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:i}}function get(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var oA=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ti}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return it(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return it(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Gd}hasEnd(){return this.endSet_}getIndexEndValue(){return it(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return it(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:pl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return it(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ti}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function xB(e){let t={};if(e.isDefault())return t;let i;if(e.index_===ti?i="$priority":e.index_===het?i="$value":e.index_===qd?i="$key":(it(e.index_ instanceof iA,"Unrecognized index type!"),i=e.index_.toString()),t.orderBy=Dn(i),e.startSet_){let n=e.startAfterSet_?"startAfter":"startAt";t[n]=Dn(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+Dn(e.indexStartName_))}if(e.endSet_){let n=e.endBeforeSet_?"endBefore":"endAt";t[n]=Dn(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+Dn(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function IB(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let i=e.viewFrom_;i===""&&(e.isViewFromLeft()?i="l":i="r"),t.vf=i}return e.index_!==ti&&(t.i=e.index_.toString()),t}var sA=class e extends zb{constructor(t,i,n,r){super(),this.repoInfo_=t,this.onDataUpdate_=i,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=mm("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,i){return i!==void 0?"tag$"+i:(it(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,i,n,r){let o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);let s=e.getListenId_(t,n),l={};this.listens_[s]=l;let d=xB(t._queryParams);this.restRequest_(o+".json",d,(u,f)=>{let p=f;if(u===404&&(p=null,u=null),u===null&&this.onDataUpdate_(o,p,!1,n),ba(this.listens_,s)===l){let _;u?u===401?_="permission_denied":_="rest_error:"+u:_="ok",r(_,null)}})}unlisten(t,i){let n=e.getListenId_(t,i);delete this.listens_[n]}get(t){let i=xB(t._queryParams),n=t._path.toString(),r=new Ql;return this.restRequest_(n+".json",i,(o,s)=>{let l=s;o===404&&(l=null,o=null),o===null?(this.onDataUpdate_(n,l,!1,null),r.resolve(l)):r.reject(new Error(l))}),r.promise}refreshAuthToken(t){}restRequest_(t,i={},n){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(i.auth=r.accessToken),o&&o.token&&(i.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Sk(i);this.log_("Sending REST request for "+s);let l=new XMLHttpRequest;l.onreadystatechange=()=>{if(n&&l.readyState===4){this.log_("REST Response for "+s+" received. status:",l.status,"response:",l.responseText);let d=null;if(l.status>=200&&l.status<300){try{d=Fp(l.responseText)}catch{Li("Failed to parse JSON response for "+s+": "+l.responseText)}n(null,d)}else l.status!==401&&l.status!==404&&Li("Got unsuccessful REST response for "+s+" Status: "+l.status),n(l.status);n=null}},l.open("GET",s,!0),l.send()})}};var aA=class{constructor(){this.rootNode_=Xe.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,i){this.rootNode_=this.rootNode_.updateChild(t,i)}};function Gb(){return{value:null,children:new Map}}function fj(e,t,i){if(re(t))e.value=i,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,i);else{let n=ce(t);e.children.has(n)||e.children.set(n,Gb());let r=e.children.get(n);t=je(t),fj(r,t,i)}}function lA(e,t,i){e.value!==null?i(t,e.value):_et(e,(n,r)=>{let o=new Ae(t.toString()+"/"+n);lA(r,o,i)})}function _et(e,t){e.children.forEach((i,n)=>{t(n,i)})}var cA=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),i=Object.assign({},t);return this.last_&&dr(this.last_,(n,r)=>{i[n]=i[n]-r}),this.last_=t,i}};var EB=10*1e3,vet=30*1e3,bet=5*60*1e3,dA=class{constructor(t,i){this.server_=i,this.statsToReport_={},this.statsListener_=new cA(t);let n=EB+(vet-EB)*Math.random();sm(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){let t=this.statsListener_.get(),i={},n=!1;dr(t,(r,o)=>{o>0&&Br(this.statsToReport_,r)&&(i[r]=o,n=!0)}),n&&this.server_.reportStats(i),sm(this.reportStats_.bind(this),Math.floor(Math.random()*2*bet))}};var qo=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(qo||{});function mj(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function pj(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function gj(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var uA=class e{constructor(t,i,n){this.path=t,this.affectedTree=i,this.revert=n,this.type=qo.ACK_USER_WRITE,this.source=mj()}operationForChild(t){if(re(this.path)){if(this.affectedTree.value!=null)return it(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let i=this.affectedTree.subtree(new Ae(t));return new e(Ee(),i,this.revert)}}else return it(ce(this.path)===t,"operationForChild called for unrelated child."),new e(je(this.path),this.affectedTree,this.revert)}};var Xd=class e{constructor(t,i,n){this.source=t,this.path=i,this.snap=n,this.type=qo.OVERWRITE}operationForChild(t){return re(this.path)?new e(this.source,Ee(),this.snap.getImmediateChild(t)):new e(this.source,je(this.path),this.snap)}};var Kb=class e{constructor(t,i,n){this.source=t,this.path=i,this.children=n,this.type=qo.MERGE}operationForChild(t){if(re(this.path)){let i=this.children.subtree(new Ae(t));return i.isEmpty()?null:i.value?new Xd(this.source,Ee(),i.value):new e(this.source,Ee(),i)}else return it(ce(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,je(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var dm=class{constructor(t,i,n){this.node_=t,this.fullyInitialized_=i,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(re(t))return this.isFullyInitialized()&&!this.filtered_;let i=ce(t);return this.isCompleteForChild(i)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};function yet(e,t,i,n){let r=[],o=[];return t.forEach(s=>{s.type==="child_changed"&&e.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(get(s.childName,s.snapshotNode))}),om(e,r,"child_removed",t,n,i),om(e,r,"child_added",t,n,i),om(e,r,"child_moved",o,n,i),om(e,r,"child_changed",t,n,i),om(e,r,"value",t,n,i),r}function om(e,t,i,n,r,o){let s=n.filter(l=>l.type===i);s.sort((l,d)=>xet(e,l,d)),s.forEach(l=>{let d=wet(e,l,o);r.forEach(u=>{u.respondsTo(l.type)&&t.push(u.createEvent(d,e.query_))})})}function wet(e,t,i){return t.type==="value"||t.type==="child_removed"||(t.prevName=i.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function xet(e,t,i){if(t.childName==null||i.childName==null)throw Yl("Should only compare child_ events.");let n=new de(t.childName,t.snapshotNode),r=new de(i.childName,i.snapshotNode);return e.index_.compare(n,r)}function _j(e,t){return{eventCache:e,serverCache:t}}function lm(e,t,i,n){return _j(new dm(t,i,n),e.serverCache)}function vj(e,t,i,n){return _j(e.eventCache,new dm(t,i,n))}function hA(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function gl(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var NS,Iet=()=>(NS||(NS=new cr(xtt)),NS),bi=class e{constructor(t,i=Iet()){this.value=t,this.children=i}static fromObject(t){let i=new e(null);return dr(t,(n,r)=>{i=i.set(new Ae(n),r)}),i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,i){if(this.value!=null&&i(this.value))return{path:Ee(),value:this.value};if(re(t))return null;{let n=ce(t),r=this.children.get(n);if(r!==null){let o=r.findRootMostMatchingPathAndValue(je(t),i);return o!=null?{path:Fn(new Ae(n),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(re(t))return this;{let i=ce(t),n=this.children.get(i);return n!==null?n.subtree(je(t)):new e(null)}}set(t,i){if(re(t))return new e(i,this.children);{let n=ce(t),o=(this.children.get(n)||new e(null)).set(je(t),i),s=this.children.insert(n,o);return new e(this.value,s)}}remove(t){if(re(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let i=ce(t),n=this.children.get(i);if(n){let r=n.remove(je(t)),o;return r.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,r),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(t){if(re(t))return this.value;{let i=ce(t),n=this.children.get(i);return n?n.get(je(t)):null}}setTree(t,i){if(re(t))return i;{let n=ce(t),o=(this.children.get(n)||new e(null)).setTree(je(t),i),s;return o.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,o),new e(this.value,s)}}fold(t){return this.fold_(Ee(),t)}fold_(t,i){let n={};return this.children.inorderTraversal((r,o)=>{n[r]=o.fold_(Fn(t,r),i)}),i(t,this.value,n)}findOnPath(t,i){return this.findOnPath_(t,Ee(),i)}findOnPath_(t,i,n){let r=this.value?n(i,this.value):!1;if(r)return r;if(re(t))return null;{let o=ce(t),s=this.children.get(o);return s?s.findOnPath_(je(t),Fn(i,o),n):null}}foreachOnPath(t,i){return this.foreachOnPath_(t,Ee(),i)}foreachOnPath_(t,i,n){if(re(t))return this;{this.value&&n(i,this.value);let r=ce(t),o=this.children.get(r);return o?o.foreachOnPath_(je(t),Fn(i,r),n):new e(null)}}foreach(t){this.foreach_(Ee(),t)}foreach_(t,i){this.children.inorderTraversal((n,r)=>{r.foreach_(Fn(t,n),i)}),this.value&&i(t,this.value)}foreachChild(t){this.children.inorderTraversal((i,n)=>{n.value&&t(i,n.value)})}};var Ar=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new bi(null))}};function cm(e,t,i){if(re(t))return new Ar(new bi(i));{let n=e.writeTree_.findRootMostValueAndPath(t);if(n!=null){let r=n.path,o=n.value,s=lr(r,t);return o=o.updateChild(s,i),new Ar(e.writeTree_.set(r,o))}else{let r=new bi(i),o=e.writeTree_.setTree(t,r);return new Ar(o)}}}function CB(e,t,i){let n=e;return dr(i,(r,o)=>{n=cm(n,Fn(t,r),o)}),n}function TB(e,t){if(re(t))return Ar.empty();{let i=e.writeTree_.setTree(t,new bi(null));return new Ar(i)}}function fA(e,t){return _l(e,t)!=null}function _l(e,t){let i=e.writeTree_.findRootMostValueAndPath(t);return i!=null?e.writeTree_.get(i.path).getChild(lr(i.path,t)):null}function SB(e){let t=[],i=e.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(ti,(n,r)=>{t.push(new de(n,r))}):e.writeTree_.children.inorderTraversal((n,r)=>{r.value!=null&&t.push(new de(n,r.value))}),t}function Xs(e,t){if(re(t))return e;{let i=_l(e,t);return i!=null?new Ar(new bi(i)):new Ar(e.writeTree_.subtree(t))}}function mA(e){return e.writeTree_.isEmpty()}function Zd(e,t){return bj(Ee(),e.writeTree_,t)}function bj(e,t,i){if(t.value!=null)return i.updateChild(e,t.value);{let n=null;return t.children.inorderTraversal((r,o)=>{r===".priority"?(it(o.value!==null,"Priority writes must always be leaf nodes"),n=o.value):i=bj(Fn(e,r),o,i)}),!i.getChild(e).isEmpty()&&n!==null&&(i=i.updateChild(Fn(e,".priority"),n)),i}}function yj(e,t){return Cj(t,e)}function Eet(e,t,i,n,r){it(n>e.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),e.allWrites.push({path:t,snap:i,writeId:n,visible:r}),r&&(e.visibleWrites=cm(e.visibleWrites,t,i)),e.lastWriteId=n}function Cet(e,t){for(let i=0;i<e.allWrites.length;i++){let n=e.allWrites[i];if(n.writeId===t)return n}return null}function Tet(e,t){let i=e.allWrites.findIndex(l=>l.writeId===t);it(i>=0,"removeWrite called with nonexistent writeId.");let n=e.allWrites[i];e.allWrites.splice(i,1);let r=n.visible,o=!1,s=e.allWrites.length-1;for(;r&&s>=0;){let l=e.allWrites[s];l.visible&&(s>=i&&Aet(l,n.path)?r=!1:Sr(n.path,l.path)&&(o=!0)),s--}if(r){if(o)return Det(e),!0;if(n.snap)e.visibleWrites=TB(e.visibleWrites,n.path);else{let l=n.children;dr(l,d=>{e.visibleWrites=TB(e.visibleWrites,Fn(n.path,d))})}return!0}else return!1}function Aet(e,t){if(e.snap)return Sr(e.path,t);for(let i in e.children)if(e.children.hasOwnProperty(i)&&Sr(Fn(e.path,i),t))return!0;return!1}function Det(e){e.visibleWrites=wj(e.allWrites,Ret,Ee()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function Ret(e){return e.visible}function wj(e,t,i){let n=Ar.empty();for(let r=0;r<e.length;++r){let o=e[r];if(t(o)){let s=o.path,l;if(o.snap)Sr(i,s)?(l=lr(i,s),n=cm(n,l,o.snap)):Sr(s,i)&&(l=lr(s,i),n=cm(n,Ee(),o.snap.getChild(l)));else if(o.children){if(Sr(i,s))l=lr(i,s),n=CB(n,l,o.children);else if(Sr(s,i))if(l=lr(s,i),re(l))n=CB(n,Ee(),o.children);else{let d=ba(o.children,ce(l));if(d){let u=d.getChild(je(l));n=cm(n,Ee(),u)}}}else throw Yl("WriteRecord should have .snap or .children")}}return n}function xj(e,t,i,n,r){if(!n&&!r){let o=_l(e.visibleWrites,t);if(o!=null)return o;{let s=Xs(e.visibleWrites,t);if(mA(s))return i;if(i==null&&!fA(s,Ee()))return null;{let l=i||Xe.EMPTY_NODE;return Zd(s,l)}}}else{let o=Xs(e.visibleWrites,t);if(!r&&mA(o))return i;if(!r&&i==null&&!fA(o,Ee()))return null;{let s=function(u){return(u.visible||r)&&(!n||!~n.indexOf(u.writeId))&&(Sr(u.path,t)||Sr(t,u.path))},l=wj(e.allWrites,s,t),d=i||Xe.EMPTY_NODE;return Zd(l,d)}}}function ket(e,t,i){let n=Xe.EMPTY_NODE,r=_l(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(ti,(o,s)=>{n=n.updateImmediateChild(o,s)}),n;if(i){let o=Xs(e.visibleWrites,t);return i.forEachChild(ti,(s,l)=>{let d=Zd(Xs(o,new Ae(s)),l);n=n.updateImmediateChild(s,d)}),SB(o).forEach(s=>{n=n.updateImmediateChild(s.name,s.node)}),n}else{let o=Xs(e.visibleWrites,t);return SB(o).forEach(s=>{n=n.updateImmediateChild(s.name,s.node)}),n}}function Met(e,t,i,n,r){it(n||r,"Either existingEventSnap or existingServerSnap must exist");let o=Fn(t,i);if(fA(e.visibleWrites,o))return null;{let s=Xs(e.visibleWrites,o);return mA(s)?r.getChild(i):Zd(s,r.getChild(i))}}function Pet(e,t,i,n){let r=Fn(t,i),o=_l(e.visibleWrites,r);if(o!=null)return o;if(n.isCompleteForChild(i)){let s=Xs(e.visibleWrites,r);return Zd(s,n.getNode().getImmediateChild(i))}else return null}function Oet(e,t){return _l(e.visibleWrites,t)}function Net(e,t,i,n,r,o,s){let l,d=Xs(e.visibleWrites,t),u=_l(d,Ee());if(u!=null)l=u;else if(i!=null)l=Zd(d,i);else return[];if(l=l.withIndex(s),!l.isEmpty()&&!l.isLeafNode()){let f=[],p=s.getCompare(),_=o?l.getReverseIteratorFrom(n,s):l.getIteratorFrom(n,s),y=_.getNext();for(;y&&f.length<r;)p(y,n)!==0&&f.push(y),y=_.getNext();return f}else return[]}function Fet(){return{visibleWrites:Ar.empty(),allWrites:[],lastWriteId:-1}}function pA(e,t,i,n){return xj(e.writeTree,e.treePath,t,i,n)}function Ij(e,t){return ket(e.writeTree,e.treePath,t)}function AB(e,t,i,n){return Met(e.writeTree,e.treePath,t,i,n)}function Yb(e,t){return Oet(e.writeTree,Fn(e.treePath,t))}function Let(e,t,i,n,r,o){return Net(e.writeTree,e.treePath,t,i,n,r,o)}function PA(e,t,i){return Pet(e.writeTree,e.treePath,t,i)}function Ej(e,t){return Cj(Fn(e.treePath,t),e.writeTree)}function Cj(e,t){return{treePath:e,writeTree:t}}var gA=class{constructor(){this.changeMap=new Map}trackChildChange(t){let i=t.type,n=t.childName;it(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),it(n!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(n);if(r){let o=r.type;if(i==="child_added"&&o==="child_removed")this.changeMap.set(n,wB(n,t.snapshotNode,r.snapshotNode));else if(i==="child_removed"&&o==="child_added")this.changeMap.delete(n);else if(i==="child_removed"&&o==="child_changed")this.changeMap.set(n,pet(n,r.oldSnap));else if(i==="child_changed"&&o==="child_added")this.changeMap.set(n,met(n,t.snapshotNode));else if(i==="child_changed"&&o==="child_changed")this.changeMap.set(n,wB(n,t.snapshotNode,r.oldSnap));else throw Yl("Illegal combination of changes: "+t+" occurred after "+r)}else this.changeMap.set(n,t)}getChanges(){return Array.from(this.changeMap.values())}};var _A=class{getCompleteChild(t){return null}getChildAfterChild(t,i,n){return null}},Tj=new _A,um=class{constructor(t,i,n=null){this.writes_=t,this.viewCache_=i,this.optCompleteServerCache_=n}getCompleteChild(t){let i=this.viewCache_.eventCache;if(i.isCompleteForChild(t))return i.getNode().getImmediateChild(t);{let n=this.optCompleteServerCache_!=null?new dm(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return PA(this.writes_,t,n)}}getChildAfterChild(t,i,n){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:gl(this.viewCache_),o=Let(this.writes_,r,i,1,n,t);return o.length===0?null:o[0]}};function Vet(e,t){it(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),it(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function Bet(e,t,i,n,r){let o=new gA,s,l;if(i.type===qo.OVERWRITE){let u=i;u.source.fromUser?s=vA(e,t,u.path,u.snap,n,r,o):(it(u.source.fromServer,"Unknown source."),l=u.source.tagged||t.serverCache.isFiltered()&&!re(u.path),s=Qb(e,t,u.path,u.snap,n,r,l,o))}else if(i.type===qo.MERGE){let u=i;u.source.fromUser?s=Uet(e,t,u.path,u.children,n,r,o):(it(u.source.fromServer,"Unknown source."),l=u.source.tagged||t.serverCache.isFiltered(),s=bA(e,t,u.path,u.children,n,r,l,o))}else if(i.type===qo.ACK_USER_WRITE){let u=i;u.revert?s=Het(e,t,u.path,n,r,o):s=zet(e,t,u.path,u.affectedTree,n,r,o)}else if(i.type===qo.LISTEN_COMPLETE)s=$et(e,t,i.path,n,o);else throw Yl("Unknown operation type: "+i.type);let d=o.getChanges();return jet(t,s,d),{viewCache:s,changes:d}}function jet(e,t,i){let n=t.eventCache;if(n.isFullyInitialized()){let r=n.getNode().isLeafNode()||n.getNode().isEmpty(),o=hA(e);(i.length>0||!e.eventCache.isFullyInitialized()||r&&!n.getNode().equals(o)||!n.getNode().getPriority().equals(o.getPriority()))&&i.push(fet(hA(t)))}}function Sj(e,t,i,n,r,o){let s=t.eventCache;if(Yb(n,i)!=null)return t;{let l,d;if(re(i))if(it(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let u=gl(t),f=u instanceof Xe?u:Xe.EMPTY_NODE,p=Ij(n,f);l=e.filter.updateFullNode(t.eventCache.getNode(),p,o)}else{let u=pA(n,gl(t));l=e.filter.updateFullNode(t.eventCache.getNode(),u,o)}else{let u=ce(i);if(u===".priority"){it(Zs(i)===1,"Can't have a priority with additional path components");let f=s.getNode();d=t.serverCache.getNode();let p=AB(n,i,f,d);p!=null?l=e.filter.updatePriority(f,p):l=s.getNode()}else{let f=je(i),p;if(s.isCompleteForChild(u)){d=t.serverCache.getNode();let _=AB(n,i,s.getNode(),d);_!=null?p=s.getNode().getImmediateChild(u).updateChild(f,_):p=s.getNode().getImmediateChild(u)}else p=PA(n,u,t.serverCache);p!=null?l=e.filter.updateChild(s.getNode(),u,p,f,r,o):l=s.getNode()}}return lm(t,l,s.isFullyInitialized()||re(i),e.filter.filtersNodes())}}function Qb(e,t,i,n,r,o,s,l){let d=t.serverCache,u,f=s?e.filter:e.filter.getIndexedFilter();if(re(i))u=f.updateFullNode(d.getNode(),n,null);else if(f.filtersNodes()&&!d.isFiltered()){let y=d.getNode().updateChild(i,n);u=f.updateFullNode(d.getNode(),y,null)}else{let y=ce(i);if(!d.isCompleteForPath(i)&&Zs(i)>1)return t;let S=je(i),M=d.getNode().getImmediateChild(y).updateChild(S,n);y===".priority"?u=f.updatePriority(d.getNode(),M):u=f.updateChild(d.getNode(),y,M,S,Tj,null)}let p=vj(t,u,d.isFullyInitialized()||re(i),f.filtersNodes()),_=new um(r,p,o);return Sj(e,p,i,r,_,l)}function vA(e,t,i,n,r,o,s){let l=t.eventCache,d,u,f=new um(r,t,o);if(re(i))u=e.filter.updateFullNode(t.eventCache.getNode(),n,s),d=lm(t,u,!0,e.filter.filtersNodes());else{let p=ce(i);if(p===".priority")u=e.filter.updatePriority(t.eventCache.getNode(),n),d=lm(t,u,l.isFullyInitialized(),l.isFiltered());else{let _=je(i),y=l.getNode().getImmediateChild(p),S;if(re(_))S=n;else{let A=f.getCompleteChild(p);A!=null?rj(_)===".priority"&&A.getChild(sj(_)).isEmpty()?S=A:S=A.updateChild(_,n):S=Xe.EMPTY_NODE}if(y.equals(S))d=t;else{let A=e.filter.updateChild(l.getNode(),p,S,_,f,s);d=lm(t,A,l.isFullyInitialized(),e.filter.filtersNodes())}}}return d}function DB(e,t){return e.eventCache.isCompleteForChild(t)}function Uet(e,t,i,n,r,o,s){let l=t;return n.foreach((d,u)=>{let f=Fn(i,d);DB(t,ce(f))&&(l=vA(e,l,f,u,r,o,s))}),n.foreach((d,u)=>{let f=Fn(i,d);DB(t,ce(f))||(l=vA(e,l,f,u,r,o,s))}),l}function RB(e,t,i){return i.foreach((n,r)=>{t=t.updateChild(n,r)}),t}function bA(e,t,i,n,r,o,s,l){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let d=t,u;re(i)?u=n:u=new bi(null).setTree(i,n);let f=t.serverCache.getNode();return u.children.inorderTraversal((p,_)=>{if(f.hasChild(p)){let y=t.serverCache.getNode().getImmediateChild(p),S=RB(e,y,_);d=Qb(e,d,new Ae(p),S,r,o,s,l)}}),u.children.inorderTraversal((p,_)=>{let y=!t.serverCache.isCompleteForChild(p)&&_.value===null;if(!f.hasChild(p)&&!y){let S=t.serverCache.getNode().getImmediateChild(p),A=RB(e,S,_);d=Qb(e,d,new Ae(p),A,r,o,s,l)}}),d}function zet(e,t,i,n,r,o,s){if(Yb(r,i)!=null)return t;let l=t.serverCache.isFiltered(),d=t.serverCache;if(n.value!=null){if(re(i)&&d.isFullyInitialized()||d.isCompleteForPath(i))return Qb(e,t,i,d.getNode().getChild(i),r,o,l,s);if(re(i)){let u=new bi(null);return d.getNode().forEachChild(qd,(f,p)=>{u=u.set(new Ae(f),p)}),bA(e,t,i,u,r,o,l,s)}else return t}else{let u=new bi(null);return n.foreach((f,p)=>{let _=Fn(i,f);d.isCompleteForPath(_)&&(u=u.set(f,d.getNode().getChild(_)))}),bA(e,t,i,u,r,o,l,s)}}function $et(e,t,i,n,r){let o=t.serverCache,s=vj(t,o.getNode(),o.isFullyInitialized()||re(i),o.isFiltered());return Sj(e,s,i,n,Tj,r)}function Het(e,t,i,n,r,o){let s;if(Yb(n,i)!=null)return t;{let l=new um(n,t,r),d=t.eventCache.getNode(),u;if(re(i)||ce(i)===".priority"){let f;if(t.serverCache.isFullyInitialized())f=pA(n,gl(t));else{let p=t.serverCache.getNode();it(p instanceof Xe,"serverChildren would be complete if leaf node"),f=Ij(n,p)}f=f,u=e.filter.updateFullNode(d,f,o)}else{let f=ce(i),p=PA(n,f,t.serverCache);p==null&&t.serverCache.isCompleteForChild(f)&&(p=d.getImmediateChild(f)),p!=null?u=e.filter.updateChild(d,f,p,je(i),l,o):t.eventCache.getNode().hasChild(f)?u=e.filter.updateChild(d,f,Xe.EMPTY_NODE,je(i),l,o):u=d,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=pA(n,gl(t)),s.isLeafNode()&&(u=e.filter.updateFullNode(u,s,o)))}return s=t.serverCache.isFullyInitialized()||Yb(n,Ee())!=null,lm(t,u,s,e.filter.filtersNodes())}}function Wet(e,t){let i=gl(e.viewCache_);return i&&(e.query._queryParams.loadsAllData()||!re(t)&&!i.getImmediateChild(ce(t)).isEmpty())?i.getChild(t):null}function kB(e,t,i,n){t.type===qo.MERGE&&t.source.queryId!==null&&(it(gl(e.viewCache_),"We should always have a full cache before handling merges"),it(hA(e.viewCache_),"Missing event cache, even though we have a server cache"));let r=e.viewCache_,o=Bet(e.processor_,r,t,i,n);return Vet(e.processor_,o.viewCache),it(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,qet(e,o.changes,o.viewCache.eventCache.getNode(),null)}function qet(e,t,i,n){let r=n?[n]:e.eventRegistrations_;return yet(e.eventGenerator_,t,i,r)}var MB;function Get(e){it(!MB,"__referenceConstructor has already been defined"),MB=e}function OA(e,t,i,n){let r=t.source.queryId;if(r!==null){let o=e.views.get(r);return it(o!=null,"SyncTree gave us an op for an invalid query."),kB(o,t,i,n)}else{let o=[];for(let s of e.views.values())o=o.concat(kB(s,t,i,n));return o}}function NA(e,t){let i=null;for(let n of e.views.values())i=i||Wet(n,t);return i}var PB;function Ket(e){it(!PB,"__referenceConstructor has already been defined"),PB=e}var Xb=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new bi(null),this.pendingWriteTree_=Fet(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Yet(e,t,i,n,r){return Eet(e.pendingWriteTree_,t,i,n,r),r?Jb(e,new Xd(mj(),t,i)):[]}function Hd(e,t,i=!1){let n=Cet(e.pendingWriteTree_,t);if(Tet(e.pendingWriteTree_,t)){let o=new bi(null);return n.snap!=null?o=o.set(Ee(),!0):dr(n.children,s=>{o=o.set(new Ae(s),!0)}),Jb(e,new uA(n.path,o,i))}else return[]}function Zb(e,t,i){return Jb(e,new Xd(pj(),t,i))}function Qet(e,t,i){let n=bi.fromObject(i);return Jb(e,new Kb(pj(),t,n))}function Xet(e,t,i,n){let r=kj(e,n);if(r!=null){let o=Mj(r),s=o.path,l=o.queryId,d=lr(s,t),u=new Xd(gj(l),d,i);return Pj(e,s,u)}else return[]}function Zet(e,t,i,n){let r=kj(e,n);if(r){let o=Mj(r),s=o.path,l=o.queryId,d=lr(s,t),u=bi.fromObject(i),f=new Kb(gj(l),d,u);return Pj(e,s,f)}else return[]}function Aj(e,t,i){let r=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(s,l)=>{let d=lr(s,t),u=NA(l,d);if(u)return u});return xj(r,t,o,i,!0)}function Jb(e,t){return Dj(t,e.syncPointTree_,null,yj(e.pendingWriteTree_,Ee()))}function Dj(e,t,i,n){if(re(e.path))return Rj(e,t,i,n);{let r=t.get(Ee());i==null&&r!=null&&(i=NA(r,Ee()));let o=[],s=ce(e.path),l=e.operationForChild(s),d=t.children.get(s);if(d&&l){let u=i?i.getImmediateChild(s):null,f=Ej(n,s);o=o.concat(Dj(l,d,u,f))}return r&&(o=o.concat(OA(r,e,n,i))),o}}function Rj(e,t,i,n){let r=t.get(Ee());i==null&&r!=null&&(i=NA(r,Ee()));let o=[];return t.children.inorderTraversal((s,l)=>{let d=i?i.getImmediateChild(s):null,u=Ej(n,s),f=e.operationForChild(s);f&&(o=o.concat(Rj(f,l,d,u)))}),r&&(o=o.concat(OA(r,e,n,i))),o}function kj(e,t){return e.tagToQueryMap.get(t)}function Mj(e){let t=e.indexOf("$");return it(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Ae(e.substr(0,t))}}function Pj(e,t,i){let n=e.syncPointTree_.get(t);it(n,"Missing sync point for query tag that we're tracking");let r=yj(e.pendingWriteTree_,t);return OA(n,i,r,null)}var yA=class e{constructor(t){this.node_=t}getImmediateChild(t){let i=this.node_.getImmediateChild(t);return new e(i)}node(){return this.node_}},wA=class e{constructor(t,i){this.syncTree_=t,this.path_=i}getImmediateChild(t){let i=Fn(this.path_,t);return new e(this.syncTree_,i)}node(){return Aj(this.syncTree_,this.path_)}},Jet=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},OB=function(e,t,i){if(!e||typeof e!="object")return e;if(it(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return tnt(e[".sv"],t,i);if(typeof e[".sv"]=="object")return ent(e[".sv"],t);it(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},tnt=function(e,t,i){switch(e){case"timestamp":return i.timestamp;default:it(!1,"Unexpected server value: "+e)}},ent=function(e,t,i){e.hasOwnProperty("increment")||it(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let n=e.increment;typeof n!="number"&&it(!1,"Unexpected increment value: "+n);let r=t.node();if(it(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return n;let s=r.getValue();return typeof s!="number"?n:s+n},nnt=function(e,t,i,n){return FA(t,new wA(i,e),n)},int=function(e,t,i){return FA(e,new yA(t),i)};function FA(e,t,i){let n=e.getPriority().val(),r=OB(n,t.getImmediateChild(".priority"),i),o;if(e.isLeafNode()){let s=e,l=OB(s.getValue(),t,i);return l!==s.getValue()||r!==s.getPriority().val()?new Yd(l,Jn(r)):e}else{let s=e;return o=s,r!==s.getPriority().val()&&(o=o.updatePriority(new Yd(r))),s.forEachChild(ti,(l,d)=>{let u=FA(d,t.getImmediateChild(l),i);u!==d&&(o=o.updateImmediateChild(l,u))}),o}}var hm=class{constructor(t="",i=null,n={children:{},childCount:0}){this.name=t,this.parent=i,this.node=n}};function LA(e,t){let i=t instanceof Ae?t:new Ae(t),n=e,r=ce(i);for(;r!==null;){let o=ba(n.node.children,r)||{children:{},childCount:0};n=new hm(r,n,o),i=je(i),r=ce(i)}return n}function eu(e){return e.node.value}function Oj(e,t){e.node.value=t,xA(e)}function Nj(e){return e.node.childCount>0}function rnt(e){return eu(e)===void 0&&!Nj(e)}function ty(e,t){dr(e.node.children,(i,n)=>{t(new hm(i,e,n))})}function Fj(e,t,i,n){i&&!n&&t(e),ty(e,r=>{Fj(r,t,!0,n)}),i&&n&&t(e)}function ont(e,t,i){let n=i?e:e.parent;for(;n!==null;){if(t(n))return!0;n=n.parent}return!1}function _m(e){return new Ae(e.parent===null?e.name:_m(e.parent)+"/"+e.name)}function xA(e){e.parent!==null&&snt(e.parent,e.name,e)}function snt(e,t,i){let n=rnt(i),r=Br(e.node.children,t);n&&r?(delete e.node.children[t],e.node.childCount--,xA(e)):!n&&!r&&(e.node.children[t]=i.node,e.node.childCount++,xA(e))}var ant=/[\[\].#$\/\u0000-\u001F\u007F]/,lnt=/[\[\].#$\u0000-\u001F\u007F]/,FS=10*1024*1024,Lj=function(e){return typeof e=="string"&&e.length!==0&&!ant.test(e)},cnt=function(e){return typeof e=="string"&&e.length!==0&&!lnt.test(e)},dnt=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),cnt(e)};var Vj=function(e,t,i){let n=i instanceof Ae?new QS(i,e):i;if(t===void 0)throw new Error(e+"contains undefined "+hl(n));if(typeof t=="function")throw new Error(e+"contains a function "+hl(n)+" with contents = "+t.toString());if(jB(t))throw new Error(e+"contains "+t.toString()+" "+hl(n));if(typeof t=="string"&&t.length>FS/3&&Vu(t)>FS)throw new Error(e+"contains a string greater than "+FS+" utf8 bytes "+hl(n)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let r=!1,o=!1;if(dr(t,(s,l)=>{if(s===".value")r=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!Lj(s)))throw new Error(e+" contains an invalid key ("+s+") "+hl(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Jtt(n,s),Vj(e,l,n),tet(n)}),r&&o)throw new Error(e+' contains ".value" child '+hl(n)+" in addition to actual children.")}};var unt=function(e,t){let i=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Lj(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!dnt(i))throw new Error(Dk(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var IA=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function hnt(e,t){let i=null;for(let n=0;n<t.length;n++){let r=t[n],o=r.getPath();i!==null&&!aj(o,i.path)&&(e.eventLists_.push(i),i=null),i===null&&(i={events:[],path:o}),i.events.push(r)}i&&e.eventLists_.push(i)}function vl(e,t,i){hnt(e,i),fnt(e,n=>Sr(n,t)||Sr(t,n))}function fnt(e,t){e.recursionDepth_++;let i=!0;for(let n=0;n<e.eventLists_.length;n++){let r=e.eventLists_[n];if(r){let o=r.path;t(o)?(mnt(e.eventLists_[n]),e.eventLists_[n]=null):i=!1}}i&&(e.eventLists_=[]),e.recursionDepth_--}function mnt(e){for(let t=0;t<e.events.length;t++){let i=e.events[t];if(i!==null){e.events[t]=null;let n=i.getEventRunner();ml&&Zn("event: "+i.toString()),pm(n)}}}var pnt="repo_interrupt",gnt=25,EA=class{constructor(t,i,n,r){this.repoInfo_=t,this.forceRestClient_=i,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new IA,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Gb(),this.transactionQueueTree_=new hm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function _nt(e,t,i){if(e.stats_=RA(e.repoInfo_),e.forceRestClient_||Att())e.server_=new sA(e.repoInfo_,(n,r,o,s)=>{NB(e,n,r,o,s)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>FB(e,!0),0);else{if(typeof i<"u"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Dn(i)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}e.persistentConnection_=new kA(e.repoInfo_,t,(n,r,o,s)=>{NB(e,n,r,o,s)},n=>{FB(e,n)},n=>{bnt(e,n)},e.authTokenProvider_,e.appCheckProvider_,i),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(n=>{e.server_.refreshAuthToken(n)}),e.appCheckProvider_.addTokenChangeListener(n=>{e.server_.refreshAppCheckToken(n.token)}),e.statsReporter_=Rtt(e.repoInfo_,()=>new dA(e.stats_,e.server_)),e.infoData_=new aA,e.infoSyncTree_=new Xb({startListening:(n,r,o,s)=>{let l=[],d=e.infoData_.getNode(n._path);return d.isEmpty()||(l=Zb(e.infoSyncTree_,n._path,d),setTimeout(()=>{s("ok")},0)),l},stopListening:()=>{}}),VA(e,"connected",!1),e.serverSyncTree_=new Xb({startListening:(n,r,o,s)=>(e.server_.listen(n,o,r,(l,d)=>{let u=s(l,d);vl(e.eventQueue_,n._path,u)}),[]),stopListening:(n,r)=>{e.server_.unlisten(n,r)}})}function vnt(e){let i=e.infoData_.getNode(new Ae(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function Bj(e){return Jet({timestamp:vnt(e)})}function NB(e,t,i,n,r){e.dataUpdateCount++;let o=new Ae(t);i=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,i):i;let s=[];if(r)if(n){let d=Lu(i,u=>Jn(u));s=Zet(e.serverSyncTree_,o,d,r)}else{let d=Jn(i);s=Xet(e.serverSyncTree_,o,d,r)}else if(n){let d=Lu(i,u=>Jn(u));s=Qet(e.serverSyncTree_,o,d)}else{let d=Jn(i);s=Zb(e.serverSyncTree_,o,d)}let l=o;s.length>0&&(l=jA(e,o)),vl(e.eventQueue_,l,s)}function FB(e,t){VA(e,"connected",t),t===!1&&wnt(e)}function bnt(e,t){dr(t,(i,n)=>{VA(e,i,n)})}function VA(e,t,i){let n=new Ae("/.info/"+t),r=Jn(i);e.infoData_.updateSnapshot(n,r);let o=Zb(e.infoSyncTree_,n,r);vl(e.eventQueue_,n,o)}function ynt(e){return e.nextWriteId_++}function wnt(e){jj(e,"onDisconnectEvents");let t=Bj(e),i=Gb();lA(e.onDisconnect_,Ee(),(r,o)=>{let s=nnt(r,o,e.serverSyncTree_,t);fj(i,r,s)});let n=[];lA(i,Ee(),(r,o)=>{n=n.concat(Zb(e.serverSyncTree_,r,o));let s=Cnt(e,r);jA(e,s)}),e.onDisconnect_=Gb(),vl(e.eventQueue_,Ee(),n)}function xnt(e){e.persistentConnection_&&e.persistentConnection_.interrupt(pnt)}function jj(e,...t){let i="";e.persistentConnection_&&(i=e.persistentConnection_.id+":"),Zn(i,...t)}function Uj(e,t,i){return Aj(e.serverSyncTree_,t,i)||Xe.EMPTY_NODE}function BA(e,t=e.transactionQueueTree_){if(t||ey(e,t),eu(t)){let i=$j(e,t);it(i.length>0,"Sending zero length transaction queue"),i.every(r=>r.status===0)&&Int(e,_m(t),i)}else Nj(t)&&ty(t,i=>{BA(e,i)})}function Int(e,t,i){let n=i.map(u=>u.currentWriteId),r=Uj(e,t,n),o=r,s=r.hash();for(let u=0;u<i.length;u++){let f=i[u];it(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;let p=lr(t,f.path);o=o.updateChild(p,f.currentOutputSnapshotRaw)}let l=o.val(!0),d=t;e.server_.put(d.toString(),l,u=>{jj(e,"transaction put response",{path:d.toString(),status:u});let f=[];if(u==="ok"){let p=[];for(let _=0;_<i.length;_++)i[_].status=2,f=f.concat(Hd(e.serverSyncTree_,i[_].currentWriteId)),i[_].onComplete&&p.push(()=>i[_].onComplete(null,!0,i[_].currentOutputSnapshotResolved)),i[_].unwatcher();ey(e,LA(e.transactionQueueTree_,t)),BA(e,e.transactionQueueTree_),vl(e.eventQueue_,t,f);for(let _=0;_<p.length;_++)pm(p[_])}else{if(u==="datastale")for(let p=0;p<i.length;p++)i[p].status===3?i[p].status=4:i[p].status=0;else{Li("transaction at "+d.toString()+" failed: "+u);for(let p=0;p<i.length;p++)i[p].status=4,i[p].abortReason=u}jA(e,t)}},s)}function jA(e,t){let i=zj(e,t),n=_m(i),r=$j(e,i);return Ent(e,r,n),n}function Ent(e,t,i){if(t.length===0)return;let n=[],r=[],s=t.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<t.length;l++){let d=t[l],u=lr(i,d.path),f=!1,p;if(it(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)f=!0,p=d.abortReason,r=r.concat(Hd(e.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=gnt)f=!0,p="maxretry",r=r.concat(Hd(e.serverSyncTree_,d.currentWriteId,!0));else{let _=Uj(e,d.path,s);d.currentInputSnapshot=_;let y=t[l].update(_.val());if(y!==void 0){Vj("transaction failed: Data returned ",y,d.path);let S=Jn(y);typeof y=="object"&&y!=null&&Br(y,".priority")||(S=S.updatePriority(_.getPriority()));let M=d.currentWriteId,K=Bj(e),ut=int(S,_,K);d.currentOutputSnapshotRaw=S,d.currentOutputSnapshotResolved=ut,d.currentWriteId=ynt(e),s.splice(s.indexOf(M),1),r=r.concat(Yet(e.serverSyncTree_,d.path,ut,d.currentWriteId,d.applyLocally)),r=r.concat(Hd(e.serverSyncTree_,M,!0))}else f=!0,p="nodata",r=r.concat(Hd(e.serverSyncTree_,d.currentWriteId,!0))}vl(e.eventQueue_,i,r),r=[],f&&(t[l].status=2,function(_){setTimeout(_,Math.floor(0))}(t[l].unwatcher),t[l].onComplete&&(p==="nodata"?n.push(()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot)):n.push(()=>t[l].onComplete(new Error(p),!1,null))))}ey(e,e.transactionQueueTree_);for(let l=0;l<n.length;l++)pm(n[l]);BA(e,e.transactionQueueTree_)}function zj(e,t){let i,n=e.transactionQueueTree_;for(i=ce(t);i!==null&&eu(n)===void 0;)n=LA(n,i),t=je(t),i=ce(t);return n}function $j(e,t){let i=[];return Hj(e,t,i),i.sort((n,r)=>n.order-r.order),i}function Hj(e,t,i){let n=eu(t);if(n)for(let r=0;r<n.length;r++)i.push(n[r]);ty(t,r=>{Hj(e,r,i)})}function ey(e,t){let i=eu(t);if(i){let n=0;for(let r=0;r<i.length;r++)i[r].status!==2&&(i[n]=i[r],n++);i.length=n,Oj(t,i.length>0?i:void 0)}ty(t,n=>{ey(e,n)})}function Cnt(e,t){let i=_m(zj(e,t)),n=LA(e.transactionQueueTree_,t);return ont(n,r=>{LS(e,r)}),LS(e,n),Fj(n,r=>{LS(e,r)}),i}function LS(e,t){let i=eu(t);if(i){let n=[],r=[],o=-1;for(let s=0;s<i.length;s++)i[s].status===3||(i[s].status===1?(it(o===s-1,"All SENT items should be at beginning of queue."),o=s,i[s].status=3,i[s].abortReason="set"):(it(i[s].status===0,"Unexpected transaction status in abort"),i[s].unwatcher(),r=r.concat(Hd(e.serverSyncTree_,i[s].currentWriteId,!0)),i[s].onComplete&&n.push(i[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?Oj(t,void 0):i.length=o+1,vl(e.eventQueue_,_m(t),r);for(let s=0;s<n.length;s++)pm(n[s])}}function Tnt(e){let t="",i=e.split("/");for(let n=0;n<i.length;n++)if(i[n].length>0){let r=i[n];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}function Snt(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let i of e.split("&")){if(i.length===0)continue;let n=i.split("=");n.length===2?t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):Li(`Invalid query segment '${i}' in query '${e}'`)}return t}var LB=function(e,t){let i=Ant(e),n=i.namespace;i.domain==="firebase.com"&&Go(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&i.domain!=="localhost"&&Go("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||ytt();let r=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new jb(i.host,i.secure,n,r,t,"",n!==i.subdomain),path:new Ae(i.pathString)}},Ant=function(e){let t="",i="",n="",r="",o="",s=!0,l="https",d=443;if(typeof e=="string"){let u=e.indexOf("//");u>=0&&(l=e.substring(0,u-1),e=e.substring(u+2));let f=e.indexOf("/");f===-1&&(f=e.length);let p=e.indexOf("?");p===-1&&(p=e.length),t=e.substring(0,Math.min(f,p)),f<p&&(r=Tnt(e.substring(f,p)));let _=Snt(e.substring(Math.min(e.length,p)));u=t.indexOf(":"),u>=0?(s=l==="https"||l==="wss",d=parseInt(t.substring(u+1),10)):u=t.length;let y=t.slice(0,u);if(y.toLowerCase()==="localhost")i="localhost";else if(y.split(".").length<=2)i=y;else{let S=t.indexOf(".");n=t.substring(0,S).toLowerCase(),i=t.substring(S+1),o=n}"ns"in _&&(o=_.ns)}return{host:t,port:d,domain:i,subdomain:n,secure:s,scheme:l,pathString:r,namespace:o}};var CA=class e{constructor(t,i,n,r){this._repo=t,this._path=i,this._queryParams=n,this._orderByCalled=r}get key(){return re(this._path)?null:rj(this._path)}get ref(){return new Jd(this._repo,this._path)}get _queryIdentifier(){let t=IB(this._queryParams),i=DA(t);return i==="{}"?"default":i}get _queryObject(){return IB(this._queryParams)}isEqual(t){if(t=Ne(t),!(t instanceof e))return!1;let i=this._repo===t._repo,n=aj(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return i&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+Ztt(this._path)}};var Jd=class e extends CA{constructor(t,i){super(t,i,new oA,!1)}get parent(){let t=sj(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}};Get(Jd);Ket(Jd);var Dnt="FIREBASE_DATABASE_EMULATOR_HOST",TA={},Rnt=!1;function knt(e,t,i,n){e.repoInfo_=new jb(`${t}:${i}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),n&&(e.authTokenProvider_=n)}function Mnt(e,t,i,n,r){let o=n||e.options.databaseURL;o===void 0&&(e.options.projectId||Go("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Zn("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let s=LB(o,r),l=s.repoInfo,d,u;typeof process<"u"&&process.env&&(u=process.env[Dnt]),u?(d=!0,o=`http://${u}?ns=${l.namespace}`,s=LB(o,r),l=s.repoInfo):d=!s.repoInfo.secure;let f=r&&d?new am(am.OWNER):new $S(e.name,e.options,t);unt("Invalid Firebase Database URL",s),re(s.path)||Go("Database URL must point to the root of a Firebase Database (not including a child path).");let p=Ont(l,e,f,new zS(e.name,i));return new SA(p,e)}function Pnt(e,t){let i=TA[t];(!i||i[e.key]!==e)&&Go(`Database ${t}(${e.repoInfo_}) has already been deleted.`),xnt(e),delete i[e.key]}function Ont(e,t,i,n){let r=TA[t.name];r||(r={},TA[t.name]=r);let o=r[e.toURLString()];return o&&Go("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new EA(e,Rnt,i,n),r[e.toURLString()]=o,o}var SA=class{constructor(t,i){this._repoInternal=t,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(_nt(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Jd(this._repo,Ee())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Pnt(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Go("Cannot call "+t+" on a deleted database.")}};function Wj(e=Zl(),t){let i=Bu(e,"database").getImmediate({identifier:t});if(!i._instanceStarted){let n=Pp("database");n&&qj(i,...n)}return i}function qj(e,t,i,n={}){e=Ne(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Go("Cannot call useEmulator() after instance has already been initialized.");let r=e._repoInternal,o;if(r.repoInfo_.nodeAdmin)n.mockUserToken&&Go('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new am(am.OWNER);else if(n.mockUserToken){let s=typeof n.mockUserToken=="string"?n.mockUserToken:Op(n.mockUserToken,e.app.options.projectId);o=new am(s)}knt(r,t,i,o)}function Nnt(e){_tt(Lp),ya(new Co("database",(t,{instanceIdentifier:i})=>{let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return Mnt(n,r,o,i)},"PUBLIC").setMultipleInstances(!0)),Rn(oB,sB,e),Rn(oB,sB,"esm2017")}kA.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};kA.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};Nnt();var vm=class{constructor(t){return t}},Gj="database",UA=class{constructor(){return Ca(Gj)}};var zA=new H("angularfire2.database-instances");function Fnt(e,t){let i=pc(Gj,e,t);return i&&new vm(i)}function Lnt(e){return(t,i)=>{let n=t.runOutsideAngular(()=>e(i));return new vm(n)}}var Vnt={provide:UA,deps:[[new He,zA]]},Bnt={provide:vm,useFactory:Fnt,deps:[[new He,zA],vs]},jnt=(()=>{class e{constructor(){Rn("angularfire",Xi.full,"rtdb")}static \u0275fac=function(n){return new(n||e)};static \u0275mod=st({type:e});static \u0275inj=ot({providers:[Bnt,Vnt]})}return e})();function Kj(e,...t){return{ngModule:jnt,providers:[{provide:zA,useFactory:Lnt(e),multi:!0,deps:[Q,fn,$r,bs,[new He,ul],[new He,Ri],...t]}]}}var Yj=gc(Wj,!0);var Unt="@",znt=(()=>{let t=class t{constructor(n,r,o,s,l){this.doc=n,this.delegate=r,this.zone=o,this.animationType=s,this.moduleImpl=l,this._rendererFactoryPromise=null,this.scheduler=W(H1,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-57VLPW3B.js")).catch(r=>{throw new ve(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:o})=>{this._engine=r(this.animationType,this.doc,this.scheduler);let s=new o(this.delegate,this._engine,this.zone);return this.delegate=s,s})}createRenderer(n,r){let o=this.delegate.createRenderer(n,r);if(o.\u0275type===0)return o;typeof o.throwOnSyntheticProps=="boolean"&&(o.throwOnSyntheticProps=!1);let s=new $A(o);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(l=>{let d=l.createRenderer(n,r);s.use(d)}).catch(l=>{s.use(o)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};t.\u0275fac=function(r){zl()},t.\u0275prov=q({token:t,factory:t.\u0275fac});let e=t;return e})(),$A=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let i of this.replay)i(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,i){return this.delegate.createElement(t,i)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,i){this.delegate.appendChild(t,i)}insertBefore(t,i,n,r){this.delegate.insertBefore(t,i,n,r)}removeChild(t,i,n){this.delegate.removeChild(t,i,n)}selectRootElement(t,i){return this.delegate.selectRootElement(t,i)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,i,n,r){this.delegate.setAttribute(t,i,n,r)}removeAttribute(t,i,n){this.delegate.removeAttribute(t,i,n)}addClass(t,i){this.delegate.addClass(t,i)}removeClass(t,i){this.delegate.removeClass(t,i)}setStyle(t,i,n,r){this.delegate.setStyle(t,i,n,r)}removeStyle(t,i,n){this.delegate.removeStyle(t,i,n)}setProperty(t,i,n){this.shouldReplay(i)&&this.replay.push(r=>r.setProperty(t,i,n)),this.delegate.setProperty(t,i,n)}setValue(t,i){this.delegate.setValue(t,i)}listen(t,i,n){return this.shouldReplay(i)&&this.replay.push(r=>r.listen(t,i,n)),this.delegate.listen(t,i,n)}shouldReplay(t){return this.replay!==null&&t.startsWith(Unt)}};function Qj(e="animations"){return xp("NgAsyncAnimations"),Ll([{provide:wp,useFactory:(t,i,n)=>new znt(t,i,n,e),deps:[xt,Hp,Q]},{provide:oi,useValue:e==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Xj=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=st({type:t,bootstrap:[eB]}),t.\u0275inj=ot({providers:[eM(),Qj()],imports:[Jk,G2,cl,t2,vP,cb,Cd,Y2,O2,J2,I2,S2,f2,jV,r2,_P,OP.initializeApp({apiKey:"AIzaSyA8IuDZ7zpd7tX3k8dOC4HlTmqPe6JPbEY",authDomain:"store-app-fa713.firebaseapp.com",projectId:"store-app-fa713",storageBucket:"store-app-fa713.appspot.com",messagingSenderId:"1094290472284",appId:"1:1094290472284:web:939114ffb44e9778709599"}),NP,j2(()=>U2()),iB(()=>rB()),Kj(()=>Yj())]});let e=t;return e})();Zk().bootstrapModule(Xj).catch(e=>console.error(e));
